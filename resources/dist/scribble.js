var Xw=Object.defineProperty;var Jw=(e,t,r)=>t in e?Xw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fe=(e,t,r)=>(Jw(e,typeof t!="symbol"?t+"":t,r),r);function vt(){}function Fr(e,t){for(let r in t)e[r]=t[r];return e}function Vc(e){return e()}function La(){return Object.create(null)}function cr(e){e.forEach(Vc)}function En(e){return typeof e=="function"}function Nt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}var Ia;function Wc(e,t){return e===t?!0:(Ia||(Ia=document.createElement("a")),Ia.href=t,e===Ia.href)}function Hm(e){return Object.keys(e).length===0}function rn(e,t,r,n){if(e){let i=$m(e,t,r,n);return e[0](i)}}function $m(e,t,r,n){return e[1]&&n?Fr(r.ctx.slice(),e[1](n(t))):r.ctx}function nn(e,t,r,n){if(e[2]&&n){let i=e[2](n(r));if(t.dirty===void 0)return i;if(typeof i=="object"){let o=[],s=Math.max(t.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=t.dirty[a]|i[a];return o}return t.dirty|i}return t.dirty}function on(e,t,r,n,i,o){if(i){let s=$m(t,r,n,o);e.p(s,i)}}function sn(e){if(e.ctx.length>32){let t=[],r=e.ctx.length/32;for(let n=0;n<r;n++)t[n]=-1;return t}return-1}function qn(e){let t={};for(let r in e)r[0]!=="$"&&(t[r]=e[r]);return t}function Ba(e,t){let r={};t=new Set(t);for(let n in e)!t.has(n)&&n[0]!=="$"&&(r[n]=e[n]);return r}var jc=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var za=class e{constructor(t){fe(this,"_listeners","WeakMap"in jc?new WeakMap:void 0);fe(this,"_observer");fe(this,"options");this.options=t}observe(t,r){return this._listeners.set(t,r),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(t=>{for(let r of t)e.entries.set(r.target,r),this._listeners.get(r.target)?.(r)}))}};za.entries="WeakMap"in jc?new WeakMap:void 0;var Vm=!1;function Wm(){Vm=!0}function jm(){Vm=!1}function nt(e,t){e.appendChild(t)}function q(e,t,r){e.insertBefore(t,r||null)}function G(e){e.parentNode&&e.parentNode.removeChild(e)}function Sr(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function ot(e){return document.createElement(e)}function Jt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function yr(e){return document.createTextNode(e)}function _t(){return yr(" ")}function Qt(){return yr("")}function De(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function Fa(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Ha(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function N(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}var tC=["width","height"];function eC(e,t){let r=Object.getOwnPropertyDescriptors(e.__proto__);for(let n in t)t[n]==null?e.removeAttribute(n):n==="style"?e.style.cssText=t[n]:n==="__value"?e.value=e[n]=t[n]:r[n]&&r[n].set&&tC.indexOf(n)===-1?e[n]=t[n]:N(e,n,t[n])}function rC(e,t){Object.keys(t).forEach(r=>{nC(e,r,t[r])})}function nC(e,t,r){let n=t.toLowerCase();n in e?e[n]=typeof e[n]=="boolean"&&r===""?!0:r:t in e?e[t]=typeof e[t]=="boolean"&&r===""?!0:r:N(e,t,r)}function $a(e){return/-/.test(e)?rC:eC}function Gm(e){return Array.from(e.childNodes)}function Hr(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ei(e,t,r,n){r==null?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}function Va(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}var an=class{constructor(t=!1){fe(this,"is_svg",!1);fe(this,"e");fe(this,"n");fe(this,"t");fe(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,r,n=null){this.e||(this.is_svg?this.e=Jt(r.nodeName):this.e=ot(r.nodeType===11?"TEMPLATE":r.nodeName),this.t=r.tagName!=="TEMPLATE"?r:r.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let r=0;r<this.n.length;r+=1)q(this.t,this.n[r],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(G)}};function qm(e){let t={};return e.childNodes.forEach(r=>{t[r.slot||"default"]=!0}),t}var Un;function Mn(e){Un=e}function bo(){if(!Un)throw new Error("Function called outside component initialization");return Un}function Wa(e){bo().$$.before_update.push(e)}function Qe(e){bo().$$.on_mount.push(e)}function Yn(e){bo().$$.on_destroy.push(e)}function Gc(){let e=bo();return(t,r,{cancelable:n=!1}={})=>{let i=e.$$.callbacks[t];if(i){let o=Va(t,r,{cancelable:n});return i.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}function qc(e){return bo().$$.context.get(e)}function Um(e,t){let r=e.$$.callbacks[t.type];r&&r.slice().forEach(n=>n.call(this,t))}var Mi=[];var xe=[],So=[],Ym=[],Km=Promise.resolve(),Yc=!1;function Kc(){Yc||(Yc=!0,Km.then(ja))}function Ti(){return Kc(),Km}function xs(e){So.push(e)}var Uc=new Set,xo=0;function ja(){if(xo!==0)return;let e=Un;do{try{for(;xo<Mi.length;){let t=Mi[xo];xo++,Mn(t),uC(t.$$)}}catch(t){throw Mi.length=0,xo=0,t}for(Mn(null),Mi.length=0,xo=0;xe.length;)xe.pop()();for(let t=0;t<So.length;t+=1){let r=So[t];Uc.has(r)||(Uc.add(r),r())}So.length=0}while(Mi.length);for(;Ym.length;)Ym.pop()();Yc=!1,Uc.clear(),Mn(e)}function uC(e){if(e.fragment!==null){e.update(),cr(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(xs)}}function Xm(e){let t=[],r=[];So.forEach(n=>e.indexOf(n)===-1?t.push(n):r.push(n)),r.forEach(n=>n()),So=t}var Ga=new Set,Oi;function re(){Oi={r:0,c:[],p:Oi}}function ne(){Oi.r||cr(Oi.c),Oi=Oi.p}function W(e,t){e&&e.i&&(Ga.delete(e),e.i(t))}function Z(e,t,r,n){if(e&&e.o){if(Ga.has(e))return;Ga.add(e),Oi.c.push(()=>{Ga.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}function Se(e){return e?.length!==void 0?e:Array.from(e)}function Xc(e,t){let r={},n={},i={$$scope:1},o=e.length;for(;o--;){let s=e[o],a=t[o];if(a){for(let l in s)l in a||(n[l]=1);for(let l in a)i[l]||(r[l]=a[l],i[l]=1);e[o]=a}else for(let l in s)i[l]=1}for(let s in n)s in r||(r[s]=void 0);return r}var cC=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],fC=new Set([...cC]);function zt(e){e&&e.c()}function It(e,t,r){let{fragment:n,after_update:i}=e.$$;n&&n.m(t,r),xs(()=>{let o=e.$$.on_mount.map(Vc).filter(En);e.$$.on_destroy?e.$$.on_destroy.push(...o):cr(o),e.$$.on_mount=[]}),i.forEach(xs)}function Lt(e,t){let r=e.$$;r.fragment!==null&&(Xm(r.after_update),cr(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function pC(e,t){e.$$.dirty[0]===-1&&(Mi.push(e),Kc(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ft(e,t,r,n,i,o,s=null,a=[-1]){let l=Un;Mn(e);let u=e.$$={fragment:null,ctx:[],props:o,update:vt,not_equal:i,bound:La(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:La(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=r?r(e,t.props||{},(f,d,...p)=>{let h=p.length?p[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=h)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](h),c&&pC(e,f)),d}):[],u.update(),c=!0,cr(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){Wm();let f=Gm(t.target);u.fragment&&u.fragment.l(f),f.forEach(G)}else u.fragment&&u.fragment.c();t.intro&&W(e.$$.fragment),It(e,t.target,t.anchor),jm(),ja()}Mn(l)}var hC;typeof HTMLElement=="function"&&(hC=class extends HTMLElement{constructor(t,r,n){super();fe(this,"$$ctor");fe(this,"$$s");fe(this,"$$c");fe(this,"$$cn",!1);fe(this,"$$d",{});fe(this,"$$r",!1);fe(this,"$$p_d",{});fe(this,"$$l",{});fe(this,"$$l_u",new Map);this.$$ctor=t,this.$$s=r,n&&this.attachShadow({mode:"open"})}addEventListener(t,r,n){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(r),this.$$c){let i=this.$$c.$on(t,r);this.$$l_u.set(r,i)}super.addEventListener(t,r,n)}removeEventListener(t,r,n){if(super.removeEventListener(t,r,n),this.$$c){let i=this.$$l_u.get(r);i&&(i(),this.$$l_u.delete(r))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return()=>{let s;return{c:function(){s=ot("slot"),o!=="default"&&N(s,"name",o)},m:function(u,c){q(u,s,c)},d:function(u){u&&G(s)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let r={},n=qm(this);for(let o of this.$$s)o in n&&(r[o]=[t(o)]);for(let o of this.attributes){let s=this.$$g_p(o.name);s in this.$$d||(this.$$d[s]=Jc(s,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:r,$$scope:{ctx:[]}}});let i=()=>{this.$$r=!0;for(let o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){let s=Jc(o,this.$$d[o],this.$$p_d,"toAttribute");s==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,s)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(let o in this.$$l)for(let s of this.$$l[o]){let a=this.$$c.$on(o,s);this.$$l_u.set(s,a)}this.$$l={}}}attributeChangedCallback(t,r,n){this.$$r||(t=this.$$g_p(t),this.$$d[t]=Jc(t,n,this.$$p_d,"toProp"),this.$$c?.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(r=>this.$$p_d[r].attribute===t||!this.$$p_d[r].attribute&&r.toLowerCase()===t)||t}});function Jc(e,t,r,n){let i=r[e]?.type;if(t=i==="Boolean"&&typeof t!="boolean"?t!=null:t,!n||!r[e])return t;if(n==="toAttribute")switch(i){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(i){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}var Pt=class{constructor(){fe(this,"$$");fe(this,"$$set")}$destroy(){Lt(this,1),this.$destroy=vt}$on(t,r){if(!En(r))return vt;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Hm(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var Jm="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Jm);function Ue(e){this.content=e}Ue.prototype={constructor:Ue,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),o=n.content.slice();return i==-1?o.push(r||e,t):(o[i+1]=t,r&&(o[i]=r)),new Ue(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var r=this.content.slice();return r.splice(t,2),new Ue(r)},addToStart:function(e,t){return new Ue([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new Ue(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),o=n.find(e);return i.splice(o==-1?i.length:o,0,t,r),new Ue(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ue.from(e),e.size?new Ue(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ue.from(e),e.size?new Ue(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ue.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}};Ue.from=function(e){if(e instanceof Ue)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new Ue(t)};var Zc=Ue;function ig(e,t,r){for(let n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;let i=e.child(n),o=t.child(n);if(i==o){r+=i.nodeSize;continue}if(!i.sameMarkup(o))return r;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)r++;return r}if(i.content.size||o.content.size){let s=ig(i.content,o.content,r+1);if(s!=null)return s}r+=i.nodeSize}}function og(e,t,r,n){for(let i=e.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:r,b:n};let s=e.child(--i),a=t.child(--o),l=s.nodeSize;if(s==a){r-=l,n-=l;continue}if(!s.sameMarkup(a))return{a:r,b:n};if(s.isText&&s.text!=a.text){let u=0,c=Math.min(s.text.length,a.text.length);for(;u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(s.content.size||a.content.size){let u=og(s.content,a.content,r-1,n-1);if(u)return u}r-=l,n-=l}}var $=class e{constructor(t,r){if(this.content=t,this.size=r||0,r==null)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,r,n,i=0,o){for(let s=0,a=0;a<r;s++){let l=this.content[s],u=a+l.nodeSize;if(u>t&&n(l,i+a,o||null,s)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,r-c),n,i+c)}a=u}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,r,n,i){let o="",s=!0;return this.nodesBetween(t,r,(a,l)=>{let u=a.isText?a.text.slice(Math.max(t,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(s?s=!1:o+=n),o+=u},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let r=this.lastChild,n=t.firstChild,i=this.content.slice(),o=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new e(i,this.size+t.size)}cut(t,r=this.size){if(t==0&&r==this.size)return this;let n=[],i=0;if(r>t)for(let o=0,s=0;s<r;o++){let a=this.content[o],l=s+a.nodeSize;l>t&&((s<t||l>r)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,r-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,r-s-1))),n.push(a),i+=a.nodeSize),s=l}return new e(n,i)}cutByIndex(t,r){return t==r?e.empty:t==0&&r==this.content.length?this:new e(this.content.slice(t,r))}replaceChild(t,r){let n=this.content[t];if(n==r)return this;let i=this.content.slice(),o=this.size+r.nodeSize-n.nodeSize;return i[t]=r,new e(i,o)}addToStart(t){return new e([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new e(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(t.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let r=this.content[t];if(!r)throw new RangeError("Index "+t+" out of range for "+this);return r}maybeChild(t){return this.content[t]||null}forEach(t){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];t(i,n,r),n+=i.nodeSize}}findDiffStart(t,r=0){return ig(this,t,r)}findDiffEnd(t,r=this.size,n=t.size){return og(this,t,r,n)}findIndex(t,r=-1){if(t==0)return qa(0,t);if(t==this.size)return qa(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,i=0;;n++){let o=this.child(n),s=i+o.nodeSize;if(s>=t)return s==t||r>0?qa(n+1,s):qa(n,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,r){if(!r)return e.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(r.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return e.empty;let r,n=0;for(let i=0;i<t.length;i++){let o=t[i];n+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(r||(r=t.slice(0,i)),r[r.length-1]=o.withText(r[r.length-1].text+o.text)):r&&r.push(o)}return new e(r||t,n)}static from(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};$.empty=new $([],0);var Qc={index:0,offset:0};function qa(e,t){return Qc.index=e,Qc.offset=t,Qc}function Ua(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!Ua(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!Ua(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}var qt=class e{constructor(t,r){this.type=t,this.attrs=r}addToSet(t){let r,n=!1;for(let i=0;i<t.length;i++){let o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))r||(r=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(r||(r=t.slice(0,i)),r.push(this),n=!0),r&&r.push(o)}}return r||(r=t.slice()),n||r.push(this),r}removeFromSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return t.slice(0,r).concat(t.slice(r+1));return t}isInSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Ua(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);return n.create(r.attrs)}static sameSet(t,r){if(t==r)return!0;if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(r[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return e.none;if(t instanceof e)return[t];let r=t.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};qt.none=[];var Ri=class extends Error{},Q=class e{constructor(t,r,n){this.content=t,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,r){let n=ag(this.content,t+this.openStart,r);return n&&new e(n,this.openStart,this.openEnd)}removeBetween(t,r){return new e(sg(this.content,t+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,r){if(!r)return e.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new e($.fromJSON(t,r.content),n,i)}static maxOpen(t,r=!0){let n=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(r||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=t.lastChild;o&&!o.isLeaf&&(r||!o.type.spec.isolating);o=o.lastChild)i++;return new e(t,n,i)}};Q.empty=new Q($.empty,0,0);function sg(e,t,r){let{index:n,offset:i}=e.findIndex(t),o=e.maybeChild(n),{index:s,offset:a}=e.findIndex(r);if(i==t||o.isText){if(a!=r&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(n!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(n,o.copy(sg(o.content,t-i-1,r-i-1)))}function ag(e,t,r,n){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return n&&!n.canReplace(i,i,r)?null:e.cut(0,t).append(r).append(e.cut(t));let a=ag(s.content,t-o-1,r);return a&&e.replaceChild(i,s.copy(a))}function mC(e,t,r){if(r.openStart>e.depth)throw new Ri("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new Ri("Inconsistent open depths");return lg(e,t,r,0)}function lg(e,t,r,n){let i=e.index(n),o=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){let s=lg(e,t,r,n+1);return o.copy(o.content.replaceChild(i,s))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&e.depth==n&&t.depth==n){let s=e.parent,a=s.content;return Ai(s,a.cut(0,e.parentOffset).append(r.content).append(a.cut(t.parentOffset)))}else{let{start:s,end:a}=gC(r,e);return Ai(o,cg(e,s,a,t,n))}else return Ai(o,Ya(e,t,n))}function ug(e,t){if(!t.type.compatibleContent(e.type))throw new Ri("Cannot join "+t.type.name+" onto "+e.type.name)}function nf(e,t,r){let n=e.node(r);return ug(n,t.node(r)),n}function Di(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function Ss(e,t,r,n){let i=(t||e).node(r),o=0,s=t?t.index(r):i.childCount;e&&(o=e.index(r),e.depth>r?o++:e.textOffset&&(Di(e.nodeAfter,n),o++));for(let a=o;a<s;a++)Di(i.child(a),n);t&&t.depth==r&&t.textOffset&&Di(t.nodeBefore,n)}function Ai(e,t){return e.type.checkContent(t),e.copy(t)}function cg(e,t,r,n,i){let o=e.depth>i&&nf(e,t,i+1),s=n.depth>i&&nf(r,n,i+1),a=[];return Ss(null,e,i,a),o&&s&&t.index(i)==r.index(i)?(ug(o,s),Di(Ai(o,cg(e,t,r,n,i+1)),a)):(o&&Di(Ai(o,Ya(e,t,i+1)),a),Ss(t,r,i,a),s&&Di(Ai(s,Ya(r,n,i+1)),a)),Ss(n,null,i,a),new $(a)}function Ya(e,t,r){let n=[];if(Ss(null,e,r,n),e.depth>r){let i=nf(e,t,r+1);Di(Ai(i,Ya(e,t,r+1)),n)}return Ss(t,null,r,n),new $(n)}function gC(e,t){let r=t.depth-e.openStart,i=t.node(r).copy(e.content);for(let o=r-1;o>=0;o--)i=t.node(o).copy($.from(i));return{start:i.resolveNoCache(e.openStart+r),end:i.resolveNoCache(i.content.size-e.openEnd-r)}}var Ka=class e{constructor(t,r,n){this.pos=t,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,r=this.index(this.depth);if(r==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=t.child(r);return n?t.child(r).cut(n):i}get nodeBefore(){let t=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(t).cut(0,r):t==0?null:this.parent.child(t-1)}posAtIndex(t,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let o=0;o<t;o++)i+=n.child(o).nodeSize;return i}marks(){let t=this.parent,r=this.index();if(t.content.size==0)return qt.none;if(this.textOffset)return t.child(r).marks;let n=t.maybeChild(r-1),i=t.maybeChild(r);if(!n){let a=n;n=i,i=a}let o=n.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(t){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<n.length;o++)n[o].type.spec.inclusive===!1&&(!i||!n[o].isInSet(i.marks))&&(n=n[o--].removeFromSet(n));return n}sharedDepth(t){for(let r=this.depth;r>0;r--)if(this.start(r)<=t&&this.end(r)>=t)return r;return 0}blockRange(t=this,r){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!r||r(this.node(n))))return new Pi(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let r=1;r<=this.depth;r++)t+=(t?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return t+":"+this.parentOffset}static resolve(t,r){if(!(r>=0&&r<=t.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,o=r;for(let s=t;;){let{index:a,offset:l}=s.content.findIndex(o),u=o-l;if(n.push(s,a,i+l),!u||(s=s.child(a),s.isText))break;o=u-1,i+=l+1}return new e(r,n,o)}static resolveCached(t,r){for(let i=0;i<tf.length;i++){let o=tf[i];if(o.pos==r&&o.doc==t)return o}let n=tf[ef]=e.resolve(t,r);return ef=(ef+1)%vC,n}},tf=[],ef=0,vC=12,Pi=class{constructor(t,r,n){this.$from=t,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},yC=Object.create(null),$r=class e{constructor(t,r,n,i=qt.none){this.type=t,this.attrs=r,this.marks=i,this.content=n||$.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,r,n,i=0){this.content.nodesBetween(t,r,n,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,r,n,i){return this.content.textBetween(t,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,r,n){return this.type==t&&Ua(this.attrs,r||t.defaultAttrs||yC)&&qt.sameSet(this.marks,n||qt.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(t,r=this.content.size){return t==0&&r==this.content.size?this:this.copy(this.content.cut(t,r))}slice(t,r=this.content.size,n=!1){if(t==r)return Q.empty;let i=this.resolve(t),o=this.resolve(r),s=n?0:i.sharedDepth(r),a=i.start(s),u=i.node(s).content.cut(i.pos-a,o.pos-a);return new Q(u,i.depth-s,o.depth-s)}replace(t,r,n){return mC(this.resolve(t),this.resolve(r),n)}nodeAt(t){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(t);if(r=r.maybeChild(n),!r)return null;if(i==t||r.isText)return r;t-=i+1}}childAfter(t){let{index:r,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(t){return Ka.resolveCached(this,t)}resolveNoCache(t){return Ka.resolve(this,t)}rangeHasMark(t,r,n){let i=!1;return r>t&&this.nodesBetween(t,r,o=>(n.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),fg(this.marks,t)}contentMatchAt(t){let r=this.type.contentMatch.matchFragment(this.content,0,t);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(t,r,n=$.empty,i=0,o=n.childCount){let s=this.contentMatchAt(t).matchFragment(n,i,o),a=s&&s.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(t,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(n),s=o&&o.matchFragment(this.content,r);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=qt.none;for(let r=0;r<this.marks.length;r++)t=this.marks[r].addToSet(t);if(!qt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(r=>r.toJSON())),t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(t.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(r.text,n)}let i=$.fromJSON(t,r.content);return t.nodeType(r.type).create(r.attrs,i,n)}};$r.prototype.text=void 0;var of=class e extends $r{constructor(t,r,n,i){if(super(t,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):fg(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,r){return this.text.slice(t,r)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)}cut(t=0,r=this.text.length){return t==0&&r==this.text.length?this:this.withText(this.text.slice(t,r))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function fg(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}var Ni=class e{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,r){let n=new sf(t,r);if(n.next==null)return e.empty;let i=dg(n);n.next&&n.err("Unexpected trailing text");let o=kC(_C(i));return EC(o,n),o}matchType(t){for(let r=0;r<this.next.length;r++)if(this.next[r].type==t)return this.next[r].next;return null}matchFragment(t,r=0,n=t.childCount){let i=this;for(let o=r;i&&o<n;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:r}=this.next[t];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(t){for(let r=0;r<this.next.length;r++)for(let n=0;n<t.next.length;n++)if(this.next[r].type==t.next[n].type)return!0;return!1}fillBefore(t,r=!1,n=0){let i=[this];function o(s,a){let l=s.matchFragment(t,n);if(l&&(!r||l.validEnd))return $.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let r=this.computeWrapping(t);return this.wrapCache.push(t,r),r}computeWrapping(t){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),o=i.match;if(o.matchType(t)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function r(n){t.push(n);for(let i=0;i<n.next.length;i++)t.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),t.map((n,i)=>{let o=i+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)o+=(s?", ":"")+n.next[s].type.name+"->"+t.indexOf(n.next[s].next);return o}).join(`
`)}};Ni.empty=new Ni(!0);var sf=class{constructor(t,r){this.string=t,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}};function dg(e){let t=[];do t.push(bC(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function bC(e){let t=[];do t.push(xC(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function xC(e){let t=CC(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=SC(e,t);else break;return t}function Zm(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function SC(e,t){let r=Zm(e),n=r;return e.eat(",")&&(e.next!="}"?n=Zm(e):n=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function wC(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let o in r){let s=r[o];s.groups.indexOf(t)>-1&&i.push(s)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function CC(e){if(e.eat("(")){let t=dg(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=wC(e,e.next).map(r=>(e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function _C(e){let t=[[]];return i(o(e,0),r()),t;function r(){return t.push([])-1}function n(s,a,l){let u={term:l,to:a};return t[s].push(u),u}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(o(u,a)),[]);if(s.type=="seq")for(let l=0;;l++){let u=o(s.exprs[l],a);if(l==s.exprs.length-1)return u;i(u,a=r())}else if(s.type=="star"){let l=r();return n(a,l),i(o(s.expr,l),l),[n(l)]}else if(s.type=="plus"){let l=r();return i(o(s.expr,a),l),i(o(s.expr,l),l),[n(l)]}else{if(s.type=="opt")return[n(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let u=0;u<s.min;u++){let c=r();i(o(s.expr,l),c),l=c}if(s.max==-1)i(o(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let c=r();n(l,c),i(o(s.expr,l),c),l=c}return[n(l)]}else{if(s.type=="name")return[n(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function pg(e,t){return t-e}function Qm(e,t){let r=[];return n(t),r.sort(pg);function n(i){let o=e[i];if(o.length==1&&!o[0].term)return n(o[0].to);r.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&r.indexOf(l)==-1&&n(l)}}}function kC(e){let t=Object.create(null);return r(Qm(e,0));function r(n){let i=[];n.forEach(s=>{e[s].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);Qm(e,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=t[n.join(",")]=new Ni(n.indexOf(e.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(pg);o.next.push({type:i[s][0],next:t[a.join(",")]||r(a)})}return o}}function EC(e,t){for(let r=0,n=[e];r<n.length;r++){let i=n[r],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),n.indexOf(u)==-1&&n.push(u)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hg(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function mg(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(i===void 0){let o=e[n];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function gg(e){let t=Object.create(null);if(e)for(let r in e)t[r]=new af(e[r]);return t}var Xa=class e{constructor(t,r,n){this.name=t,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=gg(n.attrs),this.defaultAttrs=hg(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ni.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:mg(this.attrs,t)}create(t=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $r(this,this.computeAttrs(t),$.from(r),qt.setFrom(n))}createChecked(t=null,r,n){return r=$.from(r),this.checkContent(r),new $r(this,this.computeAttrs(t),r,qt.setFrom(n))}createAndFill(t=null,r,n){if(t=this.computeAttrs(t),r=$.from(r),r.size){let s=this.contentMatch.fillBefore(r);if(!s)return null;r=s.append(r)}let i=this.contentMatch.matchFragment(r),o=i&&i.fillBefore($.empty,!0);return o?new $r(this,t,r.append(o),qt.setFrom(n)):null}validContent(t){let r=this.contentMatch.matchFragment(t);if(!r||!r.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let r=0;r<t.length;r++)if(!this.allowsMarkType(t[r].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let r;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?r&&r.push(t[n]):r||(r=t.slice(0,n));return r?r.length?r:qt.none:t}static compile(t,r){let n=Object.create(null);t.forEach((o,s)=>n[o]=new e(o,r,s));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}},af=class{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}},Cs=class e{constructor(t,r,n,i){this.name=t,this.rank=r,this.schema=n,this.spec=i,this.attrs=gg(i.attrs),this.excluded=null;let o=hg(this.attrs);this.instance=o?new qt(this,o):null}create(t=null){return!t&&this.instance?this.instance:new qt(this,mg(this.attrs,t))}static compile(t,r){let n=Object.create(null),i=0;return t.forEach((o,s)=>n[o]=new e(o,i++,r,s)),n}removeFromSet(t){for(var r=0;r<t.length;r++)t[r].type==this&&(t=t.slice(0,r).concat(t.slice(r+1)),r--);return t}isInSet(t){for(let r=0;r<t.length;r++)if(t[r].type==this)return t[r]}excludes(t){return this.excluded.indexOf(t)>-1}},Ja=class{constructor(t){this.cached=Object.create(null);let r=this.spec={};for(let i in t)r[i]=t[i];r.nodes=Zc.from(t.nodes),r.marks=Zc.from(t.marks||{}),this.nodes=Xa.compile(this.spec.nodes,this),this.marks=Cs.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[s]||(n[s]=Ni.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=a=="_"?null:a?tg(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:tg(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,r=null,n,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Xa){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(r,n,i)}text(t,r){let n=this.nodes.text;return new of(n,n.defaultAttrs,t,qt.setFrom(r))}mark(t,r){return typeof t=="string"&&(t=this.marks[t]),t.create(r)}nodeFromJSON(t){return $r.fromJSON(this,t)}markFromJSON(t){return qt.fromJSON(this,t)}nodeType(t){let r=this.nodes[t];if(!r)throw new RangeError("Unknown node type: "+t);return r}};function tg(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],o=e.marks[i],s=o;if(o)r.push(o);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}var Ii=class e{constructor(t,r){this.schema=t,this.rules=r,this.tags=[],this.styles=[],r.forEach(n=>{n.tag?this.tags.push(n):n.style&&this.styles.push(n)}),this.normalizeLists=!this.tags.some(n=>{if(!/^(ul|ol)\b/.test(n.tag)||!n.node)return!1;let i=t.nodes[n.node];return i.contentMatch.matchType(i)})}parse(t,r={}){let n=new tl(this,r,!1);return n.addAll(t,r.from,r.to),n.finish()}parseSlice(t,r={}){let n=new tl(this,r,!0);return n.addAll(t,r.from,r.to),Q.maxOpen(n.finish())}matchTag(t,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(OC(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||r.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(t);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(t,r,n,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(t)!=0||s.context&&!n.matchesContext(s.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=r))){if(s.getAttrs){let l=s.getAttrs(r);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let r=[];function n(i){let o=i.priority==null?50:i.priority,s=0;for(;s<r.length;s++){let a=r[s];if((a.priority==null?50:a.priority)<o)break}r.splice(s,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(s=>{n(s=rg(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(s=>{n(s=rg(s)),s.node||s.ignore||s.mark||(s.node=i)})}return r}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}},vg={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},MC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},yg={ol:!0,ul:!0},Za=1,Qa=2,ws=4;function eg(e,t,r){return t!=null?(t?Za:0)|(t==="full"?Qa:0):e&&e.whitespace=="pre"?Za|Qa:r&~ws}var wo=class{constructor(t,r,n,i,o,s,a){this.type=t,this.attrs=r,this.marks=n,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=qt.none,this.stashMarks=[],this.match=s||(a&ws?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore($.from(t));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(t.type))?(this.match=n,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Za)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let o=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let r=$.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore($.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}popFromStashMark(t){for(let r=this.stashMarks.length-1;r>=0;r--)if(t.eq(this.stashMarks[r]))return this.stashMarks.splice(r,1)[0]}applyPending(t){for(let r=0,n=this.pendingMarks;r<n.length;r++){let i=n[r];(this.type?this.type.allowsMarkType(i.type):AC(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!vg.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}},tl=class{constructor(t,r,n){this.parser=t,this.options=r,this.isOpen=n,this.open=0;let i=r.topNode,o,s=eg(null,r.preserveWhitespace,0)|(n?ws:0);i?o=new wo(i.type,i.attrs,qt.none,qt.none,!0,r.topMatch||i.type.contentMatch,s):n?o=new wo(null,null,qt.none,qt.none,!0,null,s):o=new wo(t.schema.topNodeType,null,qt.none,qt.none,!0,null,s),this.nodes=[o],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){t.nodeType==3?this.addTextNode(t):t.nodeType==1&&this.addElement(t)}withStyleRules(t,r){let n=t.getAttribute("style");if(!n)return r();let i=this.readStyles(DC(n));if(!i)return;let[o,s]=i,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);r();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(t){let r=t.nodeValue,n=this.top;if(n.options&Qa||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(n.options&Za)n.options&Qa?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],o=t.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r)),this.findInText(t)}else this.findInside(t)}addElement(t,r){let n=t.nodeName.toLowerCase(),i;yg.hasOwnProperty(n)&&this.parser.normalizeLists&&TC(t);let o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,r));if(o?o.ignore:MC.hasOwnProperty(n))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);let s,a=this.top,l=this.needsBlock;if(vg.hasOwnProperty(n))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}o&&o.skip?this.addAll(t):this.withStyleRules(t,()=>this.addAll(t)),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(t,()=>{this.addElementByRule(t,o,o.consuming===!1?i:void 0)})}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let r=qt.none,n=qt.none;for(let i=0;i<t.length;i+=2)for(let o=void 0;;){let s=this.parser.matchStyle(t[i],t[i+1],this,o);if(!s)break;if(s.ignore)return null;if(s.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{s.clearMark(a)&&(n=a.addToSet(n))}):r=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(r),s.consuming===!1)o=s;else break}return[r,n]}addElementByRule(t,r,n){let i,o,s;r.node?(o=this.parser.schema.nodes[r.node],o.isLeaf?this.insertNode(o.create(r.attrs))||this.leafFallback(t):i=this.enter(o,r.attrs||null,r.preserveWhitespace)):(s=this.parser.schema.marks[r.mark].create(r.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(r.getContent)this.findInside(t),r.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=t;typeof r.contentElement=="string"?l=t.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(t):r.contentElement&&(l=r.contentElement),this.findAround(t,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(t,r,n){let i=r||0;for(let o=r?t.childNodes[r]:t.firstChild,s=n==null?null:t.childNodes[n];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o);this.findAtPoint(t,i)}findPlace(t){let r,n;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(t);if(s&&(!r||r.length>s.length)&&(r=s,n=o,!s.length)||o.solid)break}if(!r)return!1;this.sync(n);for(let i=0;i<r.length;i++)this.enterInner(r[i],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&this.enterInner(r)}if(this.findPlace(t)){this.closeExtra();let r=this.top;r.applyPending(t.type),r.match&&(r.match=r.match.matchType(t.type));let n=r.activeMarks;for(let i=0;i<t.marks.length;i++)(!r.type||r.type.allowsMarkType(t.marks[i].type))&&(n=t.marks[i].addToSet(n));return r.content.push(t.mark(n)),!0}return!1}enter(t,r,n){let i=this.findPlace(t.create(r));return i&&this.enterInner(t,r,!0,n),i}enterInner(t,r=null,n=!1,i){this.closeExtra();let o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t);let s=eg(t,i,o.options);o.options&ws&&o.content.length==0&&(s|=ws),this.nodes.push(new wo(t,r,o.activeMarks,o.pendingMarks,n,null,s)),this.open++}closeExtra(t=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let r=this.open;r>=0;r--)if(this.nodes[r]==t)return this.open=r,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)t+=n[i].nodeSize;r&&t++}return t}findAtPoint(t,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(t,r,n){if(t!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&(this.find[r].pos=this.currentPos-(t.nodeValue.length-this.find[r].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let r=t.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),o=-(n?n.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let u=r[a];if(u==""){if(a==r.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:n&&l>=o?n.node(l-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return s(r.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}addPendingMark(t){let r=RC(t,this.top.pendingMarks);r&&this.top.stashMarks.push(r),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,r){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(t)>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);let s=i.popFromStashMark(t);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==r)break}}};function TC(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&yg.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):n=="li"?r=t:n&&(r=null)}}function OC(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function DC(e){let t=/\s*([\w-]+)\s*:\s*([^;]+)/g,r,n=[];for(;r=t.exec(e);)n.push(r[1],r[2].trim());return n}function rg(e){let t={};for(let r in e)t[r]=e[r];return t}function AC(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==t||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function RC(e,t){for(let r=0;r<t.length;r++)if(e.eq(t[r]))return t[r]}var Tn=class e{constructor(t,r){this.nodes=t,this.marks=r}serializeFragment(t,r={},n){n||(n=rf(r).createDocumentFragment());let i=n,o=[];return t.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(o[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],c=this.serializeMark(u,s.isInline,r);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,r))}),n}serializeNodeInner(t,r){let{dom:n,contentDOM:i}=e.renderSpec(rf(r),this.nodes[t.type.name](t));if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,r,i)}return n}serializeNode(t,r={}){let n=this.serializeNodeInner(t,r);for(let i=t.marks.length-1;i>=0;i--){let o=this.serializeMark(t.marks[i],t.isInline,r);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(t,r,n={}){let i=this.marks[t.type.name];return i&&e.renderSpec(rf(n),i(t,r))}static renderSpec(t,r,n=null){if(typeof r=="string")return{dom:t.createTextNode(r)};if(r.nodeType!=null)return{dom:r};if(r.dom&&r.dom.nodeType!=null)return r;let i=r[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let s,a=n?t.createElementNS(n,i):t.createElement(i),l=r[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(let c in l)if(l[c]!=null){let f=c.indexOf(" ");f>0?a.setAttributeNS(c.slice(0,f),c.slice(f+1),l[c]):a.setAttribute(c,l[c])}}for(let c=u;c<r.length;c++){let f=r[c];if(f===0){if(c<r.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:p}=e.renderSpec(t,f,n);if(a.appendChild(d),p){if(s)throw new RangeError("Multiple content holes");s=p}}}return{dom:a,contentDOM:s}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let r=ng(t.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(t){return ng(t.marks)}};function ng(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function rf(e){return e.document||window.document}var Sg=65535,wg=Math.pow(2,16);function PC(e,t){return e+t*wg}function bg(e){return e&Sg}function NC(e){return(e-(e&Sg))/wg}var Cg=1,_g=2,el=4,kg=8,Es=class{constructor(t,r,n){this.pos=t,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&kg)>0}get deletedBefore(){return(this.delInfo&(Cg|el))>0}get deletedAfter(){return(this.delInfo&(_g|el))>0}get deletedAcross(){return(this.delInfo&el)>0}},On=class e{constructor(t,r=!1){if(this.ranges=t,this.inverted=r,!t.length&&e.empty)return e.empty}recover(t){let r=0,n=bg(t);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+NC(t)}mapResult(t,r=1){return this._map(t,r,!1)}map(t,r=1){return this._map(t,r,!0)}_map(t,r,n){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let u=this.ranges[a+o],c=this.ranges[a+s],f=l+u;if(t<=f){let d=u?t==l?-1:t==f?1:r:r,p=l+i+(d<0?0:c);if(n)return p;let h=t==(r<0?l:f)?null:PC(a/3,t-l),m=t==l?_g:t==f?Cg:el;return(r<0?t!=l:t!=f)&&(m|=kg),new Es(p,m,h)}i+=c-u}return n?t+i:new Es(t+i,0,null)}touches(t,r){let n=0,i=bg(r),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>t)break;let u=this.ranges[a+o],c=l+u;if(t<=c&&a==i*3)return!0;n+=this.ranges[a+s]-u}return!1}forEach(t){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),u=this.ranges[i+r],c=this.ranges[i+n];t(a,a+u,l,l+c),o+=c-u}}invert(){return new e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}};On.empty=new On([]);var Ms=class e{constructor(t=[],r,n=0,i=t.length){this.maps=t,this.mirror=r,this.from=n,this.to=i}slice(t=0,r=this.maps.length){return new e(this.maps,this.mirror,t,r)}copy(){return new e(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,r){this.to=this.maps.push(t),r!=null&&this.setMirror(this.maps.length-1,r)}appendMapping(t){for(let r=0,n=this.maps.length;r<t.maps.length;r++){let i=t.getMirror(r);this.appendMap(t.maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(t){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==t)return this.mirror[r+(r%2?-1:1)]}}setMirror(t,r){this.mirror||(this.mirror=[]),this.mirror.push(t,r)}appendMappingInverted(t){for(let r=t.maps.length-1,n=this.maps.length+t.maps.length;r>=0;r--){let i=t.getMirror(r);this.appendMap(t.maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let t=new e;return t.appendMappingInverted(this),t}map(t,r=1){if(this.mirror)return this._map(t,r,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,r);return t}mapResult(t,r=1){return this._map(t,r,!1)}_map(t,r,n){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(t,r);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return n?t:new Es(t,i,null)}},lf=Object.create(null),Ie=class{getMap(){return On.empty}merge(t){return null}static fromJSON(t,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=lf[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in lf)throw new RangeError("Duplicate use of step JSON ID "+t);return lf[t]=r,r.prototype.jsonID=t,r}},Ve=class e{constructor(t,r){this.doc=t,this.failed=r}static ok(t){return new e(t,null)}static fail(t){return new e(null,t)}static fromReplace(t,r,n,i){try{return e.ok(t.replace(r,n,i))}catch(o){if(o instanceof Ri)return e.fail(o.message);throw o}}};function pf(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(pf(o.content,t,o))),o.isInline&&(o=t(o,r,i)),n.push(o)}return $.fromArray(n)}var Ts=class e extends Ie{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new Q(pf(r.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),r.openStart,r.openEnd);return Ve.fromReplace(t,this.from,this.to,o)}invert(){return new Li(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))}};Ie.jsonID("addMark",Ts);var Li=class e extends Ie{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=new Q(pf(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),r.openStart,r.openEnd);return Ve.fromReplace(t,this.from,this.to,n)}invert(){return new Ts(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new e(r.pos,n.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(r.from,r.to,t.markFromJSON(r.mark))}};Ie.jsonID("removeMark",Li);var Os=class e extends Ie{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Ve.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Ve.fromReplace(t,this.pos,this.pos+1,new Q($.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new e(this.pos,r.marks[i]);return new e(this.pos,this.mark)}}return new Ds(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new e(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(r.pos,t.markFromJSON(r.mark))}};Ie.jsonID("addNodeMark",Os);var Ds=class e extends Ie{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Ve.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Ve.fromReplace(t,this.pos,this.pos+1,new Q($.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Os(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new e(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(r.pos,t.markFromJSON(r.mark))}};Ie.jsonID("removeNodeMark",Ds);var Ye=class e extends Ie{constructor(t,r,n,i=!1){super(),this.from=t,this.to=r,this.slice=n,this.structure=i}apply(t){return this.structure&&ff(t,this.from,this.to)?Ve.fail("Structure replace would overwrite content"):Ve.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new On([this.from,this.to-this.from,this.slice.size])}invert(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new e(r.pos,Math.max(r.pos,n.pos),this.slice)}merge(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let r=this.slice.size+t.slice.size==0?Q.empty:new Q(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let r=this.slice.size+t.slice.size==0?Q.empty:new Q(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,r,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(r.from,r.to,Q.fromJSON(t,r.slice),!!r.structure)}};Ie.jsonID("replace",Ye);var _e=class e extends Ie{constructor(t,r,n,i,o,s,a=!1){super(),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(t){if(this.structure&&(ff(t,this.from,this.gapFrom)||ff(t,this.gapTo,this.to)))return Ve.fail("Structure gap-replace would overwrite content");let r=t.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Ve.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Ve.fromReplace(t,this.from,this.to,n):Ve.fail("Content does not fit in gap")}getMap(){return new On([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let r=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||o>n.pos?null:new e(r.pos,n.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(r.from,r.to,r.gapFrom,r.gapTo,Q.fromJSON(t,r.slice),r.insert,!!r.structure)}};Ie.jsonID("replaceAround",_e);function ff(e,t,r){let n=e.resolve(t),i=r-t,o=n.depth;for(;i>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,i--;if(i>0){let s=n.node(o).maybeChild(n.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function IC(e,t,r,n){let i=[],o=[],s,a;e.doc.nodesBetween(t,r,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){let d=Math.max(u,t),p=Math.min(u+l.nodeSize,r),h=n.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(h)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=p:i.push(s=new Li(d,p,f[m])));a&&a.to==d?a.to=p:o.push(a=new Ts(d,p,n))}}),i.forEach(l=>e.step(l)),o.forEach(l=>e.step(l))}function LC(e,t,r,n){let i=[],o=0;e.doc.nodesBetween(t,r,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(n instanceof Cs){let u=s.marks,c;for(;c=n.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length){let u=Math.min(a+s.nodeSize,r);for(let c=0;c<l.length;c++){let f=l[c],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(a,t),to:u,step:o})}}}),i.forEach(s=>e.step(new Li(s.from,s.to,s.style)))}function BC(e,t,r,n=r.contentMatch){let i=e.doc.nodeAt(t),o=[],s=t+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),u=s+l.nodeSize,c=n.matchType(l.type);if(!c)o.push(new Ye(s,u,Q.empty));else{n=c;for(let f=0;f<l.marks.length;f++)r.allowsMarkType(l.marks[f].type)||e.step(new Li(s,u,l.marks[f]));if(l.isText&&!r.spec.code){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(l.text);)p||(p=new Q($.from(r.schema.text(" ",r.allowedMarks(l.marks))),0,0)),o.push(new Ye(s+f.index,s+f.index+f[0].length,p))}}s=u}if(!n.validEnd){let a=n.fillBefore($.empty,!0);e.replace(s,s,new Q(a,0,0))}for(let a=o.length-1;a>=0;a--)e.step(o[a])}function zC(e,t,r){return(t==0||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function Dn(e){let r=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let i=e.$from.node(n),o=e.$from.index(n),s=e.$to.indexAfter(n);if(n<e.depth&&i.canReplace(o,s,r))return n;if(n==0||i.type.spec.isolating||!zC(i,o,s))break}return null}function FC(e,t,r){let{$from:n,$to:i,depth:o}=t,s=n.before(o+1),a=i.after(o+1),l=s,u=a,c=$.empty,f=0;for(let h=o,m=!1;h>r;h--)m||n.index(h)>0?(m=!0,c=$.from(n.node(h).copy(c)),f++):l--;let d=$.empty,p=0;for(let h=o,m=!1;h>r;h--)m||i.after(h+1)<i.end(h)?(m=!0,d=$.from(i.node(h).copy(d)),p++):u++;e.step(new _e(l,u,s,a,new Q(c.append(d),f,p),c.size-f,!0))}function _o(e,t,r=null,n=e){let i=HC(e,t),o=i&&$C(n,t);return o?i.map(xg).concat({type:t,attrs:r}).concat(o.map(xg)):null}function xg(e){return{type:e,attrs:null}}function HC(e,t){let{parent:r,startIndex:n,endIndex:i}=e,o=r.contentMatchAt(n).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return r.canReplaceWith(n,i,s)?o:null}function $C(e,t){let{parent:r,startIndex:n,endIndex:i}=e,o=r.child(n),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let u=n;l&&u<i;u++)l=l.matchType(r.child(u).type);return!l||!l.validEnd?null:s}function VC(e,t,r){let n=$.empty;for(let s=r.length-1;s>=0;s--){if(n.size){let a=r[s].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=$.from(r[s].type.create(r[s].attrs,n))}let i=t.start,o=t.end;e.step(new _e(i,o,i,o,new Q(n,0,0),r.length,!0))}function WC(e,t,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,r,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(n,i)&&jC(e.doc,e.mapping.slice(o).map(a),n)){e.clearIncompatible(e.mapping.slice(o).map(a,1),n);let l=e.mapping.slice(o),u=l.map(a,1),c=l.map(a+s.nodeSize,1);return e.step(new _e(u,c,u+1,c-1,new Q($.from(n.create(i,null,s.marks)),0,0),1,!0)),!1}})}function jC(e,t,r){let n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function GC(e,t,r,n,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");r||(r=o.type);let s=r.create(n,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!r.validContent(o.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new _e(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new Q($.from(s),0,0),1,!0))}function wr(e,t,r=1,n){let i=e.resolve(t),o=i.depth-r,s=n&&n[n.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=r-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(d,f.childCount),h=n&&n[c+1];h&&(p=p.replaceChild(0,h.type.create(h.attrs)));let m=n&&n[c]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(p))return!1}let a=i.indexAfter(o),l=n&&n[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function qC(e,t,r=1,n){let i=e.doc.resolve(t),o=$.empty,s=$.empty;for(let a=i.depth,l=i.depth-r,u=r-1;a>l;a--,u--){o=$.from(i.node(a).copy(o));let c=n&&n[u];s=$.from(c?c.type.create(c.attrs,s):i.node(a).copy(s))}e.step(new Ye(t,t,new Q(o.append(s),r,r),!0))}function Vr(e,t){let r=e.resolve(t),n=r.index();return Eg(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Eg(e,t){return!!(e&&t&&!e.isLeaf&&e.canAppend(t))}function ko(e,t,r=-1){let n=e.resolve(t);for(let i=n.depth;;i--){let o,s,a=n.index(i);if(i==n.depth?(o=n.nodeBefore,s=n.nodeAfter):r>0?(o=n.node(i+1),a++,s=n.node(i).maybeChild(a)):(o=n.node(i).maybeChild(a-1),s=n.node(i+1)),o&&!o.isTextblock&&Eg(o,s)&&n.node(i).canReplace(a,a+1))return t;if(i==0)break;t=r<0?n.before(i):n.after(i)}}function UC(e,t,r){let n=new Ye(t-r,t+r,Q.empty,!0);e.step(n)}function YC(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let o=n.index(i);if(n.node(i).canReplaceWith(o,o,r))return n.before(i+1);if(o>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let o=n.indexAfter(i);if(n.node(i).canReplaceWith(o,o,r))return n.after(i+1);if(o<n.node(i).childCount)return null}return null}function il(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let o=0;o<r.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(r.openStart==0&&r.size?2:1);o++)for(let s=n.depth;s>=0;s--){let a=s==n.depth?0:n.pos<=(n.start(s+1)+n.end(s+1))/2?-1:1,l=n.index(s)+(a>0?1:0),u=n.node(s),c=!1;if(o==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return a==0?n.pos:a<0?n.before(s+1):n.after(s+1)}return null}function As(e,t,r=t,n=Q.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),o=e.resolve(r);return Mg(i,o,n)?new Ye(t,r,n):new df(i,o,n).fit()}function Mg(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}var df=class{constructor(t,r,n){this.$from=t,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=$.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=$.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let o=this.placed,s=n.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new Q(o,s,a);return t>-1?new _e(n.pos,t,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Ye(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<t;n++){let o=r.firstChild;if(r.childCount>1&&(i=0),o.type.spec.isolating&&i<=n){t=n;break}r=o.content}for(let r=1;r<=2;r++)for(let n=r==1?t:this.unplaced.openStart;n>=0;n--){let i,o=null;n?(o=uf(this.unplaced.content,n-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,f=null;if(r==1&&(s?u.matchType(s.type)||(f=u.fillBefore($.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:a,parent:o,inject:f};if(r==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:a,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=uf(t,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Q(t,r+1,Math.max(n,i.size+r>=t.size-n?r+1:0)),!0)}dropNode(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=uf(t,r);if(i.childCount<=1&&r>0){let o=t.size-r<=r+i.size;this.unplaced=new Q(_s(t,r-1,1),r-1,o?r-1:n)}else this.unplaced=new Q(_s(t,r,1),r,n)}placeNodes({sliceDepth:t,frontierDepth:r,parent:n,inject:i,wrap:o}){for(;this.depth>r;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-t,u=0,c=[],{match:f,type:d}=this.frontier[r];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let p=a.size+t-(s.content.size-s.openEnd);for(;u<a.childCount;){let m=a.child(u),g=f.matchType(m.type);if(!g)break;u++,(u>1||l==0||m.content.size)&&(f=g,c.push(Tg(m.mark(d.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?p:-1)))}let h=u==a.childCount;h||(p=-1),this.placed=ks(this.placed,r,$.from(c)),this.frontier[r].match=f,h&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<p;m++){let v=g.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),g=v.content}this.unplaced=h?t==0?Q.empty:new Q(_s(s.content,t-1,1),t-1,p<0?s.openEnd:t-1):new Q(_s(s.content,t,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],r;if(!t.type.isTextblock||!cf(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){t:for(let r=Math.min(this.depth,t.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],o=r<t.depth&&t.end(r+1)==t.pos+(t.depth-(r+1)),s=cf(t,r,i,n,o);if(s){for(let a=r-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=cf(t,a,u,l,!0);if(!c||c.childCount)continue t}return{depth:r,fit:s,move:o?t.doc.resolve(t.after(r+1)):t}}}}close(t){let r=this.findCloseLevel(t);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=ks(this.placed,r.depth,r.fit)),t=r.move;for(let n=r.depth+1;n<=t.depth;n++){let i=t.node(n),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(n));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=ks(this.placed,this.depth,$.from(t.create(r,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore($.empty,!0);r.childCount&&(this.placed=ks(this.placed,this.frontier.length,r))}};function _s(e,t,r){return t==0?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(_s(e.firstChild.content,t-1,r)))}function ks(e,t,r){return t==0?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(ks(e.lastChild.content,t-1,r)))}function uf(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function Tg(e,t,r){if(t<=0)return e;let n=e.content;return t>1&&(n=n.replaceChild(0,Tg(n.firstChild,t-1,n.childCount==1?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore($.empty,!0)))),e.copy(n)}function cf(e,t,r,n,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!r.compatibleContent(o.type))return null;let a=n.fillBefore(o.content,!0,s);return a&&!KC(r,o.content,s)?a:null}function KC(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}function XC(e){return e.spec.defining||e.spec.definingForContent}function JC(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),o=e.doc.resolve(r);if(Mg(i,o,n))return e.step(new Ye(t,r,n));let s=Dg(i,e.doc.resolve(r));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(d)>-1?a=d:i.before(d)==p&&s.splice(1,0,-d)}let l=s.indexOf(a),u=[],c=n.openStart;for(let d=n.content,p=0;;p++){let h=d.firstChild;if(u.push(h),p==n.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let p=u[d],h=XC(p.type);if(h&&!p.sameMarkup(i.node(Math.abs(a)-1)))c=d;else if(h||!p.type.isTextblock)break}for(let d=n.openStart;d>=0;d--){let p=(d+c+1)%(n.openStart+1),h=u[p];if(h)for(let m=0;m<s.length;m++){let g=s[(m+l)%s.length],v=!0;g<0&&(v=!1,g=-g);let b=i.node(g-1),w=i.index(g-1);if(b.canReplaceWith(w,w,h.type,h.marks))return e.replace(i.before(g),v?o.after(g):r,new Q(Og(n.content,0,n.openStart,p),p,n.openEnd))}}let f=e.steps.length;for(let d=s.length-1;d>=0&&(e.replace(t,r,n),!(e.steps.length>f));d--){let p=s[d];p<0||(t=i.before(p),r=o.after(p))}}function Og(e,t,r,n,i){if(t<r){let o=e.firstChild;e=e.replaceChild(0,o.copy(Og(o.content,t+1,r,n,o)))}if(t>n){let o=i.contentMatchAt(0),s=o.fillBefore(e).append(e);e=s.append(o.matchFragment(s).fillBefore($.empty,!0))}return e}function ZC(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let i=YC(e.doc,t,n.type);i!=null&&(t=r=i)}e.replaceRange(t,r,new Q($.from(n),0,0))}function QC(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),o=Dg(n,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return e.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return e.delete(n.before(a),i.after(a))}for(let s=1;s<=n.depth&&s<=i.depth;s++)if(t-n.start(s)==n.depth-s&&r>n.end(s)&&i.end(s)-r!=i.depth-s)return e.delete(n.before(s),r);e.delete(t,r)}function Dg(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&r.push(i)}return r}var rl=class e extends Ie{constructor(t,r,n){super(),this.pos=t,this.attr=r,this.value=n}apply(t){let r=t.nodeAt(this.pos);if(!r)return Ve.fail("No node at attribute step's position");let n=Object.create(null);for(let o in r.attrs)n[o]=r.attrs[o];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return Ve.fromReplace(t,this.pos,this.pos+1,new Q($.from(i),0,r.isLeaf?0:1))}getMap(){return On.empty}invert(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new e(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(r.pos,r.attr,r.value)}};Ie.jsonID("attr",rl);var nl=class e extends Ie{constructor(t,r){super(),this.attr=t,this.value=r}apply(t){let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let n=t.type.create(r,t.content,t.marks);return Ve.ok(n)}getMap(){return On.empty}invert(t){return new e(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e(r.attr,r.value)}};Ie.jsonID("docAttr",nl);var Co=class extends Error{};Co=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r};Co.prototype=Object.create(Error.prototype);Co.prototype.constructor=Co;Co.prototype.name="TransformError";var Kn=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ms}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let r=this.maybeStep(t);if(r.failed)throw new Co(r.failed);return this}maybeStep(t){let r=t.apply(this.doc);return r.failed||this.addStep(t,r.doc),r}get docChanged(){return this.steps.length>0}addStep(t,r){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=r}replace(t,r=t,n=Q.empty){let i=As(this.doc,t,r,n);return i&&this.step(i),this}replaceWith(t,r,n){return this.replace(t,r,new Q($.from(n),0,0))}delete(t,r){return this.replace(t,r,Q.empty)}insert(t,r){return this.replaceWith(t,t,r)}replaceRange(t,r,n){return JC(this,t,r,n),this}replaceRangeWith(t,r,n){return ZC(this,t,r,n),this}deleteRange(t,r){return QC(this,t,r),this}lift(t,r){return FC(this,t,r),this}join(t,r=1){return UC(this,t,r),this}wrap(t,r){return VC(this,t,r),this}setBlockType(t,r=t,n,i=null){return WC(this,t,r,n,i),this}setNodeMarkup(t,r,n=null,i){return GC(this,t,r,n,i),this}setNodeAttribute(t,r,n){return this.step(new rl(t,r,n)),this}setDocAttribute(t,r){return this.step(new nl(t,r)),this}addNodeMark(t,r){return this.step(new Os(t,r)),this}removeNodeMark(t,r){if(!(r instanceof qt)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(r=r.isInSet(n.marks),!r)return this}return this.step(new Ds(t,r)),this}split(t,r=1,n){return qC(this,t,r,n),this}addMark(t,r,n){return IC(this,t,r,n),this}removeMark(t,r,n){return LC(this,t,r,n),this}clearIncompatible(t,r,n){return BC(this,t,r,n),this}};var hf=Object.create(null),pt=class{constructor(t,r,n){this.$anchor=t,this.$head=r,this.ranges=n||[new Ps(t.min(r),t.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let r=0;r<t.length;r++)if(t[r].$from.pos!=t[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,r=Q.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],c=t.mapping.slice(o);t.replaceRange(c.map(l.pos),c.map(u.pos),a?Q.empty:r),a==0&&Pg(t,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,r){let n=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=t.mapping.slice(n),u=l.map(s.pos),c=l.map(a.pos);o?t.deleteRange(u,c):(t.replaceRangeWith(u,c,r),Pg(t,n,r.isInline?-1:1))}}static findFrom(t,r,n=!1){let i=t.parent.inlineContent?new dt(t):Eo(t.node(0),t.parent,t.pos,t.index(),r,n);if(i)return i;for(let o=t.depth-1;o>=0;o--){let s=r<0?Eo(t.node(0),t.node(o),t.before(o+1),t.index(o),r,n):Eo(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,r,n);if(s)return s}return null}static near(t,r=1){return this.findFrom(t,r)||this.findFrom(t,-r)||new br(t.node(0))}static atStart(t){return Eo(t,t,0,0,1)||new br(t)}static atEnd(t){return Eo(t,t,t.content.size,t.childCount,-1)||new br(t)}static fromJSON(t,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=hf[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in hf)throw new RangeError("Duplicate use of selection JSON ID "+t);return hf[t]=r,r.prototype.jsonID=t,r}getBookmark(){return dt.between(this.$anchor,this.$head).getBookmark()}};pt.prototype.visible=!0;var Ps=class{constructor(t,r){this.$from=t,this.$to=r}},Ag=!1;function Rg(e){!Ag&&!e.parent.inlineContent&&(Ag=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var dt=class e extends pt{constructor(t,r=t){Rg(t),Rg(r),super(t,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,r){let n=t.resolve(r.map(this.head));if(!n.parent.inlineContent)return pt.near(n);let i=t.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:n,n)}replace(t,r=Q.empty){if(super.replace(t,r),r==Q.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new sl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){let i=t.resolve(r);return new this(i,n==r?i:t.resolve(n))}static between(t,r,n){let i=t.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let o=pt.findFrom(r,n,!0)||pt.findFrom(r,-n,!0);if(o)r=o.$head;else return pt.near(r,n)}return t.parent.inlineContent||(i==0?t=r:(t=(pt.findFrom(t,-n,!0)||pt.findFrom(t,n,!0)).$anchor,t.pos<r.pos!=i<0&&(t=r))),new e(t,r)}};pt.jsonID("text",dt);var sl=class e{constructor(t,r){this.anchor=t,this.head=r}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(t){return dt.between(t.resolve(this.anchor),t.resolve(this.head))}},ht=class e extends pt{constructor(t){let r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);super(t,n),this.node=r}map(t,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),o=t.resolve(i);return n?pt.near(o):new e(o)}content(){return new Q($.from(this.node),0,0)}eq(t){return t instanceof e&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new gf(this.anchor)}static fromJSON(t,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(r.anchor))}static create(t,r){return new e(t.resolve(r))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}};ht.prototype.visible=!1;pt.jsonID("node",ht);var gf=class e{constructor(t){this.anchor=t}map(t){let{deleted:r,pos:n}=t.mapResult(this.anchor);return r?new sl(n,n):new e(n)}resolve(t){let r=t.resolve(this.anchor),n=r.nodeAfter;return n&&ht.isSelectable(n)?new ht(r):pt.near(r)}},br=class e extends pt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,r=Q.empty){if(r==Q.empty){t.delete(0,t.doc.content.size);let n=pt.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,r)}toJSON(){return{type:"all"}}static fromJSON(t){return new e(t)}map(t){return new e(t)}eq(t){return t instanceof e}getBookmark(){return t_}};pt.jsonID("all",br);var t_={map(){return this},resolve(e){return new br(e)}};function Eo(e,t,r,n,i,o=!1){if(t.inlineContent)return dt.create(e,r);for(let s=n-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let a=t.child(s);if(a.isAtom){if(!o&&ht.isSelectable(a))return ht.create(e,r-(i<0?a.nodeSize:0))}else{let l=Eo(e,a,r+i,i<0?a.childCount:0,i,o);if(l)return l}r+=a.nodeSize*i}return null}function Pg(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof Ye||i instanceof _e))return;let o=e.mapping.maps[n],s;o.forEach((a,l,u,c)=>{s==null&&(s=c)}),e.setSelection(pt.near(e.doc.resolve(s),r))}var Ng=1,ol=2,Ig=4,vf=class extends Kn{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ng)&~ol,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ng)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=ol,this}ensureMarks(t){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ol)>0}addStep(t,r){super.addStep(t,r),this.updated=this.updated&~ol,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,r=!0){let n=this.selection;return r&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||qt.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,r,n){let i=this.doc.type.schema;if(r==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(n==null&&(n=r),n=n??r,!t)return this.deleteRange(r,n);let o=this.storedMarks;if(!o){let s=this.doc.resolve(r);o=n==r?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(t,o)),this.selection.empty||this.setSelection(pt.near(this.selection.$to)),this}}setMeta(t,r){return this.meta[typeof t=="string"?t:t.key]=r,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ig,this}get scrolledIntoView(){return(this.updated&Ig)>0}};function Lg(e,t){return!t||!e?e:e.bind(t)}var Bi=class{constructor(t,r,n){this.name=t,this.init=Lg(r.init,n),this.apply=Lg(r.apply,n)}},e_=[new Bi("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Bi("selection",{init(e,t){return e.selection||pt.atStart(t.doc)},apply(e){return e.selection}}),new Bi("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new Bi("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})],Rs=class{constructor(t,r){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=e_.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Bi(n.key,n.spec.state,n))})}},al=class e{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let r=[t],n=this.applyInner(t),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,u=i?i[s].state:this,c=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,u,n);if(c&&n.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:n,n:r.length}:{state:this,n:0})}r.push(c),n=n.applyInner(c),o=!0}i&&(i[s]={state:n,n:r.length})}}if(!o)return{state:n,transactions:r}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new e(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let o=n[i];r[o.name]=o.apply(t,this[o.name],this,r)}return r}get tr(){return new vf(this)}static create(t){let r=new Rs(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new e(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(t,n);return n}reconfigure(t){let r=new Rs(this.schema,t.plugins),n=r.fields,i=new e(r);for(let o=0;o<n.length;o++){let s=n[o].name;i[s]=this.hasOwnProperty(s)?this[s]:n[o].init(t,i)}return i}toJSON(t){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),t&&typeof t=="object")for(let n in t){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[n],o=i.spec.state;o&&o.toJSON&&(r[n]=o.toJSON.call(i,this[i.key]))}return r}static fromJSON(t,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Rs(t.schema,t.plugins),o=new e(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=$r.fromJSON(t.schema,r.doc);else if(s.name=="selection")o.selection=pt.fromJSON(o.doc,r.selection);else if(s.name=="storedMarks")r.storedMarks&&(o.storedMarks=r.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){o[s.name]=u.fromJSON.call(l,t,r[a],o);return}}o[s.name]=s.init(t,o)}}),o}};function Bg(e,t,r){for(let n in e){let i=e[n];i instanceof Function?i=i.bind(t):n=="handleDOMEvents"&&(i=Bg(i,t,{})),r[n]=i}return r}var Ht=class{constructor(t){this.spec=t,this.props={},t.props&&Bg(t.props,this,this.props),this.key=t.key?t.key.key:zg("plugin")}getState(t){return t[this.key]}},mf=Object.create(null);function zg(e){return e in mf?e+"$"+ ++mf[e]:(mf[e]=0,e+"$")}var Wt=class{constructor(t="key"){this.key=zg(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}};var tr=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Bs=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t},Fg=null,Rn=function(e,t,r){let n=Fg||(Fg=document.createRange());return n.setEnd(e,r??e.nodeValue.length),n.setStart(e,t||0),n},ji=function(e,t,r,n){return r&&(Hg(e,t,r,n,-1)||Hg(e,t,r,n,1))},r_=/^(img|br|input|textarea|hr)$/i;function Hg(e,t,r,n,i){for(;;){if(e==r&&t==n)return!0;if(t==(i<0?0:ln(e))){let o=e.parentNode;if(!o||o.nodeType!=1||Hf(e)||r_.test(e.nodeName)||e.contentEditable=="false")return!1;t=tr(e)+(i<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(i<0?-1:0)],e.contentEditable=="false")return!1;t=i<0?ln(e):0}else return!1}}function ln(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function n_(e,t,r){for(let n=t==0,i=t==ln(e);n||i;){if(e==r)return!0;let o=tr(e);if(e=e.parentNode,!e)return!1;n=n&&o==0,i=i&&o==ln(e)}}function Hf(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var yl=function(e){return e.focusNode&&ji(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function zi(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function i_(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function o_(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:n.offset}}catch{}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:n.startOffset}}}var un=typeof navigator<"u"?navigator:null,$g=typeof document<"u"?document:null,ei=un&&un.userAgent||"",wf=/Edge\/(\d+)/.exec(ei),yv=/MSIE \d/.exec(ei),Cf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ei),fr=!!(yv||Cf||wf),Qn=yv?document.documentMode:Cf?+Cf[1]:wf?+wf[1]:0,jr=!fr&&/gecko\/(\d+)/i.test(ei);jr&&+(/Firefox\/(\d+)/.exec(ei)||[0,0])[1];var _f=!fr&&/Chrome\/(\d+)/.exec(ei),Xe=!!_f,s_=_f?+_f[1]:0,er=!fr&&!!un&&/Apple Computer/.test(un.vendor),Ao=er&&(/Mobile\/\w+/.test(ei)||!!un&&un.maxTouchPoints>2),Cr=Ao||(un?/Mac/.test(un.platform):!1),a_=un?/Win/.test(un.platform):!1,Wr=/Android \d/.test(ei),$s=!!$g&&"webkitFontSmoothing"in $g.documentElement.style,l_=$s?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function u_(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function An(e,t){return typeof e=="number"?e:e[t]}function c_(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function Vg(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=r||e.dom;s;s=Bs(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,u=l?u_(o):c_(a),c=0,f=0;if(t.top<u.top+An(n,"top")?f=-(u.top-t.top+An(i,"top")):t.bottom>u.bottom-An(n,"bottom")&&(f=t.bottom-t.top>u.bottom-u.top?t.top+An(i,"top")-u.top:t.bottom-u.bottom+An(i,"bottom")),t.left<u.left+An(n,"left")?c=-(u.left-t.left+An(i,"left")):t.right>u.right-An(n,"right")&&(c=t.right-u.right+An(i,"right")),c||f)if(l)o.defaultView.scrollBy(c,f);else{let d=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),c&&(a.scrollLeft+=c);let h=a.scrollLeft-d,m=a.scrollTop-p;t={left:t.left-h,top:t.top-m,right:t.right-h,bottom:t.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function f_(e){let t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top),n,i;for(let o=(t.left+t.right)/2,s=r+1;s<Math.min(innerHeight,t.bottom);s+=5){let a=e.root.elementFromPoint(o,s);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:bv(e.dom)}}function bv(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=Bs(n));return t}function d_({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;xv(r,n==0?0:n-t)}function xv(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:o}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=o&&(n.scrollLeft=o)}}var Mo=null;function p_(e){if(e.setActive)return e.setActive();if(Mo)return e.focus(Mo);let t=bv(e);e.focus(Mo==null?{get preventScroll(){return Mo={preventScroll:!0},!0}}:void 0),Mo||(Mo=!1,xv(t,0))}function Sv(e,t){let r,n=2e8,i,o=0,s=t.top,a=t.top,l,u;for(let c=e.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=Rn(c).getClientRects();else continue;for(let p=0;p<d.length;p++){let h=d[p];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);let m=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(m<n){r=c,n=m,i=m&&r.nodeType==3?{left:h.right<t.left?h.right:h.left,top:t.top}:t,c.nodeType==1&&m&&(o=f+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!l&&h.left<=t.left&&h.right>=t.left&&(l=c,u={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!r&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(o=f+1)}}return!r&&l&&(r=l,i=u,n=0),r&&r.nodeType==3?h_(r,i):!r||n&&r.nodeType==1?{node:e,offset:o}:Sv(r,i)}function h_(e,t){let r=e.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(e,i+1),n.setStart(e,i);let o=Xn(n,1);if(o.top!=o.bottom&&$f(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function $f(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function m_(e,t){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function g_(e,t,r){let{node:n,offset:i}=Sv(t,r),o=-1;if(n.nodeType==1&&!n.firstChild){let s=n.getBoundingClientRect();o=s.left!=s.right&&r.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(n,i,o)}function v_(e,t,r,n){let i=-1;for(let o=t,s=!1;o!=e.dom;){let a=e.docView.nearestDesc(o,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!s||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!s&&(s=!0,l.left>n.left||l.top>n.top?i=a.posBefore:(l.right<n.left||l.bottom<n.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}o=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}function wv(e,t,r){let n=e.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),o=i;;){let s=e.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if($f(t,u))return wv(s,t,u)}}if((o=(o+1)%n)==i)break}return e}function y_(e,t){let r=e.dom.ownerDocument,n,i=0,o=o_(r,t.left,t.top);o&&({node:n,offset:i}=o);let s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top),a;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=e.dom.getBoundingClientRect();if(!$f(t,u)||(s=wv(e.dom,t,u),!s))return null}if(er)for(let u=s;n&&u;u=Bs(u))u.draggable&&(n=void 0);if(s=m_(s,t),n){if(jr&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let c=n.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}let u;$s&&i&&n.nodeType==1&&(u=n.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=v_(e,n,i,t))}a==null&&(a=g_(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Wg(e){return e.top<e.bottom||e.left<e.right}function Xn(e,t){let r=e.getClientRects();if(r.length){let n=r[t<0?0:r.length-1];if(Wg(n))return n}return Array.prototype.find.call(r,Wg)||e.getBoundingClientRect()}var b_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Cv(e,t,r){let{node:n,offset:i,atom:o}=e.docView.domFromPos(t,r<0?-1:1),s=$s||jr;if(n.nodeType==3)if(s&&(b_.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Xn(Rn(n,i,i),r);if(jr&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let u=Xn(Rn(n,i-1,i-1),-1);if(u.top==l.top){let c=Xn(Rn(n,i,i+1),-1);if(c.top!=l.top)return Ns(c,c.left<u.left)}}return l}else{let l=i,u=i,c=r<0?1:-1;return r<0&&!i?(u++,c=-1):r>=0&&i==n.nodeValue.length?(l--,c=1):r<0?l--:u++,Ns(Xn(Rn(n,l,u),c),c<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&i&&(r<0||i==ln(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return yf(l.getBoundingClientRect(),!1)}if(o==null&&i<ln(n)){let l=n.childNodes[i];if(l.nodeType==1)return yf(l.getBoundingClientRect(),!0)}return yf(n.getBoundingClientRect(),r>=0)}if(o==null&&i&&(r<0||i==ln(n))){let l=n.childNodes[i-1],u=l.nodeType==3?Rn(l,ln(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Ns(Xn(u,1),!1)}if(o==null&&i<ln(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?Rn(l,0,s?0:1):l.nodeType==1?l:null:null;if(u)return Ns(Xn(u,-1),!0)}return Ns(Xn(n.nodeType==3?Rn(n):n,-r),r>=0)}function Ns(e,t){if(e.width==0)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function yf(e,t){if(e.height==0)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function _v(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}function x_(e,t,r){let n=t.selection,i=r=="up"?n.$from:n.$to;return _v(e,t,()=>{let{node:o}=e.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=Cv(e,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Rn(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(r=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}var S_=/[\u0590-\u08ac]/;function w_(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,o=!i,s=i==n.parent.content.size,a=e.domSelection();return!S_.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?o:s:_v(e,t,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:f}=e.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:h,focusOffset:m}=e.domSelectionRange(),g=h&&!p.contains(h.nodeType==1?h:h.parentNode)||l==h&&u==m;try{a.collapse(c,f),l&&(l!=c||u!=f)&&a.extend&&a.extend(l,u)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}var jg=null,Gg=null,qg=!1;function C_(e,t,r){return jg==t&&Gg==r?qg:(jg=t,Gg=r,qg=r=="up"||r=="down"?x_(e,t,r):w_(e,t,r))}var _r=0,Ug=1,Fi=2,cn=3,Gi=class{constructor(t,r,n,i){this.parent=t,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=_r,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,r,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let r=0;r<this.children.length;r++)t+=this.children[r].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==t)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,r,n){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(n<0){let o,s;if(t==this.contentDOM)o=t.childNodes[r-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(t==this.contentDOM)o=t.childNodes[r];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=r>tr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&r==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(t,r=!1){for(let n=!0,i=t;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!r||o.node))if(n&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))n=!1;else return o}}getDesc(t){let r=t.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(t,r,n){for(let i=t;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(t,r,n)}return-1}descAt(t){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==t&&o!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<o)return i.descAt(t-n-i.border);n=o}}domFromPos(t,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,i=0;for(let o=0;n<this.children.length;n++){let s=this.children[n],a=o+s.size;if(a>t||s instanceof cl){i=t-o;break}o=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let o;n&&!(o=this.children[n-1]).size&&o instanceof ll&&o.side>=0;n--);if(r<=0){let o,s=!0;for(;o=n?this.children[n-1]:null,!(!o||o.dom.parentNode==this.contentDOM);n--,s=!1);return o&&r&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,r):{node:this.contentDOM,offset:o?tr(o.dom)+1:0}}else{let o,s=!0;for(;o=n<this.children.length?this.children[n]:null,!(!o||o.dom.parentNode==this.contentDOM);n++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,r):{node:this.contentDOM,offset:o?tr(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=n,a=0;;a++){let l=this.children[a],u=s+l.size;if(i==-1&&t<=u){let c=s+l.border;if(t>=c&&r<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,r,c);t=s;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=tr(d.dom)+1;break}t-=d.size}i==-1&&(i=0)}if(i>-1&&(u>r||a==this.children.length-1)){r=u;for(let c=a+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=tr(f.dom);break}r+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:t,to:r,fromOffset:i,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[t<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(t)}domAfterPos(t){let{node:r,offset:n}=this.domFromPos(t,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[n]}setSelection(t,r,n,i=!1){let o=Math.min(t,r),s=Math.max(t,r);for(let d=0,p=0;d<this.children.length;d++){let h=this.children[d],m=p+h.size;if(o>p&&s<m)return h.setSelection(t-p-h.border,r-p-h.border,n,i);p=m}let a=this.domFromPos(t,t?-1:1),l=r==t?a:this.domFromPos(r,r?-1:1),u=n.getSelection(),c=!1;if((jr||er)&&t==r){let{node:d,offset:p}=a;if(d.nodeType==3){if(c=!!(p&&d.nodeValue[p-1]==`
`),c&&p==d.nodeValue.length)for(let h=d,m;h;h=h.parentNode){if(m=h.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:tr(m)+1});break}let g=h.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let h=d.childNodes[p-1];c=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(jr&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&er)&&ji(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ji(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||t==r)&&!c){u.collapse(a.node,a.offset);try{t!=r&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(t>r){let p=a;a=l,l=p}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,r){for(let n=0,i=0;i<this.children.length;i++){let o=this.children[i],s=n+o.size;if(n==s?t<=s&&r>=n:t<s&&r>n){let a=n+o.border,l=s-o.border;if(t>=a&&r<=l){this.dirty=t==n||r==s?Fi:Ug,t==a&&r==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=cn:o.markDirty(t-a,r-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Fi:cn}n=s}this.dirty=Fi}markParentsDirty(){let t=1;for(let r=this.parent;r;r=r.parent,t++){let n=t==1?Fi:Ug;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}},ll=class extends Gi{constructor(t,r,n,i){let o,s=r.type.toDOM;if(typeof s=="function"&&(s=s(n,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!r.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=r,this.widget=r,o=this}matchesWidget(t){return this.dirty==_r&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let r=this.widget.spec.stopEvent;return r?r(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},kf=class extends Gi{constructor(t,r,n,i){super(t,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(t,r){return t!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}},Ro=class e extends Gi{constructor(t,r,n,i){super(t,[],n,i),this.mark=r}static create(t,r,n,i){let o=i.nodeViews[r.type.name],s=o&&o(r,i,n);return(!s||!s.dom)&&(s=Tn.renderSpec(document,r.type.spec.toDOM(r,n))),new e(t,r,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&cn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=cn&&this.mark.eq(t)}markDirty(t,r){if(super.markDirty(t,r),this.dirty!=_r){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=_r}}slice(t,r,n){let i=e.create(this.parent,this.mark,!0,n),o=this.children,s=this.size;r<s&&(o=Df(o,r,s,n)),t>0&&(o=Df(o,0,t,n));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}},ti=class e extends Gi{constructor(t,r,n,i,o,s,a,l,u){super(t,[],o,s),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(t,r,n,i,o,s){let a=o.nodeViews[r.type.name],l,u=a&&a(r,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},n,i),c=u&&u.dom,f=u&&u.contentDOM;if(r.isText){if(!c)c=document.createTextNode(r.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=Tn.renderSpec(document,r.type.spec.toDOM(r)));!f&&!r.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),r.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Mv(c,n,r),u?l=new Ef(t,r,n,i,c,f||null,d,u,o,s+1):r.isText?new ul(t,r,n,i,c,d,o):new e(t,r,n,i,c,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>$.empty)}return t}matchesNode(t,r,n){return this.dirty==_r&&t.eq(this.node)&&Tf(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,r){let n=this.node.inlineContent,i=r,o=t.composing?this.localCompositionInfo(t,r):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new Of(this,s&&s.node,t);M_(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,n,t):u.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?qt.none:this.node.child(c).marks,n,t),l.placeWidget(u,t,i)},(u,c,f,d)=>{l.syncToMarks(u.marks,n,t);let p;l.findNodeMatch(u,c,f,d)||a&&t.state.selection.from>i&&t.state.selection.to<i+u.nodeSize&&(p=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(u,c,f,p,t)||l.updateNextNode(u,c,f,t,d,i)||l.addNode(u,c,f,t,i),i+=u.nodeSize}),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Fi)&&(s&&this.protectLocalComposition(t,s),kv(this.contentDOM,this.children,t),Ao&&T_(this.dom))}localCompositionInfo(t,r){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof dt)||n<r||i>r+this.node.content.size)return null;let o=t.domSelectionRange(),s=O_(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=D_(this.node.content,a,n-r,i-r);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let o=r;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new kf(this,o,r,i);t.input.compositionNodes.push(s),this.children=Df(this.children,n,n+i.length,t,s)}update(t,r,n,i){return this.dirty==cn||!t.sameMarkup(this.node)?!1:(this.updateInner(t,r,n,i),!0)}updateInner(t,r,n,i){this.updateOuterDeco(r),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=_r}updateOuterDeco(t){if(Tf(t,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Ev(this.dom,this.nodeDOM,Mf(this.outerDeco,this.node,r),Mf(t,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}};function Yg(e,t,r,n,i){Mv(n,t,e);let o=new ti(void 0,e,t,r,n,n,n,i,0);return o.contentDOM&&o.updateChildren(i,0),o}var ul=class e extends ti{constructor(t,r,n,i,o,s,a){super(t,r,n,i,o,null,s,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,r,n,i){return this.dirty==cn||this.dirty!=_r&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=_r||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=_r,!0)}inParent(){let t=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(t,r,n)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,r,n){let i=this.node.cut(t,r),o=document.createTextNode(i.text);return new e(this.parent,i,this.outerDeco,this.innerDeco,o,o,n)}markDirty(t,r){super.markDirty(t,r),this.dom!=this.nodeDOM&&(t==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=cn)}get domAtom(){return!1}},cl=class extends Gi{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==_r&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},Ef=class extends ti{constructor(t,r,n,i,o,s,a,l,u,c){super(t,r,n,i,o,s,a,u,c),this.spec=l}update(t,r,n,i){if(this.dirty==cn)return!1;if(this.spec.update){let o=this.spec.update(t,r,n);return o&&this.updateInner(t,r,n,i),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,r,n,i){this.spec.setSelection?this.spec.setSelection(t,r,n):super.setSelection(t,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}};function kv(e,t,r){let n=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=n;)n=Kg(n),i=!0;n=n.nextSibling}else i=!0,e.insertBefore(a,n);if(s instanceof Ro){let l=n?n.previousSibling:e.lastChild;kv(s.contentDOM,s.children,r),n=l?l.nextSibling:e.firstChild}}for(;n;)n=Kg(n),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}var Is=function(e){e&&(this.nodeName=e)};Is.prototype=Object.create(null);var Hi=[new Is];function Mf(e,t,r){if(e.length==0)return Hi;let n=r?Hi[0]:new Is,i=[n];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&i.push(n=new Is(s.nodeName));for(let a in s){let l=s[a];l!=null&&(r&&i.length==1&&i.push(n=new Is(t.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Ev(e,t,r,n){if(r==Hi&&n==Hi)return t;let i=t;for(let o=0;o<n.length;o++){let s=n[o],a=r[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Hi[0]),i=l}__(i,a||Hi[0],s)}return i}function __(e,t,r){for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&e.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let o=0;o<n.length;o++)i.indexOf(n[o])==-1&&e.classList.remove(n[o]);for(let o=0;o<i.length;o++)n.indexOf(i[o])==-1&&e.classList.add(i[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(t.style);)e.style.removeProperty(i[1])}r.style&&(e.style.cssText+=r.style)}}function Mv(e,t,r){return Ev(e,e,Hi,Mf(t,r,e.nodeType!=1))}function Tf(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function Kg(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}var Of=class{constructor(t,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=k_(t.node.content,t)}destroyBetween(t,r){if(t!=r){for(let n=t;n<r;n++)this.top.children[n].destroy();this.top.children.splice(t,r-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,r,n){let i=0,o=this.stack.length>>1,s=Math.min(o,t.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=_r,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(t[o])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ro.create(this.top,t[o],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(t,r,n,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,r,n))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(t,r,n)&&!this.preMatch.matched.has(u)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,r,n,i,o){let s=this.top.children[i];return s.dirty==cn&&s.dom==s.contentDOM&&(s.dirty=Fi),s.update(t,r,n,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let r=t.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=t.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}t=r}}updateNextNode(t,r,n,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ti){let u=this.preMatch.matched.get(l);if(u!=null&&u!=o)return!1;let c=l.dom,f,d=this.isLocked(c)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=cn&&Tf(r,l.outerDeco));if(!d&&l.update(t,r,n,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,t,r,n,i,s)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Fi,f.updateChildren(i,s+1),f.dirty=_r),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,r,n,i,o,s){if(t.dirty||r.isAtom||!t.children.length||!t.node.content.eq(r.content))return null;let a=ti.create(this.top,r,n,i,o,s);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,r,n,i,o){let s=ti.create(this.top,t,r,n,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new ll(this.top,t,r,n);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],r=this.top;for(;t instanceof Ro;)r=t,t=r.children[r.children.length-1];(!t||!(t instanceof ul)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((er||Xe)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(t,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),t=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new cl(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}};function k_(e,t){let r=t,n=r.children.length,i=e.childCount,o=new Map,s=[];t:for(;i>0;){let a;for(;;)if(n){let u=r.children[n-1];if(u instanceof Ro)r=u,n=u.children.length;else{a=u,n--;break}}else{if(r==t)break t;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function E_(e,t){return e.type.side-t.type.side}function M_(e,t,r,n){let i=t.locals(e),o=0;if(i.length==0){for(let u=0;u<e.childCount;u++){let c=e.child(u);n(c,i,t.forChild(o,c),u),o+=c.nodeSize}return}let s=0,a=[],l=null;for(let u=0;;){let c,f;for(;s<i.length&&i[s].to==o;){let g=i[s++];g.widget&&(c?(f||(f=[c])).push(g):c=g)}if(c)if(f){f.sort(E_);for(let g=0;g<f.length;g++)r(f[g],u,!!l)}else r(c,u,!!l);let d,p;if(l)p=-1,d=l,l=null;else if(u<e.childCount)p=u,d=e.child(u++);else break;for(let g=0;g<a.length;g++)a[g].to<=o&&a.splice(g--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let h=o+d.nodeSize;if(d.isText){let g=h;s<i.length&&i[s].from<g&&(g=i[s].from);for(let v=0;v<a.length;v++)a[v].to<g&&(g=a[v].to);g<h&&(l=d.cut(g-o),d=d.cut(0,g-o),h=g,p=-1)}else for(;s<i.length&&i[s].to<h;)s++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();n(d,m,t.forChild(o,d),p),o=h}}function T_(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function O_(e,t){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0){if(e.childNodes.length>t&&e.childNodes[t].nodeType==3)return e.childNodes[t];e=e.childNodes[t-1],t=ln(e)}else if(e.nodeType==1&&t<e.childNodes.length)e=e.childNodes[t],t=0;else return null}}function D_(e,t,r,n){for(let i=0,o=0;i<e.childCount&&o<=n;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let u=e.child(i++);if(o+=u.nodeSize,!u.isText)break;l+=u.text}if(o>=r){if(o>=n&&l.slice(n-t.length-a,n-a)==t)return n-t.length;let u=a<n?l.lastIndexOf(t,n-a-1):-1;if(u>=0&&u+t.length+a>=r)return a+u;if(r==n&&l.length>=n+t.length-a&&l.slice(n-a,n-a+t.length)==t)return n}}return-1}function Df(e,t,r,n,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],u=a,c=a+=l.size;u>=r||c<=t?o.push(l):(u<t&&o.push(l.slice(0,t-u,n)),i&&(o.push(i),i=void 0),c>r&&o.push(l.slice(r-u,l.size,n)))}return o}function Vf(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),o=i&&i.size==0,s=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(s<0)return null;let a=n.resolve(s),l,u;if(yl(r)){for(l=a;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&ht.isSelectable(c)&&i.parent&&!(c.isInline&&n_(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;u=new ht(s==f?a:n.resolve(f))}}else{let c=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(c<0)return null;l=n.resolve(c)}if(!u){let c=t=="pointer"||e.state.selection.head<a.pos&&!o?1:-1;u=Wf(e,l,a,c)}return u}function Tv(e){return e.editable?e.hasFocus():Dv(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Pn(e,t=!1){let r=e.state.selection;if(Ov(e,r),!!Tv(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Xe){let n=e.domSelectionRange(),i=e.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&ji(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)R_(e);else{let{anchor:n,head:i}=r,o,s;Xg&&!(r instanceof dt)&&(r.$from.parent.inlineContent||(o=Jg(e,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(s=Jg(e,r.to))),e.docView.setSelection(n,i,e.root,t),Xg&&(o&&Zg(o),s&&Zg(s)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&A_(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var Xg=er||Xe&&s_<63;function Jg(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,o=n?r.childNodes[n-1]:null;if(er&&i&&i.contentEditable=="false")return bf(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return bf(i);if(o)return bf(o)}}function bf(e){return e.contentEditable="true",er&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Zg(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function A_(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!Tv(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function R_(e){let t=e.domSelection(),r=document.createRange(),n=e.cursorWrapper.dom,i=n.nodeName=="IMG";i?r.setEnd(n.parentNode,tr(n)+1):r.setEnd(n,0),r.collapse(!1),t.removeAllRanges(),t.addRange(r),!i&&!e.state.selection.visible&&fr&&Qn<=11&&(n.disabled=!0,n.disabled=!1)}function Ov(e,t){if(t instanceof ht){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(Qg(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else Qg(e)}function Qg(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Wf(e,t,r,n){return e.someProp("createSelectionBetween",i=>i(e,t,r))||dt.between(t,r,n)}function tv(e){return e.editable&&!e.hasFocus()?!1:Dv(e)}function Dv(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function P_(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return ji(t.node,t.offset,r.anchorNode,r.anchorOffset)}function Af(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&pt.findFrom(o,t)}function Jn(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ev(e,t,r){let n=e.state.selection;if(n instanceof dt)if(r.indexOf("s")>-1){let{$head:i}=n,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=e.state.doc.resolve(i.pos+o.nodeSize*(t<0?-1:1));return Jn(e,new dt(n.$anchor,s))}else if(n.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=Af(e.state,t);return i&&i instanceof ht?Jn(e,i):!1}else if(!(Cr&&r.indexOf("m")>-1)){let i=n.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=t<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=e.docView.descAt(a))&&!s.contentDOM?ht.isSelectable(o)?Jn(e,new ht(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):$s?Jn(e,new dt(e.state.doc.resolve(t<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(n instanceof ht&&n.node.isInline)return Jn(e,new dt(t>0?n.$to:n.$from));{let i=Af(e.state,t);return i?Jn(e,i):!1}}}function fl(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Ls(e,t){let r=e.pmViewDesc;return r&&r.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function To(e,t){return t<0?N_(e):I_(e)}function N_(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,o,s=!1;for(jr&&r.nodeType==1&&n<fl(r)&&Ls(r.childNodes[n],-1)&&(s=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Ls(a,-1))i=r,o=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(Av(r))break;{let a=r.previousSibling;for(;a&&Ls(a,-1);)i=r.parentNode,o=tr(a),a=a.previousSibling;if(a)r=a,n=fl(r);else{if(r=r.parentNode,r==e.dom)break;n=0}}}s?Rf(e,r,n):i&&Rf(e,i,o)}function I_(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i=fl(r),o,s;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Ls(a,1))o=r,s=++n;else break}else{if(Av(r))break;{let a=r.nextSibling;for(;a&&Ls(a,1);)o=a.parentNode,s=tr(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=fl(r);else{if(r=r.parentNode,r==e.dom)break;n=i=0}}}o&&Rf(e,o,s)}function Av(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function L_(e,t){for(;e&&t==e.childNodes.length&&!Hf(e);)t=tr(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=0}}function B_(e,t){for(;e&&!t&&!Hf(e);)t=tr(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=e.childNodes.length}}function Rf(e,t,r){if(t.nodeType!=3){let o,s;(s=L_(t,r))?(t=s,r=0):(o=B_(t,r))&&(t=o,r=o.nodeValue.length)}let n=e.domSelection();if(yl(n)){let o=document.createRange();o.setEnd(t,r),o.setStart(t,r),n.removeAllRanges(),n.addRange(o)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Pn(e)},50)}function rv(e,t){let r=e.state.doc.resolve(t);if(!(Xe||a_)&&r.parent.inlineContent){let i=e.coordsAtPos(t);if(t>r.start()){let o=e.coordsAtPos(t-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(t<r.end()){let o=e.coordsAtPos(t+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function nv(e,t,r){let n=e.state.selection;if(n instanceof dt&&!n.empty||r.indexOf("s")>-1||Cr&&r.indexOf("m")>-1)return!1;let{$from:i,$to:o}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=Af(e.state,t);if(s&&s instanceof ht)return Jn(e,s)}if(!i.parent.inlineContent){let s=t<0?i:o,a=n instanceof br?pt.near(s,t):pt.findFrom(s,t);return a?Jn(e,a):!1}return!1}function iv(e,t){if(!(e.state.selection instanceof dt))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(o&&!o.isText){let s=e.state.tr;return t<0?s.delete(r.pos-o.nodeSize,r.pos):s.delete(r.pos,r.pos+o.nodeSize),e.dispatch(s),!0}return!1}function ov(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function z_(e){if(!er||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&t.nodeType==1&&r==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let n=t.firstChild;ov(e,n,"true"),setTimeout(()=>ov(e,n,"false"),20)}return!1}function F_(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function H_(e,t){let r=t.keyCode,n=F_(t);if(r==8||Cr&&r==72&&n=="c")return iv(e,-1)||To(e,-1);if(r==46&&!t.shiftKey||Cr&&r==68&&n=="c")return iv(e,1)||To(e,1);if(r==13||r==27)return!0;if(r==37||Cr&&r==66&&n=="c"){let i=r==37?rv(e,e.state.selection.from)=="ltr"?-1:1:-1;return ev(e,i,n)||To(e,i)}else if(r==39||Cr&&r==70&&n=="c"){let i=r==39?rv(e,e.state.selection.from)=="ltr"?1:-1:1;return ev(e,i,n)||To(e,i)}else{if(r==38||Cr&&r==80&&n=="c")return nv(e,-1,n)||To(e,-1);if(r==40||Cr&&r==78&&n=="c")return z_(e)||nv(e,1,n)||To(e,1);if(n==(Cr?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function Rv(e,t){e.someProp("transformCopied",p=>{t=p(t,e)});let r=[],{content:n,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,o--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let s=e.someProp("clipboardSerializer")||Tn.fromSchema(e.state.schema),a=zv(),l=a.createElement("div");l.appendChild(s.serializeFragment(n,{document:a}));let u=l.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=Bv[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let h=a.createElement(c[p]);for(;l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(r)}`);let d=e.someProp("clipboardTextSerializer",p=>p(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:d}}function Pv(e,t,r,n,i){let o=i.parent.type.spec.code,s,a;if(!r&&!t)return null;let l=t&&(n||o||!r);if(l){if(e.someProp("transformPastedText",d=>{t=d(t,o||n,e)}),o)return t?new Q($.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Q.empty;let f=e.someProp("clipboardTextParser",d=>d(t,i,n,e));if(f)a=f;else{let d=i.marks(),{schema:p}=e.state,h=Tn.fromSchema(p);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(h.serializeNode(p.text(m,d)))})}}else e.someProp("transformPastedHTML",f=>{r=f(r,e)}),s=W_(r),$s&&j_(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Ii.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!$_.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)a=G_(sv(a,+c[1],+c[2]),c[4]);else if(a=Q.maxOpen(V_(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let p=a.content.firstChild;f<a.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=a.content.lastChild;d<a.openEnd&&!p.type.spec.isolating;d++,p=p.lastChild);a=sv(a,f,d)}return e.someProp("transformPasted",f=>{a=f(a,e)}),a}var $_=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function V_(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let i=t.node(r).contentMatchAt(t.index(r)),o,s=[];if(e.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),u;if(!l)return s=null;if(u=s.length&&o.length&&Iv(l,o,a,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=Lv(s[s.length-1],o.length));let c=Nv(a,l);s.push(c),i=i.matchType(c.type),o=l}}),s)return $.from(s)}return e}function Nv(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,$.from(e));return e}function Iv(e,t,r,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=Iv(e,t,r,n.lastChild,i+1);if(o)return n.copy(n.content.replaceChild(n.childCount-1,o));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?r.type:e[i+1]))return n.copy(n.content.append($.from(Nv(r,e,i+1))))}}function Lv(e,t){if(t==0)return e;let r=e.content.replaceChild(e.childCount-1,Lv(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore($.empty,!0);return e.copy(r.append(n))}function Pf(e,t,r,n,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<n-1&&(a=Pf(a,t,r,n,i+1,o)),i>=r&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore($.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function sv(e,t,r){return t<e.openStart&&(e=new Q(Pf(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new Q(Pf(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}var Bv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},av=null;function zv(){return av||(av=document.implementation.createHTMLDocument("title"))}function W_(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let r=zv().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(e),i;if((i=n&&Bv[n[1].toLowerCase()])&&(e=i.map(o=>"<"+o+">").join("")+e+i.map(o=>"</"+o+">").reverse().join("")),r.innerHTML=e,i)for(let o=0;o<i.length;o++)r=r.querySelector(i[o])||r;return r}function j_(e){let t=e.querySelectorAll(Xe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];n.childNodes.length==1&&n.textContent=="\xA0"&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}function G_(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return e}let{content:i,openStart:o,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=$.from(l.create(n[a+1],i)),o++,s++}return new Q(i,o,s)}var rr={},nr={},q_={touchstart:!0,touchmove:!0},Nf=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function U_(e){for(let t in rr){let r=rr[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=n=>{K_(e,n)&&!jf(e,n)&&(e.editable||!(n.type in nr))&&r(e,n)},q_[t]?{passive:!0}:void 0)}er&&e.dom.addEventListener("input",()=>null),If(e)}function Zn(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Y_(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function If(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=n=>jf(e,n))})}function jf(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return n?n(e,t)||t.defaultPrevented:!1})}function K_(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function X_(e,t){!jf(e,t)&&rr[t.type]&&(e.editable||!(t.type in nr))&&rr[t.type](e,t)}nr.keydown=(e,t)=>{let r=t;if(e.input.shiftKey=r.keyCode==16||r.shiftKey,!Hv(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Wr&&Xe&&r.keyCode==13)))if(r.keyCode!=229&&e.domObserver.forceFlush(),Ao&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();e.input.lastIOSEnter=n,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==n&&(e.someProp("handleKeyDown",i=>i(e,zi(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",n=>n(e,r))||H_(e,r)?r.preventDefault():Zn(e,"key")};nr.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};nr.keypress=(e,t)=>{let r=t;if(Hv(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||Cr&&r.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,r))){r.preventDefault();return}let n=e.state.selection;if(!(n instanceof dt)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode);!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,n.$from.pos,n.$to.pos,i))&&e.dispatch(e.state.tr.insertText(i).scrollIntoView()),r.preventDefault()}};function bl(e){return{left:e.clientX,top:e.clientY}}function J_(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function Gf(e,t,r,n,i){if(n==-1)return!1;let o=e.state.doc.resolve(n);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,a=>s>o.depth?a(e,r,o.nodeAfter,o.before(s),i,!0):a(e,r,o.node(s),o.before(s),i,!1)))return!0;return!1}function Do(e,t,r){e.focused||e.focus();let n=e.state.tr.setSelection(t);r=="pointer"&&n.setMeta("pointer",!0),e.dispatch(n)}function Z_(e,t){if(t==-1)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return n&&n.isAtom&&ht.isSelectable(n)?(Do(e,new ht(r),"pointer"),!0):!1}function Q_(e,t){if(t==-1)return!1;let r=e.state.selection,n,i;r instanceof ht&&(n=r.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(ht.isSelectable(a)){n&&r.$from.depth>0&&s>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?i=o.before(r.$from.depth):i=o.before(s);break}}return i!=null?(Do(e,ht.create(e.state.doc,i),"pointer"),!0):!1}function tk(e,t,r,n,i){return Gf(e,"handleClickOn",t,r,n)||e.someProp("handleClick",o=>o(e,t,n))||(i?Q_(e,r):Z_(e,r))}function ek(e,t,r,n){return Gf(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",i=>i(e,t,n))}function rk(e,t,r,n){return Gf(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",i=>i(e,t,n))||nk(e,r,n)}function nk(e,t,r){if(r.button!=0)return!1;let n=e.state.doc;if(t==-1)return n.inlineContent?(Do(e,dt.create(n,0,n.content.size),"pointer"),!0):!1;let i=n.resolve(t);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Do(e,dt.create(n,a+1,a+1+s.content.size),"pointer");else if(ht.isSelectable(s))Do(e,ht.create(n,a),"pointer");else continue;return!0}}function qf(e){return dl(e)}var Fv=Cr?"metaKey":"ctrlKey";rr.mousedown=(e,t)=>{let r=t;e.input.shiftKey=r.shiftKey;let n=qf(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&J_(r,e.input.lastClick)&&!r[Fv]&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:o};let s=e.posAtCoords(bl(r));s&&(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Lf(e,s,r,!!n)):(o=="doubleClick"?ek:rk)(e,s.pos,s.inside,r)?r.preventDefault():Zn(e,"pointer"))};var Lf=class{constructor(t,r,n,i){this.view=t,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[Fv],this.allowDefault=n.shiftKey;let o,s;if(r.inside>-1)o=t.state.doc.nodeAt(r.inside),s=r.inside;else{let c=t.state.doc.resolve(r.pos);o=c.parent,s=c.depth?c.before():0}let a=i?null:n.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:u}=t.state;(n.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof ht&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&jr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zn(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Pn(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(bl(t))),this.updateAllowDefault(t),this.allowDefault||!r?Zn(this.view,"pointer"):tk(this.view,r.pos,r.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||er&&this.mightDrag&&!this.mightDrag.node.isAtom||Xe&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Do(this.view,pt.near(this.view.state.doc.resolve(r.pos)),"pointer"),t.preventDefault()):Zn(this.view,"pointer")}move(t){this.updateAllowDefault(t),Zn(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}};rr.touchstart=e=>{e.input.lastTouch=Date.now(),qf(e),Zn(e,"pointer")};rr.touchmove=e=>{e.input.lastTouch=Date.now(),Zn(e,"pointer")};rr.contextmenu=e=>qf(e);function Hv(e,t){return e.composing?!0:er&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}var ik=Wr?5e3:-1;nr.compositionstart=nr.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||r.marks(),dl(e,!0),e.markCursor=null;else if(dl(e),jr&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=e.domSelectionRange();for(let i=n.focusNode,o=n.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){e.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}e.input.composing=!0}$v(e,ik)};nr.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,$v(e,20))};function $v(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>dl(e),t))}function Vv(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=ok());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ok(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function dl(e,t=!1){if(!(Wr&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Vv(e),t||e.docView&&e.docView.dirty){let r=Vf(e);return r&&!r.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(r)):e.updateState(e.state),!0}return!1}}function sk(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}var zs=fr&&Qn<15||Ao&&l_<604;rr.copy=nr.cut=(e,t)=>{let r=t,n=e.state.selection,i=r.type=="cut";if(n.empty)return;let o=zs?null:r.clipboardData,s=n.content(),{dom:a,text:l}=Rv(e,s);o?(r.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):sk(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ak(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function lk(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Fs(e,n.value,null,i,t):Fs(e,n.textContent,n.innerHTML,i,t)},50)}function Fs(e,t,r,n,i){let o=Pv(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,o||Q.empty)))return!0;if(!o)return!1;let s=ak(o),a=s?e.state.tr.replaceSelectionWith(s,n):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Wv(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}nr.paste=(e,t)=>{let r=t;if(e.composing&&!Wr)return;let n=zs?null:r.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;n&&Fs(e,Wv(n),n.getData("text/html"),i,r)?r.preventDefault():lk(e,r)};var pl=class{constructor(t,r,n){this.slice=t,this.move=r,this.node=n}},jv=Cr?"altKey":"ctrlKey";rr.dragstart=(e,t)=>{let r=t,n=e.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=e.state.selection,o=i.empty?null:e.posAtCoords(bl(r)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof ht?i.to-1:i.to))){if(n&&n.mightDrag)s=ht.create(e.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let c=e.docView.nearestDesc(r.target,!0);c&&c.node.type.spec.draggable&&c!=e.docView&&(s=ht.create(e.state.doc,c.posBefore))}}let a=(s||e.state.selection).content(),{dom:l,text:u}=Rv(e,a);r.dataTransfer.clearData(),r.dataTransfer.setData(zs?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",zs||r.dataTransfer.setData("text/plain",u),e.dragging=new pl(a,!r[jv],s)};rr.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};nr.dragover=nr.dragenter=(e,t)=>t.preventDefault();nr.drop=(e,t)=>{let r=t,n=e.dragging;if(e.dragging=null,!r.dataTransfer)return;let i=e.posAtCoords(bl(r));if(!i)return;let o=e.state.doc.resolve(i.pos),s=n&&n.slice;s?e.someProp("transformPasted",h=>{s=h(s,e)}):s=Pv(e,Wv(r.dataTransfer),zs?null:r.dataTransfer.getData("text/html"),!1,o);let a=!!(n&&!r[jv]);if(e.someProp("handleDrop",h=>h(e,r,s||Q.empty,a))){r.preventDefault();return}if(!s)return;r.preventDefault();let l=s?il(e.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let u=e.state.tr;if(a){let{node:h}=n;h?h.replace(u):u.deleteSelection()}let c=u.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(d))return;let p=u.doc.resolve(c);if(f&&ht.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new ht(p));else{let h=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((m,g,v,b)=>h=b),u.setSelection(Wf(e,p,u.doc.resolve(h)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))};rr.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Pn(e)},20))};rr.blur=(e,t)=>{let r=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};rr.beforeinput=(e,t)=>{if(Xe&&Wr&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,zi(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in nr)rr[e]=nr[e];function Hs(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}var hl=class e{constructor(t,r){this.toDOM=t,this.spec=r||Vi,this.side=this.spec.side||0}map(t,r,n,i){let{pos:o,deleted:s}=t.mapResult(r.from+i,this.side<0?-1:1);return s?null:new Le(o-n,o-n,this)}valid(){return!0}eq(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Hs(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}},$i=class e{constructor(t,r){this.attrs=t,this.spec=r||Vi}map(t,r,n,i){let o=t.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,s=t.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return o>=s?null:new Le(o,s,this)}valid(t,r){return r.from<r.to}eq(t){return this==t||t instanceof e&&Hs(this.attrs,t.attrs)&&Hs(this.spec,t.spec)}static is(t){return t.type instanceof e}destroy(){}},Bf=class e{constructor(t,r){this.attrs=t,this.spec=r||Vi}map(t,r,n,i){let o=t.mapResult(r.from+i,1);if(o.deleted)return null;let s=t.mapResult(r.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Le(o.pos-n,s.pos-n,this)}valid(t,r){let{index:n,offset:i}=t.content.findIndex(r.from),o;return i==r.from&&!(o=t.child(n)).isText&&i+o.nodeSize==r.to}eq(t){return this==t||t instanceof e&&Hs(this.attrs,t.attrs)&&Hs(this.spec,t.spec)}destroy(){}},Le=class e{constructor(t,r,n){this.from=t,this.to=r,this.type=n}copy(t,r){return new e(t,r,this.type)}eq(t,r=0){return this.type.eq(t.type)&&this.from+r==t.from&&this.to+r==t.to}map(t,r,n){return this.type.map(t,this,r,n)}static widget(t,r,n){return new e(t,t,new hl(r,n))}static inline(t,r,n,i){return new e(t,r,new $i(n,i))}static node(t,r,n,i){return new e(t,r,new Bf(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof $i}get widget(){return this.type instanceof hl}},Oo=[],Vi={},de=class e{constructor(t,r){this.local=t.length?t:Oo,this.children=r.length?r:Oo}static create(t,r){return r.length?gl(r,t,0,Vi):Ke}find(t,r,n){let i=[];return this.findInner(t??0,r??1e9,i,0,n),i}findInner(t,r,n,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=r&&a.to>=t&&(!o||o(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<r&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,r-a,n,i+a,o)}}map(t,r,n){return this==Ke||t.maps.length==0?this:this.mapInner(t,r,0,0,n||Vi)}mapInner(t,r,n,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,n,i);l&&l.type.valid(r,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?uk(this.children,s||[],t,r,n,i,o):s?new e(s.sort(Wi),Oo):Ke}add(t,r){return r.length?this==Ke?e.create(t,r):this.addInner(t,r,0):this}addInner(t,r,n){let i,o=0;t.forEach((a,l)=>{let u=l+n,c;if(c=qv(r,a,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,c,u+1):i.splice(o,0,l,l+a.nodeSize,gl(c,a,u+1,Vi)),o+=3}});let s=Gv(o?Uv(r):r,-n);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new e(s.length?this.local.concat(s).sort(Wi):this.local,i||this.children)}remove(t){return t.length==0||this==Ke?this:this.removeInner(t,0)}removeInner(t,r){let n=this.children,i=this.local;for(let o=0;o<n.length;o+=3){let s,a=n[o]+r,l=n[o+1]+r;for(let c=0,f;c<t.length;c++)(f=t[c])&&f.from>a&&f.to<l&&(t[c]=null,(s||(s=[])).push(f));if(!s)continue;n==this.children&&(n=this.children.slice());let u=n[o+2].removeInner(s,a+1);u!=Ke?n[o+2]=u:(n.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<t.length;o++)if(s=t[o])for(let a=0;a<i.length;a++)i[a].eq(s,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new e(i,n):Ke}forChild(t,r){if(this==Ke)return this;if(r.isLeaf)return e.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(n=this.children[a+2]);break}let o=t+1,s=o+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof $i){let u=Math.max(o,l.from)-o,c=Math.min(s,l.to)-o;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new e(i.sort(Wi),Oo);return n?new ml([a,n]):a}return n||Ke}eq(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(t.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}locals(t){return Uf(this.localsInner(t))}localsInner(t){if(this==Ke)return Oo;if(t.inlineContent||!this.local.some($i.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof $i||r.push(this.local[n]);return r}};de.empty=new de([],[]);de.removeOverlap=Uf;var Ke=de.empty,ml=class e{constructor(t){this.members=t}map(t,r){let n=this.members.map(i=>i.map(t,r,Vi));return e.from(n)}forChild(t,r){if(r.isLeaf)return de.empty;let n=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(t,r);o!=Ke&&(o instanceof e?n=n.concat(o.members):n.push(o))}return e.from(n)}eq(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(t.members[r]))return!1;return!0}locals(t){let r,n=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(t);if(o.length)if(!r)r=o;else{n&&(r=r.slice(),n=!1);for(let s=0;s<o.length;s++)r.push(o[s])}}return r?Uf(n?r:r.sort(Wi)):Oo}static from(t){switch(t.length){case 0:return Ke;case 1:return t[0];default:return new e(t.every(r=>r instanceof de)?t:t.reduce((r,n)=>r.concat(n instanceof de?n:n.members),[]))}}};function uk(e,t,r,n,i,o,s){let a=e.slice();for(let u=0,c=o;u<r.maps.length;u++){let f=0;r.maps[u].forEach((d,p,h,m)=>{let g=m-h-(p-d);for(let v=0;v<a.length;v+=3){let b=a[v+1];if(b<0||d>b+c-f)continue;let w=a[v]+c-f;p>=w?a[v+1]=d<=w?-2:-1:d>=c&&g&&(a[v]+=g,a[v+1]+=g)}f+=g}),c=r.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=r.map(e[u]+o),f=c-i;if(f<0||f>=n.content.size){l=!0;continue}let d=r.map(e[u+1]+o,-1),p=d-i,{index:h,offset:m}=n.content.findIndex(f),g=n.maybeChild(h);if(g&&m==f&&m+g.nodeSize==p){let v=a[u+2].mapInner(r,g,c+1,e[u]+o+1,s);v!=Ke?(a[u]=f,a[u+1]=p,a[u+2]=v):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=ck(a,e,t,r,i,o,s),c=gl(u,n,0,s);t=c.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let p=c.children[f];for(;d<a.length&&a[d]<p;)d+=3;a.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new de(t.sort(Wi),a)}function Gv(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new Le(i.from+t,i.to+t,i.type))}return r}function ck(e,t,r,n,i,o,s){function a(l,u){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(n,i,u);f?r.push(f):s.onRemove&&s.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+o+1);return r}function qv(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let o=0,s;o<e.length;o++)(s=e[o])&&s.from>r&&s.to<n&&((i||(i=[])).push(s),e[o]=null);return i}function Uv(e){let t=[];for(let r=0;r<e.length;r++)e[r]!=null&&t.push(e[r]);return t}function gl(e,t,r,n){let i=[],o=!1;t.forEach((a,l)=>{let u=qv(e,a,l+r);if(u){o=!0;let c=gl(u,a,r+l+1,n);c!=Ke&&i.push(l,l+a.nodeSize,c)}});let s=Gv(o?Uv(e):e,-r).sort(Wi);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new de(s,i):Ke}function Wi(e,t){return e.from-t.from||e.to-t.to}function Uf(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let o=t[i];if(o.from==n.from){o.to!=n.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,n.to),lv(t,i+1,o.copy(n.to,o.to)));continue}else{o.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,o.from),lv(t,i,n.copy(o.from,n.to)));break}}}return t}function lv(e,t,r){for(;t<e.length&&Wi(r,e[t])>0;)t++;e.splice(t,0,r)}function xf(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=Ke&&t.push(n)}),e.cursorWrapper&&t.push(de.create(e.state.doc,[e.cursorWrapper.deco])),ml.from(t)}var fk={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dk=fr&&Qn<=11,zf=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}},Ff=class{constructor(t,r){this.view=t,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new zf,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);fr&&Qn<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),dk&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fk)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(tv(this.view)){if(this.suppressingSelectionUpdates)return Pn(this.view);if(fr&&Qn<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ji(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let r=new Set,n;for(let o=t.focusNode;o;o=Bs(o))r.add(o);for(let o=t.anchorNode;o;o=Bs(o))if(r.has(o)){n=o;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&tv(t)&&!this.ignoreSelectionChange(n),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let c=0;c<r.length;c++){let f=this.registerMutation(r[c],l);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(jr&&l.length>1){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let f=c[0],d=c[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}let u=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&yl(n)&&(u=Vf(t))&&u.eq(pt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Pn(t),this.currentSelection.set(n),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),pk(t)),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Pn(t),this.currentSelection.set(n))}registerMutation(t,r){if(r.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(n==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++)r.push(t.addedNodes[c]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let i=t.previousSibling,o=t.nextSibling;if(fr&&Qn<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=t.addedNodes[c];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==t.target?tr(i)+1:0,a=n.localPosFromDOM(t.target,s,-1),l=o&&o.parentNode==t.target?tr(o):t.target.childNodes.length,u=n.localPosFromDOM(t.target,l,1);return{from:a,to:u}}else return t.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}},uv=new WeakMap,cv=!1;function pk(e){if(!uv.has(e)&&(uv.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=jr,cv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cv=!0}}function hk(e){let t;function r(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0);let n=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return ji(a.node,a.offset,o,s)&&([n,i,o,s]=[o,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:s}}function mk(e,t,r){let{node:n,fromOffset:i,toOffset:o,from:s,to:a}=e.docView.parseRange(t,r),l=e.domSelectionRange(),u,c=l.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],yl(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Xe&&e.input.lastKeyCode===8)for(let g=o;g>i;g--){let v=n.childNodes[g-1],b=v.pmViewDesc;if(v.nodeName=="BR"&&!b){o=g;break}if(!b||b.size)break}let f=e.state.doc,d=e.someProp("domParser")||Ii.fromSchema(e.state.schema),p=f.resolve(s),h=null,m=d.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:gk,context:p});if(u&&u[0].pos!=null){let g=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=g),h={anchor:g+s,head:v+s}}return{doc:m,sel:h,from:s,to:a}}function gk(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(er&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(e.parentNode.lastChild==e||er&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}var vk=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function yk(e,t,r,n,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let _=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,E=Vf(e,_);if(E&&!e.state.selection.eq(E)){if(Xe&&Wr&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",O=>O(e,zi(13,"Enter"))))return;let A=e.state.tr.setSelection(E);_=="pointer"?A.setMeta("pointer",!0):_=="key"&&A.scrollIntoView(),o&&A.setMeta("composition",o),e.dispatch(A)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(r);t=s.before(a+1),r=e.state.doc.resolve(r).after(a+1);let l=e.state.selection,u=mk(e,t,r),c=e.state.doc,f=c.slice(u.from,u.to),d,p;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,p="end"):(d=e.state.selection.from,p="start"),e.input.lastKeyCode=null;let h=Sk(f.content,u.doc.content,u.from,d,p);if((Ao&&e.input.lastIOSEnter>Date.now()-225||Wr)&&i.some(_=>_.nodeType==1&&!vk.test(_.nodeName))&&(!h||h.endA>=h.endB)&&e.someProp("handleKeyDown",_=>_(e,zi(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!h)if(n&&l instanceof dt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))h={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let _=fv(e,e.state.doc,u.sel);if(_&&!_.eq(e.state.selection)){let E=e.state.tr.setSelection(_);o&&E.setMeta("composition",o),e.dispatch(E)}}return}if(Xe&&e.cursorWrapper&&u.sel&&u.sel.anchor==e.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let _=h.endB-h.start;u.sel={anchor:u.sel.anchor+_,head:u.sel.anchor+_}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&h.start==h.endB&&e.state.selection instanceof dt&&(h.start>e.state.selection.from&&h.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?h.start=e.state.selection.from:h.endA<e.state.selection.to&&h.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(h.endB+=e.state.selection.to-h.endA,h.endA=e.state.selection.to)),fr&&Qn<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>u.from&&u.doc.textBetween(h.start-u.from-1,h.start-u.from+1)==" \xA0"&&(h.start--,h.endA--,h.endB--);let m=u.doc.resolveNoCache(h.start-u.from),g=u.doc.resolveNoCache(h.endB-u.from),v=c.resolve(h.start),b=m.sameParent(g)&&m.parent.inlineContent&&v.end()>=h.endA,w;if((Ao&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!b&&m.pos<u.doc.content.size&&!m.sameParent(g)&&(w=pt.findFrom(u.doc.resolve(m.pos+1),1,!0))&&w.head==g.pos)&&e.someProp("handleKeyDown",_=>_(e,zi(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>h.start&&xk(c,h.start,h.endA,m,g)&&e.someProp("handleKeyDown",_=>_(e,zi(8,"Backspace")))){Wr&&Xe&&e.domObserver.suppressSelectionUpdates();return}Xe&&Wr&&h.endB==h.start&&(e.input.lastAndroidDelete=Date.now()),Wr&&!b&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==h.endA&&(h.endB-=2,g=u.doc.resolveNoCache(h.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(_){return _(e,zi(13,"Enter"))})},20));let y=h.start,S=h.endA,x,C,k;if(b){if(m.pos==g.pos)fr&&Qn<=11&&m.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Pn(e),20)),x=e.state.tr.delete(y,S),C=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(k=bk(m.parent.content.cut(m.parentOffset,g.parentOffset),v.parent.content.cut(v.parentOffset,h.endA-v.start()))))x=e.state.tr,k.type=="add"?x.addMark(y,S,k.mark):x.removeMark(y,S,k.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let _=m.parent.textBetween(m.parentOffset,g.parentOffset);if(e.someProp("handleTextInput",E=>E(e,y,S,_)))return;x=e.state.tr.insertText(_,y,S)}}if(x||(x=e.state.tr.replace(y,S,u.doc.slice(h.start-u.from,h.endB-u.from))),u.sel){let _=fv(e,x.doc,u.sel);_&&!(Xe&&Wr&&e.composing&&_.empty&&(h.start!=h.endB||e.input.lastAndroidDelete<Date.now()-100)&&(_.head==y||_.head==x.mapping.map(S)-1)||fr&&_.empty&&_.head==y)&&x.setSelection(_)}C&&x.ensureMarks(C),o&&x.setMeta("composition",o),e.dispatch(x.scrollIntoView())}function fv(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:Wf(e,t.resolve(r.anchor),t.resolve(r.head))}function bk(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,i=r,o=n,s,a,l;for(let c=0;c<n.length;c++)i=n[c].removeFromSet(i);for(let c=0;c<r.length;c++)o=r[c].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<t.childCount;c++)u.push(l(t.child(c)));if($.from(u).eq(e))return{mark:a,type:s}}function xk(e,t,r,n,i){if(!n.parent.isTextblock||r-t<=i.pos-n.pos||Sf(n,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(Sf(o,!0,!0));return!s.parent.isTextblock||s.pos>r||Sf(s,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function Sf(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let o=e.node(n).maybeChild(e.indexAfter(n));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Sk(e,t,r,n,i){let o=e.findDiffStart(t,r);if(o==null)return null;let{a:s,b:a}=e.findDiffEnd(t,r+e.size,r+t.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));n-=s+l-o}if(s<o&&e.size<t.size){let l=n<=o&&n>=s?o-n:0;o-=l,o&&o<t.size&&dv(t.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=n<=o&&n>=a?o-n:0;o-=l,o&&o<e.size&&dv(e.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function dv(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}var vl=class{constructor(t,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Nf,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(vv),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=mv(this),hv(this),this.nodeViews=gv(this),this.docView=Yg(this.state.doc,pv(this),xf(this),this.dom,this),this.domObserver=new Ff(this,(n,i,o,s)=>yk(this,n,i,o,s)),this.domObserver.start(),U_(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let r in t)this._props[r]=t[r];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&If(this);let r=this._props;this._props=t,t.plugins&&(t.plugins.forEach(vv),this.directPlugins=t.plugins),this.updateStateInner(t.state,r)}setProps(t){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in t)r[n]=t[n];this.update(r)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,r){var n;let i=this.state,o=!1,s=!1;t.storedMarks&&this.composing&&(Vv(this),s=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=gv(this);Ck(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&If(this),this.editable=mv(this),hv(this);let l=xf(this),u=pv(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(t.doc,u,l);(f||!t.selection.eq(i.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&f_(this);if(s){this.domObserver.stop();let p=f&&(fr||Xe)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&wk(i.selection,t.selection);if(f){let h=Xe?this.trackWrites=this.domSelectionRange().focusNode:null;(o||!this.docView.update(t.doc,u,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Yg(t.doc,u,l,this.dom,this)),h&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&P_(this))?Pn(this,p):(Ov(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&d_(d)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof ht){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&Vg(this,r.getBoundingClientRect(),t)}else Vg(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,t)}}updateDraggedNode(t,r){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let o=n.from+(this.state.doc.content.size-r.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(i=o)}this.dragging=new pl(t.slice,t.move,i<0?void 0:ht.create(this.state.doc,i))}someProp(t,r){let n=this._props&&this._props[t],i;if(n!=null&&(i=r?r(n):n))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[t];if(a!=null&&(i=r?r(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[t];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(fr){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&p_(this.dom),Pn(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return t||document}updateRoot(){this._root=null}posAtCoords(t){return y_(this,t)}coordsAtPos(t,r=1){return Cv(this,t,r)}domAtPos(t,r=0){return this.docView.domFromPos(t,r)}nodeDOM(t){let r=this.docView.descAt(t);return r?r.nodeDOM:null}posAtDOM(t,r,n=-1){let i=this.docView.posFromDOM(t,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,r){return C_(this,r||this.state,t)}pasteHTML(t,r){return Fs(this,"",t,!1,r||new ClipboardEvent("paste"))}pasteText(t,r){return Fs(this,t,null,!0,r||new ClipboardEvent("paste"))}destroy(){this.docView&&(Y_(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],xf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(t){return X_(this,t)}dispatch(t){let r=this._props.dispatchTransaction;r?r.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return er&&this.root.nodeType===11&&i_(this.dom.ownerDocument)==this.dom?hk(this):this.domSelection()}domSelection(){return this.root.getSelection()}};function pv(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(e.state)),r)for(let n in r)n=="class"?t.class+=" "+r[n]:n=="style"?t.style=(t.style?t.style+";":"")+r[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(r[n]))}),t.translate||(t.translate="no"),[Le.node(0,e.state.doc.content.size,t)]}function hv(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Le.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function mv(e){return!e.someProp("editable",t=>t(e.state)===!1)}function wk(e,t){let r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function gv(e){let t=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=n[i])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function Ck(e,t){let r=0,n=0;for(let i in e){if(e[i]!=t[i])return!0;r++}for(let i in t)n++;return r!=n}function vv(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Nn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Sl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_k=typeof navigator<"u"&&/Mac/.test(navigator.platform),kk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(ke=0;ke<10;ke++)Nn[48+ke]=Nn[96+ke]=String(ke);var ke;for(ke=1;ke<=24;ke++)Nn[ke+111]="F"+ke;var ke;for(ke=65;ke<=90;ke++)Nn[ke]=String.fromCharCode(ke+32),Sl[ke]=String.fromCharCode(ke);var ke;for(xl in Nn)Sl.hasOwnProperty(xl)||(Sl[xl]=Nn[xl]);var xl;function Yv(e){var t=_k&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||kk&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!t&&e.key||(e.shiftKey?Sl:Nn)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}var Ek=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Mk(e){let t=e.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,i,o,s;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Ek?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),s&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Tk(e){let t=Object.create(null);for(let r in e)t[Mk(r)]=e[r];return t}function Yf(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function Kv(e){return new Ht({props:{handleKeyDown:Vs(e)}})}function Vs(e){let t=Tk(e);return function(r,n){let i=Yv(n),o,s=t[Yf(i,n)];if(s&&s(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=t[Yf(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=Nn[n.keyCode])&&o!=i){let a=t[Yf(o,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var wl=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Jv(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("backward",e):r.parentOffset>0)?null:r}var Xf=(e,t,r)=>{let n=Jv(e,r);if(!n)return!1;let i=Zf(n);if(!i){let s=n.blockRange(),a=s&&Dn(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&s0(e,i,t))return!0;if(n.parent.content.size==0&&(Po(o,"end")||ht.isSelectable(o))){let s=As(e.doc,n.before(),n.after(),Q.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=e.tr.step(s);a.setSelection(Po(o,"end")?pt.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):ht.create(a.doc,i.pos-o.nodeSize)),t(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Zv=(e,t,r)=>{let n=Jv(e,r);if(!n)return!1;let i=Zf(n);return i?t0(e,i,t):!1},Qv=(e,t,r)=>{let n=e0(e,r);if(!n)return!1;let i=ed(n);return i?t0(e,i,t):!1};function t0(e,t,r){let n=t.nodeBefore,i=n,o=t.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=t.nodeAfter,a=s,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=As(e.doc,o,l,Q.empty);if(!u||u.from!=o||u instanceof Ye&&u.slice.size>=l-o)return!1;if(r){let c=e.tr.step(u);c.setSelection(dt.create(c.doc,o)),r(c.scrollIntoView())}return!0}function Po(e,t,r=!1){for(let n=e;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}var Jf=(e,t,r)=>{let{$head:n,empty:i}=e.selection,o=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;o=Zf(n)}let s=o&&o.nodeBefore;return!s||!ht.isSelectable(s)?!1:(t&&t(e.tr.setSelection(ht.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Zf(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function e0(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}var Qf=(e,t,r)=>{let n=e0(e,r);if(!n)return!1;let i=ed(n);if(!i)return!1;let o=i.nodeAfter;if(s0(e,i,t))return!0;if(n.parent.content.size==0&&(Po(o,"start")||ht.isSelectable(o))){let s=As(e.doc,n.before(),n.after(),Q.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=e.tr.step(s);a.setSelection(Po(o,"start")?pt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ht.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},td=(e,t,r)=>{let{$head:n,empty:i}=e.selection,o=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;o=ed(n)}let s=o&&o.nodeAfter;return!s||!ht.isSelectable(s)?!1:(t&&t(e.tr.setSelection(ht.create(e.doc,o.pos)).scrollIntoView()),!0)};function ed(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}var r0=(e,t)=>{let r=e.selection,n=r instanceof ht,i;if(n){if(r.node.isTextblock||!Vr(e.doc,r.from))return!1;i=r.from}else if(i=ko(e.doc,r.from,-1),i==null)return!1;if(t){let o=e.tr.join(i);n&&o.setSelection(ht.create(o.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},n0=(e,t)=>{let r=e.selection,n;if(r instanceof ht){if(r.node.isTextblock||!Vr(e.doc,r.to))return!1;n=r.to}else if(n=ko(e.doc,r.to,1),n==null)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},i0=(e,t)=>{let{$from:r,$to:n}=e.selection,i=r.blockRange(n),o=i&&Dn(i);return o==null?!1:(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},rd=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function nd(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}var id=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),o=r.indexAfter(-1),s=nd(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let a=r.after(),l=e.tr.replaceWith(a,a,s.createAndFill());l.setSelection(pt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},od=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof br||n.parent.inlineContent||i.parent.inlineContent)return!1;let o=nd(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let s=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=e.tr.insert(s,o.createAndFill());a.setSelection(dt.create(a.doc,s+1)),t(a.scrollIntoView())}return!0},sd=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let o=r.before();if(wr(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let n=r.blockRange(),i=n&&Dn(n);return i==null?!1:(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)};function Ok(e){return(t,r)=>{let{$from:n,$to:i}=t.selection;if(t.selection instanceof ht&&t.selection.node.isBlock)return!n.parentOffset||!wr(t.doc,n.pos)?!1:(r&&r(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(r){let o=i.parentOffset==i.parent.content.size,s=t.tr;(t.selection instanceof dt||t.selection instanceof br)&&s.deleteSelection();let a=n.depth==0?null:nd(n.node(-1).contentMatchAt(n.indexAfter(-1))),l=e&&e(i.parent,o),u=l?[l]:o&&a?[{type:a}]:void 0,c=wr(s.doc,s.mapping.map(n.pos),1,u);if(!u&&!c&&wr(s.doc,s.mapping.map(n.pos),1,a?[{type:a}]:void 0)&&(a&&(u=[{type:a}]),c=!0),c&&(s.split(s.mapping.map(n.pos),1,u),!o&&!n.parentOffset&&n.parent.type!=a)){let f=s.mapping.map(n.before()),d=s.doc.resolve(f);a&&n.node(-1).canReplaceWith(d.index(),d.index()+1,a)&&s.setNodeMarkup(s.mapping.map(n.before()),a)}r(s.scrollIntoView())}return!0}}var Dk=Ok();var o0=(e,t)=>{let{$from:r,to:n}=e.selection,i,o=r.sharedDepth(n);return o==0?!1:(i=r.before(o),t&&t(e.tr.setSelection(ht.create(e.doc,i))),!0)},Ak=(e,t)=>(t&&t(e.tr.setSelection(new br(e.doc))),!0);function Rk(e,t,r){let n=t.nodeBefore,i=t.nodeAfter,o=t.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&t.parent.canReplace(o-1,o)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||Vr(e.doc,t.pos))?!1:(r&&r(e.tr.clearIncompatible(t.pos,n.type,n.contentMatchAt(n.childCount)).join(t.pos).scrollIntoView()),!0)}function s0(e,t,r){let n=t.nodeBefore,i=t.nodeAfter,o,s;if(n.type.spec.isolating||i.type.spec.isolating)return!1;if(Rk(e,t,r))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(o=(s=n.contentMatchAt(n.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(r){let f=t.pos+i.nodeSize,d=$.empty;for(let m=o.length-1;m>=0;m--)d=$.from(o[m].create(null,d));d=$.from(n.copy(d));let p=e.tr.step(new _e(t.pos-1,f,t.pos,f,new Q(d,1,0),o.length,!0)),h=f+2*o.length;Vr(p.doc,h)&&p.join(h),r(p.scrollIntoView())}return!0}let l=pt.findFrom(t,1),u=l&&l.$from.blockRange(l.$to),c=u&&Dn(u);if(c!=null&&c>=t.depth)return r&&r(e.tr.lift(u,c).scrollIntoView()),!0;if(a&&Po(i,"start",!0)&&Po(n,"end")){let f=n,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let p=i,h=1;for(;!p.isTextblock;p=p.firstChild)h++;if(f.canReplace(f.childCount,f.childCount,p.content)){if(r){let m=$.empty;for(let v=d.length-1;v>=0;v--)m=$.from(d[v].copy(m));let g=e.tr.step(new _e(t.pos-d.length,t.pos+i.nodeSize,t.pos+h,t.pos+i.nodeSize-h,new Q(m,d.length,0),0,!0));r(g.scrollIntoView())}return!0}}return!1}function a0(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(r&&r(t.tr.setSelection(dt.create(t.doc,e<0?i.start(o):i.end(o)))),!0):!1}}var ad=a0(-1),ld=a0(1);function l0(e,t=null){return function(r,n){let{$from:i,$to:o}=r.selection,s=i.blockRange(o),a=s&&_o(s,e,t);return a?(n&&n(r.tr.wrap(s,a).scrollIntoView()),!0):!1}}function ud(e,t=null){return function(r,n){let i=!1;for(let o=0;o<r.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=r.selection.ranges[o];r.doc.nodesBetween(s,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let c=r.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,e)}})}if(!i)return!1;if(n){let o=r.tr;for(let s=0;s<r.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[s];o.setBlockType(a,l,e,t)}n(o.scrollIntoView())}return!0}}function cd(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}var Kf=cd(wl,Xf,Jf),Xv=cd(wl,Qf,td),ri={Enter:cd(rd,od,sd,Dk),"Mod-Enter":id,Backspace:Kf,"Mod-Backspace":Kf,"Shift-Backspace":Kf,Delete:Xv,"Mod-Delete":Xv,"Mod-a":Ak},Pk={"Ctrl-h":ri.Backspace,"Alt-Backspace":ri["Mod-Backspace"],"Ctrl-d":ri.Delete,"Ctrl-Alt-Backspace":ri["Mod-Delete"],"Alt-Delete":ri["Mod-Delete"],"Alt-d":ri["Mod-Delete"],"Ctrl-a":ad,"Ctrl-e":ld};for(let e in ri)Pk[e]=ri[e];var I3=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;function u0(e,t=null){return function(r,n){let{$from:i,$to:o}=r.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(e)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=r.doc.resolve(s.start-2);l=new Pi(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new Pi(i,r.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let u=_o(l,e,t,s);return u?(n&&n(Nk(r.tr,s,u,a,e).scrollIntoView()),!0):!1}}function Nk(e,t,r,n,i){let o=$.empty;for(let c=r.length-1;c>=0;c--)o=$.from(r[c].type.create(r[c].attrs,o));e.step(new _e(t.start-(n?2:0),t.end,t.start,t.end,new Q(o,0,0),r.length,!0));let s=0;for(let c=0;c<r.length;c++)r[c].type==i&&(s=c+1);let a=r.length-s,l=t.start+r.length-(n?2:0),u=t.parent;for(let c=t.startIndex,f=t.endIndex,d=!0;c<f;c++,d=!1)!d&&wr(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return e}function c0(e){return function(t,r){let{$from:n,$to:i}=t.selection,o=n.blockRange(i,s=>s.childCount>0&&s.firstChild.type==e);return o?r?n.node(o.depth-1).type==e?Ik(t,r,e,o):Lk(t,r,o):!0:!1}}function Ik(e,t,r,n){let i=e.tr,o=n.end,s=n.$to.end(n.depth);o<s&&(i.step(new _e(o-1,s,o,s,new Q($.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Pi(i.doc.resolve(n.$from.pos),i.doc.resolve(s),n.depth));let a=Dn(n);if(a==null)return!1;i.lift(n,a);let l=i.mapping.map(o,-1)-1;return Vr(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}function Lk(e,t,r){let n=e.tr,i=r.parent;for(let p=r.end,h=r.endIndex-1,m=r.startIndex;h>m;h--)p-=i.child(h).nodeSize,n.delete(p-1,p+1);let o=n.doc.resolve(r.start),s=o.nodeAfter;if(n.mapping.map(r.end)!=r.start+o.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(a?0:1),c+1,s.content.append(l?$.empty:$.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return n.step(new _e(f-(a?1:0),d+(l?1:0),f+1,d-1,new Q((a?$.empty:$.from(i.copy($.empty))).append(l?$.empty:$.from(i.copy($.empty))),a?0:1,l?0:1),a?0:1)),t(n.scrollIntoView()),!0}function f0(e){return function(t,r){let{$from:n,$to:i}=t.selection,o=n.blockRange(i,u=>u.childCount>0&&u.firstChild.type==e);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=e)return!1;if(r){let u=l.lastChild&&l.lastChild.type==a.type,c=$.from(u?e.create():null),f=new Q($.from(e.create(null,$.from(a.type.create(null,c)))),u?3:1,0),d=o.start,p=o.end;r(t.tr.step(new _e(d-(u?3:1),p,d,p,f,1,!0)).scrollIntoView())}return!0}}function Tl(e){let{state:t,transaction:r}=e,{selection:n}=r,{doc:i}=r,{storedMarks:o}=r;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,o=r.storedMarks,r}}}var No=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:t,editor:r,state:n}=this,{view:i}=r,{tr:o}=n,s=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...c)=>{let f=l(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,r=!0){let{rawCommands:n,editor:i,state:o}=this,{view:s}=i,a=[],l=!!t,u=t||o.tr,c=()=>(!l&&r&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(n).map(([d,p])=>[d,(...m)=>{let g=this.buildProps(u,r),v=p(...m)(g);return a.push(v),f}])),run:c};return f}createCan(t){let{rawCommands:r,state:n}=this,i=!1,o=t||n.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(t,r=!0){let{rawCommands:n,editor:i,state:o}=this,{view:s}=i,a={tr:t,editor:i,view:s,state:Tl({state:o,transaction:t}),dispatch:r?()=>{}:void 0,chain:()=>this.createChain(t,r),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}},gd=class{constructor(){this.callbacks={}}on(t,r){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),this}emit(t,...r){let n=this.callbacks[t];return n&&n.forEach(i=>i.apply(this,r)),this}off(t,r){let n=this.callbacks[t];return n&&(r?this.callbacks[t]=n.filter(i=>i!==r):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}};function st(e,t,r){return e.config[t]===void 0&&e.parent?st(e.parent,t,r):typeof e.config[t]=="function"?e.config[t].bind({...r,parent:e.parent?st(e.parent,t,r):null}):e.config[t]}function Ol(e){let t=e.filter(i=>i.type==="extension"),r=e.filter(i=>i.type==="node"),n=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:r,markExtensions:n}}function b0(e){let t=[],{nodeExtensions:r,markExtensions:n}=Ol(e),i=[...r,...n],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{let a={name:s.name,options:s.options,storage:s.storage},l=st(s,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,p])=>{t.push({type:f,name:d,attribute:{...o,...p}})})})})}),i.forEach(s=>{let a={name:s.name,options:s.options,storage:s.storage},l=st(s,"addAttributes",a);if(!l)return;let u=l();Object.entries(u).forEach(([c,f])=>{let d={...o,...f};typeof d?.default=="function"&&(d.default=d.default()),d?.isRequired&&d?.default===void 0&&delete d.default,t.push({type:s.name,name:c,attribute:d})})}),t}function Be(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function lt(...e){return e.filter(t=>!!t).reduce((t,r)=>{let n={...t};return Object.entries(r).forEach(([i,o])=>{if(!n[i]){n[i]=o;return}if(i==="class"){let a=o?o.split(" "):[],l=n[i]?n[i].split(" "):[],u=a.filter(c=>!l.includes(c));n[i]=[...l,...u].join(" ")}else i==="style"?n[i]=[n[i],o].join("; "):n[i]=o}),n},{})}function vd(e,t){return t.filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(e.attrs)||{}:{[r.name]:e.attrs[r.name]}).reduce((r,n)=>lt(r,n),{})}function x0(e){return typeof e=="function"}function kt(e,t=void 0,...r){return x0(e)?t?e.bind(t)(...r):e(...r):e}function Bk(e={}){return Object.keys(e).length===0&&e.constructor===Object}function zk(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function d0(e,t){return e.style?e:{...e,getAttrs:r=>{let n=e.getAttrs?e.getAttrs(r):e.attrs;if(n===!1)return!1;let i=t.reduce((o,s)=>{let a=s.attribute.parseHTML?s.attribute.parseHTML(r):zk(r.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...n,...i}}}}function p0(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>t==="attrs"&&Bk(r)?!1:r!=null))}function Fk(e,t){var r;let n=b0(e),{nodeExtensions:i,markExtensions:o}=Ol(e),s=(r=i.find(u=>st(u,"topNode")))===null||r===void 0?void 0:r.name,a=Object.fromEntries(i.map(u=>{let c=n.filter(v=>v.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:t},d=e.reduce((v,b)=>{let w=st(b,"extendNodeSchema",f);return{...v,...w?w(u):{}}},{}),p=p0({...d,content:kt(st(u,"content",f)),marks:kt(st(u,"marks",f)),group:kt(st(u,"group",f)),inline:kt(st(u,"inline",f)),atom:kt(st(u,"atom",f)),selectable:kt(st(u,"selectable",f)),draggable:kt(st(u,"draggable",f)),code:kt(st(u,"code",f)),defining:kt(st(u,"defining",f)),isolating:kt(st(u,"isolating",f)),attrs:Object.fromEntries(c.map(v=>{var b;return[v.name,{default:(b=v?.attribute)===null||b===void 0?void 0:b.default}]}))}),h=kt(st(u,"parseHTML",f));h&&(p.parseDOM=h.map(v=>d0(v,c)));let m=st(u,"renderHTML",f);m&&(p.toDOM=v=>m({node:v,HTMLAttributes:vd(v,c)}));let g=st(u,"renderText",f);return g&&(p.toText=g),[u.name,p]})),l=Object.fromEntries(o.map(u=>{let c=n.filter(g=>g.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:t},d=e.reduce((g,v)=>{let b=st(v,"extendMarkSchema",f);return{...g,...b?b(u):{}}},{}),p=p0({...d,inclusive:kt(st(u,"inclusive",f)),excludes:kt(st(u,"excludes",f)),group:kt(st(u,"group",f)),spanning:kt(st(u,"spanning",f)),code:kt(st(u,"code",f)),attrs:Object.fromEntries(c.map(g=>{var v;return[g.name,{default:(v=g?.attribute)===null||v===void 0?void 0:v.default}]}))}),h=kt(st(u,"parseHTML",f));h&&(p.parseDOM=h.map(g=>d0(g,c)));let m=st(u,"renderHTML",f);return m&&(p.toDOM=g=>m({mark:g,HTMLAttributes:vd(g,c)})),[u.name,p]}));return new Ja({topNode:s,nodes:a,marks:l})}function fd(e,t){return t.nodes[e]||t.marks[e]||null}function h0(e,t){return Array.isArray(t)?t.some(r=>(typeof r=="string"?r:r.name)===e.name):t}var Hk=(e,t=500)=>{let r="",n=e.parentOffset;return e.parent.nodesBetween(Math.max(0,n-t),n,(i,o,s,a)=>{var l,u;let c=((u=(l=i.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";r+=c.slice(0,Math.max(0,n-o))}),r};function Cd(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var Io=class{constructor(t){this.find=t.find,this.handler=t.handler}},$k=(e,t)=>{if(Cd(t))return t.exec(e);let r=t(e);if(!r)return null;let n=[r.text];return n.index=r.index,n.input=e,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function dd(e){var t;let{editor:r,from:n,to:i,text:o,rules:s,plugin:a}=e,{view:l}=r;if(l.composing)return!1;let u=l.state.doc.resolve(n);if(u.parent.type.spec.code||!((t=u.nodeBefore||u.nodeAfter)===null||t===void 0)&&t.marks.find(d=>d.type.spec.code))return!1;let c=!1,f=Hk(u)+o;return s.forEach(d=>{if(c)return;let p=$k(f,d.find);if(!p)return;let h=l.state.tr,m=Tl({state:l.state,transaction:h}),g={from:n-(p[0].length-o.length),to:i},{commands:v,chain:b,can:w}=new No({editor:r,state:m});d.handler({state:m,range:g,match:p,commands:v,chain:b,can:w})===null||!h.steps.length||(h.setMeta(a,{transform:h,from:n,to:i,text:o}),l.dispatch(h),c=!0)}),c}function Vk(e){let{editor:t,rules:r}=e,n=new Ht({state:{init(){return null},apply(i,o){let s=i.getMeta(n);return s||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput(i,o,s,a){return dd({editor:t,from:o,to:s,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{let{$cursor:o}=i.state.selection;o&&dd({editor:t,from:o.pos,to:o.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;let{$cursor:s}=i.state.selection;return s?dd({editor:t,from:s.pos,to:s.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function Wk(e){return typeof e=="number"}var yd=class{constructor(t){this.find=t.find,this.handler=t.handler}},jk=(e,t,r)=>{if(Cd(t))return[...e.matchAll(t)];let n=t(e,r);return n?n.map(i=>{let o=[i.text];return o.index=i.index,o.input=e,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function Gk(e){let{editor:t,state:r,from:n,to:i,rule:o,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:u,can:c}=new No({editor:t,state:r}),f=[];return r.doc.nodesBetween(n,i,(p,h)=>{if(!p.isTextblock||p.type.spec.code)return;let m=Math.max(n,h),g=Math.min(i,h+p.content.size),v=p.textBetween(m-h,g-h,void 0,"\uFFFC");jk(v,o.find,s).forEach(w=>{if(w.index===void 0)return;let y=m+w.index+1,S=y+w[0].length,x={from:r.tr.mapping.map(y),to:r.tr.mapping.map(S)},C=o.handler({state:r,range:x,match:w,commands:l,chain:u,can:c,pasteEvent:s,dropEvent:a});f.push(C)})}),f.every(p=>p!==null)}function qk(e){let{editor:t,rules:r}=e,n=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;return r.map(u=>new Ht({view(c){let f=d=>{var p;n=!((p=c.dom.parentElement)===null||p===void 0)&&p.contains(d.target)?c.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(c,f)=>(o=n===c.dom.parentElement,a=f,!1),paste:(c,f)=>{var d;let p=(d=f.clipboardData)===null||d===void 0?void 0:d.getData("text/html");return s=f,i=!!p?.includes("data-pm-slice"),!1}}},appendTransaction:(c,f,d)=>{let p=c[0],h=p.getMeta("uiEvent")==="paste"&&!i,m=p.getMeta("uiEvent")==="drop"&&!o;if(!h&&!m)return;let g=f.doc.content.findDiffStart(d.doc.content),v=f.doc.content.findDiffEnd(d.doc.content);if(!Wk(g)||!v||g===v.b)return;let b=d.tr,w=Tl({state:d,transaction:b});if(!(!Gk({editor:t,state:w,from:Math.max(g-1,0),to:v.b-1,rule:u,pasteEvent:s,dropEvent:a})||!b.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}}))}function Uk(e){let t=e.filter((r,n)=>e.indexOf(r)!==n);return[...new Set(t)]}var bd=class e{constructor(t,r){this.splittableMarks=[],this.editor=r,this.extensions=e.resolve(t),this.schema=Fk(this.extensions,r),this.extensions.forEach(n=>{var i;this.editor.extensionStorage[n.name]=n.storage;let o={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:fd(n.name,this.schema)};n.type==="mark"&&(!((i=kt(st(n,"keepOnSplit",o)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(n.name);let s=st(n,"onBeforeCreate",o);s&&this.editor.on("beforeCreate",s);let a=st(n,"onCreate",o);a&&this.editor.on("create",a);let l=st(n,"onUpdate",o);l&&this.editor.on("update",l);let u=st(n,"onSelectionUpdate",o);u&&this.editor.on("selectionUpdate",u);let c=st(n,"onTransaction",o);c&&this.editor.on("transaction",c);let f=st(n,"onFocus",o);f&&this.editor.on("focus",f);let d=st(n,"onBlur",o);d&&this.editor.on("blur",d);let p=st(n,"onDestroy",o);p&&this.editor.on("destroy",p)})}static resolve(t){let r=e.sort(e.flatten(t)),n=Uk(r.map(i=>i.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),r}static flatten(t){return t.map(r=>{let n={name:r.name,options:r.options,storage:r.storage},i=st(r,"addExtensions",n);return i?[r,...this.flatten(i())]:r}).flat(10)}static sort(t){return t.sort((n,i)=>{let o=st(n,"priority")||100,s=st(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((t,r)=>{let n={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:fd(r.name,this.schema)},i=st(r,"addCommands",n);return i?{...t,...i()}:t},{})}get plugins(){let{editor:t}=this,r=e.sort([...this.extensions].reverse()),n=[],i=[],o=r.map(s=>{let a={name:s.name,options:s.options,storage:s.storage,editor:t,type:fd(s.name,this.schema)},l=[],u=st(s,"addKeyboardShortcuts",a),c={};if(s.type==="mark"&&s.config.exitable&&(c.ArrowRight=()=>oe.handleExit({editor:t,mark:s})),u){let m=Object.fromEntries(Object.entries(u()).map(([g,v])=>[g,()=>v({editor:t})]));c={...c,...m}}let f=Kv(c);l.push(f);let d=st(s,"addInputRules",a);h0(s,t.options.enableInputRules)&&d&&n.push(...d());let p=st(s,"addPasteRules",a);h0(s,t.options.enablePasteRules)&&p&&i.push(...p());let h=st(s,"addProseMirrorPlugins",a);if(h){let m=h();l.push(...m)}return l}).flat();return[Vk({editor:t,rules:n}),...qk({editor:t,rules:i}),...o]}get attributes(){return b0(this.extensions)}get nodeViews(){let{editor:t}=this,{nodeExtensions:r}=Ol(this.extensions);return Object.fromEntries(r.filter(n=>!!st(n,"addNodeView")).map(n=>{let i=this.attributes.filter(l=>l.type===n.name),o={name:n.name,options:n.options,storage:n.storage,editor:t,type:Be(n.name,this.schema)},s=st(n,"addNodeView",o);if(!s)return[];let a=(l,u,c,f)=>{let d=vd(l,i);return s()({editor:t,node:l,getPos:c,decorations:f,HTMLAttributes:d,extension:n})};return[n.name,a]}))}};function Yk(e){return Object.prototype.toString.call(e).slice(8,-1)}function pd(e){return Yk(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Dl(e,t){let r={...e};return pd(e)&&pd(t)&&Object.keys(t).forEach(n=>{pd(t[n])?n in e?r[n]=Dl(e[n],t[n]):Object.assign(r,{[n]:t[n]}):Object.assign(r,{[n]:t[n]})}),r}var $t=class e{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=kt(st(this,"addOptions",{name:this.name}))),this.storage=kt(st(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new e(t)}configure(t={}){let r=this.extend();return r.options=Dl(this.options,t),r.storage=kt(st(r,"addStorage",{name:r.name,options:r.options})),r}extend(t={}){let r=new e({...this.config,...t});return r.parent=this,this.child=r,r.name=t.name?t.name:r.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=kt(st(r,"addOptions",{name:r.name})),r.storage=kt(st(r,"addStorage",{name:r.name,options:r.options})),r}};function S0(e,t,r){let{from:n,to:i}=t,{blockSeparator:o=`

`,textSerializers:s={}}=r||{},a="",l=!0;return e.nodesBetween(n,i,(u,c,f,d)=>{var p;let h=s?.[u.type.name];h?(u.isBlock&&!l&&(a+=o,l=!0),f&&(a+=h({node:u,pos:c,parent:f,index:d,range:t}))):u.isText?(a+=(p=u?.text)===null||p===void 0?void 0:p.slice(Math.max(n,c)-c,i-c),l=!1):u.isBlock&&!l&&(a+=o,l=!0)}),a}function w0(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,r])=>[t,r.spec.toText]))}var Kk=$t.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Ht({key:new Wt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:r}=e,{doc:n,selection:i}=t,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),a=Math.max(...o.map(c=>c.$to.pos)),l=w0(r);return S0(n,{from:s,to:a},{textSerializers:l})}}})]}}),Xk=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(t.dom.blur(),(r=window?.getSelection())===null||r===void 0||r.removeAllRanges())}),!0),Jk=(e=!1)=>({commands:t})=>t.setContent("",e),Zk=()=>({state:e,tr:t,dispatch:r})=>{let{selection:n}=t,{ranges:i}=n;return r&&i.forEach(({$from:o,$to:s})=>{e.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;let{doc:u,mapping:c}=t,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),p=f.blockRange(d);if(!p)return;let h=Dn(p);if(a.type.isTextblock){let{defaultType:m}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(p.start,m)}(h||h===0)&&t.lift(p,h)})}),!0},Qk=e=>t=>e(t),tE=()=>({state:e,dispatch:t})=>od(e,t),eE=(e,t)=>({editor:r,tr:n})=>{let{state:i}=r,o=i.doc.slice(e.from,e.to);n.deleteRange(e.from,e.to);let s=n.mapping.map(t);return n.insert(s,o.content),n.setSelection(new dt(n.doc.resolve(s-1))),!0},rE=()=>({tr:e,dispatch:t})=>{let{selection:r}=e,n=r.$anchor.node();if(n.content.size>0)return!1;let i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===n.type){if(t){let a=i.before(o),l=i.after(o);e.delete(a,l).scrollIntoView()}return!0}return!1},nE=e=>({tr:t,state:r,dispatch:n})=>{let i=Be(e,r.schema),o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(n){let l=o.before(s),u=o.after(s);t.delete(l,u).scrollIntoView()}return!0}return!1},iE=e=>({tr:t,dispatch:r})=>{let{from:n,to:i}=e;return r&&t.delete(n,i),!0},oE=()=>({state:e,dispatch:t})=>wl(e,t),sE=()=>({commands:e})=>e.keyboardShortcut("Enter"),aE=()=>({state:e,dispatch:t})=>id(e,t);function _l(e,t,r={strict:!0}){let n=Object.keys(t);return n.length?n.every(i=>r.strict?t[i]===e[i]:Cd(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function xd(e,t,r={}){return e.find(n=>n.type===t&&_l(n.attrs,r))}function lE(e,t,r={}){return!!xd(e,t,r)}function _d(e,t,r={}){if(!e||!t)return;let n=e.parent.childAfter(e.parentOffset);if(e.parentOffset===n.offset&&n.offset!==0&&(n=e.parent.childBefore(e.parentOffset)),!n.node)return;let i=xd([...n.node.marks],t,r);if(!i)return;let o=n.index,s=e.start()+n.offset,a=o+1,l=s+n.node.nodeSize;for(xd([...n.node.marks],t,r);o>0&&i.isInSet(e.parent.child(o-1).marks);)o-=1,s-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&lE([...e.parent.child(a).marks],t,r);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function ni(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var uE=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let o=ni(e,n.schema),{doc:s,selection:a}=r,{$from:l,from:u,to:c}=a;if(i){let f=_d(l,o,t);if(f&&f.from<=u&&f.to>=c){let d=dt.create(s,f.from,f.to);r.setSelection(d)}}return!0},cE=e=>t=>{let r=typeof e=="function"?e(t):e;for(let n=0;n<r.length;n+=1)if(r[n](t))return!0;return!1};function Al(e){return e instanceof dt}function In(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function C0(e,t=null){if(!t)return null;let r=pt.atStart(e),n=pt.atEnd(e);if(t==="start"||t===!0)return r;if(t==="end")return n;let i=r.from,o=n.to;return t==="all"?dt.create(e,In(0,i,o),In(e.content.size,i,o)):dt.create(e,In(t,i,o),In(t,i,o))}function Rl(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var fE=(e=null,t={})=>({editor:r,view:n,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};let s=()=>{Rl()&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),t?.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!Al(r.state.selection))return s(),!0;let a=C0(i.doc,e)||r.state.selection,l=r.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},dE=(e,t)=>r=>e.every((n,i)=>t(n,{...r,index:i})),pE=(e,t)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},e,t),_0=e=>{let t=e.childNodes;for(let r=t.length-1;r>=0;r-=1){let n=t[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?e.removeChild(n):n.nodeType===1&&_0(n)}return e};function m0(e){let t=`<body>${e}</body>`,r=new window.DOMParser().parseFromString(t,"text/html").body;return _0(r)}function kl(e,t,r){if(r={slice:!0,parseOptions:{},...r},typeof e=="object"&&e!==null)try{return Array.isArray(e)&&e.length>0?$.fromArray(e.map(n=>t.nodeFromJSON(n))):t.nodeFromJSON(e)}catch(n){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",n),kl("",t,r)}if(typeof e=="string"){let n=Ii.fromSchema(t);return r.slice?n.parseSlice(m0(e),r.parseOptions).content:n.parse(m0(e),r.parseOptions)}return kl("",t,r)}function hE(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof Ye||i instanceof _e))return;let o=e.mapping.maps[n],s=0;o.forEach((a,l,u,c)=>{s===0&&(s=c)}),e.setSelection(pt.near(e.doc.resolve(s),r))}var mE=e=>e.toString().startsWith("<"),gE=(e,t,r)=>({tr:n,dispatch:i,editor:o})=>{if(i){r={parseOptions:{},updateSelection:!0,...r};let s=kl(t,o.schema,{parseOptions:{preserveWhitespace:"full",...r.parseOptions}});if(s.toString()==="<>")return!0;let{from:a,to:l}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,c=!0;if((mE(s)?s:[s]).forEach(d=>{d.check(),u=u?d.isText&&d.marks.length===0:!1,c=c?d.isBlock:!1}),a===l&&c){let{parent:d}=n.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}u?Array.isArray(t)?n.insertText(t.map(d=>d.text||"").join(""),a,l):typeof t=="object"&&t&&t.text?n.insertText(t.text,a,l):n.insertText(t,a,l):n.replaceWith(a,l,s),r.updateSelection&&hE(n,n.steps.length-1,-1)}return!0},vE=()=>({state:e,dispatch:t})=>r0(e,t),yE=()=>({state:e,dispatch:t})=>n0(e,t),bE=()=>({state:e,dispatch:t})=>Xf(e,t),xE=()=>({state:e,dispatch:t})=>Qf(e,t),SE=()=>({tr:e,state:t,dispatch:r})=>{try{let n=ko(t.doc,t.selection.$from.pos,-1);return n==null?!1:(e.join(n,2),r&&r(e),!0)}catch{return!1}},wE=()=>({state:e,dispatch:t,tr:r})=>{try{let n=ko(e.doc,e.selection.$from.pos,1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},CE=()=>({state:e,dispatch:t})=>Zv(e,t),_E=()=>({state:e,dispatch:t})=>Qv(e,t);function Pl(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function kE(e){let t=e.split(/-(?!$)/),r=t[t.length-1];r==="Space"&&(r=" ");let n,i,o,s;for(let a=0;a<t.length-1;a+=1){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Rl()||Pl()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),s&&(r=`Meta-${r}`),o&&(r=`Shift-${r}`),r}var EE=e=>({editor:t,view:r,tr:n,dispatch:i})=>{let o=kE(e).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,a))});return l?.steps.forEach(u=>{let c=u.map(n.mapping);c&&i&&n.maybeStep(c)}),!0};function Ws(e,t,r={}){let{from:n,to:i,empty:o}=e.selection,s=t?Be(t,e.schema):null,a=[];e.doc.nodesBetween(n,i,(f,d)=>{if(f.isText)return;let p=Math.max(n,d),h=Math.min(i,d+f.nodeSize);a.push({node:f,from:p,to:h})});let l=i-n,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>_l(f.node.attrs,r,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}var ME=(e,t={})=>({state:r,dispatch:n})=>{let i=Be(e,r.schema);return Ws(r,i,t)?i0(r,n):!1},TE=()=>({state:e,dispatch:t})=>sd(e,t),OE=e=>({state:t,dispatch:r})=>{let n=Be(e,t.schema);return c0(n)(t,r)},DE=()=>({state:e,dispatch:t})=>rd(e,t);function Nl(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function g0(e,t){let r=typeof t=="string"?[t]:t;return Object.keys(e).reduce((n,i)=>(r.includes(i)||(n[i]=e[i]),n),{})}var AE=(e,t)=>({tr:r,state:n,dispatch:i})=>{let o=null,s=null,a=Nl(typeof e=="string"?e:e.name,n.schema);return a?(a==="node"&&(o=Be(e,n.schema)),a==="mark"&&(s=ni(e,n.schema)),i&&r.selection.ranges.forEach(l=>{n.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{o&&o===u.type&&r.setNodeMarkup(c,void 0,g0(u.attrs,t)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&r.addMark(c,c+u.nodeSize,s.create(g0(f.attrs,t)))})})}),!0):!1},RE=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),PE=()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),NE=()=>({state:e,dispatch:t})=>Jf(e,t),IE=()=>({state:e,dispatch:t})=>td(e,t),LE=()=>({state:e,dispatch:t})=>o0(e,t),BE=()=>({state:e,dispatch:t})=>ld(e,t),zE=()=>({state:e,dispatch:t})=>ad(e,t);function k0(e,t,r={}){return kl(e,t,{slice:!1,parseOptions:r})}var FE=(e,t=!1,r={})=>({tr:n,editor:i,dispatch:o})=>{let{doc:s}=n,a=k0(e,i.schema,r);return o&&n.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!t),!0};function ii(e,t){let r=ni(t,e.schema),{from:n,to:i,empty:o}=e.selection,s=[];o?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(n,i,l=>{s.push(...l.marks)});let a=s.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function E0(e,t){let r=new Kn(e);return t.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function kd(e){for(let t=0;t<e.edgeCount;t+=1){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Ed(e,t){let r=[];return e.descendants((n,i)=>{t(n)&&r.push({node:n,pos:i})}),r}function M0(e,t,r){let n=[];return e.nodesBetween(t.from,t.to,(i,o)=>{r(i)&&n.push({node:i,pos:o})}),n}function Md(e,t){for(let r=e.depth;r>0;r-=1){let n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}}function qi(e){return t=>Md(t.$from,e)}function HE(e,t){let r=Tn.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function $E(e,t){let r={from:0,to:e.content.size};return S0(e,r,t)}function VE(e,t){let r=Be(t,e.schema),{from:n,to:i}=e.selection,o=[];e.doc.nodesBetween(n,i,a=>{o.push(a)});let s=o.reverse().find(a=>a.type.name===r.name);return s?{...s.attrs}:{}}function Td(e,t){let r=Nl(typeof t=="string"?t:t.name,e.schema);return r==="node"?VE(e,t):r==="mark"?ii(e,t):{}}function WE(e,t=JSON.stringify){let r={};return e.filter(n=>{let i=t(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function jE(e){let t=WE(e);return t.length===1?t:t.filter((r,n)=>!t.filter((o,s)=>s!==n).some(o=>r.oldRange.from>=o.oldRange.from&&r.oldRange.to<=o.oldRange.to&&r.newRange.from>=o.newRange.from&&r.newRange.to<=o.newRange.to))}function T0(e){let{mapping:t,steps:r}=e,n=[];return t.maps.forEach((i,o)=>{let s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{let{from:a,to:l}=r[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{let u=t.slice(o).map(a,-1),c=t.slice(o).map(l),f=t.invert().map(u,-1),d=t.invert().map(c);n.push({oldRange:{from:f,to:d},newRange:{from:u,to:c}})})}),jE(n)}function Il(e,t,r){let n=[];return e===t?r.resolve(e).marks().forEach(i=>{let o=r.resolve(e-1),s=_d(o,i.type);s&&n.push({mark:i,...s})}):r.nodesBetween(e,t,(i,o)=>{!i||i?.nodeSize===void 0||n.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),n}function Cl(e,t,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{let i=e.find(o=>o.type===t&&o.name===n);return i?i.attribute.keepOnSplit:!1}))}function Sd(e,t,r={}){let{empty:n,ranges:i}=e.selection,o=t?ni(t,e.schema):null;if(n)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>_l(f.attrs,r,{strict:!1}));let s=0,a=[];if(i.forEach(({$from:f,$to:d})=>{let p=f.pos,h=d.pos;e.doc.nodesBetween(p,h,(m,g)=>{if(!m.isText&&!m.marks.length)return;let v=Math.max(p,g),b=Math.min(h,g+m.nodeSize),w=b-v;s+=w,a.push(...m.marks.map(y=>({mark:y,from:v,to:b})))})}),s===0)return!1;let l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>_l(f.mark.attrs,r,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=s}function GE(e,t,r={}){if(!t)return Ws(e,null,r)||Sd(e,null,r);let n=Nl(t,e.schema);return n==="node"?Ws(e,t,r):n==="mark"?Sd(e,t,r):!1}function v0(e,t){let{nodeExtensions:r}=Ol(t),n=r.find(s=>s.name===e);if(!n)return!1;let i={name:n.name,options:n.options,storage:n.storage},o=kt(st(n,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function qE(e){var t;let r=(t=e.type.createAndFill())===null||t===void 0?void 0:t.toJSON(),n=e.toJSON();return JSON.stringify(r)===JSON.stringify(n)}function O0(e){return e instanceof ht}function D0(e,t,r){let i=e.state.doc.content.size,o=In(t,0,i),s=In(r,0,i),a=e.coordsAtPos(o),l=e.coordsAtPos(s,-1),u=Math.min(a.top,l.top),c=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),d=Math.max(a.right,l.right),p=d-f,h=c-u,v={top:u,bottom:c,left:f,right:d,width:p,height:h,x:f,y:u};return{...v,toJSON:()=>v}}function UE(e,t,r){var n;let{selection:i}=t,o=null;if(Al(i)&&(o=i.$cursor),o){let a=(n=e.storedMarks)!==null&&n!==void 0?n:o.marks();return!!r.isInSet(a)||!a.some(l=>l.type.excludes(r))}let{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let u=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(r):!1;return e.doc.nodesBetween(a.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){let p=!d||d.type.allowsMarkType(r),h=!!r.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(r));u=p&&h}return!u}),u})}var YE=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let{selection:o}=r,{empty:s,ranges:a}=o,l=ni(e,n.schema);if(i)if(s){let u=ii(n,l);r.addStoredMark(l.create({...u,...t}))}else a.forEach(u=>{let c=u.$from.pos,f=u.$to.pos;n.doc.nodesBetween(c,f,(d,p)=>{let h=Math.max(p,c),m=Math.min(p+d.nodeSize,f);d.marks.find(v=>v.type===l)?d.marks.forEach(v=>{l===v.type&&r.addMark(h,m,l.create({...v.attrs,...t}))}):r.addMark(h,m,l.create(t))})});return UE(n,r,l)},KE=(e,t)=>({tr:r})=>(r.setMeta(e,t),!0),XE=(e,t={})=>({state:r,dispatch:n,chain:i})=>{let o=Be(e,r.schema);return o.isTextblock?i().command(({commands:s})=>ud(o,t)(r)?!0:s.clearNodes()).command(({state:s})=>ud(o,t)(s,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},JE=e=>({tr:t,dispatch:r})=>{if(r){let{doc:n}=t,i=In(e,0,n.content.size),o=ht.create(n,i);t.setSelection(o)}return!0},ZE=e=>({tr:t,dispatch:r})=>{if(r){let{doc:n}=t,{from:i,to:o}=typeof e=="number"?{from:e,to:e}:e,s=dt.atStart(n).from,a=dt.atEnd(n).to,l=In(i,s,a),u=In(o,s,a),c=dt.create(n,l,u);t.setSelection(c)}return!0},QE=e=>({state:t,dispatch:r})=>{let n=Be(e,t.schema);return f0(n)(t,r)};function y0(e,t){let r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){let n=r.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(n)}}var tM=({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:n,editor:i})=>{let{selection:o,doc:s}=t,{$from:a,$to:l}=o,u=i.extensionManager.attributes,c=Cl(u,a.node().type.name,a.node().attrs);if(o instanceof ht&&o.node.isBlock)return!a.parentOffset||!wr(s,a.pos)?!1:(n&&(e&&y0(r,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(n){let f=l.parentOffset===l.parent.content.size;o instanceof dt&&t.deleteSelection();let d=a.depth===0?void 0:kd(a.node(-1).contentMatchAt(a.indexAfter(-1))),p=f&&d?[{type:d,attrs:c}]:void 0,h=wr(t.doc,t.mapping.map(a.pos),1,p);if(!p&&!h&&wr(t.doc,t.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(h=!0,p=d?[{type:d,attrs:c}]:void 0),h&&(t.split(t.mapping.map(a.pos),1,p),d&&!f&&!a.parentOffset&&a.parent.type!==d)){let m=t.mapping.map(a.before()),g=t.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&t.setNodeMarkup(t.mapping.map(a.before()),d)}e&&y0(r,i.extensionManager.splittableMarks),t.scrollIntoView()}return!0},eM=e=>({tr:t,state:r,dispatch:n,editor:i})=>{var o;let s=Be(e,r.schema),{$from:a,$to:l}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;let c=a.node(-1);if(c.type!==s)return!1;let f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(n){let g=$.empty,v=a.index(-1)?1:a.index(-2)?2:3;for(let C=a.depth-v;C>=a.depth-3;C-=1)g=$.from(a.node(C).copy(g));let b=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=Cl(f,a.node().type.name,a.node().attrs),y=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(w))||void 0;g=g.append($.from(s.createAndFill(null,y)||void 0));let S=a.before(a.depth-(v-1));t.replace(S,a.after(-b),new Q(g,4-v,0));let x=-1;t.doc.nodesBetween(S,t.doc.content.size,(C,k)=>{if(x>-1)return!1;C.isTextblock&&C.content.size===0&&(x=k+1)}),x>-1&&t.setSelection(dt.near(t.doc.resolve(x))),t.scrollIntoView()}return!0}let d=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,p=Cl(f,c.type.name,c.attrs),h=Cl(f,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);let m=d?[{type:s,attrs:p},{type:d,attrs:h}]:[{type:s,attrs:p}];if(!wr(t.doc,a.pos,2))return!1;if(n){let{selection:g,storedMarks:v}=r,{splittableMarks:b}=i.extensionManager,w=v||g.$to.parentOffset&&g.$from.marks();if(t.split(a.pos,2,m).scrollIntoView(),!w||!n)return!0;let y=w.filter(S=>b.includes(S.type.name));t.ensureMarks(y)}return!0},hd=(e,t)=>{let r=qi(s=>s.type===t)(e.selection);if(!r)return!0;let n=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;let i=e.doc.nodeAt(n);return r.node.type===i?.type&&Vr(e.doc,r.pos)&&e.join(r.pos),!0},md=(e,t)=>{let r=qi(s=>s.type===t)(e.selection);if(!r)return!0;let n=e.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;let i=e.doc.nodeAt(n);return r.node.type===i?.type&&Vr(e.doc,n)&&e.join(n),!0},rM=(e,t,r,n={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:u,can:c})=>{let{extensions:f,splittableMarks:d}=i.extensionManager,p=Be(e,s.schema),h=Be(t,s.schema),{selection:m,storedMarks:g}=s,{$from:v,$to:b}=m,w=v.blockRange(b),y=g||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;let S=qi(x=>v0(x.type.name,f))(m);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return u.liftListItem(h);if(v0(S.node.type.name,f)&&p.validContent(S.node.content)&&a)return l().command(()=>(o.setNodeMarkup(S.pos,p),!0)).command(()=>hd(o,p)).command(()=>md(o,p)).run()}return!r||!y||!a?l().command(()=>c().wrapInList(p,n)?!0:u.clearNodes()).wrapInList(p,n).command(()=>hd(o,p)).command(()=>md(o,p)).run():l().command(()=>{let x=c().wrapInList(p,n),C=y.filter(k=>d.includes(k.type.name));return o.ensureMarks(C),x?!0:u.clearNodes()}).wrapInList(p,n).command(()=>hd(o,p)).command(()=>md(o,p)).run()},nM=(e,t={},r={})=>({state:n,commands:i})=>{let{extendEmptyMarkRange:o=!1}=r,s=ni(e,n.schema);return Sd(n,s,t)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,t)},iM=(e,t,r={})=>({state:n,commands:i})=>{let o=Be(e,n.schema),s=Be(t,n.schema);return Ws(n,o,r)?i.setNode(s):i.setNode(o,r)},oM=(e,t={})=>({state:r,commands:n})=>{let i=Be(e,r.schema);return Ws(r,i,t)?n.lift(i):n.wrapIn(i,t)},sM=()=>({state:e,dispatch:t})=>{let r=e.plugins;for(let n=0;n<r.length;n+=1){let i=r[n],o;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){let s=e.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){let l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,e.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},aM=()=>({tr:e,dispatch:t})=>{let{selection:r}=e,{empty:n,ranges:i}=r;return n||t&&i.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},lM=(e,t={})=>({tr:r,state:n,dispatch:i})=>{var o;let{extendEmptyMarkRange:s=!1}=t,{selection:a}=r,l=ni(e,n.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&s){let{from:d,to:p}=a,h=(o=u.marks().find(g=>g.type===l))===null||o===void 0?void 0:o.attrs,m=_d(u,l,h);m&&(d=m.from,p=m.to),r.removeMark(d,p,l)}else f.forEach(d=>{r.removeMark(d.$from.pos,d.$to.pos,l)});return r.removeStoredMark(l),!0},uM=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let o=null,s=null,a=Nl(typeof e=="string"?e:e.name,n.schema);return a?(a==="node"&&(o=Be(e,n.schema)),a==="mark"&&(s=ni(e,n.schema)),i&&r.selection.ranges.forEach(l=>{let u=l.$from.pos,c=l.$to.pos;n.doc.nodesBetween(u,c,(f,d)=>{o&&o===f.type&&r.setNodeMarkup(d,void 0,{...f.attrs,...t}),s&&f.marks.length&&f.marks.forEach(p=>{if(s===p.type){let h=Math.max(d,u),m=Math.min(d+f.nodeSize,c);r.addMark(h,m,s.create({...p.attrs,...t}))}})})}),!0):!1},cM=(e,t={})=>({state:r,dispatch:n})=>{let i=Be(e,r.schema);return l0(i,t)(r,n)},fM=(e,t={})=>({state:r,dispatch:n})=>{let i=Be(e,r.schema);return u0(i,t)(r,n)},dM=Object.freeze({__proto__:null,blur:Xk,clearContent:Jk,clearNodes:Zk,command:Qk,createParagraphNear:tE,cut:eE,deleteCurrentNode:rE,deleteNode:nE,deleteRange:iE,deleteSelection:oE,enter:sE,exitCode:aE,extendMarkRange:uE,first:cE,focus:fE,forEach:dE,insertContent:pE,insertContentAt:gE,joinUp:vE,joinDown:yE,joinBackward:bE,joinForward:xE,joinItemBackward:SE,joinItemForward:wE,joinTextblockBackward:CE,joinTextblockForward:_E,keyboardShortcut:EE,lift:ME,liftEmptyBlock:TE,liftListItem:OE,newlineInCode:DE,resetAttributes:AE,scrollIntoView:RE,selectAll:PE,selectNodeBackward:NE,selectNodeForward:IE,selectParentNode:LE,selectTextblockEnd:BE,selectTextblockStart:zE,setContent:FE,setMark:YE,setMeta:KE,setNode:XE,setNodeSelection:JE,setTextSelection:ZE,sinkListItem:QE,splitBlock:tM,splitListItem:eM,toggleList:rM,toggleMark:nM,toggleNode:iM,toggleWrap:oM,undoInputRule:sM,unsetAllMarks:aM,unsetMark:lM,updateAttributes:uM,wrapIn:cM,wrapInList:fM}),pM=$t.create({name:"commands",addCommands(){return{...dM}}}),hM=$t.create({name:"editable",addProseMirrorPlugins(){return[new Ht({key:new Wt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mM=$t.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new Ht({key:new Wt("focusEvents"),props:{handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;let n=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,r)=>{e.isFocused=!1;let n=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}}),gM=$t.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{let{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:p}=f,h=f.parent.isTextblock?a.doc.resolve(d-1):f,m=h.parent.type.spec.isolating,g=f.pos-f.parentOffset,v=m&&h.parent.childCount===1?g===f.pos:pt.atStart(u).from===d;return!c||!v||!p.type.isTextblock||p.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},o={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Rl()||Pl()?o:i},addProseMirrorPlugins(){return[new Ht({key:new Wt("clearDocument"),appendTransaction:(e,t,r)=>{if(!(e.some(h=>h.docChanged)&&!t.doc.eq(r.doc)))return;let{empty:i,from:o,to:s}=t.selection,a=pt.atStart(t.doc).from,l=pt.atEnd(t.doc).to;if(i||!(o===a&&s===l)||!(r.doc.textBetween(0,r.doc.content.size," "," ").length===0))return;let f=r.tr,d=Tl({state:r,transaction:f}),{commands:p}=new No({editor:this.editor,state:d});if(p.clearNodes(),!!f.steps.length)return f}})]}}),vM=$t.create({name:"tabindex",addProseMirrorPlugins(){return[new Ht({key:new Wt("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}}),yM=Object.freeze({__proto__:null,ClipboardTextSerializer:Kk,Commands:pM,Editable:hM,FocusEvents:mM,Keymap:gM,Tabindex:vM}),wd=class e{constructor(t,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=t,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;let t=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(t);return new e(r,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}get children(){let t=[];return this.node.content.forEach((r,n)=>{let i=r.isBlock&&!r.isTextblock,o=this.pos+n+(i?0:1),s=this.resolvedPos.doc.resolve(o);if(!i&&s.depth<=this.depth)return;let a=new e(s,this.editor,i,i?r:null);i&&(a.actualDepth=this.depth+1),t.push(new e(s,this.editor,i,i?r:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){let t=this.children;return t[t.length-1]||null}closest(t,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===t)if(Object.keys(r).length>0){let o=i.node.attrs,s=Object.keys(r);for(let a=0;a<s.length;a+=1){let l=s[a];if(o[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(t,r={}){return this.querySelectorAll(t,r,!0)[0]||null}querySelectorAll(t,r={},n=!1){let i=[];return this.isBlock||!this.children||this.children.length===0||this.children.forEach(o=>{if(o.node.type.name===t){if(Object.keys(r).length>0){let s=o.node.attrs,a=Object.keys(r);for(let l=0;l<a.length;l+=1){let u=a[l];if(s[u]!==r[u])return}}if(i.push(o),n)return}i=i.concat(o.querySelectorAll(t))}),i}setAttribute(t){let r=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,t).setTextSelection(r.from).run()}},bM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function xM(e,t,r){let n=document.querySelector(`style[data-tiptap-style${r?`-${r}`:""}]`);if(n!==null)return n;let i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute(`data-tiptap-style${r?`-${r}`:""}`,""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var El=class extends gd{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=xM(bM,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,r=!0){this.setOptions({editable:t}),r&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,r){let n=x0(r)?r(t,[...this.state.plugins]):[...this.state.plugins,t],i=this.state.reconfigure({plugins:n});this.view.updateState(i)}unregisterPlugin(t){if(this.isDestroyed)return;let r=typeof t=="string"?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(r))});this.view.updateState(n)}createExtensionManager(){let r=[...this.options.enableCoreExtensions?Object.values(yM):[],...this.options.extensions].filter(n=>["extension","node","mark"].includes(n?.type));this.extensionManager=new bd(r,this)}createCommandManager(){this.commandManager=new No({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let t=k0(this.options.content,this.schema,this.options.parseOptions),r=C0(t,this.options.autofocus);this.view=new vl(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:al.create({doc:t,selection:r||void 0})});let n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass();let i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;let r=this.capturedTransaction;return this.capturedTransaction=null,r}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}let r=this.state.apply(t),n=!this.state.selection.eq(r.selection);this.view.updateState(r),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});let i=t.getMeta("focus"),o=t.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Td(this.state,t)}isActive(t,r){let n=typeof t=="string"?t:null,i=typeof t=="string"?r:t;return GE(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return HE(this.state.doc.content,this.schema)}getText(t){let{blockSeparator:r=`

`,textSerializers:n={}}=t||{};return $E(this.state.doc,{blockSeparator:r,textSerializers:{...w0(this.schema),...n}})}get isEmpty(){return qE(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,r){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelector(t,r))||null}$nodes(t,r){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelectorAll(t,r))||null}$pos(t){let r=this.state.doc.resolve(t);return new wd(r,this)}get $doc(){return this.$pos(0)}};function fn(e){return new Io({find:e.find,handler:({state:t,range:r,match:n})=>{let i=kt(e.getAttributes,void 0,n);if(i===!1||i===null)return null;let{tr:o}=t,s=n[n.length-1],a=n[0];if(s){let l=a.search(/\S/),u=r.from+a.indexOf(s),c=u+s.length;if(Il(r.from,r.to,t.doc).filter(p=>p.mark.type.excluded.find(m=>m===e.type&&m!==p.mark.type)).filter(p=>p.to>u).length)return null;c<r.to&&o.delete(c,r.to),u>r.from&&o.delete(r.from+l,u);let d=r.from+l+s.length;o.addMark(r.from+l,d,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}function Ll(e){return new Io({find:e.find,handler:({state:t,range:r,match:n})=>{let i=kt(e.getAttributes,void 0,n)||{},{tr:o}=t,s=r.from,a=r.to,l=e.type.create(i);if(n[1]){let u=n[0].lastIndexOf(n[1]),c=s+u;c>a?c=a:a=c+n[1].length;let f=n[0][n[0].length-1];o.insertText(f,s+n[0].length-1),o.replaceWith(c,a,l)}else n[0]&&o.insert(s-1,e.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a));o.scrollIntoView()}})}function js(e){return new Io({find:e.find,handler:({state:t,range:r,match:n})=>{let i=t.doc.resolve(r.from),o=kt(e.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,o)}})}function oi(e){return new Io({find:e.find,handler:({state:t,range:r,match:n,chain:i})=>{let o=kt(e.getAttributes,void 0,n)||{},s=t.tr.delete(r.from,r.to),l=s.doc.resolve(r.from).blockRange(),u=l&&_o(l,e.type,o);if(!u)return null;if(s.wrap(l,u),e.keepMarks&&e.editor){let{selection:f,storedMarks:d}=t,{splittableMarks:p}=e.editor.extensionManager,h=d||f.$to.parentOffset&&f.$from.marks();if(h){let m=h.filter(g=>p.includes(g.type.name));s.ensureMarks(m)}}if(e.keepAttributes){let f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}let c=s.doc.resolve(r.from-1).nodeBefore;c&&c.type===e.type&&Vr(s.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(n,c))&&s.join(r.from-1)}})}var oe=class e{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=kt(st(this,"addOptions",{name:this.name}))),this.storage=kt(st(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new e(t)}configure(t={}){let r=this.extend();return r.options=Dl(this.options,t),r.storage=kt(st(r,"addStorage",{name:r.name,options:r.options})),r}extend(t={}){let r=new e({...this.config,...t});return r.parent=this,this.child=r,r.name=t.name?t.name:r.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=kt(st(r,"addOptions",{name:r.name})),r.storage=kt(st(r,"addStorage",{name:r.name,options:r.options})),r}static handleExit({editor:t,mark:r}){let{tr:n}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){let s=i.marks();if(!!!s.find(u=>u?.type.name===r.name))return!1;let l=s.find(u=>u?.type.name===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),t.view.dispatch(n),!0}return!1}},yt=class e{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=kt(st(this,"addOptions",{name:this.name}))),this.storage=kt(st(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new e(t)}configure(t={}){let r=this.extend();return r.options=Dl(this.options,t),r.storage=kt(st(r,"addStorage",{name:r.name,options:r.options})),r}extend(t={}){let r=new e({...this.config,...t});return r.parent=this,this.child=r,r.name=t.name?t.name:r.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=kt(st(r,"addOptions",{name:r.name})),r.storage=kt(st(r,"addStorage",{name:r.name,options:r.options})),r}};function SM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}var Ml=class{constructor(t,r,n){this.isDragging=!1,this.component=t,this.editor=r.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=r.extension,this.node=r.node,this.decorations=r.decorations,this.getPos=r.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var r,n,i,o,s,a,l;let{view:u}=this.editor,c=t.target,f=c.nodeType===3?(r=c.parentElement)===null||r===void 0?void 0:r.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||!((n=this.contentDOM)===null||n===void 0)&&n.contains(c)||!f)return;let d=0,p=0;if(this.dom!==f){let g=this.dom.getBoundingClientRect(),v=f.getBoundingClientRect(),b=(i=t.offsetX)!==null&&i!==void 0?i:(o=t.nativeEvent)===null||o===void 0?void 0:o.offsetX,w=(s=t.offsetY)!==null&&s!==void 0?s:(a=t.nativeEvent)===null||a===void 0?void 0:a.offsetY;d=v.x-g.x+b,p=v.y-g.y+w}(l=t.dataTransfer)===null||l===void 0||l.setDragImage(this.dom,d,p);let h=ht.create(u.state.doc,this.getPos()),m=u.state.tr.setSelection(h);u.dispatch(m)}stopEvent(t){var r;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});let n=t.target;if(!(this.dom.contains(n)&&!(!((r=this.contentDOM)===null||r===void 0)&&r.contains(n))))return!1;let o=t.type.startsWith("drag"),s=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!s&&!o)return!0;let{isEditable:l}=this.editor,{isDragging:u}=this,c=!!this.node.type.spec.draggable,f=ht.isSelectable(this.node),d=t.type==="copy",p=t.type==="paste",h=t.type==="cut",m=t.type==="mousedown";if(!c&&f&&o&&t.preventDefault(),c&&o&&!u)return t.preventDefault(),!1;if(c&&l&&!u&&m){let g=n.closest("[data-drag-handle]");g&&(this.dom===g||this.dom.contains(g))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(u||s||d||p||h||m&&f)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(Rl()||SM())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:r})=>{let n=this.getPos();return r.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0})}deleteNode(){let t=this.getPos(),r=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:r})}};function kr(e){return new yd({find:e.find,handler:({state:t,range:r,match:n,pasteEvent:i})=>{let o=kt(e.getAttributes,void 0,n,i);if(o===!1||o===null)return null;let{tr:s}=t,a=n[n.length-1],l=n[0],u=r.to;if(a){let c=l.search(/\S/),f=r.from+l.indexOf(a),d=f+a.length;if(Il(r.from,r.to,t.doc).filter(h=>h.mark.type.excluded.find(g=>g===e.type&&g!==h.mark.type)).filter(h=>h.to>f).length)return null;d<r.to&&s.delete(d,r.to),f>r.from&&s.delete(r.from+c,f),u=r.from+c+a.length,s.addMark(r.from+c,u,e.type.create(o||{})),s.removeStoredMark(e.type)}}})}function A0(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var ge="top",Ae="bottom",Ee="right",we="left",Bl="auto",si=[ge,Ae,Ee,we],Ln="start",Ui="end",R0="clippingParents",zl="viewport",Lo="popper",P0="reference",Od=si.reduce(function(e,t){return e.concat([t+"-"+Ln,t+"-"+Ui])},[]),Fl=[].concat(si,[Bl]).reduce(function(e,t){return e.concat([t,t+"-"+Ln,t+"-"+Ui])},[]),wM="beforeRead",CM="read",_M="afterRead",kM="beforeMain",EM="main",MM="afterMain",TM="beforeWrite",OM="write",DM="afterWrite",N0=[wM,CM,_M,kM,EM,MM,TM,OM,DM];function ze(e){return e?(e.nodeName||"").toLowerCase():null}function le(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Er(e){var t=le(e).Element;return e instanceof t||e instanceof Element}function Re(e){var t=le(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Bo(e){if(typeof ShadowRoot>"u")return!1;var t=le(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function AM(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!Re(o)||!ze(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function RM(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=s.reduce(function(l,u){return l[u]="",l},{});!Re(i)||!ze(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}var Gs={name:"applyStyles",enabled:!0,phase:"write",fn:AM,effect:RM,requires:["computeStyles"]};function Fe(e){return e.split("-")[0]}var Gr=Math.max,Yi=Math.min,Bn=Math.round;function zo(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function qs(){return!/^((?!chrome|android).)*safari/i.test(zo())}function Mr(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&Re(e)&&(i=e.offsetWidth>0&&Bn(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Bn(n.height)/e.offsetHeight||1);var s=Er(e)?le(e):window,a=s.visualViewport,l=!qs()&&r,u=(n.left+(l&&a?a.offsetLeft:0))/i,c=(n.top+(l&&a?a.offsetTop:0))/o,f=n.width/i,d=n.height/o;return{width:f,height:d,top:c,right:u+f,bottom:c+d,left:u,x:u,y:c}}function Ki(e){var t=Mr(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Us(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Bo(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ir(e){return le(e).getComputedStyle(e)}function Dd(e){return["table","td","th"].indexOf(ze(e))>=0}function We(e){return((Er(e)?e.ownerDocument:e.document)||window.document).documentElement}function zn(e){return ze(e)==="html"?e:e.assignedSlot||e.parentNode||(Bo(e)?e.host:null)||We(e)}function I0(e){return!Re(e)||ir(e).position==="fixed"?null:e.offsetParent}function PM(e){var t=/firefox/i.test(zo()),r=/Trident/i.test(zo());if(r&&Re(e)){var n=ir(e);if(n.position==="fixed")return null}var i=zn(e);for(Bo(i)&&(i=i.host);Re(i)&&["html","body"].indexOf(ze(i))<0;){var o=ir(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function qr(e){for(var t=le(e),r=I0(e);r&&Dd(r)&&ir(r).position==="static";)r=I0(r);return r&&(ze(r)==="html"||ze(r)==="body"&&ir(r).position==="static")?t:r||PM(e)||t}function Xi(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ji(e,t,r){return Gr(e,Yi(t,r))}function L0(e,t,r){var n=Ji(e,t,r);return n>r?r:n}function Ys(){return{top:0,right:0,bottom:0,left:0}}function Ks(e){return Object.assign({},Ys(),e)}function Xs(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var NM=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Ks(typeof t!="number"?t:Xs(t,si))};function IM(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,a=Fe(r.placement),l=Xi(a),u=[we,Ee].indexOf(a)>=0,c=u?"height":"width";if(!(!o||!s)){var f=NM(i.padding,r),d=Ki(o),p=l==="y"?ge:we,h=l==="y"?Ae:Ee,m=r.rects.reference[c]+r.rects.reference[l]-s[l]-r.rects.popper[c],g=s[l]-r.rects.reference[l],v=qr(o),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,w=m/2-g/2,y=f[p],S=b-d[c]-f[h],x=b/2-d[c]/2+w,C=Ji(y,x,S),k=l;r.modifiersData[n]=(t={},t[k]=C,t.centerOffset=C-x,t)}}function LM(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Us(t.elements.popper,i)&&(t.elements.arrow=i))}var B0={name:"arrow",enabled:!0,phase:"main",fn:IM,effect:LM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tr(e){return e.split("-")[1]}var BM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zM(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Bn(r*i)/i||0,y:Bn(n*i)/i||0}}function z0(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,f=e.isFixed,d=s.x,p=d===void 0?0:d,h=s.y,m=h===void 0?0:h,g=typeof c=="function"?c({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),w=we,y=ge,S=window;if(u){var x=qr(r),C="clientHeight",k="clientWidth";if(x===le(r)&&(x=We(r),ir(x).position!=="static"&&a==="absolute"&&(C="scrollHeight",k="scrollWidth")),x=x,i===ge||(i===we||i===Ee)&&o===Ui){y=Ae;var _=f&&x===S&&S.visualViewport?S.visualViewport.height:x[C];m-=_-n.height,m*=l?1:-1}if(i===we||(i===ge||i===Ae)&&o===Ui){w=Ee;var E=f&&x===S&&S.visualViewport?S.visualViewport.width:x[k];p-=E-n.width,p*=l?1:-1}}var A=Object.assign({position:a},u&&BM),O=c===!0?zM({x:p,y:m},le(r)):{x:p,y:m};if(p=O.x,m=O.y,l){var M;return Object.assign({},A,(M={},M[y]=b?"0":"",M[w]=v?"0":"",M.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",M))}return Object.assign({},A,(t={},t[y]=b?m+"px":"",t[w]=v?p+"px":"",t.transform="",t))}function FM(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,s=o===void 0?!0:o,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:Fe(t.placement),variation:Tr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,z0(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,z0(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var F0={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:FM,data:{}};var Hl={passive:!0};function HM(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,s=n.resize,a=s===void 0?!0:s,l=le(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",r.update,Hl)}),a&&l.addEventListener("resize",r.update,Hl),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",r.update,Hl)}),a&&l.removeEventListener("resize",r.update,Hl)}}var H0={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:HM,data:{}};var $M={left:"right",right:"left",bottom:"top",top:"bottom"};function Fo(e){return e.replace(/left|right|bottom|top/g,function(t){return $M[t]})}var VM={start:"end",end:"start"};function $l(e){return e.replace(/start|end/g,function(t){return VM[t]})}function Zi(e){var t=le(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Qi(e){return Mr(We(e)).left+Zi(e).scrollLeft}function Ad(e,t){var r=le(e),n=We(e),i=r.visualViewport,o=n.clientWidth,s=n.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var u=qs();(u||!u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+Qi(e),y:l}}function Rd(e){var t,r=We(e),n=Zi(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Gr(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Gr(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+Qi(e),l=-n.scrollTop;return ir(i||r).direction==="rtl"&&(a+=Gr(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function to(e){var t=ir(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function Vl(e){return["html","body","#document"].indexOf(ze(e))>=0?e.ownerDocument.body:Re(e)&&to(e)?e:Vl(zn(e))}function ai(e,t){var r;t===void 0&&(t=[]);var n=Vl(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=le(n),s=i?[o].concat(o.visualViewport||[],to(n)?n:[]):n,a=t.concat(s);return i?a:a.concat(ai(zn(s)))}function Ho(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function WM(e,t){var r=Mr(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function $0(e,t,r){return t===zl?Ho(Ad(e,r)):Er(t)?WM(t,r):Ho(Rd(We(e)))}function jM(e){var t=ai(zn(e)),r=["absolute","fixed"].indexOf(ir(e).position)>=0,n=r&&Re(e)?qr(e):e;return Er(n)?t.filter(function(i){return Er(i)&&Us(i,n)&&ze(i)!=="body"}):[]}function Pd(e,t,r,n){var i=t==="clippingParents"?jM(e):[].concat(t),o=[].concat(i,[r]),s=o[0],a=o.reduce(function(l,u){var c=$0(e,u,n);return l.top=Gr(c.top,l.top),l.right=Yi(c.right,l.right),l.bottom=Yi(c.bottom,l.bottom),l.left=Gr(c.left,l.left),l},$0(e,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Js(e){var t=e.reference,r=e.element,n=e.placement,i=n?Fe(n):null,o=n?Tr(n):null,s=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(i){case ge:l={x:s,y:t.y-r.height};break;case Ae:l={x:s,y:t.y+t.height};break;case Ee:l={x:t.x+t.width,y:a};break;case we:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=i?Xi(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case Ln:l[u]=l[u]-(t[c]/2-r[c]/2);break;case Ui:l[u]=l[u]+(t[c]/2-r[c]/2);break;default:}}return l}function Ur(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,s=o===void 0?e.strategy:o,a=r.boundary,l=a===void 0?R0:a,u=r.rootBoundary,c=u===void 0?zl:u,f=r.elementContext,d=f===void 0?Lo:f,p=r.altBoundary,h=p===void 0?!1:p,m=r.padding,g=m===void 0?0:m,v=Ks(typeof g!="number"?g:Xs(g,si)),b=d===Lo?P0:Lo,w=e.rects.popper,y=e.elements[h?b:d],S=Pd(Er(y)?y:y.contextElement||We(e.elements.popper),l,c,s),x=Mr(e.elements.reference),C=Js({reference:x,element:w,strategy:"absolute",placement:i}),k=Ho(Object.assign({},w,C)),_=d===Lo?k:x,E={top:S.top-_.top+v.top,bottom:_.bottom-S.bottom+v.bottom,left:S.left-_.left+v.left,right:_.right-S.right+v.right},A=e.modifiersData.offset;if(d===Lo&&A){var O=A[i];Object.keys(E).forEach(function(M){var P=[Ee,Ae].indexOf(M)>=0?1:-1,R=[ge,Ae].indexOf(M)>=0?"y":"x";E[M]+=O[R]*P})}return E}function Nd(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,s=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?Fl:l,c=Tr(n),f=c?a?Od:Od.filter(function(h){return Tr(h)===c}):si,d=f.filter(function(h){return u.indexOf(h)>=0});d.length===0&&(d=f);var p=d.reduce(function(h,m){return h[m]=Ur(e,{placement:m,boundary:i,rootBoundary:o,padding:s})[Fe(m)],h},{});return Object.keys(p).sort(function(h,m){return p[h]-p[m]})}function GM(e){if(Fe(e)===Bl)return[];var t=Fo(e);return[$l(e),t,$l(t)]}function qM(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,a=s===void 0?!0:s,l=r.fallbackPlacements,u=r.padding,c=r.boundary,f=r.rootBoundary,d=r.altBoundary,p=r.flipVariations,h=p===void 0?!0:p,m=r.allowedAutoPlacements,g=t.options.placement,v=Fe(g),b=v===g,w=l||(b||!h?[Fo(g)]:GM(g)),y=[g].concat(w).reduce(function(K,tt){return K.concat(Fe(tt)===Bl?Nd(t,{placement:tt,boundary:c,rootBoundary:f,padding:u,flipVariations:h,allowedAutoPlacements:m}):tt)},[]),S=t.rects.reference,x=t.rects.popper,C=new Map,k=!0,_=y[0],E=0;E<y.length;E++){var A=y[E],O=Fe(A),M=Tr(A)===Ln,P=[ge,Ae].indexOf(O)>=0,R=P?"width":"height",B=Ur(t,{placement:A,boundary:c,rootBoundary:f,altBoundary:d,padding:u}),F=P?M?Ee:we:M?Ae:ge;S[R]>x[R]&&(F=Fo(F));var I=Fo(F),j=[];if(o&&j.push(B[O]<=0),a&&j.push(B[F]<=0,B[I]<=0),j.every(function(K){return K})){_=A,k=!1;break}C.set(A,j)}if(k)for(var V=h?3:1,L=function(tt){var X=y.find(function(it){var ut=C.get(it);if(ut)return ut.slice(0,tt).every(function(xt){return xt})});if(X)return _=X,"break"},Y=V;Y>0;Y--){var rt=L(Y);if(rt==="break")break}t.placement!==_&&(t.modifiersData[n]._skip=!0,t.placement=_,t.reset=!0)}}var V0={name:"flip",enabled:!0,phase:"main",fn:qM,requiresIfExists:["offset"],data:{_skip:!1}};function W0(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function j0(e){return[ge,Ee,Ae,we].some(function(t){return e[t]>=0})}function UM(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=Ur(t,{elementContext:"reference"}),a=Ur(t,{altBoundary:!0}),l=W0(s,n),u=W0(a,i,o),c=j0(l),f=j0(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var G0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:UM};function YM(e,t,r){var n=Fe(e),i=[we,ge].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[we,Ee].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}function KM(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,s=Fl.reduce(function(c,f){return c[f]=YM(f,t.rects,o),c},{}),a=s[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=s}var q0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:KM};function XM(e){var t=e.state,r=e.name;t.modifiersData[r]=Js({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var U0={name:"popperOffsets",enabled:!0,phase:"read",fn:XM,data:{}};function Id(e){return e==="x"?"y":"x"}function JM(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,a=s===void 0?!1:s,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,f=r.padding,d=r.tether,p=d===void 0?!0:d,h=r.tetherOffset,m=h===void 0?0:h,g=Ur(t,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),v=Fe(t.placement),b=Tr(t.placement),w=!b,y=Xi(v),S=Id(y),x=t.modifiersData.popperOffsets,C=t.rects.reference,k=t.rects.popper,_=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,E=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(x){if(o){var M,P=y==="y"?ge:we,R=y==="y"?Ae:Ee,B=y==="y"?"height":"width",F=x[y],I=F+g[P],j=F-g[R],V=p?-k[B]/2:0,L=b===Ln?C[B]:k[B],Y=b===Ln?-k[B]:-C[B],rt=t.elements.arrow,K=p&&rt?Ki(rt):{width:0,height:0},tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ys(),X=tt[P],it=tt[R],ut=Ji(0,C[B],K[B]),xt=w?C[B]/2-V-ut-X-E.mainAxis:L-ut-X-E.mainAxis,Tt=w?-C[B]/2+V+ut+it+E.mainAxis:Y+ut+it+E.mainAxis,J=t.elements.arrow&&qr(t.elements.arrow),ct=J?y==="y"?J.clientTop||0:J.clientLeft||0:0,Bt=(M=A?.[y])!=null?M:0,bt=F+xt-Bt-ct,St=F+Tt-Bt,Et=Ji(p?Yi(I,bt):I,F,p?Gr(j,St):j);x[y]=Et,O[y]=Et-F}if(a){var jt,Ut=y==="x"?ge:we,Mt=y==="x"?Ae:Ee,Dt=x[S],Zt=S==="y"?"height":"width",be=Dt+g[Ut],se=Dt-g[Mt],ee=[ge,we].indexOf(v)!==-1,ae=(jt=A?.[S])!=null?jt:0,gr=ee?be:Dt-C[Zt]-k[Zt]-ae+E.altAxis,vr=ee?Dt+C[Zt]+k[Zt]-ae-E.altAxis:se,ki=p&&ee?L0(gr,Dt,vr):Ji(p?gr:be,Dt,p?vr:se);x[S]=ki,O[S]=ki-Dt}t.modifiersData[n]=O}}var Y0={name:"preventOverflow",enabled:!0,phase:"main",fn:JM,requiresIfExists:["offset"]};function Ld(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Bd(e){return e===le(e)||!Re(e)?Zi(e):Ld(e)}function ZM(e){var t=e.getBoundingClientRect(),r=Bn(t.width)/e.offsetWidth||1,n=Bn(t.height)/e.offsetHeight||1;return r!==1||n!==1}function zd(e,t,r){r===void 0&&(r=!1);var n=Re(t),i=Re(t)&&ZM(t),o=We(t),s=Mr(e,i,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((ze(t)!=="body"||to(o))&&(a=Bd(t)),Re(t)?(l=Mr(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Qi(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function QM(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&i(l)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function Fd(e){var t=QM(e);return N0.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function Hd(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function $d(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var K0={placement:"bottom",modifiers:[],strategy:"absolute"};function X0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function J0(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?K0:i;return function(a,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},K0,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,p={state:c,setOptions:function(v){var b=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},o,c.options,b),c.scrollParents={reference:Er(a)?ai(a):a.contextElement?ai(a.contextElement):[],popper:ai(l)};var w=Fd($d([].concat(n,c.options.modifiers)));return c.orderedModifiers=w.filter(function(y){return y.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var v=c.elements,b=v.reference,w=v.popper;if(X0(b,w)){c.rects={reference:zd(b,qr(w),c.options.strategy==="fixed"),popper:Ki(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(E){return c.modifiersData[E.name]=Object.assign({},E.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var S=c.orderedModifiers[y],x=S.fn,C=S.options,k=C===void 0?{}:C,_=S.name;typeof x=="function"&&(c=x({state:c,options:k,name:_,instance:p})||c)}}}},update:Hd(function(){return new Promise(function(g){p.forceUpdate(),g(c)})}),destroy:function(){m(),d=!0}};if(!X0(a,l))return p;p.setOptions(u).then(function(g){!d&&u.onFirstUpdate&&u.onFirstUpdate(g)});function h(){c.orderedModifiers.forEach(function(g){var v=g.name,b=g.options,w=b===void 0?{}:b,y=g.effect;if(typeof y=="function"){var S=y({state:c,name:v,instance:p,options:w}),x=function(){};f.push(S||x)}})}function m(){f.forEach(function(g){return g()}),f=[]}return p}}var tT=[H0,U0,F0,Gs,q0,V0,Y0,B0,G0],Vd=J0({defaultModifiers:tT});var eT="tippy-box",a1="tippy-content",rT="tippy-backdrop",l1="tippy-arrow",u1="tippy-svg-arrow",eo={passive:!0,capture:!0},c1=function(){return document.body};function Wd(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function Kd(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function f1(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Z0(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function nT(e){return e.split(/\s+/).filter(Boolean)}function $o(e){return[].concat(e)}function Q0(e,t){e.indexOf(t)===-1&&e.push(t)}function iT(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function oT(e){return e.split("-")[0]}function jl(e){return[].slice.call(e)}function t1(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function Zs(){return document.createElement("div")}function Gl(e){return["Element","Fragment"].some(function(t){return Kd(e,t)})}function sT(e){return Kd(e,"NodeList")}function aT(e){return Kd(e,"MouseEvent")}function lT(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function uT(e){return Gl(e)?[e]:sT(e)?jl(e):Array.isArray(e)?e:jl(document.querySelectorAll(e))}function jd(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function e1(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function cT(e){var t,r=$o(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function fT(e,t){var r=t.clientX,n=t.clientY;return e.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,u=oT(s.placement),c=s.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,p=u==="right"?c.left.x:0,h=u==="left"?c.right.x:0,m=o.top-n+f>l,g=n-o.bottom-d>l,v=o.left-r+p>l,b=r-o.right-h>l;return m||g||v||b})}function Gd(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[n](i,r)})}function r1(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var dn={isTouch:!1},n1=0;function dT(){dn.isTouch||(dn.isTouch=!0,window.performance&&document.addEventListener("mousemove",d1))}function d1(){var e=performance.now();e-n1<20&&(dn.isTouch=!1,document.removeEventListener("mousemove",d1)),n1=e}function pT(){var e=document.activeElement;if(lT(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function hT(){document.addEventListener("touchstart",dT,eo),window.addEventListener("blur",pT)}var mT=typeof window<"u"&&typeof document<"u",gT=mT?!!window.msCrypto:!1;var vT={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},yT={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Yr=Object.assign({appendTo:c1,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},vT,yT),bT=Object.keys(Yr),xT=function(t){var r=Object.keys(t);r.forEach(function(n){Yr[n]=t[n]})};function p1(e){var t=e.plugins||[],r=t.reduce(function(n,i){var o=i.name,s=i.defaultValue;if(o){var a;n[o]=e[o]!==void 0?e[o]:(a=Yr[o])!=null?a:s}return n},{});return Object.assign({},e,r)}function ST(e,t){var r=t?Object.keys(p1(Object.assign({},Yr,{plugins:t}))):bT,n=r.reduce(function(i,o){var s=(e.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return n}function i1(e,t){var r=Object.assign({},t,{content:f1(t.content,[e])},t.ignoreAttributes?{}:ST(e,t.plugins));return r.aria=Object.assign({},Yr.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var wT=function(){return"innerHTML"};function Ud(e,t){e[wT()]=t}function o1(e){var t=Zs();return e===!0?t.className=l1:(t.className=u1,Gl(e)?t.appendChild(e):Ud(t,e)),t}function s1(e,t){Gl(t.content)?(Ud(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Ud(e,t.content):e.textContent=t.content)}function Yd(e){var t=e.firstElementChild,r=jl(t.children);return{box:t,content:r.find(function(n){return n.classList.contains(a1)}),arrow:r.find(function(n){return n.classList.contains(l1)||n.classList.contains(u1)}),backdrop:r.find(function(n){return n.classList.contains(rT)})}}function h1(e){var t=Zs(),r=Zs();r.className=eT,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=Zs();n.className=a1,n.setAttribute("data-state","hidden"),s1(n,e.props),t.appendChild(r),r.appendChild(n),i(e.props,e.props);function i(o,s){var a=Yd(t),l=a.box,u=a.content,c=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&s1(u,e.props),s.arrow?c?o.arrow!==s.arrow&&(l.removeChild(c),l.appendChild(o1(s.arrow))):l.appendChild(o1(s.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:i}}h1.$$tippy=!0;var CT=1,Wl=[],qd=[];function _T(e,t){var r=i1(e,Object.assign({},Yr,p1(t1(t)))),n,i,o,s=!1,a=!1,l=!1,u=!1,c,f,d,p=[],h=Z0(bt,r.interactiveDebounce),m,g=CT++,v=null,b=iT(r.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},y={id:g,reference:e,popper:Zs(),popperInstance:v,props:r,state:w,plugins:b,clearDelayTimeouts:gr,setProps:vr,setContent:ki,show:Pa,hide:Fc,hideWithInteractivity:vo,enable:ee,disable:ae,unmount:vs,destroy:Hc};if(!r.render)return y;var S=r.render(y),x=S.popper,C=S.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+y.id,y.popper=x,e._tippy=y,x._tippy=y;var k=b.map(function(z){return z.fn(y)}),_=e.hasAttribute("aria-expanded");return J(),V(),F(),I("onCreate",[y]),r.showOnCreate&&be(),x.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&P().addEventListener("mousemove",h)}),y;function E(){var z=y.props.touch;return Array.isArray(z)?z:[z,0]}function A(){return E()[0]==="hold"}function O(){var z;return!!((z=y.props.render)!=null&&z.$$tippy)}function M(){return m||e}function P(){var z=M().parentNode;return z?cT(z):document}function R(){return Yd(x)}function B(z){return y.state.isMounted&&!y.state.isVisible||dn.isTouch||c&&c.type==="focus"?0:Wd(y.props.delay,z?0:1,Yr.delay)}function F(z){z===void 0&&(z=!1),x.style.pointerEvents=y.props.interactive&&!z?"":"none",x.style.zIndex=""+y.props.zIndex}function I(z,ft,wt){if(wt===void 0&&(wt=!0),k.forEach(function(Vt){Vt[z]&&Vt[z].apply(Vt,ft)}),wt){var Yt;(Yt=y.props)[z].apply(Yt,ft)}}function j(){var z=y.props.aria;if(z.content){var ft="aria-"+z.content,wt=x.id,Yt=$o(y.props.triggerTarget||e);Yt.forEach(function(Vt){var Oe=Vt.getAttribute(ft);if(y.state.isVisible)Vt.setAttribute(ft,Oe?Oe+" "+wt:wt);else{var Rt=Oe&&Oe.replace(wt,"").trim();Rt?Vt.setAttribute(ft,Rt):Vt.removeAttribute(ft)}})}}function V(){if(!(_||!y.props.aria.expanded)){var z=$o(y.props.triggerTarget||e);z.forEach(function(ft){y.props.interactive?ft.setAttribute("aria-expanded",y.state.isVisible&&ft===M()?"true":"false"):ft.removeAttribute("aria-expanded")})}}function L(){P().removeEventListener("mousemove",h),Wl=Wl.filter(function(z){return z!==h})}function Y(z){if(!(dn.isTouch&&(l||z.type==="mousedown"))){var ft=z.composedPath&&z.composedPath()[0]||z.target;if(!(y.props.interactive&&r1(x,ft))){if($o(y.props.triggerTarget||e).some(function(wt){return r1(wt,ft)})){if(dn.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else I("onClickOutside",[y,z]);y.props.hideOnClick===!0&&(y.clearDelayTimeouts(),y.hide(),a=!0,setTimeout(function(){a=!1}),y.state.isMounted||X())}}}function rt(){l=!0}function K(){l=!1}function tt(){var z=P();z.addEventListener("mousedown",Y,!0),z.addEventListener("touchend",Y,eo),z.addEventListener("touchstart",K,eo),z.addEventListener("touchmove",rt,eo)}function X(){var z=P();z.removeEventListener("mousedown",Y,!0),z.removeEventListener("touchend",Y,eo),z.removeEventListener("touchstart",K,eo),z.removeEventListener("touchmove",rt,eo)}function it(z,ft){xt(z,function(){!y.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&ft()})}function ut(z,ft){xt(z,ft)}function xt(z,ft){var wt=R().box;function Yt(Vt){Vt.target===wt&&(Gd(wt,"remove",Yt),ft())}if(z===0)return ft();Gd(wt,"remove",f),Gd(wt,"add",Yt),f=Yt}function Tt(z,ft,wt){wt===void 0&&(wt=!1);var Yt=$o(y.props.triggerTarget||e);Yt.forEach(function(Vt){Vt.addEventListener(z,ft,wt),p.push({node:Vt,eventType:z,handler:ft,options:wt})})}function J(){A()&&(Tt("touchstart",Bt,{passive:!0}),Tt("touchend",St,{passive:!0})),nT(y.props.trigger).forEach(function(z){if(z!=="manual")switch(Tt(z,Bt),z){case"mouseenter":Tt("mouseleave",St);break;case"focus":Tt(gT?"focusout":"blur",Et);break;case"focusin":Tt("focusout",Et);break}})}function ct(){p.forEach(function(z){var ft=z.node,wt=z.eventType,Yt=z.handler,Vt=z.options;ft.removeEventListener(wt,Yt,Vt)}),p=[]}function Bt(z){var ft,wt=!1;if(!(!y.state.isEnabled||jt(z)||a)){var Yt=((ft=c)==null?void 0:ft.type)==="focus";c=z,m=z.currentTarget,V(),!y.state.isVisible&&aT(z)&&Wl.forEach(function(Vt){return Vt(z)}),z.type==="click"&&(y.props.trigger.indexOf("mouseenter")<0||s)&&y.props.hideOnClick!==!1&&y.state.isVisible?wt=!0:be(z),z.type==="click"&&(s=!wt),wt&&!Yt&&se(z)}}function bt(z){var ft=z.target,wt=M().contains(ft)||x.contains(ft);if(!(z.type==="mousemove"&&wt)){var Yt=Zt().concat(x).map(function(Vt){var Oe,Rt=Vt._tippy,me=(Oe=Rt.popperInstance)==null?void 0:Oe.state;return me?{popperRect:Vt.getBoundingClientRect(),popperState:me,props:r}:null}).filter(Boolean);fT(Yt,z)&&(L(),se(z))}}function St(z){var ft=jt(z)||y.props.trigger.indexOf("click")>=0&&s;if(!ft){if(y.props.interactive){y.hideWithInteractivity(z);return}se(z)}}function Et(z){y.props.trigger.indexOf("focusin")<0&&z.target!==M()||y.props.interactive&&z.relatedTarget&&x.contains(z.relatedTarget)||se(z)}function jt(z){return dn.isTouch?A()!==z.type.indexOf("touch")>=0:!1}function Ut(){Mt();var z=y.props,ft=z.popperOptions,wt=z.placement,Yt=z.offset,Vt=z.getReferenceClientRect,Oe=z.moveTransition,Rt=O()?Yd(x).arrow:null,me=Vt?{getBoundingClientRect:Vt,contextElement:Vt.contextElement||M()}:e,ys={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Gn){var yo=Gn.state;if(O()){var Kw=R(),$c=Kw.box;["placement","reference-hidden","escaped"].forEach(function(Na){Na==="placement"?$c.setAttribute("data-placement",yo.placement):yo.attributes.popper["data-popper-"+Na]?$c.setAttribute("data-"+Na,""):$c.removeAttribute("data-"+Na)}),yo.attributes.popper={}}}},en=[{name:"offset",options:{offset:Yt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Oe}},ys];O()&&Rt&&en.push({name:"arrow",options:{element:Rt,padding:3}}),en.push.apply(en,ft?.modifiers||[]),y.popperInstance=Vd(me,x,Object.assign({},ft,{placement:wt,onFirstUpdate:d,modifiers:en}))}function Mt(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function Dt(){var z=y.props.appendTo,ft,wt=M();y.props.interactive&&z===c1||z==="parent"?ft=wt.parentNode:ft=f1(z,[wt]),ft.contains(x)||ft.appendChild(x),y.state.isMounted=!0,Ut()}function Zt(){return jl(x.querySelectorAll("[data-tippy-root]"))}function be(z){y.clearDelayTimeouts(),z&&I("onTrigger",[y,z]),tt();var ft=B(!0),wt=E(),Yt=wt[0],Vt=wt[1];dn.isTouch&&Yt==="hold"&&Vt&&(ft=Vt),ft?n=setTimeout(function(){y.show()},ft):y.show()}function se(z){if(y.clearDelayTimeouts(),I("onUntrigger",[y,z]),!y.state.isVisible){X();return}if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(z.type)>=0&&s)){var ft=B(!1);ft?i=setTimeout(function(){y.state.isVisible&&y.hide()},ft):o=requestAnimationFrame(function(){y.hide()})}}function ee(){y.state.isEnabled=!0}function ae(){y.hide(),y.state.isEnabled=!1}function gr(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(o)}function vr(z){if(!y.state.isDestroyed){I("onBeforeUpdate",[y,z]),ct();var ft=y.props,wt=i1(e,Object.assign({},ft,t1(z),{ignoreAttributes:!0}));y.props=wt,J(),ft.interactiveDebounce!==wt.interactiveDebounce&&(L(),h=Z0(bt,wt.interactiveDebounce)),ft.triggerTarget&&!wt.triggerTarget?$o(ft.triggerTarget).forEach(function(Yt){Yt.removeAttribute("aria-expanded")}):wt.triggerTarget&&e.removeAttribute("aria-expanded"),V(),F(),C&&C(ft,wt),y.popperInstance&&(Ut(),Zt().forEach(function(Yt){requestAnimationFrame(Yt._tippy.popperInstance.forceUpdate)})),I("onAfterUpdate",[y,z])}}function ki(z){y.setProps({content:z})}function Pa(){var z=y.state.isVisible,ft=y.state.isDestroyed,wt=!y.state.isEnabled,Yt=dn.isTouch&&!y.props.touch,Vt=Wd(y.props.duration,0,Yr.duration);if(!(z||ft||wt||Yt)&&!M().hasAttribute("disabled")&&(I("onShow",[y],!1),y.props.onShow(y)!==!1)){if(y.state.isVisible=!0,O()&&(x.style.visibility="visible"),F(),tt(),y.state.isMounted||(x.style.transition="none"),O()){var Oe=R(),Rt=Oe.box,me=Oe.content;jd([Rt,me],0)}d=function(){var en;if(!(!y.state.isVisible||u)){if(u=!0,x.offsetHeight,x.style.transition=y.props.moveTransition,O()&&y.props.animation){var bs=R(),Gn=bs.box,yo=bs.content;jd([Gn,yo],Vt),e1([Gn,yo],"visible")}j(),V(),Q0(qd,y),(en=y.popperInstance)==null||en.forceUpdate(),I("onMount",[y]),y.props.animation&&O()&&ut(Vt,function(){y.state.isShown=!0,I("onShown",[y])})}},Dt()}}function Fc(){var z=!y.state.isVisible,ft=y.state.isDestroyed,wt=!y.state.isEnabled,Yt=Wd(y.props.duration,1,Yr.duration);if(!(z||ft||wt)&&(I("onHide",[y],!1),y.props.onHide(y)!==!1)){if(y.state.isVisible=!1,y.state.isShown=!1,u=!1,s=!1,O()&&(x.style.visibility="hidden"),L(),X(),F(!0),O()){var Vt=R(),Oe=Vt.box,Rt=Vt.content;y.props.animation&&(jd([Oe,Rt],Yt),e1([Oe,Rt],"hidden"))}j(),V(),y.props.animation?O()&&it(Yt,y.unmount):y.unmount()}}function vo(z){P().addEventListener("mousemove",h),Q0(Wl,h),h(z)}function vs(){y.state.isVisible&&y.hide(),y.state.isMounted&&(Mt(),Zt().forEach(function(z){z._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),qd=qd.filter(function(z){return z!==y}),y.state.isMounted=!1,I("onHidden",[y]))}function Hc(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),ct(),delete e._tippy,y.state.isDestroyed=!0,I("onDestroy",[y]))}}function Qs(e,t){t===void 0&&(t={});var r=Yr.plugins.concat(t.plugins||[]);hT();var n=Object.assign({},t,{plugins:r}),i=uT(e);if(0)var o,s;var a=i.reduce(function(l,u){var c=u&&_T(u,n);return c&&l.push(c),l},[]);return Gl(e)?a[0]:a}Qs.defaultProps=Yr;Qs.setDefaultProps=xT;Qs.currentInput=dn;var YF=Object.assign({},Gs,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});Qs.setDefaultProps({render:h1});var Vo=Qs;var Xd=class{constructor({editor:t,element:r,view:n,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:u,to:c})=>{let{doc:f,selection:d}=l,{empty:p}=d,h=!f.textBetween(u,c).length&&Al(l.selection),m=this.element.contains(document.activeElement);return!(!(a.hasFocus()||m)||p||h||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a?.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{let u=!l?.selection.eq(a.state.selection),c=!l?.doc.eq(a.state.doc);!u&&!c||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,u,c,l)},this.updateDelay))},this.updateHandler=(a,l,u,c)=>{var f,d,p;let{state:h,composing:m}=a,{selection:g}=h;if(m||!l&&!u)return;this.createTooltip();let{ranges:b}=g,w=Math.min(...b.map(x=>x.$from.pos)),y=Math.max(...b.map(x=>x.$to.pos));if(!((f=this.shouldShow)===null||f===void 0?void 0:f.call(this,{editor:this.editor,view:a,state:h,oldState:c,from:w,to:y}))){this.hide();return}(d=this.tippy)===null||d===void 0||d.setProps({getReferenceClientRect:((p=this.tippyOptions)===null||p===void 0?void 0:p.getReferenceClientRect)||(()=>{if(O0(h.selection)){let x=a.nodeDOM(w),C=x.dataset.nodeViewWrapper?x:x.querySelector("[data-node-view-wrapper]");if(C&&(x=C.firstChild),x)return x.getBoundingClientRect()}return D0(a,w,y)})}),this.show()},this.editor=t,this.element=r,this.view=n,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){let{element:t}=this.editor.options,r=!!t.parentElement;this.tippy||!r||(this.tippy=Vo(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,r){let{state:n}=t,i=n.selection.$from.pos!==n.selection.$to.pos;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(t,r);return}let o=!r?.selection.eq(t.state.selection),s=!r?.doc.eq(t.state.doc);this.updateHandler(t,o,s,r)}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,r;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(r=this.tippy)===null||r===void 0||r.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}},kT=e=>new Ht({key:typeof e.pluginKey=="string"?new Wt(e.pluginKey):e.pluginKey,view:t=>new Xd({view:t,...e})}),m1=$t.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[kT({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var g1=$t.create({name:"classExtension",addGlobalAttributes(){return[{types:["heading","paragraph","link","image","listItem","bulletList","orderedList","table","tableHeader","tableRow","tableCell","textStyle"],attributes:{class:{default:null,parseHTML:e=>e.getAttribute("class")??null,renderHTML:e=>e.class?{class:e.class}:null}}}]}});var v1=$t.create({name:"commandsExtension",addCommands(){return{moveToEnd:()=>({chain:e,state:t,dispatch:r})=>t.selection.empty?!1:e().setTextSelection(t.selection.$to.pos).run()}}});var y1=$t.create({name:"dragAndDrop",addProseMirrorPlugins(){return[new Ht({key:new Wt("dragAndDrop"),props:{handleDrop(e,t){if(!t)return!1;t.preventDefault();let r=e.posAtCoords({left:t.clientX,top:t.clientY});return t.dataTransfer.getData("block")?(t.target.dispatchEvent(new CustomEvent("dragged-block",{detail:{tool:t.dataTransfer.getData("block"),coordinates:r},bubbles:!0})),!1):(t.dataTransfer.getData("mergeTag")&&t.target.dispatchEvent(new CustomEvent("dragged-merge-tag",{detail:{tag:t.dataTransfer.getData("mergeTag"),coordinates:r},bubbles:!0})),!1)}}})]}});function ql(e,t,r=null){return r?e.createChecked({"data-col-span":t},r):e.createAndFill({"data-col-span":t})}function b1(e){if(e.cached.gridNodeTypes)return e.cached.gridNodeTypes;let t={};return Object.keys(e.nodes).forEach(r=>{let n=e.nodes[r];n.spec.gridRole&&(t[n.spec.gridRole]=n)}),e.cached.gridNodeTypes=t,t}function x1(e,t,r,n,i=null,o=null,s=null){let{grid:a,column:l}=b1(e),u=[];if(n)u.push(ql(l,i,s)),u.push(ql(l,o,s));else for(let c=0;c<t;c+=1){let f=ql(l,1,s);f&&u.push(f)}return a.createChecked({"data-columns":t,"data-type":n??"responsive","data-stack-at":r},u)}var S1=yt.create({name:"grid",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,content:"gridColumn+",gridRole:"grid",addOptions(){return{HTMLAttributes:{class:"scribble-grid"}}},addAttributes(){return{"data-type":{default:"responsive",parseHTML:e=>e.getAttribute("data-type")},"data-columns":{default:2,parseHTML:e=>e.getAttribute("data-columns")},"data-stack-at":{default:"md",parseHTML:e=>e.getAttribute("data-stack-at")},style:{default:null,parseHTML:e=>e.getAttribute("style"),renderHTML:e=>({style:`grid-template-columns: repeat(${e["data-columns"]}, 1fr);`})}}},parseHTML(){return[{tag:"div",getAttrs:e=>e.classList.contains("scribble-grid")&&!e.classList.contains("-column")&&null}]},renderHTML({HTMLAttributes:e}){return["div",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{insertGrid:({columns:e=2,stack_at:t,asymmetric:r,left_span:n=null,right_span:i=null,coordinates:o=null}={})=>({tr:s,dispatch:a,editor:l})=>{let u=x1(l.schema,e,t,r,n,i);if(a){let c=s.selection.anchor+1;[null,void 0].includes(o?.pos)?s.replaceSelectionWith(u).scrollIntoView().setSelection(dt.near(s.doc.resolve(c))):s.replaceRangeWith(o.pos,o.pos,u).scrollIntoView().setSelection(dt.near(s.doc.resolve(c)))}return!0}}},extendNodeSchema(e){let t={name:e.name,options:e.options,storage:e.storage};return{gridRole:kt(st(e,"gridRole",t))}}});var w1=yt.create({name:"gridColumn",content:"block+",gridRole:"column",isolating:!0,addOptions(){return{HTMLAttributes:{class:"scribble-grid-column"}}},addAttributes(){return{"data-col-span":{default:1,parseHTML:e=>e.getAttribute("data-col-span"),renderHTML:e=>({"data-col-span":e["data-col-span"]??1})},style:{default:null,parseHTML:e=>e.getAttribute("style"),renderHTML:e=>({style:`grid-column: span ${e["data-col-span"]??1};`})}}},parseHTML(){return[{tag:"div",getAttrs:e=>e.classList.contains("scribble-grid-column")&&null}]},renderHTML({HTMLAttributes:e}){return["div",lt(this.options.HTMLAttributes,e),0]}});var C1=yt.create({name:"details",content:"detailsSummary detailsContent",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{}},parseHTML(){return[{tag:"details"}]},renderHTML({HTMLAttributes:e}){return["details",lt(this.options.HTMLAttributes,e),0]},addNodeView(){return({HTMLAttributes:e})=>{let t=document.createElement("div"),r=document.createElement("div"),n=lt(this.options.HTMLAttributes,e,{"data-type":this.name});return Object.entries(n).forEach(([i,o])=>t.setAttribute(i,o)),{dom:t,contentDOM:t,ignoreMutation(i){return i.type==="selection"?!1:!t.contains(i.target)||t===i.target},update:i=>i.type===this.type}}},addCommands(){return{setDetails:()=>({state:e,chain:t})=>{let r,{schema:n,selection:i}=e,{$from:o,$to:s}=i,a=o.blockRange(s);if(!a)return!1;let l=e.doc.slice(a.start,a.end);if(!n.nodes.detailsContent.contentMatch.matchFragment(l.content))return!1;let c=((r=l.toJSON())===null||r===void 0?void 0:r.content)||[];return t().insertContentAt({from:a.start,to:a.end},{type:this.name,content:[{type:"detailsSummary"},{type:"detailsContent",content:c}]}).setTextSelection(a.start+2).run()},unsetDetails:()=>({state:e,chain:t})=>{let{selection:r,schema:n}=e,i=qi(v=>v.type===this.type)(r);if(!i)return!1;let o=Ed(i.node,v=>v.type===n.nodes.detailsSummary),s=Ed(i.node,v=>v.type===n.nodes.detailsContent);if(!o.length||!s.length)return!1;let a=o[0],l=s[0],u=i.pos,c=e.doc.resolve(u),f=u+i.node.nodeSize,d={from:u,to:f},p=l.node.content.toJSON()||[],h=c.parent.type.contentMatch.defaultType,g=[h?.create(null,a.node.content).toJSON(),...p];return t().insertContentAt(d,g).setTextSelection(u+1).run()}}},addKeyboardShortcuts(){return{Backspace:()=>{let{schema:e,selection:t}=this.editor.state,{empty:r,$anchor:n}=t;return!r||n.parent.type!==e.nodes.detailsSummary?!1:n.parentOffset!==0?this.editor.commands.command(({tr:i})=>{let o=n.pos-1,s=n.pos;return i.delete(o,s),!0}):this.editor.commands.unsetDetails()}}}});var _1=yt.create({name:"detailsSummary",content:"text*",defining:!0,selectable:!1,isolating:!0,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"summary"}]},renderHTML({HTMLAttributes:e}){return["summary",lt(this.options.HTMLAttributes,e),0]}});var k1=yt.create({name:"detailsContent",content:"block+",defining:!0,selectable:!1,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:'div[data-type="details-content"]'}]},renderHTML({HTMLAttributes:e}){return["div",lt(this.options.HTMLAttributes,e,{"data-type":"details-content"}),0]},addKeyboardShortcuts(){return{Enter:({editor:e})=>{let{state:t,view:r}=e,{selection:n}=t,{$from:i,empty:o}=n,s=qi(A=>A.type===this.type)(n);if(!o||!s||!s.node.childCount)return!1;let a=i.index(s.depth),{childCount:l}=s.node;if(!(l===a+1))return!1;let c=s.node.type.contentMatch.defaultType,f=c?.createAndFill();if(!f)return!1;let d=t.doc.resolve(s.pos+1),p=l-1,h=s.node.child(p),m=d.posAtIndex(p,s.depth);if(!h.eq(f))return!1;let v=i.node(-3);if(!v)return!1;let b=i.indexAfter(-3),w=kd(v.contentMatchAt(b));if(!w||!v.canReplaceWith(b,b,w))return!1;let y=w.createAndFill();if(!y)return!1;let{tr:S}=t,x=i.after(-2);S.replaceWith(x,x,y);let C=S.doc.resolve(x),k=pt.near(C,1);S.setSelection(k);let _=m,E=m+h.nodeSize;return S.delete(_,E),S.scrollIntoView(),r.dispatch(S),!0}}}});var E1=$t.create({name:"idExtension",addGlobalAttributes(){return[{types:["heading","link"],attributes:{id:{default:null,parseHTML:e=>e.getAttribute("id")??null,renderHTML:e=>e.id?{id:e.id}:null}}}]}});var ET="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xF6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",MT="\u03B5\u03BB1\u03C52\u0431\u04331\u0435\u043B3\u0434\u0435\u0442\u04384\u0435\u044E2\u043A\u0430\u0442\u043E\u043B\u0438\u043A6\u043E\u043C3\u043C\u043A\u04342\u043E\u043D1\u0441\u043A\u0432\u04306\u043E\u043D\u043B\u0430\u0439\u043D5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043A\u04403\u049B\u0430\u04373\u0570\u0561\u05753\u05D9\u05E9\u05E8\u05D0\u05DC5\u05E7\u05D5\u05DD3\u0627\u0628\u0648\u0638\u0628\u064A5\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062F\u06464\u0628\u062D\u0631\u064A\u06465\u062C\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062F\u064A\u06296\u0639\u0644\u064A\u0627\u06465\u0645\u063A\u0631\u06285\u0645\u0627\u0631\u0627\u062A5\u06CC\u0631\u0627\u06465\u0628\u0627\u0631\u062A2\u0632\u0627\u06314\u064A\u062A\u06433\u06BE\u0627\u0631\u062A5\u062A\u0648\u0646\u06334\u0633\u0648\u062F\u0627\u06463\u0631\u064A\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064A\u06466\u0642\u0637\u06313\u0643\u0627\u062B\u0648\u0644\u064A\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064A\u0633\u064A\u06275\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067E\u0627\u06A9\u0633\u062A\u0627\u06467\u0680\u0627\u0631\u062A4\u0915\u0949\u092E3\u0928\u0947\u091F3\u092D\u093E\u0930\u09240\u092E\u094D3\u094B\u09245\u0938\u0902\u0917\u0920\u09285\u09AC\u09BE\u0982\u09B2\u09BE5\u09AD\u09BE\u09B0\u09A42\u09F0\u09A44\u0A2D\u0A3E\u0A30\u0A244\u0AAD\u0ABE\u0AB0\u0AA44\u0B2D\u0B3E\u0B30\u0B244\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE6\u0BB2\u0B99\u0BCD\u0B95\u0BC86\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD11\u0C2D\u0C3E\u0C30\u0C24\u0C4D5\u0CAD\u0CBE\u0CB0\u0CA44\u0D2D\u0D3E\u0D30\u0D24\u0D025\u0DBD\u0D82\u0D9A\u0DCF4\u0E04\u0E2D\u0E213\u0E44\u0E17\u0E223\u0EA5\u0EB2\u0EA73\u10D2\u10D42\u307F\u3093\u306A3\u30A2\u30DE\u30BE\u30F34\u30AF\u30E9\u30A6\u30C94\u30B0\u30FC\u30B0\u30EB4\u30B3\u30E02\u30B9\u30C8\u30A23\u30BB\u30FC\u30EB3\u30D5\u30A1\u30C3\u30B7\u30E7\u30F36\u30DD\u30A4\u30F3\u30C84\u4E16\u754C2\u4E2D\u4FE11\u56FD1\u570B1\u6587\u7F513\u4E9A\u9A6C\u900A3\u4F01\u4E1A2\u4F5B\u5C712\u4FE1\u606F2\u5065\u5EB72\u516B\u53662\u516C\u53F81\u76CA2\u53F0\u6E7E1\u70632\u5546\u57CE1\u5E971\u68072\u5609\u91CC0\u5927\u9152\u5E975\u5728\u7EBF2\u5927\u62FF2\u5929\u4E3B\u65593\u5A31\u4E502\u5BB6\u96FB2\u5E7F\u4E1C2\u5FAE\u535A2\u6148\u55842\u6211\u7231\u4F603\u624B\u673A2\u62DB\u80582\u653F\u52A11\u5E9C2\u65B0\u52A0\u57612\u95FB2\u65F6\u5C1A2\u66F8\u7C4D2\u673A\u67842\u6DE1\u9A6C\u95213\u6E38\u620F2\u6FB3\u95802\u70B9\u770B2\u79FB\u52A82\u7EC4\u7EC7\u673A\u67844\u7F51\u57401\u5E971\u7AD91\u7EDC2\u8054\u901A2\u8C37\u6B4C2\u8D2D\u72692\u901A\u8CA92\u96C6\u56E22\u96FB\u8A0A\u76C8\u79D14\u98DE\u5229\u6D663\u98DF\u54C12\u9910\u53852\u9999\u683C\u91CC\u62C93\u6E2F2\uB2F7\uB1371\uCEF42\uC0BC\uC1312\uD55C\uAD6D2",Go=(e,t)=>{for(let r in t)e[r]=t[r];return e},ep="numeric",rp="ascii",np="alpha",Jl="asciinumeric",Ul="alphanumeric",ip="domain",I1="emoji",TT="scheme",OT="slashscheme",M1="whitespace";function DT(e,t){return e in t||(t[e]=[]),t[e]}function ro(e,t,r){t[ep]&&(t[Jl]=!0,t[Ul]=!0),t[rp]&&(t[Jl]=!0,t[np]=!0),t[Jl]&&(t[Ul]=!0),t[np]&&(t[Ul]=!0),t[Ul]&&(t[ip]=!0),t[I1]&&(t[ip]=!0);for(let n in t){let i=DT(n,r);i.indexOf(e)<0&&i.push(e)}}function AT(e,t){let r={};for(let n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function dr(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}dr.groups={};dr.prototype={accepts(){return!!this.t},go(e){let t=this,r=t.j[e];if(r)return r;for(let n=0;n<t.jr.length;n++){let i=t.jr[n][0],o=t.jr[n][1];if(o&&i.test(e))return o}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,r,n){for(let i=0;i<e.length;i++)this.tt(e[i],t,r,n)},tr(e,t,r,n){n=n||dr.groups;let i;return t&&t.j?i=t:(i=new dr(t),r&&n&&ro(t,r,n)),this.jr.push([e,i]),i},ts(e,t,r,n){let i=this,o=e.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(e[s]);return i.tt(e[o-1],t,r,n)},tt(e,t,r,n){n=n||dr.groups;let i=this;if(t&&t.j)return i.j[e]=t,t;let o=t,s,a=i.go(e);if(a?(s=new dr,Go(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new dr,o){if(n)if(s.t&&typeof s.t=="string"){let l=Go(AT(s.t,n),r);ro(o,l,n)}else r&&ro(o,r,n);s.t=o}return i.j[e]=s,s}};var At=(e,t,r,n,i)=>e.ta(t,r,n,i),Or=(e,t,r,n,i)=>e.tr(t,r,n,i),T1=(e,t,r,n,i)=>e.ts(t,r,n,i),et=(e,t,r,n,i)=>e.tt(t,r,n,i),Fn="WORD",op="UWORD",na="LOCALHOST",sp="TLD",ap="UTLD",Zl="SCHEME",jo="SLASH_SCHEME",lp="NUM",L1="WS",up="NL",ta="OPENBRACE",ea="CLOSEBRACE",Ql="OPENBRACKET",tu="CLOSEBRACKET",eu="OPENPAREN",ru="CLOSEPAREN",nu="OPENANGLEBRACKET",iu="CLOSEANGLEBRACKET",ou="FULLWIDTHLEFTPAREN",su="FULLWIDTHRIGHTPAREN",au="LEFTCORNERBRACKET",lu="RIGHTCORNERBRACKET",uu="LEFTWHITECORNERBRACKET",cu="RIGHTWHITECORNERBRACKET",fu="FULLWIDTHLESSTHAN",du="FULLWIDTHGREATERTHAN",pu="AMPERSAND",hu="APOSTROPHE",mu="ASTERISK",ui="AT",gu="BACKSLASH",vu="BACKTICK",yu="CARET",ci="COLON",cp="COMMA",bu="DOLLAR",pn="DOT",xu="EQUALS",fp="EXCLAMATION",hn="HYPHEN",Su="PERCENT",wu="PIPE",Cu="PLUS",_u="POUND",ku="QUERY",dp="QUOTE",pp="SEMI",mn="SLASH",ra="TILDE",Eu="UNDERSCORE",B1="EMOJI",Mu="SYM",z1=Object.freeze({__proto__:null,WORD:Fn,UWORD:op,LOCALHOST:na,TLD:sp,UTLD:ap,SCHEME:Zl,SLASH_SCHEME:jo,NUM:lp,WS:L1,NL:up,OPENBRACE:ta,CLOSEBRACE:ea,OPENBRACKET:Ql,CLOSEBRACKET:tu,OPENPAREN:eu,CLOSEPAREN:ru,OPENANGLEBRACKET:nu,CLOSEANGLEBRACKET:iu,FULLWIDTHLEFTPAREN:ou,FULLWIDTHRIGHTPAREN:su,LEFTCORNERBRACKET:au,RIGHTCORNERBRACKET:lu,LEFTWHITECORNERBRACKET:uu,RIGHTWHITECORNERBRACKET:cu,FULLWIDTHLESSTHAN:fu,FULLWIDTHGREATERTHAN:du,AMPERSAND:pu,APOSTROPHE:hu,ASTERISK:mu,AT:ui,BACKSLASH:gu,BACKTICK:vu,CARET:yu,COLON:ci,COMMA:cp,DOLLAR:bu,DOT:pn,EQUALS:xu,EXCLAMATION:fp,HYPHEN:hn,PERCENT:Su,PIPE:wu,PLUS:Cu,POUND:_u,QUERY:ku,QUOTE:dp,SEMI:pp,SLASH:mn,TILDE:ra,UNDERSCORE:Eu,EMOJI:B1,SYM:Mu}),Wo=/[a-z]/,Jd=/\p{L}/u,Zd=/\p{Emoji}/u;var Qd=/\d/,O1=/\s/;var D1=`
`,RT="\uFE0F",PT="\u200D",Yl=null,Kl=null;function NT(e){e===void 0&&(e=[]);let t={};dr.groups=t;let r=new dr;Yl==null&&(Yl=A1(ET)),Kl==null&&(Kl=A1(MT)),et(r,"'",hu),et(r,"{",ta),et(r,"}",ea),et(r,"[",Ql),et(r,"]",tu),et(r,"(",eu),et(r,")",ru),et(r,"<",nu),et(r,">",iu),et(r,"\uFF08",ou),et(r,"\uFF09",su),et(r,"\u300C",au),et(r,"\u300D",lu),et(r,"\u300E",uu),et(r,"\u300F",cu),et(r,"\uFF1C",fu),et(r,"\uFF1E",du),et(r,"&",pu),et(r,"*",mu),et(r,"@",ui),et(r,"`",vu),et(r,"^",yu),et(r,":",ci),et(r,",",cp),et(r,"$",bu),et(r,".",pn),et(r,"=",xu),et(r,"!",fp),et(r,"-",hn),et(r,"%",Su),et(r,"|",wu),et(r,"+",Cu),et(r,"#",_u),et(r,"?",ku),et(r,'"',dp),et(r,"/",mn),et(r,";",pp),et(r,"~",ra),et(r,"_",Eu),et(r,"\\",gu);let n=Or(r,Qd,lp,{[ep]:!0});Or(n,Qd,n);let i=Or(r,Wo,Fn,{[rp]:!0});Or(i,Wo,i);let o=Or(r,Jd,op,{[np]:!0});Or(o,Wo),Or(o,Jd,o);let s=Or(r,O1,L1,{[M1]:!0});et(r,D1,up,{[M1]:!0}),et(s,D1),Or(s,O1,s);let a=Or(r,Zd,B1,{[I1]:!0});Or(a,Zd,a),et(a,RT,a);let l=et(a,PT);Or(l,Zd,a);let u=[[Wo,i]],c=[[Wo,null],[Jd,o]];for(let f=0;f<Yl.length;f++)li(r,Yl[f],sp,Fn,u);for(let f=0;f<Kl.length;f++)li(r,Kl[f],ap,op,c);ro(sp,{tld:!0,ascii:!0},t),ro(ap,{utld:!0,alpha:!0},t),li(r,"file",Zl,Fn,u),li(r,"mailto",Zl,Fn,u),li(r,"http",jo,Fn,u),li(r,"https",jo,Fn,u),li(r,"ftp",jo,Fn,u),li(r,"ftps",jo,Fn,u),ro(Zl,{scheme:!0,ascii:!0},t),ro(jo,{slashscheme:!0,ascii:!0},t),e=e.sort((f,d)=>f[0]>d[0]?1:-1);for(let f=0;f<e.length;f++){let d=e[f][0],h=e[f][1]?{[TT]:!0}:{[OT]:!0};d.indexOf("-")>=0?h[ip]=!0:Wo.test(d)?Qd.test(d)?h[Jl]=!0:h[rp]=!0:h[ep]=!0,T1(r,d,d,h)}return T1(r,"localhost",na,{ascii:!0}),r.jd=new dr(Mu),{start:r,tokens:Go({groups:t},z1)}}function IT(e,t){let r=LT(t.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[],o=0,s=0;for(;s<n;){let a=e,l=null,u=0,c=null,f=-1,d=-1;for(;s<n&&(l=a.go(r[s]));)a=l,a.accepts()?(f=0,d=0,c=a):f>=0&&(f+=r[s].length,d++),u+=r[s].length,o+=r[s].length,s++;o-=f,s-=d,u-=f,i.push({t:c.t,v:t.slice(o-u,o),s:o-u,e:o})}return i}function LT(e){let t=[],r=e.length,n=0;for(;n<r;){let i=e.charCodeAt(n),o,s=i<55296||i>56319||n+1===r||(o=e.charCodeAt(n+1))<56320||o>57343?e[n]:e.slice(n,n+2);t.push(s),n+=s.length}return t}function li(e,t,r,n,i){let o,s=t.length;for(let a=0;a<s-1;a++){let l=t[a];e.j[l]?o=e.j[l]:(o=new dr(n),o.jr=i.slice(),e.j[l]=o),e=o}return o=new dr(r),o.jr=i.slice(),e.j[t[s-1]]=o,o}function A1(e){let t=[],r=[],n=0,i="0123456789";for(;n<e.length;){let o=0;for(;i.indexOf(e[n+o])>=0;)o++;if(o>0){t.push(r.join(""));for(let s=parseInt(e.substring(n,n+o),10);s>0;s--)r.pop();n+=o}else r.push(e[n]),n++}return t}var ia={defaultProtocol:"http",events:null,format:R1,formatHref:R1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function hp(e,t){t===void 0&&(t=null);let r=Go({},ia);e&&(r=Go(r,e instanceof hp?e.o:e));let n=r.ignoreTags,i=[];for(let o=0;o<n.length;o++)i.push(n[o].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=i}hp.prototype={o:ia,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,r){let n=t!=null,i=this.o[e];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:ia[e],typeof i=="function"&&n&&(i=i(t,r))):typeof i=="function"&&n&&(i=i(t,r.t,r)),i)},getObj(e,t,r){let n=this.o[e];return typeof n=="function"&&t!=null&&(n=n(t,r.t,r)),n},render(e){let t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function R1(e){return e}function F1(e,t){this.t="token",this.v=e,this.tk=t}F1.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){let t=this.toString(),r=e.get("truncate",t,this),n=e.get("format",t,this);return r&&n.length>r?n.substring(0,r)+"\u2026":n},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=ia.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){let t=this,r=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",r,this),i=e.get("tagName",r,t),o=this.toFormattedString(e),s={},a=e.get("className",r,t),l=e.get("target",r,t),u=e.get("rel",r,t),c=e.getObj("attributes",r,t),f=e.getObj("events",r,t);return s.href=n,a&&(s.class=a),l&&(s.target=l),u&&(s.rel=u),c&&Go(s,c),{tagName:i,attributes:s,content:o,eventListeners:f}}};function Tu(e,t){class r extends F1{constructor(i,o){super(i,o),this.t=e}}for(let n in t)r.prototype[n]=t[n];return r.t=e,r}var P1=Tu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),N1=Tu("text"),BT=Tu("nl"),Xl=Tu("url",{isLink:!0,toHref(e){return e===void 0&&(e=ia.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){let e=this.tk;return e.length>=2&&e[0].t!==na&&e[1].t===ci}});var Dr=e=>new dr(e);function zT(e){let{groups:t}=e,r=t.domain.concat([pu,mu,ui,gu,vu,yu,bu,xu,hn,lp,Su,wu,Cu,_u,mn,Mu,ra,Eu]),n=[hu,ci,cp,pn,fp,ku,dp,pp,nu,iu,ta,ea,tu,Ql,eu,ru,ou,su,au,lu,uu,cu,fu,du],i=[pu,hu,mu,gu,vu,yu,bu,xu,hn,ta,ea,Su,wu,Cu,_u,ku,mn,Mu,ra,Eu],o=Dr(),s=et(o,ra);At(s,i,s),At(s,t.domain,s);let a=Dr(),l=Dr(),u=Dr();At(o,t.domain,a),At(o,t.scheme,l),At(o,t.slashscheme,u),At(a,i,s),At(a,t.domain,a);let c=et(a,ui);et(s,ui,c),et(l,ui,c),et(u,ui,c);let f=et(s,pn);At(f,i,s),At(f,t.domain,s);let d=Dr();At(c,t.domain,d),At(d,t.domain,d);let p=et(d,pn);At(p,t.domain,d);let h=Dr(P1);At(p,t.tld,h),At(p,t.utld,h),et(c,na,h);let m=et(d,hn);At(m,t.domain,d),At(h,t.domain,d),et(h,pn,p),et(h,hn,m);let g=et(h,ci);At(g,t.numeric,P1);let v=et(a,hn),b=et(a,pn);At(v,t.domain,a),At(b,i,s),At(b,t.domain,a);let w=Dr(Xl);At(b,t.tld,w),At(b,t.utld,w),At(w,t.domain,a),At(w,i,s),et(w,pn,b),et(w,hn,v),et(w,ui,c);let y=et(w,ci),S=Dr(Xl);At(y,t.numeric,S);let x=Dr(Xl),C=Dr();At(x,r,x),At(x,n,C),At(C,r,x),At(C,n,C),et(w,mn,x),et(S,mn,x);let k=et(l,ci),_=et(u,ci),E=et(_,mn),A=et(E,mn);At(l,t.domain,a),et(l,pn,b),et(l,hn,v),At(u,t.domain,a),et(u,pn,b),et(u,hn,v),At(k,t.domain,x),et(k,mn,x),At(A,t.domain,x),At(A,r,x),et(A,mn,x);let O=[[ta,ea],[Ql,tu],[eu,ru],[nu,iu],[ou,su],[au,lu],[uu,cu],[fu,du]];for(let M=0;M<O.length;M++){let[P,R]=O[M],B=et(x,P);et(C,P,B),et(B,R,x);let F=Dr(Xl);At(B,r,F);let I=Dr();At(B,n),At(F,r,F),At(F,n,I),At(I,r,F),At(I,n,I),et(F,R,x),et(I,R,x)}return et(o,na,w),et(o,up,BT),{start:o,tokens:z1}}function FT(e,t,r){let n=r.length,i=0,o=[],s=[];for(;i<n;){let a=e,l=null,u=null,c=0,f=null,d=-1;for(;i<n&&!(l=a.go(r[i].t));)s.push(r[i++]);for(;i<n&&(u=l||a.go(r[i].t));)l=null,a=u,a.accepts()?(d=0,f=a):d>=0&&d++,i++,c++;if(d<0)i-=c,i<n&&(s.push(r[i]),i++);else{s.length>0&&(o.push(tp(N1,t,s)),s=[]),i-=d,c-=d;let p=f.t,h=r.slice(i-c,i);o.push(tp(p,t,h))}}return s.length>0&&o.push(tp(N1,t,s)),o}function tp(e,t,r){let n=r[0].s,i=r[r.length-1].e,o=t.slice(n,i);return new e(o,r)}var HT=typeof console<"u"&&console&&console.warn||(()=>{}),$T="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",pe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function H1(){dr.groups={},pe.scanner=null,pe.parser=null,pe.tokenQueue=[],pe.pluginQueue=[],pe.customSchemes=[],pe.initialized=!1}function mp(e,t){if(t===void 0&&(t=!1),pe.initialized&&HT(`linkifyjs: already initialized - will not register custom scheme "${e}" ${$T}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);pe.customSchemes.push([e,t])}function VT(){pe.scanner=NT(pe.customSchemes);for(let e=0;e<pe.tokenQueue.length;e++)pe.tokenQueue[e][1]({scanner:pe.scanner});pe.parser=zT(pe.scanner.tokens);for(let e=0;e<pe.pluginQueue.length;e++)pe.pluginQueue[e][1]({scanner:pe.scanner,parser:pe.parser});pe.initialized=!0}function WT(e){return pe.initialized||VT(),FT(pe.parser.start,e,IT(pe.scanner.start,e))}function Ou(e,t,r){if(t===void 0&&(t=null),r===void 0&&(r=null),t&&typeof t=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}let n=new hp(r),i=WT(e),o=[];for(let s=0;s<i.length;s++){let a=i[s];a.isLink&&(!t||a.t===t)&&n.check(a)&&o.push(a.toFormattedObject(n))}return o}function jT(e){return new Ht({key:new Wt("autolink"),appendTransaction:(t,r,n)=>{let i=t.some(u=>u.docChanged)&&!r.doc.eq(n.doc),o=t.some(u=>u.getMeta("preventAutolink"));if(!i||o)return;let{tr:s}=n,a=E0(r.doc,[...t]);if(T0(a).forEach(({newRange:u})=>{let c=M0(n.doc,u,p=>p.isTextblock),f,d;if(c.length>1?(f=c[0],d=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):c.length&&n.doc.textBetween(u.from,u.to," "," ").endsWith(" ")&&(f=c[0],d=n.doc.textBetween(f.pos,u.to,void 0," ")),f&&d){let p=d.split(" ").filter(g=>g!=="");if(p.length<=0)return!1;let h=p[p.length-1],m=f.pos+d.lastIndexOf(h);if(!h)return!1;Ou(h).filter(g=>g.isLink).map(g=>({...g,from:m+g.start+1,to:m+g.end+1})).filter(g=>n.schema.marks.code?!n.doc.rangeHasMark(g.from,g.to,n.schema.marks.code):!0).filter(g=>e.validate?e.validate(g.value):!0).forEach(g=>{Il(g.from,g.to,n.doc).some(v=>v.mark.type===e.type)||s.addMark(g.from,g.to,e.type.create({href:g.href}))})}}),!!s.steps.length)return s}})}function GT(e){return new Ht({key:new Wt("handleClickLink"),props:{handleClick:(t,r,n)=>{var i,o;if(n.button!==0)return!1;let s=n.target,a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(d=>d.nodeName==="A"))return!1;let l=Td(t.state,e.type.name),u=n.target,c=(i=u?.href)!==null&&i!==void 0?i:l.href,f=(o=u?.target)!==null&&o!==void 0?o:l.target;return u&&c?(window.open(c,f),!0):!1}}})}function qT(e){return new Ht({key:new Wt("handlePasteLink"),props:{handlePaste:(t,r,n)=>{let{state:i}=t,{selection:o}=i,{empty:s}=o;if(s)return!1;let a="";n.content.forEach(u=>{a+=u.textContent});let l=Ou(a).find(u=>u.isLink&&u.value===a);return!a||!l?!1:(e.editor.commands.setMark(e.type,{href:l.href}),!0)}}})}var $1=oe.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(e=>{if(typeof e=="string"){mp(e);return}mp(e.scheme,e.optionalSlashes)})},onDestroy(){H1()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:e}){var t;return!((t=e.href)===null||t===void 0)&&t.startsWith("javascript:")?["a",lt(this.options.HTMLAttributes,{...e,href:""}),0]:["a",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setLink:e=>({chain:t})=>t().setMark(this.name,e).setMeta("preventAutolink",!0).run(),toggleLink:e=>({chain:t})=>t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[kr({find:(e,t)=>{var r;let n=(r=t?.clipboardData)===null||r===void 0?void 0:r.getData("text/html"),i=[];if(n){let o=new DOMParser().parseFromString(n,"text/html"),s=o.querySelectorAll("a");s.length&&[...s].forEach(a=>i.push({text:a.innerText,data:{href:a.getAttribute("href")},index:o.body.innerText.indexOf(a.innerText)+a.innerText.length}))}if(e){let o=Ou(e).filter(s=>s.isLink);o.length&&o.forEach(s=>i.push({text:s.value,data:{href:s.href},index:s.start}))}return i},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){let e=[];return this.options.autolink&&e.push(jT({type:this.type,validate:this.options.validate})),this.options.openOnClick&&e.push(GT({type:this.type})),this.options.linkOnPaste&&e.push(qT({editor:this.editor,type:this.type})),e}});var V1=$1.extend({inclusive:!1,addOptions(){return{openOnClick:!1,linkOnPaste:!0,autolink:!1,protocols:[],HTMLAttributes:{},validate:void 0}},addAttributes(){return{href:{default:null},id:{default:null},target:{default:this.options.HTMLAttributes.target},hreflang:{default:null},rel:{default:null},referrerpolicy:{default:null},class:{default:null}}}});var UT=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,W1=yt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",lt(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Ll({find:UT,type:this.type,getAttributes:e=>{let[,,t,r,n]=e;return{src:r,alt:t,title:n}}})]}});var gp=class{constructor(t,{element:r}){this.component=t,this.dom=r,this.dom.classList.add("svelte-renderer")}updateProps(t){this.component.$set(t)}destroy(){this.component.$destroy()}},vp=gp;var Du="TipTapNodeView";var yp=class extends Ml{mount(){let t=this.component,r={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(a={})=>this.updateAttributes(a),deleteNode:()=>this.deleteNode()};this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let n=new Map;n.set(Du,{onDragStart:this.onDragStart.bind(this)});let i=this.options.as??(this.node.isInline?"span":"div"),o=document.createElement(i);o.classList.add(`node-${this.node.type.name}`),this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate);let s=new t({target:o,props:r,context:n});this.renderer=new vp(s,{element:o}),this.appendContendDom()}appendContendDom(){let t=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&t&&!t.contains(this.contentDOMElement)&&t.appendChild(this.contentDOMElement)}get dom(){if(!this.renderer.dom.firstElementChild?.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.dom}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:t,to:r}=this.editor.state.selection;t<=this.getPos()&&r>=this.getPos()+this.node.nodeSize?this.selectNode():this.deselectNode()}update(t,r){let n=()=>{this.renderer.updateProps({node:t,decorations:r})};if(typeof this.options.update=="function"){let i=this.node,o=this.decorations;return this.node=t,this.decorations=r,this.options.update({oldNode:i,oldDecorations:o,newNode:t,newDecorations:r,updateProps:()=>n()})}return t.type!==this.node.type?!1:(t===this.node&&this.decorations===r||(this.node=t,this.decorations=r,n()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}},YT=(e,t)=>r=>new yp(e,r,t),oa=YT;function bp(e){let t,r,n,i,o=e[5].default,s=rn(o,e,e[4],null),a=[{"data-node-view-wrapper":""},{role:"none"},e[3]],l={};for(let u=0;u<a.length;u+=1)l=Fr(l,a[u]);return{c(){t=ot(e[0]),s&&s.c(),$a(e[0])(t,l)},m(u,c){q(u,t,c),s&&s.m(t,null),e[6](t),r=!0,n||(i=De(t,"dragstart",e[2]),n=!0)},p(u,c){s&&s.p&&(!r||c&16)&&on(s,o,u,u[4],r?nn(o,u[4],c,null):sn(u[4]),null),$a(u[0])(t,l=Xc(a,[{"data-node-view-wrapper":""},{role:"none"},c&8&&u[3]]))},i(u){r||(W(s,u),r=!0)},o(u){Z(s,u),r=!1},d(u){u&&G(t),s&&s.d(u),e[6](null),n=!1,i()}}}function KT(e){let t=e[0],r,n,i=e[0]&&bp(e);return{c(){i&&i.c(),r=Qt()},m(o,s){i&&i.m(o,s),q(o,r,s),n=!0},p(o,[s]){o[0]?t?Nt(t,o[0])?(i.d(1),i=bp(o),t=o[0],i.c(),i.m(r.parentNode,r)):i.p(o,s):(i=bp(o),t=o[0],i.c(),i.m(r.parentNode,r)):t&&(i.d(1),i=null,t=o[0])},i(o){n||(W(i,o),n=!0)},o(o){Z(i,o),n=!1},d(o){o&&G(r),i&&i.d(o)}}}function XT(e,t,r){let n=["as"],i=Ba(t,n),{$$slots:o={},$$scope:s}=t,{onDragStart:a}=qc(Du),l,{as:u="div"}=t;Qe(async()=>{await Ti(),r(1,l.style.whiteSpace="normal",l)});function c(f){xe[f?"unshift":"push"](()=>{l=f,r(1,l)})}return e.$$set=f=>{t=Fr(Fr({},t),qn(f)),r(3,i=Ba(t,n)),"as"in f&&r(0,u=f.as),"$$scope"in f&&r(4,s=f.$$scope)},[u,l,a,i,s,o,c]}var xp=class extends Pt{constructor(t){super(),Ft(this,t,XT,KT,Nt,{as:0})}},sa=xp;var j1=()=>("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),gn=(e,t)=>{window.Livewire.dispatch("openScribbleModal",{component:e,arguments:t})},aa=(e,t,r=[])=>{t.forEach(n=>{e.chain().focus()[n.command](Object.keys(n?.arguments).length>0?n.arguments:r).run()})},la=(e,t)=>{if(typeof e=="object"&&e)for(let r in e)["statePath"].includes(r)?e[r]=t:la(e[r],t)};function JT(e){let t,r,n=e[1].default,i=rn(n,e,e[0],null);return{c(){t=ot("div"),i&&i.c(),N(t,"class","scribble-block-actions"),N(t,"contenteditable","false")},m(o,s){q(o,t,s),i&&i.m(t,null),r=!0},p(o,[s]){i&&i.p&&(!r||s&1)&&on(i,n,o,o[0],r?nn(n,o[0],s,null):sn(o[0]),null)},i(o){r||(W(i,o),r=!0)},o(o){Z(i,o),r=!1},d(o){o&&G(t),i&&i.d(o)}}}function ZT(e,t,r){let{$$slots:n={},$$scope:i}=t;return e.$$set=o=>{"$$scope"in o&&r(0,i=o.$$scope)},[i,n]}var Sp=class extends Pt{constructor(t){super(),Ft(this,t,ZT,JT,Nt,{})}},Au=Sp;function QT(e){let t;return{c(){t=ot("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4"><path d="m22.67 12l-4.49 4.5l-2.51-2.5l1.98-2l-1.98-1.96l2.51-2.51zM12 1.33l4.47 4.49l-2.51 2.51L12 6.35l-2 1.98l-2.5-2.51zm0 21.34l-4.47-4.49l2.51-2.51L12 17.65l2-1.98l2.5 2.51zM1.33 12l4.49-4.5L8.33 10l-1.98 2l1.98 1.96l-2.51 2.51zM12 10a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2"></path></svg>',N(t,"data-drag-handle",""),N(t,"class","scribble-block-action block-drag")},m(r,n){q(r,t,n)},p:vt,i:vt,o:vt,d(r){r&&G(t)}}}var wp=class extends Pt{constructor(t){super(),Ft(this,t,null,QT,Nt,{})}},Ru=wp;function tO(e){let t,r,n;return{c(){t=ot("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M15 4.5A3.5 3.5 0 0 1 11.435 8c-.99-.019-2.093.132-2.7.913l-4.13 5.31a2.015 2.015 0 1 1-2.827-2.828l5.309-4.13c.78-.607.932-1.71.914-2.7L8 4.5a3.5 3.5 0 0 1 4.477-3.362c.325.094.39.497.15.736L10.6 3.902a.48.48 0 0 0-.033.653c.271.314.565.608.879.879a.48.48 0 0 0 .653-.033l2.027-2.027c.239-.24.642-.175.736.15.09.31.138.637.138.976ZM3.75 13a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" clip-rule="evenodd"></path><path d="M11.5 9.5c.313 0 .62-.029.917-.084l1.962 1.962a2.121 2.121 0 0 1-3 3l-2.81-2.81 1.35-1.734c.05-.064.158-.158.426-.233.278-.078.639-.11 1.062-.102l.093.001ZM5 4l1.446 1.445a2.256 2.256 0 0 1-.047.21c-.075.268-.169.377-.233.427l-.61.474L4 5H2.655a.25.25 0 0 1-.224-.139l-1.35-2.7a.25.25 0 0 1 .047-.289l.745-.745a.25.25 0 0 1 .289-.047l2.7 1.35A.25.25 0 0 1 5 2.654V4Z"></path></svg>',N(t,"type","button"),N(t,"class","scribble-block-action block-settings")},m(i,o){q(i,t,o),r||(n=De(t,"click",Ha(Fa(function(){En(e[0])&&e[0].apply(this,arguments)}))),r=!0)},p(i,[o]){e=i},i:vt,o:vt,d(i){i&&G(t),r=!1,n()}}}function eO(e,t,r){let{handleOpen:n}=t;return e.$$set=i=>{"handleOpen"in i&&r(0,n=i.handleOpen)},[n]}var Cp=class extends Pt{constructor(t){super(),Ft(this,t,eO,tO,Nt,{handleOpen:0})}},Pu=Cp;function rO(e){let t,r,n;return{c(){t=ot("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z" clip-rule="evenodd"></path></svg>',N(t,"type","button"),N(t,"class","scribble-block-action block-remove")},m(i,o){q(i,t,o),r||(n=De(t,"click",Ha(Fa(function(){En(e[0])&&e[0].apply(this,arguments)}))),r=!0)},p(i,[o]){e=i},i:vt,o:vt,d(i){i&&G(t),r=!1,n()}}}function nO(e,t,r){let{handleRemove:n}=t;return e.$$set=i=>{"handleRemove"in i&&r(0,n=i.handleRemove)},[n]}var _p=class extends Pt{constructor(t){super(),Ft(this,t,nO,rO,Nt,{handleRemove:0})}},Nu=_p;function G1(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(i){return i?""+e+i:""}).join(" ")}).join(" ")}function q1(e,t){return t.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function Kr(e,t){return function(r){r&&(e[t]=r)}}function kp(e,t,r){return function(n){n&&(e[t][r]=n)}}function Ep(e,t){return function(r){var n=r.prototype;e.forEach(function(i){t(n,i)})}}function U1(e,t){return t===void 0&&(t={}),function(r,n){e.forEach(function(i){var o=t[i]||i;o in r||(r[o]=function(){for(var s,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=(s=this[n])[i].apply(s,a);return u===this[n]?this:u})})}}var iO="function";var oO="object",sO="string",aO="number",Mp="undefined",K1=typeof window!==Mp,lO=typeof document!==Mp&&document;var uO=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ue=1e-7,K4=1/ue,Iu={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};function cO(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function ua(e,t,r,n){return(e*n+t*r)/(r+n)}function qo(e){return typeof e===Mp}function pr(e){return e&&typeof e===oO}function ce(e){return Array.isArray(e)}function Ge(e){return typeof e===sO}function fi(e){return typeof e===aO}function Uo(e){return typeof e===iO}function fO(e,t){var r=e===""||e==" ",n=t===""||t==" ";return n&&r||e===t}function X1(e,t,r,n,i){var o=Tp(e,t,r);return o?r:dO(e,t,r+1,n,i)}function Tp(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function dO(e,t,r,n,i){for(var o=function(u){var c=t[u].trim();if(c===e.close&&!Tp(e,t,u))return{value:u};var f=u,d=je(i,function(p){var h=p.open;return h===c});if(d&&(f=X1(d,t,u,n,i)),f===-1)return s=u,"break";u=f,s=u},s,a=r;a<n;++a){var l=o(a);if(a=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Op(e,t){var r=Ge(t)?{separator:t}:t,n=r.separator,i=n===void 0?",":n,o=r.isSeparateFirst,s=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,l=a===void 0?s:a,u=r.openCloseCharacters,c=u===void 0?uO:u,f=c.map(function(C){var k=C.open,_=C.close;return k===_?k:k+"|"+_}).join("|"),d="(\\s*"+i+"\\s*|"+f+"|\\s+)",p=new RegExp(d,"g"),h=e.split(p).filter(function(C){return C&&C!=="undefined"}),m=h.length,g=[],v=[];function b(){return v.length?(g.push(v.join("")),v=[],!0):!1}for(var w=function(C){var k=h[C].trim(),_=C,E=je(c,function(M){var P=M.open;return P===k}),A=je(c,function(M){var P=M.close;return P===k});if(E){if(_=X1(E,h,C,m,c),_!==-1&&l)return b()&&o||(g.push(h.slice(C,_+1).join("")),C=_,o)?(y=C,"break"):(y=C,"continue")}else if(A&&!Tp(A,h,C)){var O=cO(c);return O.splice(c.indexOf(A),1),{value:Op(e,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:O})}}else if(fO(k,i)&&!s)return b(),o?(y=C,"break"):(y=C,"continue");_===-1&&(_=m-1),v.push(h.slice(C,_+1).join("")),C=_,y=C},y,S=0;S<m;++S){var x=w(S);if(S=y,typeof x=="object")return x.value;if(x==="break")break}return v.length&&g.push(v.join("")),g}function vn(e){return Op(e,"")}function yn(e){return Op(e,",")}function Lu(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function io(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2],i=t[3];return{prefix:r,unit:i,value:parseFloat(n)}}function Bu(e){return e.replace(/[\s-_]+([^\s-_])/g,function(t,r){return r.toUpperCase()})}function Yo(e,t){return t===void 0&&(t="-"),e.replace(/([a-z])([A-Z])/g,function(r,n,i){return""+n+t+i.toLowerCase()})}function no(){return Date.now?Date.now():new Date().getTime()}function Ar(e,t,r){r===void 0&&(r=-1);for(var n=e.length,i=0;i<n;++i)if(t(e[i],i,e))return i;return r}function je(e,t,r){var n=Ar(e,t);return n>-1?e[n]:r}var Dp=function(){var e=no(),t=K1&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=no(),i=setTimeout(function(){r(n-e)},1e3/60);return i}}(),J1=function(){var e=K1&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}}();function Xr(e){return Object.keys(e)}function Z1(e){var t=Xr(e);return t.map(function(r){return e[r]})}function Kt(e,t){var r=io(e),n=r.value,i=r.unit;if(pr(t)){var o=t[i];if(o){if(Uo(o))return o(n);if(Iu[i])return Iu[i](n,o)}}else if(i==="%")return n*t/100;return Iu[i]?Iu[i](n):n}function zu(e,t,r){return Math.max(t,Math.min(e,r))}function Y1(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[Ct(t[0],ue),Ct(t[0]/n,ue)],[Ct(t[1]*n,ue),Ct(t[1],ue)]].filter(function(i){return i.every(function(o,s){var a=t[s],l=Ct(a,ue);return r?o<=a||o<=l:o>=a||o>=l})})[0]||e}function Ap(e,t,r,n){if(!n)return e.map(function(p,h){return zu(p,t[h],r[h])});var i=e[0],o=e[1],s=n===!0?i/o:n,a=Y1(e,t,!1,s),l=a[0],u=a[1],c=Y1(e,r,!0,s),f=c[0],d=c[1];return i<l||o<u?(i=l,o=u):(i>f||o>d)&&(i=f,o=d),[i,o]}function Q1(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return r}function ca(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function ve(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function pO(e){return[0,1].map(function(t){return ca(e.map(function(r){return r[t]}))})}function Rp(e){var t=pO(e),r=ve(t,e[0]),n=ve(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function Jr(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function Ct(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function Pp(e,t){return e.forEach(function(r,n){e[n]=Ct(e[n],t)}),e}function ty(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function Fu(e){return e.reduce(function(t,r){return t.concat(r)},[])}function Hu(e,t){e.indexOf(t)===-1&&e.push(t)}function Me(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Np(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function Ip(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function Pe(e,t,r,n){e.addEventListener(t,r,n)}function Ce(e,t,r,n){e.removeEventListener(t,r,n)}function Hn(e){return e?.ownerDocument||lO}function $u(e){return Hn(e).documentElement}function $n(e){return Hn(e).body}function bn(e){var t;return((t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function Vu(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function di(e){return pr(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}var hO=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var i=this.keys,o=this.values,s=i.indexOf(r),a=s===-1?i.length:s;i[a]=r,o[a]=n},e}(),mO=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e}(),gO=typeof Map=="function",vO=function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e}();function yO(e,t){var r=[],n=[];return e.forEach(function(i){var o=i[0],s=i[1],a=new vO;r[o]=a,n[s]=a}),r.forEach(function(i,o){i.connect(r[o-1])}),e.filter(function(i,o){return!t[o]}).map(function(i,o){var s=i[0],a=i[1];if(s===a)return[0,0];var l=r[s],u=n[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,r[0]);var f=l.getIndex();return[c,f]})}var bO=function(){function e(r,n,i,o,s,a,l,u){this.prevList=r,this.list=n,this.added=i,this.removed=o,this.changed=s,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=yO(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(o,s){var a=o[0],l=o[1],u=n[s],c=u[0],f=u[1];if(a!==l)return i.push([c,f]),!0}),this.cachePureChanged=i},e}();function pi(e,t,r){var n=gO?Map:r?mO:hO,i=r||function(b){return b},o=[],s=[],a=[],l=e.map(i),u=t.map(i),c=new n,f=new n,d=[],p=[],h={},m=[],g=0,v=0;return l.forEach(function(b,w){c.set(b,w)}),u.forEach(function(b,w){f.set(b,w)}),l.forEach(function(b,w){var y=f.get(b);typeof y>"u"?(++v,s.push(w)):h[y]=v}),u.forEach(function(b,w){var y=c.get(b);typeof y>"u"?(o.push(w),++g):(a.push([y,w]),v=h[w]||0,d.push([y-v,w-g]),p.push(w===y),y!==w&&m.push([y,w]))}),s.reverse(),new bO(e,t,o,s,m,a,d,p)}var xO=function(){function e(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var n=[].slice.call(r),i=pi(this.list,n,this.findKeyCallback);return this.list=n,i},e}(),ey=xO;var Bp=function(e,t){return Bp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Bp(e,t)};function da(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Bp(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var xn=function(){return xn=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},xn.apply(this,arguments)};function ay(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function ry(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function ny(e){var t=0;return e.map(function(r){return r==null?"$compat".concat(++t):"".concat(r)})}function ly(e){var t=[];return e.forEach(function(r){t=t.concat(ce(r)?ly(r):r)}),t}function Lp(e,t){if(!t)return e;for(var r in t)qo(e[r])&&(e[r]=t[r]);return e}function Wu(e,t){if(e===t)return!1;for(var r in e)if(!(r in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function iy(e){var t=e.className,r=ay(e,["className"]);return t!=null&&(r.class=t),delete r.style,delete r.children,r}function oy(e){var t={},r={};for(var n in e)n.indexOf("on")===0?r[n]=e[n]:t[n]=e[n];return[t,r]}function ju(e){if(!e)return null;var t=e.b;return di(t)?t:ju(e.c)}function uy(e){var t=e.parentNode;t&&t.removeChild(e)}function cy(e){e.forEach(function(t){t()})}function SO(){return this.constructor(this.props,this.context)}var zp=0,Gu=function(){function e(r,n,i,o,s,a,l){l===void 0&&(l={}),this.t=r,this.d=n,this.k=i,this.i=o,this.c=s,this.ref=a,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var t=e.prototype;return t.s=function(){return!0},t.u=function(r,n,i,o,s){var a=this,l=a.d,u=Z1(n).filter(function(h){return h.$_req}),c=ly(u.map(function(h){return h.$_subs})),f=je(c,function(h){return h.d===l});if(a.b&&!Ge(i)&&!s&&!a.s(i.props,o)&&!f){var d=c.reduce(function(h,m){var g=m.d;return h[0]?h[0].d===g&&h.push(m):g>l&&h.push(m),h},[]);return d.forEach(function(h){ha(h,h._ps,[h.o],r,n,!0)}),!1}a.o=i,a.ss(o);var p=a.ps;return Ge(i)||(a.ps=i.props,a.ref=i.ref),Fp(this),a.r(r,n,a.b?p:{},o),!0},t.md=function(){this.rr()},t.ss=function(){},t.ud=function(){this.rr()},t.rr=function(){var r=this,n=r.ref,i=r.fr;n&&n(i?i.current:r.b)},e}();function fy(){return Object.__CROACT_CURRENT_INSTNACE__}function wO(){return zp}function CO(e){zp=e}function Fp(e){return Object.__CROACT_CURRENT_INSTNACE__=e,zp=0,e}var pa=function(){function e(r,n){r===void 0&&(r={}),this.props=r,this.context=n,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var t=e.prototype;return t.render=function(){return null},t.shouldComponentUpdate=function(r,n){return this.props!==r||this.state!==n},t.setState=function(r,n,i){var o=this;o.$_timer||(o.$_state={}),clearTimeout(o.$_timer),o.$_timer=0,o.$_state=xn(xn({},o.$_state),r),i?o.$_setState(n,i):o.$_timer=window.setTimeout(function(){o.$_timer=0,o.$_setState(n,i)})},t.forceUpdate=function(r){this.setState({},r,!0)},t.componentDidMount=function(){},t.componentDidUpdate=function(r,n){},t.componentWillUnmount=function(){},t.$_setState=function(r,n){var i=[],o=this.$_p,s=ha(o.c,[o],[o.o],i,o._cs,xn(xn({},this.state),this.$_state),n);s&&(r&&i.push(r),cy(i),Fp(null))},e}(),Hp=function(e){da(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r.shouldComponentUpdate=function(n,i){return Wu(this.props,n)||Wu(this.state,i)},t}(pa);function dy(e){var t=function(r){t.current=r};return t.current=e,t}function py(e){return e._fr=!0,e}function _O(e,t,r,n){var i,o;return!((i=e?.prototype)===null||i===void 0)&&i.render?o=new e(t,r):(o=new pa(t,r),o.constructor=e,e._fr?(n.fr=dy(),o.render=function(){return this.constructor(this.props,n.fr)}):o.render=SO),o.$_p=n,o}var kO=function(e){da(t,e);function t(n,i,o,s,a,l,u){u===void 0&&(u={});var c=e.call(this,n,i,o,s,a,l,Lp(u,n.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var r=t.prototype;return r.s=function(n,i){var o=this.b;return o.shouldComponentUpdate(Lp(n,this.t.defaultProps),i||o.state)!==!1},r.r=function(n,i,o){var s,a,l=this,u=l.t;l.ps=Lp(l.ps,l.t.defaultProps);var c=l.ps,f=!l.b,d=u.contextType,p=l.b,h=d?.get(l);l._cs=i,f?(p=_O(u,c,h,l),l.b=p):(p.props=c,p.context=h);var m=p.state;l._usefs=[],l._uefs=[];var g=p.render();((a=(s=g?.props)===null||s===void 0?void 0:s.children)===null||a===void 0?void 0:a.length)===0&&(g.props.children=l.ps.children);var v=xn(xn({},i),p.$_cs);ha(l,l._ps,g?[g]:[],n,v),f?l._uefs.push(function(){d?.register(l),p.componentDidMount()}):l._uefs.push(function(){p.componentDidUpdate(o,m)}),n.push(function(){l._usefs.forEach(function(b){b()}),f?l.md():l.ud(),l._defs=l._uefs.map(function(b){return b()})})},r.ss=function(n){var i=this.b;!i||!n||(i.state=n)},r.un=function(){var n,i=this;i._ps.forEach(function(s){s.un()});var o=i.t;(n=o.contextType)===null||n===void 0||n.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},t}(Gu);function EO(e,t,r){var n=$p(iy(e),iy(t)),i=n.added,o=n.removed,s=n.changed;for(var a in i)r.setAttribute(a,i[a]);for(var l in s)r.setAttribute(l,s[l][1]);for(var u in o)r.removeAttribute(u)}function MO(e,t,r){var n=$p(e,t),i=n.added,o=n.removed;for(var s in o)r.e(s,!0);for(var a in i)r.e(a)}function $p(e,t){var r=Xr(e),n=Xr(t),i=pi(r,n,function(l){return l}),o={},s={},a={};return i.added.forEach(function(l){var u=n[l];o[u]=t[u]}),i.removed.forEach(function(l){var u=r[l];s[u]=e[u]}),i.maintained.forEach(function(l){var u=l[0],c=r[u],f=[e[c],t[c]];e[c]!==t[c]&&(a[c]=f)}),{added:o,removed:s,changed:a}}function TO(e,t,r){var n=r.style,i=$p(e,t),o=i.added,s=i.removed,a=i.changed;for(var l in o){var u=Yo(l,"-");n.setProperty(u,o[l])}for(var l in a){var c=Yo(l,"-");n.setProperty(c,a[l][1])}for(var l in s){var f=Yo(l,"-");n.removeProperty(f)}}function OO(e){return e.replace(/^on/g,"").toLowerCase()}var DO=function(e){da(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.typ="elem",n._es={},n._svg=!1,n}var r=t.prototype;return r.e=function(n,i){var o=this,s=o._es,a=o.b,l=OO(n);i?(Ce(a,l,s[n]),delete s[n]):(s[n]=function(u){var c,f;(f=(c=o.ps)[n])===null||f===void 0||f.call(c,u)},Pe(a,l,s[n]))},r.s=function(n){return Wu(this.ps,n)},r.r=function(n,i,o){var s,a=this,l=!a.b,u=a.ps;if(l){var c=ju(a.c),f=!1;a._svg||a.t==="svg"?f=!0:f=c&&c.ownerSVGElement,a._svg=f;var d=(s=a._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],p=a.t;if(d)a._hyd=[].slice.call(d.children||[]);else{var h=Hn(c);f?d=h.createElementNS("http://www.w3.org/2000/svg",p):d=h.createElement(p)}a.b=d}ha(a,a._ps,u.children,n,i);var m=a.b,g=oy(o),v=g[0],b=g[1],w=oy(u),y=w[0],S=w[1];return EO(v,y,m),MO(b,S,a),TO(o.style||{},u.style||{},m),n.push(function(){l?a.md():a.ud()}),!0},r.un=function(){var n=this,i=n._es,o=n.b;for(var s in i)Ce(o,s,i[s]);n._ps.forEach(function(a){a.un()}),n._es={},n._sel||uy(o)},t}(Gu);function fa(e){if(!e||di(e))return e;var t=e.$_p._ps;return t.length?fa(t[0].b):null}function hy(e){if(e){if(e.b&&di(e.b))return e;var t=e._ps;return t.length?hy(t[0]):null}}function or(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=t||{},o=i.key,s=i.ref,a=ay(i,["key","ref"]);return{type:e,key:o,ref:s,props:xn(xn({},a),{children:Fu(r).filter(function(l){return l!=null&&l!==!1})})}}var my=function(e){da(t,e);function t(n,i){i===void 0&&(i=0);var o=e.call(this,"container",i,"container",0,null)||this;return o.typ="container",o.b=n,o}var r=t.prototype;return r.r=function(){return!0},r.un=function(){},t}(Gu),AO=function(e){da(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.typ="text",n}var r=t.prototype;return r.r=function(n){var i,o=this,s=!o.b;if(s){var a=ju(o.c),l=(i=o._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];o.b=l||Hn(a).createTextNode(o.t.replace("text_",""))}return n.push(function(){s?o.md():o.ud()}),!0},r.un=function(){uy(this.b)},t}(Gu);function RO(e,t,r){var n=r.map(function(l){return Ge(l)?null:l.key}),i=ny(t.map(function(l){return l.k})),o=ny(n),s=pi(i,o,function(l){return l});s.removed.forEach(function(l){t.splice(l,1)[0].un()}),s.ordered.forEach(function(l){var u=l[0],c=l[1],f=t.splice(u,1)[0];t.splice(c,0,f);var d=fa(f.b),p=fa(t[c+1]&&t[c+1].b);d&&d.parentNode.insertBefore(d,p)}),s.added.forEach(function(l){t.splice(l,0,sy(r[l],n[l],l,e))});var a=s.maintained.filter(function(l){l[0];var u=l[1],c=r[u],f=t[u],d=Ge(c)?"text_".concat(c):c.type;return d!==f.t?(f.un(),t.splice(u,1,sy(c,n[u],u,e)),!0):(f.i=u,!1)});return ry(ry([],s.added,!0),a.map(function(l){l[0];var u=l[1];return u}),!0)}function PO(e,t){for(var r=e._ps,n=r.length,i=t.i+1;i<n;++i){var o=fa(r[i].b);if(o)return o}return null}function sy(e,t,r,n){var i=n.d+1;if(Ge(e)||fi(e))return new AO("text_".concat(e),i,t,r,n,null,{});var o=e.type,s=typeof o=="string"?DO:kO;return new s(o,i,t,r,n,e.ref,e.props)}function ha(e,t,r,n,i,o,s){var a=RO(e,t,r),l=e._hyd,u=t.filter(function(f,d){return f._hyd=l,f.u(n,i,r[d],o,s)});e.typ==="container"&&e._sel&&t.forEach(function(f){var d=hy(f);d&&(d._sel=!0)}),e._hyd=null;var c=ju(e);return c&&a.reverse().forEach(function(f){var d=t[f],p=fa(d.b);if(p&&c!==p&&!p.parentNode){var h=PO(e,d);c.insertBefore(p,h)}}),u.length>0}function NO(e,t,r,n){r===void 0&&(r=t.__CROACT__),n===void 0&&(n={});var i=!!r;r||(r=new my(t));var o=[];return ha(r,r._ps,e?[e]:[],o,n,void 0,void 0),cy(o),Fp(null),i||(t.__CROACT__=r),r}function Vp(e,t,r){return!r&&e&&(r=new my(t.parentElement),r._hyd=[t],r._sel=!0),NO(e,t,r),r}function gy(e){var t=fy(),r=t._hs||(t._hs=[]),n=wO(),i=r[n];if(CO(n+1),i){if(!Wu(i.deps,e.deps))return i.updated=!1,i;r[n]=e}else r.push(e);return e.value=e.func(),e.updated=!0,e}function IO(e,t){var r=gy({func:e,deps:t});return r.value}function vy(e){return IO(function(){return dy(e)},[])}function Wp(e,t,r){var n=fy(),i=gy({func:function(){return e},deps:t}),o=r?n._usefs:n._uefs;i.updated?o.push(function(){return i.effect&&i.effect(),i.effect=e(),i.effect}):o.push(function(){return i.effect})}function yy(e,t,r){Wp(function(){e?.(t())},r,!0)}function Up(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function xy(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function Sy(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function Yp(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function LO(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function BO(e,t){var r=Yp("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function jp(e){return e.replace(/_/g,".")}function ga(e,t){var r=null,n="-1";return Up(e,function(i){var o=Yp("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!o||i.brand?!1:(r=i,n=o[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=BO(i.versionTest.toLowerCase(),t)||n),n=jp(n),!0)}),{preset:r,version:n}}function ma(e,t){var r={brand:"",version:"-1"};return Up(e,function(n){var i=wy(t,n);return i?(r.brand=n.id,r.version=n.versionAlias||i.version,r.version!=="-1"):!1}),r}function wy(e,t){return xy(e,function(r){var n=r.brand;return Yp(""+t.test,n.toLowerCase())})}var Gp=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Cy=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],qp=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],_y=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],ky=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Ey(e){return!!ga(_y,e).preset}function zO(e){var t=Sy(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:Ey(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=ga(Gp,t),s=o.preset,a=o.version,l=ga(ky,t),u=l.preset,c=l.version,f=ga(Cy,t);if(n.chromium=!!f.preset,n.chromiumVersion=f.version,!n.chromium){var d=ga(qp,t);n.webkit=!!d.preset,n.webkitVersion=d.version}return u&&(i.name=u.id,i.version=c,i.majorVersion=parseInt(c,10)),s&&(n.name=s.id,n.version=a,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}function FO(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=e&&e.fullVersionList,i=t.mobile||!1,o=r[0],s=(e&&e.platform||t.platform||navigator.platform).toLowerCase(),a={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ma(_y,r).brand||Ey(Sy())},l={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&Up(qp,function(h){return wy(r,h)});var u=ma(Cy,r);if(a.chromium=!!u.brand,a.chromiumVersion=u.version,!a.chromium){var c=ma(qp,r);a.webkit=!!c.brand,a.webkitVersion=c.version}var f=xy(ky,function(h){return new RegExp(""+h.test,"g").exec(s)});if(l.name=f?f.id:"",e&&(l.version=e.platformVersion),n&&n.length){var d=ma(Gp,n);a.name=d.brand||a.name,a.version=d.version||a.version}else{var p=ma(Gp,r);a.name=p.brand||a.name,a.version=p.brand&&e?e.uaFullVersion:p.version}return a.webkit&&(l.name=i?"ios":"mac"),l.name==="ios"&&a.webview&&(a.version="-1"),l.version=jp(l.version),a.version=jp(a.version),l.majorVersion=parseInt(l.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:l,isMobile:i,isHints:!0}}function HO(e){return typeof e>"u"&&LO()?FO():zO(e)}var My=HO;function $O(e,t,r,n,i,o){for(var s=0;s<i;++s){var a=r+s*i,l=n+s*i;e[a]+=e[l]*o,t[a]+=t[l]*o}}function VO(e,t,r,n,i){for(var o=0;o<i;++o){var s=r+o*i,a=n+o*i,l=e[s],u=t[s];e[s]=e[a],e[a]=l,t[s]=t[a],t[a]=u}}function WO(e,t,r,n,i){for(var o=0;o<n;++o){var s=r+o*n;e[s]/=i,t[s]/=i}}function Kp(e,t,r){r===void 0&&(r=Math.sqrt(e.length));for(var n=e.slice(),i=0;i<r;++i)n[i*r+t-1]=0,n[(t-1)*r+i]=0;return n[(t-1)*(r+1)]=1,n}function Rr(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=ie(t),i=0;i<t;++i){var o=t*i+i;if(!Ct(r[o],ue)){for(var s=i+1;s<t;++s)if(r[t*i+s]){VO(r,n,i,s,t);break}}if(!Ct(r[o],ue))return[];WO(r,n,i,t,r[o]);for(var s=0;s<t;++s){var a=s,l=s+i*t,u=r[l];!Ct(u,ue)||i===s||$O(r,n,a,i,t,-u)}}return n}function jO(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=0;n<t;++n)for(var i=0;i<t;++i)r[i*t+n]=e[t*n+i];return r}function Xp(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=e[t*t-1],i=0;i<t-1;++i)r[i]=e[t*(t-1)+i]/n;return r[t-1]=0,r}function Ty(e,t){for(var r=ie(t),n=0;n<t-1;++n)r[t*(t-1)+n]=e[n]||0;return r}function hi(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function Pr(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=ie(r),i=Math.min(t,r),o=0;o<i-1;++o){for(var s=0;s<i-1;++s)n[o*r+s]=e[o*t+s];n[(o+1)*r-1]=e[(o+1)*t-1],n[(r-1)*r+o]=e[(t-1)*t+o]}return n[r*r-1]=e[t*t-1],n}function va(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=ie(e);return t.forEach(function(i){n=Xt(n,i,e)}),n}function Xt(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],i=e.length/r,o=t.length/i;if(i){if(!o)return e}else return t;for(var s=0;s<r;++s)for(var a=0;a<o;++a){n[a*r+s]=0;for(var l=0;l<i;++l)n[a*r+s]+=e[l*r+s]*t[a*i+l]}return n}function Gt(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]+t[i];return n}function mt(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]-t[i];return n}function Oy(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function Jp(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function He(e,t,r){r===void 0&&(r=t.length);var n=Xt(e,t,r),i=n[r-1];return n.map(function(o){return o/i})}function Dy(e,t){return Xt(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function Ay(e,t){return Xt(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function Ry(e,t){return Xt(e,Xo(t,4))}function ya(e,t){var r=t[0],n=r===void 0?1:r,i=t[1],o=i===void 0?1:i,s=t[2],a=s===void 0?1:s;return Xt(e,[n,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function Ko(e,t){return He(Xo(t,3),hi(e,3))}function qu(e,t){var r=t[0],n=r===void 0?0:r,i=t[1],o=i===void 0?0:i,s=t[2],a=s===void 0?0:s;return Xt(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,o,a,1],4)}function Zp(e,t){return Xt(e,t,4)}function Xo(e,t){var r=Math.cos(e),n=Math.sin(e),i=ie(t);return i[0]=r,i[1]=n,i[t]=-n,i[t+1]=r,i}function ie(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function Uu(e,t){for(var r=ie(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[(t+1)*i]=e[i];return r}function mi(e,t){for(var r=ie(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[t*(t-1)+i]=e[i];return r}function Yu(e,t,r,n,i,o,s,a){var l=e[0],u=e[1],c=t[0],f=t[1],d=r[0],p=r[1],h=n[0],m=n[1],g=i[0],v=i[1],b=o[0],w=o[1],y=s[0],S=s[1],x=a[0],C=a[1],k=[l,0,c,0,d,0,h,0,u,0,f,0,p,0,m,0,1,0,1,0,1,0,1,0,0,l,0,c,0,d,0,h,0,u,0,f,0,p,0,m,0,1,0,1,0,1,0,1,-g*l,-v*l,-b*c,-w*c,-y*d,-S*d,-x*h,-C*h,-g*u,-v*u,-b*f,-w*f,-y*p,-S*p,-x*m,-C*m],_=Rr(k,8);if(!_.length)return[];var E=Xt(_,[g,v,b,w,y,S,x,C],8);return E[8]=1,Pr(jO(E),3,4)}var ba=function(){return ba=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ba.apply(this,arguments)};function GO(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Jo(e,t){return t===void 0&&(t=0),oo(so(e,t))}function Py(e,t){var r=He(e,[t[0],t[1]||0,t[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function oo(e){var t=GO();return e.forEach(function(r){var n=r.matrixFunction,i=r.functionValue;n&&(t=n(t,i))}),t}function so(e,t){t===void 0&&(t=0);var r=ce(e)?e:vn(e);return r.map(function(n){var i=Lu(n),o=i.prefix,s=i.value,a=null,l=o,u="";if(o==="translate"||o==="translateX"||o==="translate3d"){var c=pr(t)?ba(ba({},t),{"o%":t["%"]}):{"%":t,"o%":t},f=yn(s).map(function(M,P){return P===0&&"x%"in c?c["%"]=t["x%"]:P===1&&"y%"in c?c["%"]=t["y%"]:c["%"]=t["o%"],Kt(M,c)}),d=f[0],p=f[1],h=p===void 0?0:p,m=f[2],g=m===void 0?0:m;a=qu,u=[d,h,g]}else if(o==="translateY"){var v=pr(t)?ba({"%":t["y%"]},t):{"%":t},h=Kt(s,v);a=qu,u=[0,h,0]}else if(o==="translateZ"){var g=parseFloat(s);a=qu,u=[0,0,g]}else if(o==="scale"||o==="scale3d"){var b=yn(s).map(function(M){return parseFloat(M)}),w=b[0],y=b[1],S=y===void 0?w:y,x=b[2],C=x===void 0?1:x;a=ya,u=[w,S,C]}else if(o==="scaleX"){var w=parseFloat(s);a=ya,u=[w,1,1]}else if(o==="scaleY"){var S=parseFloat(s);a=ya,u=[1,S,1]}else if(o==="scaleZ"){var C=parseFloat(s);a=ya,u=[1,1,C]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var k=io(s),_=k.unit,E=k.value,A=_==="rad"?E:E*Math.PI/180;o==="rotate"||o==="rotateZ"?(l="rotateZ",a=Ry):o==="rotateX"?a=Dy:o==="rotateY"&&(a=Ay),u=A}else if(o==="matrix3d")a=Zp,u=yn(s).map(function(M){return parseFloat(M)});else if(o==="matrix"){var O=yn(s).map(function(M){return parseFloat(M)});a=Zp,u=[O[0],O[1],0,0,O[2],O[3],0,0,0,0,1,0,O[4],O[5],0,1]}else l="";return{name:o,functionName:l,value:s,matrixFunction:a,functionValue:u}})}var Qp=function(e,t){return Qp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Qp(e,t)};function qO(e,t){Qp(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ny=typeof Map=="function"?void 0:function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}}(),UO=function(e){qO(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,Ny)||this}return t}(ey);function Iy(e,t){return pi(e,t,Ny)}var th=UO;var eh=function(){return eh=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},eh.apply(this,arguments)};function YO(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}var KO=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(pr(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(!r)this._events={};else if(pr(r))for(var i in r)this.off(i);else if(!n)this._events[r]=[];else{var o=this._events[r];if(o){var s=Ar(o,function(a){return a.listener===n});s>-1&&o.splice(s,1)}}return this},t.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(o){i._addEvent(r,o,{once:!0})})},t.emit=function(r,n){var i=this;n===void 0&&(n={});var o=this._events[r];if(!r||!o)return!0;var s=!1;return n.eventType=r,n.stop=function(){s=!0},n.currentTarget=this,YO(o).forEach(function(a){a.listener(n),a.once&&i.off(r,a.listener)}),!s},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,i){var o=this._events;o[r]=o[r]||[];var s=o[r];s.push(eh({listener:n},i))},e}(),gi=KO;var rh=function(e,t){return rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},rh(e,t)};function XO(e,t){rh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zo=function(){return Zo=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Zo.apply(this,arguments)};function JO(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function Ly(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function Ku(e){if(e){if(Ge(e))return document.querySelector(e)}else return null;if(Uo(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var ZO=function(e){XO(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(o){n.checkScroll({container:i.container,inputEvent:o})}})},n}var r=t.prototype;return r.dragStart=function(n,i){var o=Ku(i.container);if(!o){this._flag=!1;return}var s=0,a=0,l=0,u=0;if(o===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=o.getBoundingClientRect();s=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:s,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},r.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var o=n.clientX,s=n.clientY,a=i.threshold,l=a===void 0?0:a,u=this,c=u._startRect,f=u._startPos;this._currentOptions=i;var d=[0,0];return c.top>s-l?(f[1]>c.top||s<f[1])&&(d[1]=-1):c.top+c.height<s+l&&(f[1]<c.top+c.height||s>f[1])&&(d[1]=1),c.left>o-l?(f[0]>c.left||o<f[0])&&(d[0]=-1):c.left+c.width<o+l&&(f[0]<c.left+c.width||o>f[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(Zo(Zo({},i),{direction:d,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var i=this;if(this._isWait)return!1;var o=n.prevScrollPos,s=o===void 0?this._prevScrollPos:o,a=n.direction,l=n.throttleTime,u=l===void 0?0:l,c=n.inputEvent,f=n.isDrag,d=this._getScrollPosition(a||[0,0],n),p=d[0]-s[0],h=d[1]-s[1],m=a||[p?Math.abs(p)/p:0,h?Math.abs(h)/h:0];return this._prevScrollPos=d,this._lock=!1,!p&&!h?!1:(this.emit("move",{offsetX:m[0]?p:0,offsetY:m[1]?h:0,inputEvent:c}),u&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},u)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,i){var o=i.container,s=i.getScrollPosition,a=s===void 0?JO:s;return a({container:Ku(o),direction:n})},r._continueDrag=function(n){var i=this,o,s=n.container,a=n.direction,l=n.throttleTime,u=n.useScroll,c=n.isDrag,f=n.inputEvent;if(!(!this._flag||c&&this._isWait)){var d=no(),p=Math.max(l+this._prevTime-d,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},p),!1;this._prevTime=d;var h=this._getScrollPosition(a,n);this._prevScrollPos=h,c&&(this._isWait=!0),u||(this._lock=!0);var m={container:Ku(s),direction:a,inputEvent:f};return(o=n.requestScroll)===null||o===void 0||o.call(n,m),this.emit("scroll",m),this._isWait=!1,u||this.checkScroll(Zo(Zo({},n),{prevScrollPos:h,direction:a,inputEvent:f}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var o=i===!0?Ly:i,s=Ku(n.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=Ly(window,this._onScroll):this._unregister=o(s,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t}(gi),By=ZO;function QO(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function hr(e){return Ct(e,ue)}function tD(e,t){return e.every(function(r,n){return hr(r-t[n])===0})}function eD(e,t){return!hr(e[0]-t[0])&&!hr(e[1]-t[1])}function ih(e){return e.length<3?0:Math.abs(Q1(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function oh(e,t){var r=t.width,n=t.height,i=t.left,o=t.top,s=vi(e),a=s.minX,l=s.minY,u=s.maxX,c=s.maxY,f=r/(u-a),d=n/(c-l);return e.map(function(p){return[i+(p[0]-a)*f,o+(p[1]-l)*d]})}function vi(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function Xu(e,t,r){var n=e[0],i=e[1],o=vi(t),s=o.minX,a=o.maxX,l=[[s,i],[a,i]],u=Ju(l[0],l[1]),c=nh(t),f=[];if(c.forEach(function(h){var m=Ju(h[0],h[1]),g=h[0];if(tD(u,m))f.push({pos:e,line:h,type:"line"});else{var v=zy(Zu(u,m),[l,h]);v.forEach(function(b){h.some(function(w){return eD(w,b)})?f.push({pos:b,line:h,type:"point"}):hr(g[1]-i)!==0&&f.push({pos:b,line:h,type:"intersection"})})}}),!r&&je(f,function(h){return h[0]===n}))return!0;var d=0,p={};return f.forEach(function(h){var m=h.pos,g=h.type,v=h.line;if(!(m[0]>n))if(g==="intersection")++d;else{if(g==="line")return;if(g==="point"){var b=je(v,function(S){return S[1]!==i}),w=p[m[0]],y=b[1]>i?1:-1;w?w!==y&&++d:p[m[0]]=y}}}),d%2===1}function Ju(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],s=i-r,a=o-n;Math.abs(s)<ue&&(s=0),Math.abs(a)<ue&&(a=0);var l=0,u=0,c=0;return s?a?(l=-a/s,u=1,c=-l*r-n):(u=1,c=-n):a&&(l=-1,c=r),[l,u,c]}function Zu(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],s=t[1],a=t[2],l=r===0&&o===0,u=n===0&&s===0,c=[];if(l&&u)return[];if(l){var f=-i/n,d=-a/s;return f!==d?[]:[[-1/0,f],[1/0,f]]}else if(u){var p=-i/r,h=-a/o;return p!==h?[]:[[p,-1/0],[p,1/0]]}else if(r===0){var m=-i/n,g=-(s*m+a)/o;c=[[g,m]]}else if(o===0){var m=-a/s,g=-(n*m+i)/r;c=[[g,m]]}else if(n===0){var g=-i/r,m=-(o*g+a)/s;c=[[g,m]]}else if(s===0){var g=-a/o,m=-(r*g+i)/n;c=[[g,m]]}else{var g=(n*a-s*i)/(s*r-n*o),m=-(r*g+i)/n;c=[[g,m]]}return c.map(function(v){return[v[0],v[1]]})}function zy(e,t){var r=t.map(function(f){return[0,1].map(function(d){return[Math.min(f[0][d],f[1][d]),Math.max(f[0][d],f[1][d])]})}),n=[];if(e.length===2){var i=e[0],o=i[0],s=i[1];if(hr(o-e[1][0])){if(!hr(s-e[1][1])){var u=Math.max.apply(Math,r.map(function(f){return f[0][0]})),c=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(hr(u-c)>0)return[];n=[[u,s],[c,s]]}}else{var a=Math.max.apply(Math,r.map(function(f){return f[1][0]})),l=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(hr(a-l)>0)return[];n=[[o,a],[o,l]]}}return n.length||(n=e.filter(function(f){var d=f[0],p=f[1];return r.every(function(h){return 0<=hr(d-h[0][0])&&0<=hr(h[0][1]-d)&&0<=hr(p-h[1][0])&&0<=hr(h[1][1]-p)})})),n.map(function(f){return[hr(f[0]),hr(f[1])]})}function nh(e){return QO(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function rD(e,t){var r=e.slice(),n=t.slice();Rp(r)===-1&&r.reverse(),Rp(n)===-1&&n.reverse();var i=nh(r),o=nh(n),s=i.map(function(c){return Ju(c[0],c[1])}),a=o.map(function(c){return Ju(c[0],c[1])}),l=[];s.forEach(function(c,f){var d=i[f],p=[];a.forEach(function(h,m){var g=Zu(c,h),v=zy(g,[d,o[m]]);p.push.apply(p,v.map(function(b){return{index1:f,index2:m,pos:b,type:"intersection"}}))}),p.sort(function(h,m){return Jr(d[0],h.pos)-Jr(d[0],m.pos)}),l.push.apply(l,p),Xu(d[1],n)&&l.push({index1:f,index2:-1,pos:d[1],type:"inside"})}),o.forEach(function(c,f){if(Xu(c[1],r)){var d=!1,p=Ar(l,function(h){var m=h.index2;return m===f?(d=!0,!1):!!d});p===-1&&(d=!1,p=Ar(l,function(h){var m=h.index1,g=h.index2;return m===-1&&g+1===f?(d=!0,!1):!!d})),p===-1?l.push({index1:-1,index2:f,pos:c[1],type:"inside"}):l.splice(p,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var f=c.pos,d=f[0]+"x"+f[1];return u[d]?!1:(u[d]=!0,!0)})}function nD(e,t){var r=rD(e,t);return r.map(function(n){var i=n.pos;return i})}function Fy(e,t){var r=nD(e,t);return ih(r)}var uh=function(e,t){return uh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},uh(e,t)};function iD(e,t){uh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Te=function(){return Te=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Te.apply(this,arguments)};function oD(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function sh(e){return oD([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function sD(e){return e.touches&&e.touches.length>=2}function Qu(e){return e?e.touches?lD(e.touches):[Vy(e)]:[]}function aD(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function Hy(e,t,r){var n=r.length,i=xa(e,n),o=i.clientX,s=i.clientY,a=i.originalClientX,l=i.originalClientY,u=xa(t,n),c=u.clientX,f=u.clientY,d=xa(r,n),p=d.clientX,h=d.clientY,m=o-c,g=s-f,v=o-p,b=s-h;return{clientX:a,clientY:l,deltaX:m,deltaY:g,distX:v,distY:b}}function ah(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function lD(e){for(var t=Math.min(e.length,2),r=[],n=0;n<t;++n)r.push(Vy(e[n]));return r}function Vy(e){return{clientX:e.clientX,clientY:e.clientY}}function xa(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),i=0;i<n;++i){var o=e[i];r.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,r.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,r.clientX+=o.clientX,r.clientY+=o.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var lh=function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),sh(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),sh(t)-sh(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=Hy(t||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,o=n.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,i=Math.min(this.length,r.length),o=[],s=0;s<i;++s)o[s]=Hy([t[s]],[r[s]],[n[s]]);return o},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=xa(t,this.length),i=xa(this.prevClients,this.length),o=n.clientX-i.clientX,s=n.clientY-i.clientY;return Math.sqrt(o*o+s*s)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),ah(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),ah(t)/ah(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e}(),$y=["textarea","input"],Wy=function(e){iD(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(d,p){if(p===void 0&&(p=!0),!(!i.flag&&d.cancelable===!1)){var h=d.type.indexOf("drag")>=-1;if(!(i.flag&&h)){i._isDragAPI=!0;var m=i.options,g=m.container,v=m.pinchOutside,b=m.preventWheelClick,w=m.preventRightClick,y=m.preventDefault,S=m.checkInput,x=m.dragFocusedInput,C=m.preventClickEventOnDragStart,k=m.preventClickEventOnDrag,_=m.preventClickEventByCondition,E=i._useTouch,A=!i.flag;if(i._isSecondaryButton=d.which===3||d.button===2,b&&(d.which===2||d.button===1)||w&&(d.which===3||d.button===2))return i.stop(),!1;if(A){var O=i._window.document.activeElement,M=d.target;if(M){var P=M.tagName.toLowerCase(),R=$y.indexOf(P)>-1,B=M.isContentEditable;if(R||B){if(S||!x&&O===M)return!1;if(O&&(O===M||B&&O.isContentEditable&&O.contains(M)))if(x)M.blur();else return!1}else if((y||d.type==="touchstart")&&O){var F=O.tagName.toLowerCase();(O.isContentEditable||$y.indexOf(F)>-1)&&O.blur()}(C||k||_)&&Pe(i._window,"click",i._onClick,!0)}i.clientStores=[new lh(Qu(d))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=p,i._dragFlag=!0,i._prevInputEvent=d,i.data={},i.doubleFlag=no()-i.prevTime<200,i._isMouseEvent=aD(d),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var I=i._preventMouseEvent||i.emit("dragStart",Te(Te({data:i.data,datas:i.data,inputEvent:d,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:p,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));I===!1&&i.stop(),i._isMouseEvent&&i.flag&&y&&d.preventDefault()}if(!i.flag)return!1;var j=0;if(A?(i._attchDragEvent(),E&&v&&(j=setTimeout(function(){Pe(g,"touchstart",i.onDragStart,{passive:!1})}))):E&&v&&Ce(g,"touchstart",i.onDragStart),i.flag&&sD(d)){if(clearTimeout(j),A&&d.touches.length!==d.changedTouches.length)return;i.pinchFlag||i.onPinchStart(d)}}}},i.onDrag=function(d,p){if(i.flag){var h=i.options.preventDefault;!i._isMouseEvent&&h&&d.preventDefault(),i._prevInputEvent=d;var m=Qu(d),g=i.moveClients(m,d,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var v=i._preventMouseEvent||i.emit("drag",Te(Te({},g),{isScroll:!!p,inputEvent:d}));if(v===!1){i.stop();return}}i.pinchFlag&&i.onPinch(d,m)}i.getCurrentStore().getPosition(m,!0)}},i.onDragEnd=function(d){if(i.flag){var p=i.options,h=p.pinchOutside,m=p.container,g=p.preventClickEventOnDrag,v=p.preventClickEventOnDragStart,b=p.preventClickEventByCondition,w=i.isDrag;(g||v||b)&&requestAnimationFrame(function(){i._allowClickEvent()}),!b&&!v&&g&&!w&&i._allowClickEvent(),i._useTouch&&h&&Ce(m,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(d);var y=d?.touches?Qu(d):[],S=y.length;S===0||!i.options.keepDragging?i.flag=!1:i._addStore(new lh(y));var x=i._getPosition(),C=no(),k=!w&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=w||k?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Te({data:i.data,datas:i.data,isDouble:k,isDrag:w,isClick:!w,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:d,isTrusted:i._isTrusted},x)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Ce(i._window,"click",i._onClick,!0)},i._onClick=function(d){i._allowClickEvent(),i._allowMouseEvent();var p=i.options.preventClickEventByCondition;p?.(d)||(d.stopPropagation(),d.preventDefault())},i._onContextMenu=function(d){var p=i.options;p.preventRightClick?i.onDragEnd(d):d.preventDefault()},i._passCallback=function(){};var o=[].concat(r),s=o[0];i._window=Vu(s)?s:bn(s),i.options=Te({checkInput:!1,container:s&&!("document"in s)?bn(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var a=i.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach(function(d){Pe(d,"dragstart",i.onDragStart)}),i._useMouse&&(o.forEach(function(d){Pe(d,"mousedown",i.onDragStart),Pe(d,"mousemove",i._passCallback)}),Pe(l,"contextmenu",i._onContextMenu)),c&&Pe(bn(),"blur",i.onBlur),i._useTouch){var f={passive:!1};o.forEach(function(d){Pe(d,"touchstart",i.onDragStart,f),Pe(d,"touchmove",i._passCallback,f)})}return i}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(r,n),o&&this.onDrag(i,!0))},t.prototype.move=function(r,n){var i=r[0],o=r[1],s=this.getCurrentStore(),a=s.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+i,clientY:c+o,originalClientX:u,originalClientY:c}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var i in r)n[i]=r[i];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Te(Te({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,i=this.options.container;this.off(),Ce(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(o){Ce(o,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(o){Ce(o,"mousedown",r.onDragStart)}),Ce(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(o){Ce(o,"touchstart",r.onDragStart)}),Ce(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var o=new lh(Qu(r));this.pinchFlag=!0,this._addStore(o);var s=this.emit("pinchStart",Te(Te({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Te(Te({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Te(Te({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,i){var o=this._getPosition(r,i),s=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!s&&this.isDrag&&(a=!0),Te(Te({data:this.data,datas:this.data},o),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:a})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var i=this.getCurrentStore(),o=i.getPosition(r,n),s=this.clientStores.slice(1).reduce(function(u,c){var f=c.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},o),a=s.distX,l=s.distY;return Te(Te({},o),{distX:a,distY:l})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(Pe(n,"dragover",this.onDrag,i),Pe(r,"dragend",this.onDragEnd)),this._useMouse&&(Pe(n,"mousemove",this.onDrag),Pe(r,"mouseup",this.onDragEnd)),this._useTouch&&(Pe(n,"touchmove",this.onDrag,i),Pe(r,"touchend",this.onDragEnd,i),Pe(r,"touchcancel",this.onDragEnd,i))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(Ce(n,"dragover",this.onDrag),Ce(r,"dragend",this.onDragEnd)),this._useMouse&&(Ce(n,"mousemove",this.onDrag),Ce(r,"mouseup",this.onDragEnd)),this._useTouch&&(Ce(n,"touchstart",this.onDragStart),Ce(n,"touchmove",this.onDrag),Ce(r,"touchend",this.onDragEnd),Ce(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(gi);function uD(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var cD=uD;function fD(e){return cD(e).toString(36)}function dD(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function pD(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var o=i.trim();return(o?yn(o):[""]).map(function(s){var a=s.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(e))):a?".".concat(e," ").concat(a):".".concat(e)}).join(", ")+" {"})}function hD(e,t,r,n,i){var o=Hn(n),s=o.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",e),s.setAttribute("data-styled-count","1"),r.nonce&&s.setAttribute("nonce",r.nonce),s.innerHTML=pD(e,t,r),(i||o.head||o.body).appendChild(s),s}function mD(e){var t="rCS"+fD(e);return{className:t,inject:function(r,n){n===void 0&&(n={});var i=dD(r),o=(i||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!o)o=hD(t,e,n,r,i);else{var s=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var a,l=parseFloat(o.getAttribute("data-styled-count"))||0;l<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(l-1))}}}}}var jy=mD;var ch=function(){return ch=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ch.apply(this,arguments)};function gD(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function fh(e,t){var r=jy(t),n=r.className;return py(function(i,o){var s=i.className,a=s===void 0?"":s,l=i.cspNonce,u=gD(i,["className","cspNonce"]),c=vy();return yy(o,function(){return c.current},[]),Wp(function(){var f=r.inject(c.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),or(e,ch({ref:c,"data-styled-id":n,className:"".concat(a," ").concat(n)},u))})}var Sh=function(e,t){return Sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Sh(e,t)};function Oa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Sh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var T=function(){return T=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},T.apply(this,arguments)};function vD(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function yD(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function bD(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function U(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function fs(e,t){return T({events:[],props:[],name:e},t)}var xD=["n","w","s","e"],Ih=["n","w","s","e","nw","ne","sw","se"];function SD(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function wD(e){var t=SD(1,e),r=Math.round(e/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var ds=My(),Cb=ds.browser.webkit,_b=Cb&&function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1}(),kb=ds.browser.name,Eb=parseInt(ds.browser.version,10),CD=kb==="chrome",_D=ds.browser.chromium,kD=parseInt(ds.browser.chromiumVersion,10)||0,ED=CD&&Eb>=109||_D&&kD>=109,MD=kb==="firefox",TD=parseInt(ds.browser.webkitVersion,10)>=612||Eb>=15,Lh="moveable-",OD=Ih.map(function(e){var t="",r="",n="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(o,";"),i="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",i="top"),e.indexOf("w")>-1&&(r="left: ".concat(o,";"),n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),DD=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(OD,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(wD(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(_b?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),AD=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],wh=1e-4,ur=1e-7,tc=1e-9,Ch=Math.pow(10,10),Gy=-Ch,RD={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Bh={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Mb={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},zh=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Da(e,t,r,n,i,o){var s,a;o===void 0&&(o="draggable");var l=(a=(s=t.gestos[o])===null||s===void 0?void 0:s.move(r,e.inputEvent))!==null&&a!==void 0?a:{},u=l.originalDatas||l.datas,c=u[o]||(u[o]={});return T(T({},i?mx(t,l):l),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:e.originalDatas})}var ss=function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),T(T({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var n,i,o=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0;else{var s=this.isDrag;n=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:r,isFirstDrag:o,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function is(e,t,r,n){var i=e.length===16,o=i?4:3,s=ho(e,r,n,o),a=D(s,4),l=D(a[0],2),u=l[0],c=l[1],f=D(a[1],2),d=f[0],p=f[1],h=D(a[2],2),m=h[0],g=h[1],v=D(a[3],2),b=v[0],w=v[1],y=D(he(e,t,o),2),S=y[0],x=y[1],C=Math.min(u,d,m,b),k=Math.min(c,p,g,w),_=Math.max(u,d,m,b),E=Math.max(c,p,g,w);u=u-C||0,d=d-C||0,m=m-C||0,b=b-C||0,c=c-k||0,p=p-k||0,g=g-k||0,w=w-k||0,S=S-C||0,x=x-k||0;var A=e[0],O=e[o+1],M=ar(A*O);return{left:C,top:k,right:_,bottom:E,origin:[S,x],pos1:[u,c],pos2:[d,p],pos3:[m,g],pos4:[b,w],direction:M}}function Tb(e,t){var r=t.clientX,n=t.clientY,i=t.datas,o=e.state,s=o.moveableClientRect,a=o.rootMatrix,l=o.is3d,u=o.pos1,c=s.left,f=s.top,d=l?4:3,p=D(mt(us(a,[r-c,n-f],d),u),2),h=p[0],m=p[1],g=D(wn({datas:i,distX:h,distY:m}),2),v=g[0],b=g[1];return[v,b]}function po(e,t){var r=t.datas,n=e.state,i=n.allMatrix,o=n.beforeMatrix,s=n.is3d,a=n.left,l=n.top,u=n.origin,c=n.offsetMatrix,f=n.targetMatrix,d=n.transformOrigin,p=s?4:3;r.is3d=s,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=o,r.offsetMatrix=c,r.transformOrigin=d,r.inverseMatrix=Rr(i,p),r.inverseBeforeMatrix=Rr(o,p),r.absoluteOrigin=hi(Gt([a,l],u),p),r.startDragBeforeDist=He(r.inverseBeforeMatrix,r.absoluteOrigin,p),r.startDragDist=He(r.inverseMatrix,r.absoluteOrigin,p)}function PD(e){return is(e.datas.beforeTransform,[50,50],100,100).direction}function yc(e,t,r){var n=t.datas,i=t.originalDatas.beforeRenderable,o=n.transformIndex,s=i.nextTransforms,a=s.length,l=i.nextTransformAppendedIndexes,u=-1;o===-1?(r==="translate"?u=0:r==="rotate"&&(u=Ar(s,function(p){return p.match(/scale\(/g)})),u===-1&&(u=s.length),n.transformIndex=u):je(l,function(p){return p.index===o&&p.functionName===r})?u=o:u=o+l.filter(function(p){return p.index<o}).length;var c=i2(s,e.state,u),f=c.targetFunction,d=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,f.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):a>u&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=U(U([],D(l),!1),[{functionName:r,index:u,isAppend:!0}],!1))}function bc(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function ND(e){var t=e.datas,r=e.distX,n=e.distY,i=D(Db({datas:t,distX:r,distY:n}),2),o=i[0],s=i[1],a=Ob(t,Ty([o,s],4));return He(a,hi([0,0,0],4),4)}function Ob(e,t,r){var n=e.beforeTransform,i=e.afterTransform,o=e.beforeTransform2,s=e.afterTransform2,a=e.targetAllTransform,l=r?Xt(a,t,4):Xt(t,a,4),u=Xt(Rr(r?o:n,4),l,4),c=Xt(u,Rr(r?s:i,4),4);return c}function Db(e){var t=e.datas,r=e.distX,n=e.distY,i=t.inverseBeforeMatrix,o=t.is3d,s=t.startDragBeforeDist,a=t.absoluteOrigin,l=o?4:3;return mt(He(i,Gt(a,[r,n]),l),s)}function wn(e,t){var r=e.datas,n=e.distX,i=e.distY,o=r.inverseBeforeMatrix,s=r.inverseMatrix,a=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,f=a?4:3;return mt(He(t?o:s,Gt(c,[n,i]),f),t?l:u)}function ID(e,t){var r=e.datas,n=e.distX,i=e.distY,o=r.beforeMatrix,s=r.matrix,a=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,c=r.absoluteOrigin,f=a?4:3;return mt(He(t?o:s,Gt(t?l:u,[n,i]),f),c)}function LD(e,t,r,n,i,o){return n===void 0&&(n=t),i===void 0&&(i=r),o===void 0&&(o=[0,0]),e?e.map(function(s,a){var l=io(s),u=l.value,c=l.unit,f=a?i:n,d=a?r:t;if(s==="%"||isNaN(u)){var p=f?o[a]/f:0;return d*p}else if(c!=="%")return u;return d*u/100}):o}function Ab(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function BD(e,t){return Ab(t).map(function(r){return e[r]})}function dh(e,t){var r=(t+1)/2;return[ua(e[0][0],e[1][0],r,1-r),ua(e[0][1],e[1][1],r,1-r)]}function Ne(e,t){var r=dh([e[0],e[1]],t[0]),n=dh([e[2],e[3]],t[0]);return dh([r,n],t[1])}function zD(e,t,r,n,i,o){var s=ho(t,r,n,i),a=Ne(s,o),l=e[0]-a[0],u=e[1]-a[1];return[l,u]}function Aa(e,t,r,n){return Xt(e,_a(t,n,r),n)}function FD(e,t,r,n){var i=e.transformOrigin,o=e.offsetMatrix,s=e.is3d,a=s?4:3,l;if(Ge(r)){var u=t.beforeTransform,c=t.afterTransform;n?l=Pr(Jo(r),4,a):l=Pr(Xt(Xt(u,Jo([r]),4),c,4),4,a)}else l=r;return Aa(o,l,i,a)}function HD(e,t){var r=e.transformOrigin,n=e.offsetMatrix,i=e.is3d,o=e.targetMatrix,s=e.targetAllTransform,a=i?4:3;return Aa(n,Xt(s||o,Uu(t,a),a),r,a)}function xc(e,t){var r=ps(t);return{setTransform:function(n,i){i===void 0&&(i=-1),r.startTransforms=ce(n)?n:vn(n),_h(e,t,i)},setTransformIndex:function(n){_h(e,t,n)}}}function Sc(e,t,r){var n=ps(t),i=n.startTransforms;_h(e,t,Ar(i,function(o){return o.indexOf("".concat(r,"("))===0}))}function _h(e,t,r){var n=ps(t),i=t.datas;if(i.transformIndex=r,r!==-1){var o=n.startTransforms[r];if(o){var s=e.state,a=so([o],{"x%":function(l){return l/100*s.offsetWidth},"y%":function(l){return l/100*s.offsetHeight}});i.startValue=a[0].functionValue}}}function Fh(e,t){var r=ps(e);r.nextTransforms=vn(t)}function ps(e){return e.originalDatas.beforeRenderable}function cc(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function ec(e){return(cc(e)||[]).join(" ")}function rc(e){return ps(e).nextStyle}function Rb(e,t,r,n,i){Fh(i,t);var o=sr.drag(e,Da(i,e.state,r,n,!1)),s=o?o.transform:t;return T(T({transform:t,drag:o},lr({transform:s},i)),{afterTransform:s})}function Hh(e,t,r,n,i,o){var s=FD(e.state,i,t,o),a=WD(e,r,n,s);return a}function Pb(e,t,r,n,i,o,s){var a=Hh(e,t,r,i,o,s),l=e.state,u=l.left,c=l.top,f=e.props.groupable,d=f?u:0,p=f?c:0,h=mt(n,a);return mt(h,[d,p])}function $D(e,t,r,n,i,o,s){var a=Pb(e,t,r,n,i,o,s);return a}function VD(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function WD(e,t,r,n){n===void 0&&(n=e.state.allMatrix);var i=e.state,o=i.width,s=i.height,a=i.is3d,l=a?4:3,u=[o/2*(1+t[0])+r[0],s/2*(1+t[1])+r[1]];return he(n,u,l)}function jD(e,t,r){var n=r.fixedDirection,i=r.fixedPosition,o=r.fixedOffset;return Pb(e,"rotate(".concat(t,"deg)"),n,i,o,r)}function GD(e,t,r,n,i,o){var s=e.props.groupable,a=e.state,l=a.transformOrigin,u=a.offsetMatrix,c=a.is3d,f=a.width,d=a.height,p=a.left,h=a.top,m=o.fixedDirection,g=o.nextTargetMatrix||a.targetMatrix,v=c?4:3,b=LD(i,t,r,f,d,l),w=s?p:0,y=s?h:0,S=Aa(u,g,b,v),x=zD(n,S,t,r,v,m);return mt(x,[w,y])}function qD(e,t){return Ne(Br(e.state),t)}function UD(e,t){var r=e.targetGesto,n=e.controlGesto,i;return r?.isFlag()&&(i=r.getEventData()[t]),!i&&n?.isFlag()&&(i=n.getEventData()[t]),i||{}}function YD(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function KD(e){var t=e("scale"),r=e("rotate"),n=e("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&i.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&i.push("scale(".concat(t.split(/\s+/).join(","),")")),i}function Nb(e,t,r){for(var n=e,i=[],o=$u(e)||$n(e),s=!r&&e===t||e===o,a=s,l=!1,u=3,c,f,d,p=!1,h=Ta(t,t,!0).offsetParent,m=1;n&&!a;){a=s;var g=mr(n),v=g("position"),b=ix(n),w=v==="fixed",y=KD(g),S=Oy(qA(b)),x=void 0,C=!1,k=!1,_=0,E=0,A=0,O=0,M={hasTransform:!1,fixedContainer:null};w&&(p=!0,M=JA(n),h=M.fixedContainer);var P=S.length;!l&&(P===16||y.length)&&(l=!0,u=4,Dh(i),d&&(d=Pr(d,3,4))),l&&P===9&&(S=Pr(S,3,4));var R=XA(n,e),B=R.tagName,F=R.hasOffset,I=R.isSVG,j=R.origin,V=R.targetOrigin,L=R.offset,Y=D(L,2),rt=Y[0],K=Y[1];B==="svg"&&!n.ownerSVGElement&&d&&(i.push({type:"target",target:n,matrix:ZA(n,u)}),i.push({type:"offset",target:n,matrix:ie(u)}));var tt=parseFloat(g("zoom"))||1;if(w)x=M.fixedContainer,C=!0;else{var X=Ta(n,t,!1,!0,g),it=X.offsetZoom;if(x=X.offsetParent,C=X.isEnd,k=X.isStatic,m*=it,(X.isCustomElement||it!==1)&&k)rt-=x.offsetLeft,K-=x.offsetTop;else if(MD||ED){var ut=X.parentSlotElement;if(ut){for(var xt=x,Tt=0,J=0;xt&&YD(xt);)Tt+=xt.offsetLeft,J+=xt.offsetTop,xt=xt.offsetParent;rt-=Tt,K-=J}}}if(Cb&&!TD&&F&&!I&&k&&(v==="relative"||v==="static")&&(rt-=x.offsetLeft,K-=x.offsetTop,s=s||C),w)F&&M.hasTransform&&(A=x.clientLeft,O=x.clientTop);else if(F&&h!==x&&(_=x.clientLeft,E=x.clientTop),F&&x===o){var ct=ox(n,!1);rt+=ct[0],K+=ct[1]}if(i.push({type:"target",target:n,matrix:_a(S,u,j)}),y.length&&(i.push({type:"offset",target:n,matrix:ie(u)}),i.push({type:"target",target:n,matrix:_a(Jo(y),u,j)})),F){var Bt=n===e,bt=Bt?0:n.scrollLeft,St=Bt?0:n.scrollTop;i.push({type:"offset",target:n,matrix:mi([rt-bt+_-A,K-St+E-O],u)})}else i.push({type:"offset",target:n,origin:j});if(tt!==1&&i.push({type:"zoom",target:n,matrix:_a(Uu([tt,tt],u),u,[0,0])}),d||(d=S),c||(c=j),f||(f=V),a||w)break;n=x,s=C,(!r||n===o)&&(a=s)}return d||(d=ie(u)),c||(c=[0,0]),f||(f=[0,0]),{zoom:m,offsetContainer:h,matrixes:i,targetMatrix:d,transformOrigin:c,targetOrigin:f,is3d:l,hasFixed:p}}var ao=null,lo=null,ts=null;function as(e){e?(window.Map&&(ao=new Map,lo=new Map),ts=[]):(ao=null,ts=null,lo=null)}function XD(e){var t=lo?.get(e);if(t)return t;var r=ka(e,!0);return lo&&lo.set(e,r),r}function JD(e,t){if(ts){var r=je(ts,function(i){return i[0][0]==e&&i[0][1]==t});if(r)return r[1]}var n=Nb(e,t,!0);return ts&&ts.push([[e,t],n]),n}function mr(e){var t=ao?.get(e);if(!t){var r=bn(e).getComputedStyle(e);if(!ao)return function(o){return r[o]};t={style:r,cached:{}},ao.set(e,t)}var n=t.cached,i=t.style;return function(o){return o in n||(n[o]=i[o]),n[o]}}function Qr(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return e.moveables.map(function(s,a){return o[a]=o[a]||{},o[a][t]=o[a][t]||{},T(T({},r),{isRequestChild:!0,datas:o[a][t],originalDatas:o[a]})})}function ph(e,t,r,n,i,o,s){var a=!!r.match(/Start$/g),l=!!r.match(/End$/g),u=i.isPinch,c=i.datas,f=Qr(e,t.name,i),d=e.moveables,p=[],h=f.map(function(m,g){var v=d[g],b=v.state,w=b.gestos,y=m;if(a)y=new ss(s).dragStart(n,m),p.push(y);else{if(w[s]||(w[s]=c.childGestos[g]),!w[s])return;y=Da(m,b,n,u,o,s),p.push(y)}var S=t[r](v,T(T({},y),{parentFlag:!0}));return l&&(w[s]=null),S});return a&&(c.childGestos=d.map(function(m){return m.state.gestos[s]})),{eventParams:h,childEvents:p}}function Vn(e,t,r,n,i,o){i===void 0&&(i=function(c,f){return f});var s=!!r.match(/End$/g),a=Qr(e,t.name,n),l=e.moveables,u=a.map(function(c,f){var d=l[f],p=c;p=i(d,c);var h=t[r](d,T(T({},p),{parentFlag:!0}));return h&&o&&o(d,c,h,f),s&&(d.state.gestos={}),h});return u}function fc(e,t,r,n){var i=r.fixedDirection,o=r.fixedPosition,s=n.datas.startPositions||Br(t.state),a=Ne(s,i),l=D(He(Xo(-e.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),u=l[0],c=l[1];return n.datas.originalX=u,n.datas.originalY=c,n}function Ib(e,t,r,n){var i=e.getState(),o=i.renderPoses,s=i.rotation,a=i.direction,l=fo(e.props,t).zoom,u=Ca(s/Math.PI*180),c={},f=e.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;r.forEach(function(h){var m=h.dir;c[m]=!0});var p=ar(a);return r.map(function(h){var m=h.data,g=h.classNames,v=h.dir,b=Bh[v];if(!b||!c[v])return null;d[v]=!0;var w=(Ct(u,15)+p*Mb[v]+720)%180,y={};return Xr(m).forEach(function(S){y["data-".concat(S)]=m[S]}),n.createElement("div",T({className:gt.apply(void 0,U(["control","direction",v,t],D(g),!1)),"data-rotation":w,"data-direction":v},y,{key:"direction-".concat(v),style:mc.apply(void 0,U([s,l],D(b.map(function(S){return o[S]})),!1))}))})}function Lb(e,t,r,n){var i=fo(e.props,r),o=i.renderDirections,s=o===void 0?t:o,a=i.displayAroundControls;if(!s)return[];var l=s===!0?Ih:s;return U(U([],D(a?Hb(e,n,r,l):[]),!1),D(Ib(e,r,l.map(function(u){return{data:{},classNames:[],dir:u}}),n)),!1)}function Ma(e,t,r,n,i,o){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var l=ve(r,n),u=t?Ct(l/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(o),className:gt.apply(void 0,U(["line","direction",t?"edge":"",t],D(s),!1)),"data-rotation":u,"data-line-key":o,"data-direction":t,style:wa(r,n,i,l)})}function Bb(e,t,r,n,i){var o=r===!0?xD:r;return o.map(function(s,a){var l=D(Bh[s],2),u=l[0],c=l[1];if(c!=null)return Ma(e,s,n[u],n[c],i,"".concat(t,"Edge").concat(a),t)}).filter(Boolean)}function zb(e){return function(t,r){var n=fo(t.props,e).edge;return n&&(n===!0||n.length)?U(U([],D(Bb(r,e,n,t.getState().renderPoses,t.props.zoom)),!1),D(ZD(t,e,r)),!1):Fb(t,e,r)}}function Fb(e,t,r){return Lb(e,Ih,t,r)}function ZD(e,t,r){return Lb(e,["nw","ne","sw","se"],t,r)}function Hb(e,t,r,n){var i=e.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=e.getState(),s=o.renderPoses,a=o.rotation,l=o.direction,u=i.renderDirectionMap,c=e.props.zoom,f=ar(l),d=a/Math.PI*180;return(n||Xr(u)).map(function(p){var h=Bh[p];if(!h)return null;var m=(Ct(d,15)+f*Mb[p]+720)%180,g=["around-control"];return r&&g.push("direction",r),t.createElement("div",{className:gt.apply(void 0,U([],D(g),!1)),"data-rotation":m,"data-direction":p,key:"direction-around-".concat(p),style:mc.apply(void 0,U([a,c],D(h.map(function(v){return s[v]})),!1))})})}function $h(e,t,r){var n=e||{},i=n.position,o=i===void 0?"client":i,s=n.left,a=s===void 0?-1/0:s,l=n.top,u=l===void 0?-1/0:l,c=n.right,f=c===void 0?1/0:c,d=n.bottom,p=d===void 0?1/0:d,h={position:o,left:a,top:u,right:f,bottom:p};return{vertical:qy(h,t,!0),horizontal:qy(h,r,!1)}}function wc(e,t){var r=e.state,n=r.containerClientRect,i=n.clientHeight,o=n.clientWidth,s=n.clientLeft,a=n.clientTop,l=r.snapOffset,u=l.left,c=l.top,f=l.right,d=l.bottom,p=t||e.props.bounds||{},h=p.position||"client",m=h==="css",g=p.left,v=g===void 0?-1/0:g,b=p.top,w=b===void 0?-1/0:b,y=p.right,S=y===void 0?m?-1/0:1/0:y,x=p.bottom,C=x===void 0?m?-1/0:1/0:x;return m&&(S=o+f-u-S,C=i+d-c-C),{left:v+u-s,right:S+u-s,top:w+c-a,bottom:C+c-a}}function QD(e,t,r){var n=wc(e),i=n.left,o=n.top,s=n.right,a=n.bottom,l=D(r,2),u=l[0],c=l[1],f=D(mt(r,t),2),d=f[0],p=f[1];H(d)<ur&&(d=0),H(p)<ur&&(p=0);var h=p>0,m=d>0,g={isBound:!1,offset:0,pos:0},v={isBound:!1,offset:0,pos:0};if(d===0&&p===0)return{vertical:g,horizontal:v};if(d===0)h?a<c&&(v.pos=a,v.offset=c-a):o>c&&(v.pos=o,v.offset=c-o);else if(p===0)m?s<u&&(g.pos=s,g.offset=u-s):i>u&&(g.pos=i,g.offset=u-i);else{var b=p/d,w=r[1]-b*u,y=0,S=0,x=!1;m&&s<=u?(y=b*s+w,S=s,x=!0):!m&&u<=i&&(y=b*i+w,S=i,x=!0),x&&(y<o||y>a)&&(x=!1),x||(h&&a<=c?(y=a,S=(y-w)/b,x=!0):!h&&c<=o&&(y=o,S=(y-w)/b,x=!0)),x&&(g.isBound=!0,g.pos=S,g.offset=u-S,v.isBound=!0,v.pos=y,v.offset=c-y)}return{vertical:g,horizontal:v}}function qy(e,t,r){var n=e[r?"left":"top"],i=e[r?"right":"bottom"],o=Math.min.apply(Math,U([],D(t),!1)),s=Math.max.apply(Math,U([],D(t),!1)),a=[];return n+1>o&&a.push({direction:"start",isBound:!0,offset:o-n,pos:n}),i-1<s&&a.push({direction:"end",isBound:!0,offset:s-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(l,u){return H(u.offset)-H(l.offset)})}function Uy(e,t,r){var n=r?e.map(function(i){return Ko(i,r)}):e;return n.some(function(i){return i[0]<t.left&&H(i[0]-t.left)>.1||i[0]>t.right&&H(i[0]-t.right)>.1||i[1]<t.top&&H(i[1]-t.top)>.1||i[1]>t.bottom&&H(i[1]-t.bottom)>.1})}function tA(e,t,r){var n=Lr(e),i=Math.sqrt(n*n-t*t)||0;return[i,-i].sort(function(o,s){return H(o-e[r?0:1])-H(s-e[r?0:1])}).map(function(o){return ve([0,0],r?[o,t]:[t,o])})}function eA(e,t,r,n,i){if(!e.props.bounds)return[];var o=i*Math.PI/180,s=wc(e),a=s.left,l=s.top,u=s.right,c=s.bottom,f=a-n[0],d=u-n[0],p=l-n[1],h=c-n[1],m={left:f,top:p,right:d,bottom:h};if(!Uy(r,m,0))return[];var g=[];return[[f,0],[d,0],[p,1],[h,1]].forEach(function(v){var b=D(v,2),w=b[0],y=b[1];r.forEach(function(S){var x=ve([0,0],S);g.push.apply(g,U([],D(tA(S,w,y).map(function(C){return o+C-x}).filter(function(C){return!Uy(t,m,C)}).map(function(C){return Ct(C*180/Math.PI,ur)})),!1))})}),g}var rA=["left","right","center"],nA=["top","bottom","middle"],Yy={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Si={start:"left",end:"right",center:"center"},wi={start:"top",end:"bottom",center:"middle"};function es(){return{left:!1,top:!1,right:!1,bottom:!1}}function hs(e,t){var r=e.props,n=r.snappable,i=r.bounds,o=r.innerBounds,s=r.verticalGuidelines,a=r.horizontalGuidelines,l=r.snapGridWidth,u=r.snapGridHeight,c=e.state,f=c.guidelines,d=c.enableSnap;return!n||!d||t&&n!==!0&&n.indexOf(t)<0?!1:!!(l||u||i||o||f&&f.length||s&&s.length||a&&a.length)}function Vh(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function iA(e,t){var r=Vh(e),n={};for(var i in r)i in t&&r[i]&&(n[i]=t[i]);return n}function Wh(e,t){var r=iA(e,t),n=nA.filter(function(o){return o in r}),i=rA.filter(function(o){return o in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(o){return r[o]}),vertical:i.map(function(o){return r[o]})}}function oA(e,t,r){var n=he(e,[t.clientLeft,t.clientTop],r);return[t.left+n[0],t.top+n[1]]}function sA(e){var t=D(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];Math.abs(i)<ue&&(i=0),Math.abs(o)<ue&&(o=0);var s=0,a=0,l=0;return i?o?(s=-o/i,a=1,l=s*r[0]-r[1]):(a=1,l=-r[1]):(s=-1,l=r[0]),[s,a,l].map(function(u){return Ct(u,ue)})}var $b="snapRotationThreshold",Vb="snapRotationDegrees",Wb="snapHorizontalThreshold",jb="snapVerticalThreshold";function Cc(e,t,r,n,i,o,s){var a;n===void 0&&(n=[]),i===void 0&&(i=[]);var l=e.props,u=((a=e.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],c=ub(s,l[Wb],5),f=ub(o,l[jb],5);return Gb(e.state.guidelines,t,r,n,i,c,f,u)}function Gb(e,t,r,n,i,o,s,a){return{vertical:Xy(e,"vertical",t,s*a[0],n),horizontal:Xy(e,"horizontal",r,o*a[1],i)}}function aA(e,t,r){var n=D(r,2),i=n[0],o=n[1],s=D(t,2),a=s[0],l=s[1],u=D(mt(r,t),2),c=u[0],f=u[1],d=f>0,p=c>0;c=gc(c),f=gc(f);var h={isSnap:!1,offset:0,pos:0},m={isSnap:!1,offset:0,pos:0};if(c===0&&f===0)return{vertical:h,horizontal:m};var g=Cc(e,c?[i]:[],f?[o]:[],[],[],void 0,void 0),v=g.vertical,b=g.horizontal;v.posInfos.filter(function(B){var F=B.pos;return p?F>=a:F<=a}),b.posInfos.filter(function(B){var F=B.pos;return d?F>=l:F<=l}),v.isSnap=v.posInfos.length>0,b.isSnap=b.posInfos.length>0;var w=kh(v),y=w.isSnap,S=w.guideline,x=kh(b),C=x.isSnap,k=x.guideline,_=C?k.pos[1]:0,E=y?S.pos[0]:0;if(c===0)C&&(m.isSnap=!0,m.pos=k.pos[1],m.offset=o-m.pos);else if(f===0)y&&(h.isSnap=!0,h.pos=E,h.offset=i-E);else{var A=f/c,O=r[1]-A*i,M=0,P=0,R=!1;y?(P=E,M=A*P+O,R=!0):C&&(M=_,P=(M-O)/A,R=!0),R&&(h.isSnap=!0,h.pos=P,h.offset=i-P,m.isSnap=!0,m.pos=M,m.offset=o-M)}return{vertical:h,horizontal:m}}function bi(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function Ky(e,t,r,n){var i=Wh(e.props.snapDirections,t),o=Cc(e,i.vertical,i.horizontal,i.verticalNames.map(function(l){return bi(l)}),i.horizontalNames.map(function(l){return bi(l)}),r,n),s=bi(i.horizontalNames[o.horizontal.index]),a=bi(i.verticalNames[o.vertical.index]);return{vertical:T(T({},o.vertical),{direction:a}),horizontal:T(T({},o.horizontal),{direction:s})}}function kh(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,s=n.guideline;return{isSnap:t,offset:i,dist:o,pos:r.pos,guideline:s}}function Xy(e,t,r,n,i){var o,s;if(i===void 0&&(i=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=t==="vertical",l=a?0:1,u=r.map(function(f,d){var p=i[d]||"",h=e.map(function(m){var g=m.pos,v=f-g[l];return{offset:v,dist:H(v),guideline:m,direction:p}}).filter(function(m){var g=m.guideline,v=m.dist,b=g.type;return!(b!==t||v>n)}).sort(function(m,g){return m.dist-g.dist});return{pos:f,index:d,guidelineInfos:h,direction:p}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,d){return f.guidelineInfos[0].dist-d.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(s=(o=u[0])===null||o===void 0?void 0:o.direction)!==null&&s!==void 0?s:"",posInfos:u}}function lA(e,t,r,n,i){var o=[];r[0]&&r[1]?o=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(d,p,h){var m=h[p+1]||h[0];o.push(d),o.push([(d[0]+m[0])/2,(d[1]+m[1])/2])}):e.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],r):(o.push.apply(o,U([],D(BD([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var s=o.map(function(d){return Ne(t,d)}),a=s.map(function(d){return d[0]}),l=s.map(function(d){return d[1]}),u=Cc(e,a,l,o.map(function(d){return bi(d[0])}),o.map(function(d){return bi(d[1])}),n,i),c=bi(o.map(function(d){return d[0]})[u.vertical.index]),f=bi(o.map(function(d){return d[1]})[u.horizontal.index]);return{vertical:T(T({},u.vertical),{direction:c}),horizontal:T(T({},u.horizontal),{direction:f})}}function qb(e,t){var r=H(e.offset),n=H(t.offset);return e.isBound&&t.isBound?n-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?n-r:e.isSnap?-1:t.isSnap||r<ur?1:n<ur?-1:r-n}function dc(e,t){return e.slice().sort(function(r,n){var i=r.sign[t],o=n.sign[t],s=r.offset[t],a=n.offset[t];if(i){if(!o)return-1}else return 1;return qb({isBound:r.isBound,isSnap:r.isSnap,offset:s},{isBound:n.isBound,isSnap:n.isSnap,offset:a})})[0]}function uA(e,t,r){var n=[];if(r)H(t[0])!==1||H(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),n.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var i=e[0]?e:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(a){var l=[s*i[0],a*i[1]];t[0]===l[0]&&t[1]===l[1]||n.push([t,l])})})}else if(e[0]){var o=H(t[0])===1?[1]:[1,-1];o.forEach(function(s){n.push([[t[0],-1],[s*e[0],-1]],[[t[0],0],[s*e[0],0]],[[t[0],1],[s*e[0],1]])})}else if(e[1]){var o=H(t[1])===1?[1]:[1,-1];o.forEach(function(a){n.push([[-1,t[1]],[-1,a*e[1]]],[[0,t[1]],[0,a*e[1]]],[[1,t[1]],[1,a*e[1]]])})}return n}function Ub(e,t){var r=ca([t[0][0],t[1][0]]),n=ca([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:n<=e[1]}}function jh(e,t){var r=D(t,2),n=r[0],i=r[1],o=i[0]-n[0],s=i[1]-n[1];H(o)<ur&&(o=0),H(s)<ur&&(s=0);var a,l;if(!o)a=n[0],l=e[0];else if(!s)a=n[1],l=e[1];else{var u=s/o;a=u*(e[0]-n[0])+n[1],l=e[1]}return a-l}function Yb(e,t,r,n){return n===void 0&&(n=ur),e.every(function(i){var o=jh(i,t),s=o<=0;return s===r||H(o)<=n})}function Jy(e,t,r,n,i){return i===void 0&&(i=0),n&&t-i<=e||!n&&e<=r+i?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function cA(e,t){var r=t.line,n=t.centerSign,i=t.verticalSign,o=t.horizontalSign,s=t.lineConstants,a=e.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,u=a.top,c=a.width,f=a.height,d=[[l,u],[l,u+f]],p=[[l,u],[l+c,u]],h=[[l+c,u],[l+c,u+f]],m=[[l,u+f],[l+c,u+f]];if(Yb([[l,u],[l+c,u],[l,u+f],[l+c,u+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=xi(r,s,p,i),v=xi(r,s,m,i),b=xi(r,s,d,o),w=xi(r,s,h,o),y=g.isBound&&v.isBound,S=g.isBound||v.isBound,x=b.isBound&&w.isBound,C=b.isBound||w.isBound,k=ls(g.offset,v.offset),_=ls(b.offset,w.offset),E=[0,0],A=!1,O=!1;return H(_)<H(k)?(E=[k,0],A=S,O=y):(E=[0,_],A=C,O=x),{isAllBound:O,isVerticalBound:S,isHorizontalBound:C,isBound:A,offset:E}}function xi(e,t,r,n,i,o){var s=D(t,2),a=s[0],l=s[1],u=e[0],c=r[0],f=r[1],d=gc(f[1]-c[1]),p=gc(f[0]-c[0]),h=l,m=a,g=-a/l;if(p){if(!d){if(o&&!h)return{isBound:!1,offset:0};if(m){var y=(c[1]-u[1])/g+u[0];return Jy(y,c[0],f[0],n,i)}else{var b=c[1]-u[1],w=H(b)<=(i||0);return{isBound:w,offset:w?b:0}}}}else{if(o&&!m)return{isBound:!1,offset:0};if(h){var v=g*(c[0]-u[0])+u[1];return Jy(v,c[1],f[1],n,i)}else{var b=c[0]-u[0],w=H(b)<=(i||0);return{isBound:w,offset:w?b:0}}}return{isBound:!1,offset:0}}function Kb(e,t,r){return t.map(function(n){var i=cA(e,n),o=i.isBound,s=i.offset,a=i.isVerticalBound,l=i.isHorizontalBound,u=n.multiple,c=wn({datas:r,distX:s[0],distY:s[1]}).map(function(f,d){return f*(u[d]?2/u[d]:0)});return{sign:u,isBound:o,isVerticalBound:a,isHorizontalBound:l,isSnap:!1,offset:c}})}function fA(e,t,r){var n,i=Gh(e,t,[0,0],!1).map(function(d){return T(T({},d),{multiple:d.multiple.map(function(p){return H(p)*2})})}),o=Kb(e,i,r),s=dc(o,0),a=dc(o,1),l=0,u=0,c=s.isVerticalBound||a.isVerticalBound,f=s.isHorizontalBound||a.isHorizontalBound;return(c||f)&&(n=D(ID({datas:r,distX:-s.offset[0],distY:-a.offset[1]}),2),l=n[0],u=n[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:f,offset:u}}}function dA(e,t){var r=[],n=e[0],i=e[1];return n&&i?r.push([[0,i*2],e,[-n,i]],[[n*2,0],e,[n,-i]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),t&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,i*2],[1,i],[-1,i]]),t&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function Gh(e,t,r,n){var i=e.state,o=i.allMatrix,s=i.is3d,a=ho(o,100,100,s?4:3),l=Ne(a,[0,0]);return dA(r,n).map(function(u){var c=D(u,3),f=c[0],d=c[1],p=c[2],h=[Ne(a,d),Ne(a,p)],m=sA(h),g=Ub(l,h),v=g.vertical,b=g.horizontal,w=jh(l,h)<=0;return{multiple:f,centerSign:w,verticalSign:v,horizontalSign:b,lineConstants:m,line:[Ne(t,d),Ne(t,p)]}})}function Zy(e,t,r,n){var i=n?e.map(function(o){return Ko(o,n)}):e;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(o){var s=jh(r,o)<=0;return!Yb(t,o,s)})}function pA(e){var t=D(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return H(r[0]);if(!o)return H(r[1]);var s=o/i;return H((-s*r[0]+r[1])/Math.sqrt(Math.pow(s,2)+1))}function hA(e){var t=D(e,2),r=t[0],n=t[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return[r[0],0];if(!o)return[0,r[1]];var s=o/i,a=-s*r[0]+r[1];return[-a/(s+1/s),a/(s*s+1)]}function mA(e,t,r,n,i){var o=e.props.innerBounds,s=i*Math.PI/180;if(!o)return[];var a=o.left,l=o.top,u=o.width,c=o.height,f=a-n[0],d=a+u-n[0],p=l-n[1],h=l+c-n[1],m=[[f,p],[d,p],[f,h],[d,h]],g=Ne(r,[0,0]);if(!Zy(r,m,g,0))return[];var v=[],b=m.map(function(w){return[Lr(w),ve([0,0],w)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(w){var y=ve([0,0],hA(w)),S=pA(w);v.push.apply(v,U([],D(b.filter(function(x){var C=D(x,1),k=C[0];return k&&S<=k}).map(function(x){var C=D(x,2),k=C[0],_=C[1],E=Math.acos(k?S/k:0),A=_+E,O=_-E;return[s+A-y,s+O-y]}).reduce(function(x,C){return x.push.apply(x,U([],D(C),!1)),x},[]).filter(function(x){return!Zy(t,m,g,x)}).map(function(x){return Ct(x*180/Math.PI,ur)})),!1))}),v}function gA(e){var t=e.props.innerBounds,r=es();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var n=e.getRect(),i=n.pos1,o=n.pos2,s=n.pos3,a=n.pos4,l=[i,o,s,a],u=Ne(l,[0,0]),c=t.left,f=t.top,d=t.width,p=t.height,h=[[c,f],[c,f+p]],m=[[c,f],[c+d,f]],g=[[c+d,f],[c+d,f+p]],v=[[c,f+p],[c+d,f+p]],b=Gh(e,l,[0,0],!1),w=[],y=[];return b.forEach(function(S){var x=S.line,C=S.lineConstants,k=Ub(u,x),_=k.horizontal,E=k.vertical,A=xi(x,C,m,E,1,!0),O=xi(x,C,v,E,1,!0),M=xi(x,C,h,_,1,!0),P=xi(x,C,g,_,1,!0);A.isBound&&!r.top&&(w.push(f),r.top=!0),O.isBound&&!r.bottom&&(w.push(f+p),r.bottom=!0),M.isBound&&!r.left&&(y.push(c),r.left=!0),P.isBound&&!r.right&&(y.push(c+d),r.right=!0)}),{boundMap:r,horizontal:w,vertical:y}}function vA(e,t,r,n){var i=t[0]-e[0],o=t[1]-e[1];if(H(i)<ue&&(i=0),H(o)<ue&&(o=0),!i)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var s=o/i,a=e[1]-s*e[0];if(n){var l=s*(t[0]+r)+a;return[r,l-t[1]]}else{var u=(t[1]+r-a)/s;return[u-t[0],r]}}function Eh(e,t,r,n,i){var o=vA(e,t,r,n);if(!o)return{isOutside:!1,offset:[0,0]};var s=Jr(e,t),a=Jr(o,e),l=Jr(o,t),u=a>s||l>s,c=D(wn({datas:i,distX:o[0],distY:o[1]}),2),f=c[0],d=c[1];return{offset:[f,d],isOutside:u}}function pc(e,t){return e.isBound?e.offset:t.isSnap?kh(t).offset:0}function yA(e,t,r,n,i){var o=D(t,2),s=o[0],a=o[1],l=D(r,2),u=l[0],c=l[1],f=D(n,2),d=f[0],p=f[1],h=D(i,2),m=h[0],g=h[1],v=-m,b=-g;if(e&&s&&a){v=0,b=0;var w=[];if(u&&c?w.push([0,g],[m,0]):u?w.push([m,0]):c?w.push([0,g]):d&&p?w.push([0,g],[m,0]):d?w.push([m,0]):p&&w.push([0,g]),w.length){w.sort(function(C,k){return Lr(mt([s,a],C))-Lr(mt([s,a],k))});var y=w[0];if(y[0]&&H(s)>ue)v=-y[0],b=a*H(s+v)/H(s)-a;else if(y[1]&&H(a)>ue){var S=a;b=-y[1],v=s*H(a+b)/H(S)-s}if(e&&c&&u)if(H(v)>ue&&H(v)<H(m)){var x=H(m)/H(v);v*=x,b*=x}else if(H(b)>ue&&H(b)<H(g)){var x=H(g)/H(b);v*=x,b*=x}else v=ls(-m,v),b=ls(-g,b)}}else v=s||u?-m:0,b=a||c?-g:0;return[v,b]}function bA(e,t,r,n,i,o){if(!hs(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Yh(o.absolutePoses,[t,r]),a=Ir(s),l=a.left,u=a.right,c=a.top,f=a.bottom,d={horizontal:s.map(function(P){return P[1]}),vertical:s.map(function(P){return P[0]})},p=Vh(e.props.snapDirections),h=Wh(p,{left:l,right:u,top:c,bottom:f,center:(l+u)/2,middle:(c+f)/2}),m=_c(e,i,h,d),g=m.vertical,v=m.horizontal,b=fA(e,s,o),w=b.vertical,y=b.horizontal,S=g.isSnap,x=v.isSnap,C=g.isBound||w.isBound,k=v.isBound||y.isBound,_=ls(g.offset,w.offset),E=ls(v.offset,y.offset),A=D(yA(n,[t,r],[C,k],[S,x],[_,E]),2),O=A[0],M=A[1];return[{isBound:C,isSnap:S,offset:O},{isBound:k,isSnap:x,offset:M}]}function _c(e,t,r,n){n===void 0&&(n=r);var i=$h(wc(e),n.vertical,n.horizontal),o=i.horizontal,s=i.vertical,a=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Cc(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=a.horizontal,u=a.vertical,c=pc(o[0],l),f=pc(s[0],u),d=H(c),p=H(f);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:p,bounds:s,snap:u}}}function Qy(e,t,r,n,i,o,s){s===void 0&&(s=[1,1]);var a=$h(t,r,n),l=a.horizontal,u=a.vertical,c=Gb(e,r,n,[],[],i,o,s),f=c.horizontal,d=c.vertical,p=pc(l[0],f),h=pc(u[0],d),m=H(p),g=H(h);return{horizontal:{isBound:l[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:p,dist:m,bounds:l,snap:f},vertical:{isBound:u[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:h,dist:g,bounds:u,snap:d}}}function xA(e,t,r,n){var i=ve(e,t)/Math.PI*180,o=r.vertical,s=o.isBound,a=o.isSnap,l=o.dist,u=r.horizontal,c=u.isBound,f=u.isSnap,d=u.dist,p=i%180,h=p<3||p>177,m=p>87&&p<93;return d<l&&(s||a&&!m&&(!n||!h))?"vertical":c||f&&!h&&(!n||!m)?"horizontal":""}function SA(e,t,r,n,i,o){return r.map(function(s){var a=D(s,2),l=a[0],u=a[1],c=Ne(t,l),f=Ne(t,u),d=n?wA(e,c,f,i):_c(e,i,{vertical:[f[0]],horizontal:[f[1]]}),p=d.horizontal,h=p.offset,m=p.isBound,g=p.isSnap,v=d.vertical,b=v.offset,w=v.isBound,y=v.isSnap,S=mt(u,l);if(!b&&!h)return{isBound:w||m,isSnap:y||g,sign:S,offset:[0,0]};var x=xA(c,f,d,n);if(!x)return{sign:S,isBound:!1,isSnap:!1,offset:[0,0]};var C=x==="vertical",k=[0,0];return!n&&H(u[0])===1&&H(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?k=wn({datas:o,distX:-b,distY:-h}):k=Eh(c,f,-(C?b:h),C,o).offset,k=k.map(function(_,E){return _*(S[E]?2/S[E]:0)}),{sign:S,isBound:C?w:m,isSnap:C?y:g,offset:k}})}function tb(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function wA(e,t,r,n){var i=QD(e,t,r),o=i.horizontal,s=i.vertical,a=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:aA(e,t,r),l=a.horizontal,u=a.vertical,c=tb(o,l),f=tb(s,u),d=H(c),p=H(f);return{horizontal:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:d},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:f,dist:p}}}function CA(e,t,r,n,i){var o=[-r[0],-r[1]],s=e.state,a=s.width,l=s.height,u=e.props.bounds,c=1/0,f=1/0;if(u){var d=[[r[0],-r[1]],[-r[0],r[1]]],p=u.left,h=p===void 0?-1/0:p,m=u.top,g=m===void 0?-1/0:m,v=u.right,b=v===void 0?1/0:v,w=u.bottom,y=w===void 0?1/0:w;d.forEach(function(S){var x=S[0]!==o[0],C=S[1]!==o[1],k=Ne(t,S),_=ve(n,k)*360/Math.PI;if(C){var E=k.slice();(H(_-360)<2||H(_-180)<2)&&(E[1]=n[1]);var A=Eh(n,E,(n[1]<k[1]?y:g)-k[1],!1,i),O=D(A.offset,2),M=O[1],P=A.isOutside;isNaN(M)||(f=l+(P?1:-1)*H(M))}if(x){var E=k.slice();(H(_-90)<2||H(_-270)<2)&&(E[0]=n[0]);var R=Eh(n,E,(n[0]<k[0]?b:h)-k[0],!0,i),B=D(R.offset,1),F=B[0],I=R.isOutside;isNaN(F)||(c=a+(I?1:-1)*H(F))}})}return{maxWidth:c,maxHeight:f}}var sr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,o=r.zoom,s=e.getState(),a=s.dragInfo,l=s.beforeOrigin;if(n||!i||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=Lr(u),f=ve(u,[0,0]);return[t.createElement("div",{className:gt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(o,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,i=t.parentGesto,o=e.state,s=o.gestos,a=o.style;if(s.draggable)return!1;s.draggable=i||e.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],po(e,t),Sc(e,t,"translate"),VA(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=Ot(e,t,T({set:function(c){r.startValue=c}},xc(e,t))),u=n||at(e,"onDragStart",l);return u!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(s.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(e,t){if(t){yc(e,t,"translate");var r=t.datas,n=t.parentEvent,i=t.parentFlag,o=t.isPinch,s=t.deltaOffset,a=t.useSnap,l=t.isRequest,u=t.isGroup,c=t.parentThrottleDrag,f=t.distX,d=t.distY,p=r.isDrag,h=r.prevDist,m=r.prevBeforeDist,g=r.startValue;if(p){s&&(f+=s[0],d+=s[1]);var v=e.props,b=v.parentMoveable,w=u?0:v.throttleDrag||c||0,y=n?0:v.throttleDragRotate||0,S=0,x=!1,C=!1,k=!1,_=!1;if(!n&&y>0&&(f||d)){var E=v.startDragRotate||0,A=Ct(E+ve([0,0],[f,d])*180/Math.PI,y)-E,O=d*Math.abs(Math.cos((A-90)/180*Math.PI)),M=f*Math.abs(Math.cos(A/180*Math.PI)),P=Lr([M,O]);S=A*Math.PI/180,f=P*Math.cos(S),d=P*Math.sin(S)}if(!o&&!n&&!i){var R=D(bA(e,f,d,y,!a&&l||s,r),2),B=R[0],F=R[1];x=B.isSnap,C=B.isBound,k=F.isSnap,_=F.isBound;var I=B.offset,j=F.offset;f+=I,d+=j}var V=Gt(Db({datas:r,distX:f,distY:d}),g),L=Gt(ND({datas:r,distX:f,distY:d}),g);Pp(L,ur),Pp(V,ur),y||(!x&&!C&&(L[0]=Ct(L[0],w),V[0]=Ct(V[0],w)),!k&&!_&&(L[1]=Ct(L[1],w),V[1]=Ct(V[1],w)));var Y=mt(V,g),rt=mt(L,g),K=mt(rt,h),tt=mt(Y,m);r.prevDist=rt,r.prevBeforeDist=Y,r.passDelta=K,r.passDist=rt;var X=r.left+Y[0],it=r.top+Y[1],ut=r.right-Y[0],xt=r.bottom-Y[1],Tt=bc(r,"translate(".concat(L[0],"px, ").concat(L[1],"px)"),"translate(".concat(rt[0],"px, ").concat(rt[1],"px)"));if(Fh(t,Tt),e.state.dragInfo.dist=n?[0,0]:rt,!(!n&&!b&&K.every(function(St){return!St})&&tt.some(function(St){return!St}))){var J=e.state,ct=J.width,Bt=J.height,bt=Ot(e,t,T({transform:Tt,dist:rt,delta:K,translate:L,beforeDist:Y,beforeDelta:tt,beforeTranslate:V,left:X,top:it,right:ut,bottom:xt,width:ct,height:Bt,isPinch:o},lr({transform:Tt},t)));return!n&&at(e,"onDrag",bt),bt}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(e,T(T({},t),{deltaOffset:n}))):!1},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=xr(e,t,{});return!r&&at(e,"onDragEnd",i),i}},dragGroupStart:function(e,t){var r,n,i=t.datas,o=t.clientX,s=t.clientY,a=this.dragStart(e,t);if(!a)return!1;var l=ph(e,this,"dragStart",[o||0,s||0],t,!1,"draggable"),u=l.childEvents,c=l.eventParams,f=T(T({},a),{targets:e.props.targets,events:c}),d=at(e,"onDragGroupStart",f);i.isDrag=d!==!1;var p=(n=(r=u[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return i.throttleOffset=[p[0]%1,p[1]%1],i.isDrag?a:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var n=this.drag(e,T(T({},t),{parentThrottleDrag:e.props.throttleDrag})),i=t.datas.passDelta,o=ph(e,this,"drag",i,t,!1,"draggable").eventParams;if(n){var s=T({targets:e.props.targets,events:o},n);return at(e,"onDragGroup",s),s}}},dragGroupEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(e,t);var i=ph(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return at(e,"onDragGroupEnd",xr(e,t,{targets:e.props.targets,events:i})),r}},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=!1;return{isControl:!1,requestStart:function(s){return o=s.useSnap,{datas:t,useSnap:o}},request:function(s){return"x"in s?n=s.x-r.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?i=s.y-r.top:"deltaY"in s&&(i+=s.deltaY),{datas:t,distX:n,distY:i,useSnap:o}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:o}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function Xb(e,t){var r=Ne(e,t),n=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:n}}function _A(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,s=n?4:3,a=[i/2*(1+t[0]),o/2*(1+t[1])],l=he(r,a,s),u=[0,0];return{fixedPosition:l,fixedDirection:t,fixedOffset:u}}function Jb(e,t){var r=e.allMatrix,n=e.is3d,i=e.width,o=e.height,s=n?4:3,a=VD(t,i,o),l=he(r,t,s),u=[i?0:t[0],o?0:t[1]];return{fixedPosition:l,fixedDirection:a,fixedOffset:u}}var eb=Jh("resizable"),Mh={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:zb("resizable"),dragControlCondition:eb,viewClassName:Xh("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,i=t.isPinch,o=t.isGroup,s=t.parentDirection,a=t.parentGesto,l=t.datas,u=t.parentFixedDirection,c=t.parentEvent,f=cx(s,i,n,l),d=e.state,p=d.target,h=d.width,m=d.height,g=d.gestos;if(!f||!p||g.resizable)return!1;g.resizable=a||e.controlGesto,!i&&po(e,t),l.datas={},l.direction=f,l.startOffsetWidth=h,l.startOffsetHeight=m,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],o||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var v=e.props.transformOrigin||"% %";l.transformOrigin=v&&Ge(v)?v.split(" "):v,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=(r=t?.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1];function b(_){l.ratio=_&&isFinite(_)?_:0}l.startPositions=Br(e.state);function w(_){var E=Xb(l.startPositions,_);l.fixedDirection=E.fixedDirection,l.fixedPosition=E.fixedPosition,l.fixedOffset=E.fixedOffset}function y(_){var E=Jb(e.state,_);l.fixedDirection=E.fixedDirection,l.fixedPosition=E.fixedPosition,l.fixedOffset=E.fixedOffset}function S(_){l.minSize=[Kt("".concat(_[0]),0)||0,Kt("".concat(_[1]),0)||0]}function x(_){var E=[_[0]||1/0,_[1]||1/0];(!fi(E[0])||isFinite(E[0]))&&(E[0]=Kt("".concat(E[0]),0)||1/0),(!fi(E[1])||isFinite(E[1]))&&(E[1]=Kt("".concat(E[1]),0)||1/0),l.maxSize=E}b(h/m),w(u||[-f[0],-f[1]]),l.setFixedDirection=w,l.setFixedPosition=y,l.setMin=S,l.setMax=x;var C=Ot(e,t,{direction:f,startRatio:l.ratio,set:function(_){var E=D(_,2),A=E[0],O=E[1];l.startWidth=A,l.startHeight=O},setMin:S,setMax:x,setRatio:b,setFixedDirection:w,setFixedPosition:y,setOrigin:function(_){l.transformOrigin=_},dragStart:sr.dragStart(e,new ss().dragStart([0,0],t))}),k=c||at(e,"onResizeStart",C);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,k!==!1&&(l.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:f}),l.isResize?C:!1},dragControl:function(e,t){var r,n=t.datas,i=t.parentFlag,o=t.isPinch,s=t.parentKeepRatio,a=t.dragClient,l=t.parentDist,u=t.useSnap,c=t.isRequest,f=t.isGroup,d=t.parentEvent,p=t.resolveMatrix,h=n.isResize,m=n.transformOrigin,g=n.startWidth,v=n.startHeight,b=n.prevWidth,w=n.prevHeight,y=n.minSize,S=n.maxSize,x=n.ratio,C=n.startOffsetWidth,k=n.startOffsetHeight,_=n.isWidth;if(!h)return;if(p){var E=e.state.is3d,A=n.startOffsetMatrix,O=n.startTransformOrigin,M=E?4:3,P=Jo(cc(t)),R=Math.sqrt(P.length);M!==R&&(P=Pr(P,R,M));var B=Aa(A,P,O,M),F=ho(B,C,k,M);n.startPositions=F,n.nextTargetMatrix=P,n.nextAllMatrix=B}var I=fo(e.props,"resizable"),j=I.resizeFormat,V=I.throttleResize,L=V===void 0?i?0:1:V,Y=I.parentMoveable,rt=I.keepRatioFinally,K=n.direction,tt=K,X=0,it=0;!K[0]&&!K[1]&&(tt=[1,1]);var ut=x&&(s??I.keepRatio)||!1;function xt(){var ee=n.fixedDirection,ae=vx(tt,ut,n,t);X=ae.distWidth,it=ae.distHeight;var gr=tt[0]-ee[0]||ut?Math.max(C+X,ur):C,vr=tt[1]-ee[1]||ut?Math.max(k+it,ur):k;return ut&&C&&k&&(_?vr=gr/x:gr=vr*x),[gr,vr]}var Tt=D(xt(),2),J=Tt[0],ct=Tt[1];d||(n.setFixedDirection(n.fixedDirection),at(e,"onBeforeResize",Ot(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(ee){var ae;return n.setFixedDirection(ee),ae=D(xt(),2),J=ae[0],ct=ae[1],[J,ct]},setFixedPosition:function(ee){var ae;return n.setFixedPosition(ee),ae=D(xt(),2),J=ae[0],ct=ae[1],[J,ct]},boundingWidth:J,boundingHeight:ct,setSize:function(ee){var ae;ae=D(ee,2),J=ae[0],ct=ae[1]}},!0)));var Bt=a;a||(!i&&o?Bt=qD(e,[0,0]):Bt=n.fixedPosition);var bt=[0,0];o||(bt=HA(e,J,ct,K,Bt,!u&&c,n)),l&&(!l[0]&&(bt[0]=0),!l[1]&&(bt[1]=0));function St(){var ee;j&&(ee=D(j([J,ct]),2),J=ee[0],ct=ee[1]),J=Ct(J,L),ct=Ct(ct,L)}if(ut){tt[0]&&tt[1]&&bt[0]&&bt[1]&&(H(bt[0])>H(bt[1])?bt[1]=0:bt[0]=0);var Et=!bt[0]&&!bt[1];Et&&St(),tt[0]&&!tt[1]||bt[0]&&!bt[1]||Et&&_?(J+=bt[0],ct=J/x):(!tt[0]&&tt[1]||!bt[0]&&bt[1]||Et&&!_)&&(ct+=bt[1],J=ct*x)}else J+=bt[0],ct+=bt[1],J=Math.max(0,J),ct=Math.max(0,ct);r=D(Ap([J,ct],y,S,ut?x:!1),2),J=r[0],ct=r[1],St(),ut&&(f||rt)&&(_?ct=J/x:J=ct*x),X=J-C,it=ct-k;var jt=[X-b,it-w];n.prevWidth=X,n.prevHeight=it;var Ut=GD(e,J,ct,Bt,m,n);if(!(!Y&&jt.every(function(ee){return!ee})&&Ut.every(function(ee){return!ee}))){var Mt=sr.drag(e,Da(t,e.state,Ut,!!o,!1,"draggable")),Dt=Mt.transform,Zt=g+X,be=v+it,se=Ot(e,t,T({width:Zt,height:be,offsetWidth:Math.round(J),offsetHeight:Math.round(ct),startRatio:x,boundingWidth:J,boundingHeight:ct,direction:K,dist:[X,it],delta:jt,isPinch:!!o,drag:Mt},dx({style:{width:"".concat(Zt,"px"),height:"".concat(be,"px")},transform:Dt},Mt,t)));return!d&&at(e,"onResize",se),se}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,s=r.prevWidth,a=r.prevHeight;if(!(!n||e.props.checkResizableError===!1)){var l=e.state,u=l.width,c=l.height,f=u-(i+s),d=c-(o+a),p=H(f)>3,h=H(d)>3;if(p&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),h&&(r.startHeight+=d,r.startOffsetHeight+=d,r.prevHeight+=d),p||h)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var i=xr(e,t,{});return!n&&at(e,"onResizeEnd",i),i}},dragGroupControlCondition:eb,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,T(T({},t),{isGroup:!0}));if(!n)return!1;var i=Qr(e,"resizable",t),o=r.startOffsetWidth,s=r.startOffsetHeight;function a(){var p=r.minSize;i.forEach(function(h){var m=h.datas,g=m.minSize,v=m.startOffsetWidth,b=m.startOffsetHeight,w=o*(v?g[0]/v:0),y=s*(b?g[1]/b:0);p[0]=Math.max(p[0],w),p[1]=Math.max(p[1],y)})}function l(){var p=r.maxSize;i.forEach(function(h){var m=h.datas,g=m.maxSize,v=m.startOffsetWidth,b=m.startOffsetHeight,w=o*(v?g[0]/v:0),y=s*(b?g[1]/b:0);p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],y)})}var u=Vn(e,this,"dragControlStart",t,function(p,h){return fc(e,p,r,h)});a(),l();var c=function(p){n.setFixedDirection(p),u.forEach(function(h,m){h.setFixedDirection(p),fc(e,h.moveable,r,i[m])})};r.setFixedDirection=c;var f=T(T({},n),{targets:e.props.targets,events:u.map(function(p){return T(T({},p),{setMin:function(h){p.setMin(h),a()},setMax:function(h){p.setMax(h),l()}})}),setFixedDirection:c,setMin:function(p){n.setMin(p),a()},setMax:function(p){n.setMax(p),l()}}),d=at(e,"onResizeGroupStart",f);return r.isResize=d!==!1,r.isResize?n:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=fo(e.props,"resizable");Ec(e,"onBeforeResize",function(p){at(e,"onBeforeResizeGroup",Ot(e,t,T(T({},p),{targets:n.targets}),!0))});var i=this.dragControl(e,T(T({},t),{isGroup:!0}));if(i){var o=i.boundingWidth,s=i.boundingHeight,a=i.dist,l=n.keepRatio,u=[o/(o-a[0]),s/(s-a[1])],c=r.fixedPosition,f=Vn(e,this,"dragControl",t,function(p,h){var m=D(He(Xo(e.rotation/180*Math.PI,3),[h.datas.originalX*u[0],h.datas.originalY*u[1],1],3),2),g=m[0],v=m[1];return T(T({},h),{parentDist:null,parentScale:u,dragClient:Gt(c,[g,v]),parentKeepRatio:l})}),d=T({targets:n.targets,events:f},i);return at(e,"onResizeGroup",d),d}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(e,t);var i=Vn(e,this,"dragControlEnd",t),o=xr(e,t,{targets:e.props.targets,events:i});return at(e,"onResizeGroupEnd",o),r}},request:function(e){var t={},r=0,n=0,i=!1,o=e.getRect();return{isControl:!0,requestStart:function(s){var a;return i=s.useSnap,{datas:t,parentDirection:s.direction||[1,1],parentIsWidth:(a=s?.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?r=s.offsetWidth-o.offsetWidth:"deltaWidth"in s&&(r+=s.deltaWidth),"offsetHeight"in s?n=s.offsetHeight-o.offsetHeight:"deltaHeight"in s&&(n+=s.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.resizable=null}};function hh(e,t,r,n,i){var o=e.props.groupable,s=e.state,a=s.is3d?4:3,l=t.origin,u=he(e.state.rootMatrix,mt([l[0],l[1]],o?[0,0]:[s.left,s.top]),a),c=Gt([i.left,i.top],u);t.startAbsoluteOrigin=c,t.prevDeg=ve(c,[r,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=Jr(c,[r,n])}function uc(e,t,r){var n=r.defaultDeg,i=r.prevDeg,o=i%360,s=Math.floor(i/360);o<0&&(o+=360),o>e&&o>270&&e<90?++s:o<e&&o<90&&e>270&&--s;var a=t*(s*360+e-n);return r.prevDeg=n+a,a}function mh(e,t,r,n){return uc(ve(n.startAbsoluteOrigin,[e,t])/Math.PI*180,r,n)}function gh(e,t,r,n,i,o){var s=e.props.throttleRotate,a=s===void 0?0:s,l=r.prevSnapDeg,u=0,c=!1;if(o){var f=FA(e,t,n,i+n);c=f.isSnap,u=i+f.dist}c||(u=Ct(i+n,a));var d=u-i;return r.prevSnapDeg=d,[d-l,d,u]}function Zb(e,t,r){var n=D(t,4),i=n[0],o=n[1],s=n[2],a=n[3];if(e==="none")return[];if(ce(e))return e.map(function(g){return Zb(g,[i,o,s,a],r)[0]});var l=D((e||"top").split("-"),2),u=l[0],c=l[1],f=[i,o];u==="left"?f=[s,i]:u==="right"?f=[o,a]:u==="bottom"&&(f=[a,s]);var d=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],p=lx(f,r);if(c){var h=c==="top"||c==="left",m=u==="bottom"||u==="left";d=f[h&&!m||!h&&m?0:1]}return[[d,p]]}function Th(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(Me(r,gt("rotation-control"))||e.props.rotateAroundControls&&Me(r,gt("around-control"))||Me(r,gt("control"))&&Me(r,gt("rotatable")))return!0;var n=e.props.rotationTarget;return n?Zh(n,!0).some(function(i){return i?r===i||r.contains(i):!1}):!1}var kA=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,EA={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[kA],viewClassName:function(e){return e.isDragging("rotatable")?gt("view-rotation-dragging"):""},render:function(e,t){var r=fo(e.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,o=r.zoom,s=r.renderDirections,a=r.rotateAroundControls,l=r.resolveAblesWithRotatable,u=e.getState(),c=u.renderPoses,f=u.direction;if(!n)return null;var d=Zb(i,c,f),p=[];if(d.forEach(function(v,b){var w=D(v,2),y=w[0],S=w[1];p.push(t.createElement("div",{key:"rotation".concat(b),className:gt("rotation"),style:{transform:"translate(-50%) translate(".concat(y[0],"px, ").concat(y[1],"px) rotate(").concat(S,"rad)")}},t.createElement("div",{className:gt("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),t.createElement("div",{className:gt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),s){var h=Xr(l||{}),m={};h.forEach(function(v){l[v].forEach(function(b){m[b]=v})});var g=[];ce(s)&&(g=s.map(function(v){var b=m[v];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:v}})),p.push.apply(p,U([],D(Ib(e,"rotatable",g,t)),!1))}return a&&p.push.apply(p,U([],D(Hb(e,t)),!1)),p},dragControlCondition:Th,dragControlStart:function(e,t){var r,n,i=t.datas,o=t.clientX,s=t.clientY,a=t.parentRotate,l=t.parentFlag,u=t.isPinch,c=t.isRequest,f=e.state,d=f.target,p=f.left,h=f.top,m=f.direction,g=f.beforeDirection,v=f.targetTransform,b=f.moveableClientRect,w=f.offsetMatrix,y=f.targetMatrix,S=f.allMatrix,x=f.width,C=f.height;if(!c&&!d)return!1;var k=e.getRect();i.rect=k,i.transform=v,i.left=p,i.top=h;var _=function(tt){var X=Jb(e.state,tt);i.fixedDirection=X.fixedDirection,i.fixedOffset=X.fixedOffset,i.fixedPosition=X.fixedPosition,L&&L.setFixedPosition(tt)},E=function(tt){var X=_A(e.state,tt);i.fixedDirection=X.fixedDirection,i.fixedOffset=X.fixedOffset,i.fixedPosition=X.fixedPosition,L&&L.setFixedDirection(tt)},A=o,O=s;if(c||u||l){var M=a||0;i.beforeInfo={origin:k.beforeOrigin,prevDeg:M,defaultDeg:M,prevSnapDeg:0,startDist:0},i.afterInfo=T(T({},i.beforeInfo),{origin:k.origin}),i.absoluteInfo=T(T({},i.beforeInfo),{origin:k.origin,startValue:M})}else{var P=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(P){var R=P.getAttribute("data-direction")||"",B=RD[R];if(B){i.isControl=!0,i.isAroundControl=Me(P,gt("around-control")),i.controlDirection=B;var F=P.getAttribute("data-resolve");F&&(i.resolveAble=F);var I=e2(f.rootMatrix,f.renderPoses,b);r=D(Ne(I,B),2),A=r[0],O=r[1]}}i.beforeInfo={origin:k.beforeOrigin},i.afterInfo={origin:k.origin},i.absoluteInfo={origin:k.origin,startValue:k.rotation};var j=_;_=function(tt){var X=f.is3d?4:3,it=D(Gt(Xp(y,X),tt),2),ut=it[0],xt=it[1],Tt=He(w,hi([ut,xt],X)),J=He(S,hi([tt[0],tt[1]],X));j(tt);var ct=f.posDelta;i.beforeInfo.origin=mt(Tt,ct),i.afterInfo.origin=mt(J,ct),i.absoluteInfo.origin=mt(J,ct),hh(e,i.beforeInfo,A,O,b),hh(e,i.afterInfo,A,O,b),hh(e,i.absoluteInfo,A,O,b)},E=function(tt){var X=Ne([[0,0],[x,0],[0,C],[x,C]],tt);_(X)}}i.startClientX=A,i.startClientY=O,i.direction=m,i.beforeDirection=g,i.startValue=0,i.datas={},Sc(e,t,"rotate");var V=!1,L=!1;if(i.isControl&&i.resolveAble){var Y=i.resolveAble;Y==="resizable"&&(L=Mh.dragControlStart(e,T(T({},new ss("resizable").dragStart([0,0],t)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}L||(V=sr.dragStart(e,new ss().dragStart([0,0],t))),_(r2(e));var rt=Ot(e,t,T(T({set:function(tt){i.startValue=tt*Math.PI/180},setFixedDirection:E,setFixedPosition:_},xc(e,t)),{dragStart:V,resizeStart:L})),K=at(e,"onRotateStart",rt);return i.isRotate=K!==!1,f.snapRenderInfo={request:t.isRequest},i.isRotate?rt:!1},dragControl:function(e,t){var r,n,i,o=t.datas,s=t.clientDistX,a=t.clientDistY,l=t.parentRotate,u=t.parentFlag,c=t.isPinch,f=t.groupDelta,d=t.resolveMatrix,p=o.beforeDirection,h=o.beforeInfo,m=o.afterInfo,g=o.absoluteInfo,v=o.isRotate,b=o.startValue,w=o.rect,y=o.startClientX,S=o.startClientY;if(v){yc(e,t,"rotate");var x=PD(t),C=p*x,k=e.props.parentMoveable,_=0,E,A,O=0,M,P,R=0,B,F,I=180/Math.PI*b,j=g.startValue,V=!1,L=y+s,Y=S+a;if(!u&&"parentDist"in t){var rt=t.parentDist;E=rt,M=rt,B=rt}else c||u?(E=uc(l,p,h),M=uc(l,C,m),B=uc(l,C,g)):(E=mh(L,Y,p,h),M=mh(L,Y,C,m),B=mh(L,Y,C,g),V=!0);if(A=I+E,P=I+M,F=j+B,at(e,"onBeforeRotate",Ot(e,t,{beforeRotation:A,rotation:P,absoluteRotation:F,setRotation:function(Bt){M=Bt-I,E=M,B=M}},!0)),r=D(gh(e,w,h,E,I,V),3),_=r[0],E=r[1],A=r[2],n=D(gh(e,w,m,M,I,V),3),O=n[0],M=n[1],P=n[2],i=D(gh(e,w,g,B,j,V),3),R=i[0],B=i[1],F=i[2],!(!R&&!O&&!_&&!k&&!d)){var K=bc(o,"rotate(".concat(P,"deg)"),"rotate(".concat(M,"deg)"));d&&(o.fixedPosition=Hh(e,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var tt=jD(e,M,o),X=mt(Gt(f||[0,0],tt),o.prevInverseDist||[0,0]);o.prevInverseDist=tt,o.requestValue=null;var it=Rb(e,K,X,c,t),ut=it,xt=Jr([L,Y],g.startAbsoluteOrigin)-g.startDist,Tt=void 0;if(o.resolveAble==="resizable"){var J=Mh.dragControl(e,T(T({},Da(t,e.state,[t.deltaX,t.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:xt}));J&&(Tt=J,ut=dx(ut,J,t))}var ct=Ot(e,t,T(T({delta:O,dist:M,rotate:P,rotation:P,beforeDist:E,beforeDelta:_,beforeRotate:A,beforeRotation:A,absoluteDist:B,absoluteDelta:R,absoluteRotate:F,absoluteRotation:F,isPinch:!!c,resize:Tt},it),ut));return at(e,"onRotate",ct),ct}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var n=xr(e,t,{});return at(e,"onRotateEnd",n),n}},dragGroupControlCondition:Th,dragGroupControlStart:function(e,t){var r=t.datas,n=e.state,i=n.left,o=n.top,s=n.beforeOrigin,a=this.dragControlStart(e,t);if(!a)return!1;a.set(r.beforeDirection*e.rotation);var l=Vn(e,this,"dragControlStart",t,function(f,d){var p=f.state,h=p.left,m=p.top,g=p.beforeOrigin,v=Gt(mt([h,m],[i,o]),mt(g,s));return d.datas.startGroupClient=v,d.datas.groupClient=v,T(T({},d),{parentRotate:0})}),u=T(T({},a),{targets:e.props.targets,events:l}),c=at(e,"onRotateGroupStart",u);return r.isRotate=c!==!1,r.isRotate?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){Ec(e,"onBeforeRotate",function(u){at(e,"onBeforeRotateGroup",Ot(e,t,T(T({},u),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=r.beforeDirection,o=n.beforeDist,s=o/180*Math.PI,a=Vn(e,this,"dragControl",t,function(u,c){var f=c.datas.startGroupClient,d=D(c.datas.groupClient,2),p=d[0],h=d[1],m=D(Ko(f,s*i),2),g=m[0],v=m[1],b=[g-p,v-h];return c.datas.groupClient=[g,v],T(T({},c),{parentRotate:o,groupDelta:b})});e.rotation=i*n.beforeRotation;var l=T({targets:e.props.targets,events:a,set:function(u){e.rotation=u},setGroupRotation:function(u){e.rotation=u}},n);return at(e,"onRotateGroup",l),l}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(e,t);var i=Vn(e,this,"dragControlEnd",t),o=xr(e,t,{targets:e.props.targets,events:i});return at(e,"onRotateGroupEnd",o),r}},request:function(e){var t={},r=0,n=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(i){return"deltaRotate"in i?r+=i.deltaRotate:"rotate"in i&&(r=i.rotate-n),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function MA(e,t){var r,n=e.direction,i=e.classNames,o=e.size,s=e.pos,a=e.zoom,l=e.key,u=n==="horizontal",c=u?"Y":"X";return t.createElement("div",{key:l,className:i.join(" "),style:(r={},r[u?"width":"height"]="".concat(o),r.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(a,")"),r)})}function qh(e,t){return MA(T(T({},e),{classNames:U([gt("line","guideline",e.direction)],D(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(Ct(r,.1),"px")})}),t)}function rb(e,t,r,n,i,o,s,a){var l=e.props.zoom;return r.map(function(u,c){var f=u.type,d=u.pos,p=[0,0];return p[s]=n,p[s?0:1]=-i+d,qh({key:"".concat(t,"TargetGuideline").concat(c),classNames:[gt("target","bold",f)],posValue:p,sizeValue:o,zoom:l,direction:t},a)})}function nb(e,t,r,n,i,o){var s=e.props,a=s.zoom,l=s.isDisplayInnerSnapDigit,u=t==="horizontal"?Si:wi,c=i[u.start],f=i[u.end];return r.filter(function(d){var p=d.hide,h=d.elementRect;if(p)return!1;if(l&&h){var m=h.rect;if(m[u.start]<=c&&f<=m[u.end])return!1}return!0}).map(function(d,p){var h=d.pos,m=d.size,g=d.element,v=d.className,b=[-n[0]+h[0],-n[1]+h[1]];return qh({key:"".concat(t,"-default-guideline-").concat(p),classNames:g?[gt("bold"),v]:[gt("normal"),v],direction:t,posValue:b,sizeValue:m,zoom:a},o)})}function Sa(e,t,r,n,i,o,s,a){var l,u=e.props,c=u.snapDigit,f=c===void 0?0:c,d=u.isDisplaySnapDigit,p=d===void 0?!0:d,h=u.snapDistFormat,m=h===void 0?function(S,x){return S}:h,g=u.zoom,v=t==="horizontal"?"X":"Y",b=t==="vertical"?"height":"width",w=Math.abs(i),y=p?parseFloat(w.toFixed(f)):0;return a.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(n),className:gt("guideline-group",t),style:(l={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},l[b]="".concat(w,"px"),l)},qh({direction:t,classNames:[gt(r),s],size:"100%",posValue:[0,0],sizeValue:w,zoom:g},a),a.createElement("div",{className:gt("size-value","gap"),style:{transform:"translate".concat(v,"(-50%) scale(").concat(g,")")}},y>0?m(y,t):""))}function TA(e,t,r,n){var i=e==="vertical"?0:1,o=e==="vertical"?1:0,s=i?Si:wi,a=r[s.start],l=r[s.end];return px(t,function(u){return u.pos[i]}).map(function(u){var c=[],f=[],d=[];return u.forEach(function(p){var h,m,g=p.element,v=p.elementRect.rect;if(v[s.end]<a)c.push(p);else if(l<v[s.start])f.push(p);else if(v[s.start]<=a&&l<=v[s.end]&&n){var b=p.pos,w={element:g,rect:T(T({},v),(h={},h[s.end]=v[s.start],h))},y={element:g,rect:T(T({},v),(m={},m[s.start]=v[s.end],m))},S=[0,0],x=[0,0];S[i]=b[i],S[o]=b[o],x[i]=b[i],x[o]=b[o]+p.size,c.push({type:e,pos:S,size:0,elementRect:w,direction:"",elementDirection:"end"}),f.push({type:e,pos:x,size:0,elementRect:y,direction:"",elementDirection:"start"})}}),c.sort(function(p,h){return h.pos[o]-p.pos[o]}),f.sort(function(p,h){return p.pos[o]-h.pos[o]}),{total:u,start:c,end:f,inner:d}})}function OA(e,t,r,n,i){var o=e.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(a){var l=t.filter(function(g){return g.type===a}),u=a==="vertical"?1:0,c=u?0:1,f=TA(a,l,n,o),d=u?wi:Si,p=u?Si:wi,h=n[d.start],m=n[d.end];f.forEach(function(g){var v=g.total,b=g.start,w=g.end,y=g.inner,S=r[c]+v[0].pos[c]-n[p.start],x=n;b.forEach(function(C){var k=C.elementRect.rect,_=x[d.start]-k[d.end];if(_>0){var E=[0,0];E[u]=r[u]+x[d.start]-h-_,E[c]=S,s.push(Sa(e,a,"dashed",s.length,_,E,C.className,i))}x=k}),x=n,w.forEach(function(C){var k=C.elementRect.rect,_=k[d.start]-x[d.end];if(_>0){var E=[0,0];E[u]=r[u]+x[d.end]-h,E[c]=S,s.push(Sa(e,a,"dashed",s.length,_,E,C.className,i))}x=k}),y.forEach(function(C){var k=C.elementRect.rect,_=h-k[d.start],E=k[d.end]-m,A=[0,0],O=[0,0];A[u]=r[u]-_,A[c]=S,O[u]=r[u]+m-h,O[c]=S,s.push(Sa(e,a,"dashed",s.length,_,A,C.className,i)),s.push(Sa(e,a,"dashed",s.length,E,O,C.className,i))})})}),s}function DA(e,t,r,n,i){var o=[];return["horizontal","vertical"].forEach(function(s){var a=t.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,u=l?0:1,c=l?wi:Si,f=l?Si:wi,d=n[c.start],p=n[c.end],h=n[f.start],m=n[f.end];a.forEach(function(g){var v=g.gap,b=g.gapRects,w=Math.max.apply(Math,U([h],D(b.map(function(x){var C=x.rect;return C[f.start]})),!1)),y=Math.min.apply(Math,U([m],D(b.map(function(x){var C=x.rect;return C[f.end]})),!1)),S=(w+y)/2;w===y||S===(h+m)/2||b.forEach(function(x){var C=x.rect,k=x.className,_=[r[0],r[1]];if(C[c.end]<d)_[l]+=C[c.end]-d;else if(p<C[c.start])_[l]+=C[c.start]-d-v;else return;_[u]+=S-h,o.push(Sa(e,l?"vertical":"horizontal","gap",o.length,v,_,k,i))})})}),o}function Oh(e){var t,r,n=e.state,i=n.containerClientRect,o=n.hasFixed,s=i.overflow,a=i.scrollHeight,l=i.scrollWidth,u=i.clientHeight,c=i.clientWidth,f=i.clientLeft,d=i.clientTop,p=e.props,h=p.snapGap,m=h===void 0?!0:h,g=p.verticalGuidelines,v=p.horizontalGuidelines,b=p.snapThreshold,w=b===void 0?5:b,y=p.maxSnapElementGuidelineDistance,S=y===void 0?1/0:y,x=p.isDisplayGridGuidelines,C=Ir(Br(e.state)),k=C.top,_=C.left,E=C.bottom,A=C.right,O={top:k,left:_,bottom:E,right:A,center:(_+A)/2,middle:(k+E)/2},M=NA(e),P=U([],D(M),!1),R=((r=(t=n.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(j){return j*w});m&&P.push.apply(P,U([],D(AA(e,O,R)),!1));var B=T({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(P.push.apply(P,U([],D(PA(e,s?l:c,s?a:u,f,d,B,x)),!1)),o){var F=i.left,I=i.top;B.left+=F,B.top+=I,B.right+=F,B.bottom+=I}return P.push.apply(P,U([],D(tx(v||!1,g||!1,s?l:c,s?a:u,f,d,B)),!1)),P=P.filter(function(j){var V=j.element,L=j.elementRect,Y=j.type;if(!V||!L)return!0;var rt=L.rect;return Qb(O,rt,Y,S)}),P}function AA(e,t,r){var n=e.props,i=n.maxSnapElementGuidelineDistance,o=i===void 0?1/0:i,s=n.maxSnapElementGapDistance,a=s===void 0?1/0:s,l=e.state.elementRects,u=[];return[["vertical",Si,wi],["horizontal",wi,Si]].forEach(function(c){var f=D(c,3),d=f[0],p=f[1],h=f[2],m=t[p.start],g=t[p.end],v=t[p.center],b=t[h.start],w=t[h.end],y={left:r[0],top:r[1]};function S(k){var _=k.rect,E=y[p.start];return _[p.end]<m+E?m-_[p.end]:g-E<_[p.start]?_[p.start]-g:-1}var x=l.filter(function(k){var _=k.rect;return _[h.start]>w||_[h.end]<b?!1:S(k)>0}).sort(function(k,_){return S(k)-S(_)}),C=[];x.forEach(function(k){x.forEach(function(_){if(k!==_){var E=k.rect,A=_.rect,O=E[h.start],M=E[h.end],P=A[h.start],R=A[h.end];O>R||P>M||C.push([k,_])}})}),C.forEach(function(k){var _=D(k,2),E=_[0],A=_[1],O=E.rect,M=A.rect,P=O[p.start],R=O[p.end],B=M[p.start],F=M[p.end],I=y[p.start],j=0,V=0,L=!1,Y=!1,rt=!1;if(R<=m&&g<=B){if(Y=!0,j=(B-R-(g-m))/2,V=R+j+(g-m)/2,H(V-v)>I)return}else if(R<B&&F<m+I){if(L=!0,j=B-R,V=F+j,H(V-m)>I)return}else if(R<B&&g-I<P){if(rt=!0,j=B-R,V=P-j,H(V-g)>I)return}else return;j&&Qb(t,M,d,o)&&(j>a||u.push({type:d,pos:d==="vertical"?[V,0]:[0,V],element:A.element,size:0,className:A.className,isStart:L,isCenter:Y,isEnd:rt,gap:j,hide:!0,gapRects:[E,A],direction:"",elementDirection:""}))})}),u}function RA(e,t,r,n){var i,o,s=e.props,a=e.state,l=s.snapGridAll,u=s.snapGridWidth,c=u===void 0?0:u,f=s.snapGridHeight,d=f===void 0?0:f,p=a.snapRenderInfo,h=p&&(((i=p.direction)===null||i===void 0?void 0:i[0])||((o=p.direction)===null||o===void 0?void 0:o[1])),m=e.moveables;if(l&&m&&h&&(c||d)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=e.getRect(),v=g.children,b=p.direction;if(v){var w=b.map(function(S,x){var C=x===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:n.left-t}:{snapSize:d,posName:"top",sizeName:"height",clientOffset:n.top-r},k=C.snapSize,_=C.posName,E=C.sizeName,A=C.clientOffset;if(!k)return{dir:S,multiple:1,snapSize:k,snapOffset:0};var O=g[E],M=g[_],P=Fu(v.map(function(L){return[L[_]-M,L[E],O-L[E]-L[_]+M]})).filter(function(L){return L}).sort(function(L,Y){return L-Y}),R=P[0],B=P.map(function(L){return Ct(L/R,.1)*k}),F=1,I=Ct(O/R,.1);for(F=1;F<=10&&!B.every(function(L){return L*F%1===0});++F);var j=(-S+1)/2,V=ua(M-A,M-A+O,j,1-j);return{multiple:I*F,dir:S,snapSize:k,snapOffset:Math.round(V/k)}}),y=w.map(function(S){return S.multiple||1});a.snapThresholdInfo.multiples=y,a.snapThresholdInfo.offset=w.map(function(S){return S.snapOffset}),w.forEach(function(S,x){S.snapSize})}}else a.snapThresholdInfo=null}function PA(e,t,r,n,i,o,s){n===void 0&&(n=0),i===void 0&&(i=0);var a=e.props,l=e.state,u=a.snapGridWidth,c=u===void 0?0:u,f=a.snapGridHeight,d=f===void 0?0:f,p=[],h=o.left,m=o.top,g=[0,0];RA(e,n,i,o);var v=l.snapThresholdInfo,b=c,w=d;if(v&&(c*=v.multiples[0]||1,d*=v.multiples[1]||1,g=v.offset),d){for(var y=function(x){p.push({type:"horizontal",pos:[h,Ct(g[1]*w+x-i+m,.1)],className:gt("grid-guideline"),size:t,hide:!s,direction:"",grid:!0})},S=0;S<=r*2;S+=d)y(S);for(var S=-d;S>=-r;S-=d)y(S)}if(c){for(var y=function(C){p.push({type:"vertical",pos:[Ct(g[0]*b+C-n+h,.1),m],className:gt("grid-guideline"),size:r,hide:!s,direction:"",grid:!0})},S=0;S<=t*2;S+=c)y(S);for(var S=-c;S>=-t;S-=c)y(S)}return p}function Qb(e,t,r,n){return r==="horizontal"?H(e.right-t.left)<=n||H(e.left-t.right)<=n||e.left<=t.right&&t.left<=e.right:r==="vertical"?H(e.bottom-t.top)<=n||H(e.top-t.bottom)<=n||e.top<=t.bottom&&t.top<=e.bottom:!0}function NA(e){var t=e.state,r=e.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return t.elementRects=[],[];var i=(t.elementRects||[]).filter(function(d){return!d.refresh}),o=n.map(function(d){return pr(d)&&"element"in d?T(T({},d),{element:Sn(d.element,!0)}):{element:Sn(d,!0)}}).filter(function(d){return d.element}),s=Iy(i.map(function(d){return d.element}),o.map(function(d){return d.element})),a=s.maintained,l=s.added,u=[];a.forEach(function(d){var p=D(d,2),h=p[0],m=p[1];u[m]=i[h]}),IA(e,l.map(function(d){return o[d]})).map(function(d,p){u[l[p]]=d}),t.elementRects=u;var c=Vh(e.props.elementSnapDirections),f=[];return u.forEach(function(d){var p=d.element,h=d.top,m=h===void 0?c.top:h,g=d.left,v=g===void 0?c.left:g,b=d.right,w=b===void 0?c.right:b,y=d.bottom,S=y===void 0?c.bottom:y,x=d.center,C=x===void 0?c.center:x,k=d.middle,_=k===void 0?c.middle:k,E=d.className,A=d.rect,O=Wh({top:m,right:w,left:v,bottom:S,center:C,middle:_},A),M=O.horizontal,P=O.vertical,R=O.horizontalNames,B=O.verticalNames,F=A.top,I=A.left,j=A.right-I,V=A.bottom-F,L=[j,V];P.forEach(function(Y,rt){f.push({type:"vertical",element:p,pos:[Ct(Y,.1),F],size:V,sizes:L,className:E,elementRect:d,elementDirection:Yy[B[rt]]||B[rt],direction:""})}),M.forEach(function(Y,rt){f.push({type:"horizontal",element:p,pos:[I,Ct(Y,.1)],size:j,sizes:L,className:E,elementRect:d,elementDirection:Yy[R[rt]]||R[rt],direction:""})})}),f}function ib(e,t){return e?e.map(function(r){var n=pr(r)?r:{pos:r},i=n.pos;return fi(i)?n:T(T({},n),{pos:Kt(i,t)})}):[]}function tx(e,t,r,n,i,o,s){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var a=[],l=s.left,u=s.top,c=s.bottom,f=s.right,d=r+f-l,p=n+c-u;return ib(e,p).forEach(function(h){a.push({type:"horizontal",pos:[l,Ct(h.pos-o+u,.1)],size:d,className:h.className,direction:""})}),ib(t,d).forEach(function(h){a.push({type:"vertical",pos:[Ct(h.pos-i+l,.1),u],size:p,className:h.className,direction:""})}),a}function IA(e,t){if(!t.length)return[];var r=e.props.groupable,n=e.state,i=n.containerClientRect,o=n.rootMatrix,s=n.is3d,a=n.offsetDelta,l=s?4:3,u=D(oA(o,i,l),2),c=u[0],f=u[1],d=r?0:a[0],p=r?0:a[1];return t.map(function(h){var m=h.element.getBoundingClientRect(),g=m.left-c-d,v=m.top-f-p,b=v+m.height,w=g+m.width,y=D(us(o,[g,v],l),2),S=y[0],x=y[1],C=D(us(o,[w,b],l),2),k=C[0],_=C[1];return T(T({},h),{rect:{left:S,right:k,top:x,bottom:_,center:(S+k)/2,middle:(x+_)/2}})})}function nc(e){var t=e.state,r=t.container,n=e.props.snapContainer||r;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var i=t.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==n){var s=Sn(n,!0);if(s){var a=ka(s),l=cb(t,[a.left-i.left,a.top-i.top]),u=cb(t,[a.right-i.right,a.bottom-i.bottom]);o.left=Ct(l[0],1e-5),o.top=Ct(l[1],1e-5),o.right=Ct(u[0],1e-5),o.bottom=Ct(u[1],1e-5)}}return t.snapContainer=n,t.snapOffset=o,t.guidelines=Oh(e),t.enableSnap=!0,!0}function ex(e,t,r,n,i,o){var s=ho(e,t,r,o?4:3),a=Ne(s,n);return Yh(s,mt(i,a))}function ob(e){return e?e/H(e):0}function LA(e,t,r,n,i,o){var s=o.fixedDirection,a=uA(r,s,n),l=Gh(e,t,r,n),u=U(U([],D(SA(e,t,a,n,i,o)),!1),D(Kb(e,l,o)),!1),c=dc(u,0),f=dc(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function BA(e,t,r,n,i,o,s,a,l){var u=Ne(t,s),c=_c(e,a,{vertical:[u[0]],horizontal:[u[1]]}),f=c.horizontal.offset,d=c.vertical.offset;if(Ct(d,wh)||Ct(f,wh)){var p=D(wn({datas:l,distX:-d,distY:-f}),2),h=p[0],m=p[1],g=Math.min(i||1/0,r+s[0]*h),v=Math.min(o||1/0,n+s[1]*m);return[g-r,v-n]}return[0,0]}function rx(e,t,r,n,i,o,s,a){for(var l=Br(e.state),u=e.props.keepRatio,c=0,f=0,d=0;d<2;++d){var p=t(c,f),h=LA(e,p,i,u,s,a),m=h.width,g=h.height,v=m.isBound,b=g.isBound,w=m.offset,y=g.offset;if(d===1&&(v||(w=0),b||(y=0)),d===0&&s&&!v&&!b)return[0,0];if(u){var S=H(w)*(r?1/r:1),x=H(y)*(n?1/n:1),C=v&&b?S<x:b||!v&&S<x;C?w=r*y/n:y=n*w/r}c+=w,f+=y}if(!u&&i[0]&&i[1]){var k=CA(e,l,i,o,a),_=k.maxWidth,E=k.maxHeight,A=D(BA(e,t(c,f).map(function(P){return P.map(function(R){return Ct(R,wh)})}),r+c,n+f,_,E,i,s,a),2),w=A[0],y=A[1];c+=w,f+=y}return[c,f]}function Ca(e){return e<0&&(e=e%360+360),e%=360,e}function zA(e,t){t=Ca(t);var r=Math.floor(e/360),n=r*360+360-t,i=r*360+t;return H(e-n)<H(e-i)?n:i}function vh(e,t){e=Ca(e),t=Ca(t);var r=Ca(e-t);return Math.min(r,360-r)}function FA(e,t,r,n){var i,o=e.props,s=(i=o[$b])!==null&&i!==void 0?i:5,a=o[Vb];if(hs(e,"rotatable")){var l=t.pos1,u=t.pos2,c=t.pos3,f=t.pos4,d=t.origin,p=r*Math.PI/180,h=[l,u,c,f].map(function(y){return mt(y,d)}),m=h.map(function(y){return Ko(y,p)}),g=U(U([],D(eA(e,h,m,d,r)),!1),D(mA(e,h,m,d,r)),!1);g.sort(function(y,S){return H(y-r)-H(S-r)});var v=g.length>0;if(v)return{isSnap:v,dist:v?g[0]:r}}if(a?.length&&s){var b=a.slice().sort(function(y,S){return vh(y,n)-vh(S,n)}),w=b[0];if(vh(w,n)<=s)return{isSnap:!0,dist:r+zA(n,w)-n}}return{isSnap:!1,dist:r}}function HA(e,t,r,n,i,o,s){if(!hs(e,"resizable"))return[0,0];var a=s.fixedDirection,l=s.nextAllMatrix,u=e.state,c=u.allMatrix,f=u.is3d;return rx(e,function(d,p){return ex(l||c,t+d,r+p,a,i,f)},t,r,n,i,o,s)}function $A(e,t,r,n,i){if(!hs(e,"scalable"))return[0,0];var o=i.startOffsetWidth,s=i.startOffsetHeight,a=i.fixedPosition,l=i.fixedDirection,u=i.is3d,c=rx(e,function(f,d){return ex(HD(i,Gt(t,[f/o,d/s])),o,s,l,a,u)},o,s,r,a,n,i);return[c[0]/o,c[1]/s]}function VA(e,t){t.absolutePoses=Br(e.state)}function sb(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(n){var i=n.guideline;je(t,function(o){return o.guideline===i})||(i.direction="",t.push({guideline:i,posInfo:r}))})}),t.map(function(r){var n=r.guideline,i=r.posInfo;return T(T({},n),{direction:i.direction})})}function ab(e,t,r,n,i,o){var s=$h(wc(e,o),t,r),a=s.vertical,l=s.horizontal,u=es();a.forEach(function(h){h.isBound&&(h.direction==="start"&&(u.left=!0),h.direction==="end"&&(u.right=!0),n.push({type:"bounds",pos:h.pos}))}),l.forEach(function(h){h.isBound&&(h.direction==="start"&&(u.top=!0),h.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:h.pos}))});var c=gA(e),f=c.boundMap,d=c.vertical,p=c.horizontal;return d.forEach(function(h){Ar(n,function(m){var g=m.type,v=m.pos;return g==="bounds"&&v===h})>=0||n.push({type:"bounds",pos:h})}),p.forEach(function(h){Ar(i,function(m){var g=m.type,v=m.pos;return g==="bounds"&&v===h})>=0||i.push({type:"bounds",pos:h})}),{boundMap:u,innerBoundMap:f}}var WA=Jh("",["resizable","scalable"]),jA={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",$b,Vb,Wb,jb,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,n=r.top,i=r.left,o=r.pos1,s=r.pos2,a=r.pos3,l=r.pos4,u=r.snapRenderInfo,c=e.props.snapRenderThreshold,f=c===void 0?1:c;if(!u||!u.render||!hs(e,""))return ns(e,"boundMap",es(),function(K){return JSON.stringify(K)}),ns(e,"innerBoundMap",es(),function(K){return JSON.stringify(K)}),[];r.guidelines=Oh(e);var d=Math.min(o[0],s[0],a[0],l[0]),p=Math.min(o[1],s[1],a[1],l[1]),h=u.externalPoses||[],m=Br(e.state),g=[],v=[],b=[],w=[],y=[],S=Ir(m),x=S.width,C=S.height,k=S.top,_=S.left,E=S.bottom,A=S.right,O={left:_,right:A,top:k,bottom:E,center:(_+A)/2,middle:(k+E)/2},M=h.length>0,P=M?Ir(h):{};if(!u.request){if(u.direction&&y.push(lA(e,m,u.direction,f,f)),u.snap){var R=Ir(m);u.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),y.push(Ky(e,R,f,f))}M&&(u.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),y.push(Ky(e,P,f,f))),y.forEach(function(K){var tt=K.vertical.posInfos,X=K.horizontal.posInfos;g.push.apply(g,U([],D(tt.filter(function(it){var ut=it.guidelineInfos;return ut.some(function(xt){var Tt=xt.guideline;return!Tt.hide})}).map(function(it){return{type:"snap",pos:it.pos}})),!1)),v.push.apply(v,U([],D(X.filter(function(it){var ut=it.guidelineInfos;return ut.some(function(xt){var Tt=xt.guideline;return!Tt.hide})}).map(function(it){return{type:"snap",pos:it.pos}})),!1)),b.push.apply(b,U([],D(sb(tt)),!1)),w.push.apply(w,U([],D(sb(X)),!1))})}var B=ab(e,[_,A],[k,E],g,v),F=B.boundMap,I=B.innerBoundMap;M&&ab(e,[P.left,P.right],[P.top,P.bottom],g,v,u.externalBounds);var j=U(U([],D(b),!1),D(w),!1),V=j.filter(function(K){return K.element&&!K.gapRects}),L=j.filter(function(K){return K.gapRects}).sort(function(K,tt){return K.gap-tt.gap});at(e,"onSnap",{guidelines:j.filter(function(K){var tt=K.element;return!tt}),elements:V,gaps:L},!0);var Y=ns(e,"boundMap",F,function(K){return JSON.stringify(K)},es()),rt=ns(e,"innerBoundMap",I,function(K){return JSON.stringify(K)},es());return(F===Y||I===rt)&&at(e,"onBound",{bounds:F,innerBounds:I},!0),U(U(U(U(U(U([],D(OA(e,V,[d,p],O,t)),!1),D(DA(e,L,[d,p],O,t)),!1),D(nb(e,"horizontal",w,[i,n],O,t)),!1),D(nb(e,"vertical",b,[i,n],O,t)),!1),D(rb(e,"horizontal",v,d,n,x,0,t)),!1),D(rb(e,"vertical",g,p,i,C,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},nc(e)},drag:function(e){var t=e.state;nc(e)||(t.guidelines=Oh(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(WA(e,t)||Th(e,t))return!0;if(!t.isRequest&&t.inputEvent)return Me(t.inputEvent.target,gt("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,nc(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,nc(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function GA(e,t){return[e[0]*t[0],e[1]*t[1]]}function gt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return G1.apply(void 0,U([Lh],D(e),!1))}function nx(e){e()}function qA(e){return!e||e==="none"?[1,0,0,1,0,0]:pr(e)?e:Jo(e)}function _a(e,t,r){return va(t,mi(r,t),e,mi(r.map(function(n){return-n}),t))}function UA(e,t,r){if(t==="%"){var n=Uh(e.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function YA(e){var t=KA(Kh(e,":before"));return t.map(function(r,n){var i=io(r),o=i.value,s=i.unit;return o*UA(e,s,n===0)})}function hc(e){return e?e.split(" "):["0","0"]}function KA(e){return hc(e.transformOrigin)}function ix(e){var t=mr(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var n=e.transform,i=n.baseVal;if(!i)return"";var o=i.length;if(!o)return"";for(var s=[],a=function(u){var c=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},l=0;l<o;++l)a(l);return s.join(" ")}return""}function Ta(e,t,r,n,i){var o,s,a=$u(e)||$n(e),l=!1,u,c;if(!e||r)u=e;else{var f=(o=e?.assignedSlot)===null||o===void 0?void 0:o.parentElement,d=e.parentElement;f?(l=!0,c=d,u=f):u=d}for(var p=!1,h=e===t||u===t,m="relative",g=1,v=parseFloat(i?.("zoom"))||1,b=i?.("position");u&&u!==a;){t===u&&(h=!0);var w=mr(u),y=u.tagName.toLowerCase(),S=ix(u),x=w("willChange"),C=parseFloat(w("zoom"))||1;if(m=w("position"),n&&C!==1){g=C;break}if(!r&&n&&v!==1&&b&&b!=="absolute"||y==="svg"||y==="foreignobject"||m!=="static"||S&&S!=="none"||x==="transform")break;var k=(s=e?.assignedSlot)===null||s===void 0?void 0:s.parentNode,_=u.parentNode;k&&(l=!0,c=_);var E=_;if(E&&E.nodeType===11){u=E.host,p=!0,m=mr(u)("position");break}u=E,m="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:c,isCustomElement:p,isStatic:m==="static",isEnd:h||!u||u===a,offsetParent:u||a}}function XA(e,t){var r,n=e.tagName.toLowerCase(),i=e.offsetLeft,o=e.offsetTop,s=mr(e),a=qo(i),l=!a,u,c;return!l&&(n!=="svg"||e.ownerSVGElement)?(u=_b?YA(e):hc(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice(),l=!0,n==="svg"?(i=0,o=0):(r=D(QA(e,u,e===t&&t.tagName.toLowerCase()==="g"),4),i=r[0],o=r[1],u[0]=r[2],u[1]=r[3])):(u=hc(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=u.slice()),{tagName:n,isSVG:a,hasOffset:l,offset:[i||0,o||0],origin:u,targetOrigin:c}}function ox(e,t){var r=mr(e),n=mr($n(e)),i=n("position");if(!t&&(!i||i==="static"))return[0,0];var o=parseInt(n("marginLeft"),10),s=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(s=0),(r("left")!=="auto"||r("right")!=="auto")&&(o=0)),[o,s]}function Dh(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=Pr(r,3,4))})}function JA(e){for(var t=e.parentElement,r=!1,n=$n(e);t;){var i=Kh(t).transform;if(i&&i!=="none"){r=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:r}}function kc(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(Jp(e,!t).join(","),")")}function Uh(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||r,clientWidth:t,clientHeight:r}}function ZA(e,t){var r,n=Uh(e),i=n.width,o=n.height,s=n.clientWidth,a=n.clientHeight,l=s/i,u=a/o,c=e.preserveAspectRatio.baseVal,f=c.align,d=c.meetOrSlice,p=[0,0],h=[l,u],m=[0,0];if(f!==1){var g=(f-2)%3,v=Math.floor((f-2)/3);p[0]=i*g/2,p[1]=o*v/2;var b=d===2?Math.max(u,l):Math.min(l,u);h[0]=b,h[1]=b,m[0]=(s-i)/2*g,m[1]=(a-o)/2*v}var w=Uu(h,t);return r=D(m,2),w[t*(t-1)]=r[0],w[t*(t-1)+1]=r[1],_a(w,t,p)}function QA(e,t,r){var n=e.tagName.toLowerCase();if(!e.getBBox||!r&&n==="g")return[0,0,0,0];var i=mr(e),o=i("transform-box")==="fill-box",s=e.getBBox(),a=Uh(e.ownerSVGElement),l=s.x,u=s.y;n==="foreignobject"&&!l&&!u&&(l=parseFloat(e.getAttribute("x"))||0,u=parseFloat(e.getAttribute("y"))||0);var c=l-a.x,f=u-a.y,d=o?t[0]:t[0]-c,p=o?t[1]:t[1]-f;return[c,f,d,p]}function he(e,t,r){return He(e,hi(t,r),r)}function ho(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(i){return he(e,i,n)})}function Ir(e){var t=e.map(function(u){return u[0]}),r=e.map(function(u){return u[1]}),n=Math.min.apply(Math,U([],D(t),!1)),i=Math.min.apply(Math,U([],D(r),!1)),o=Math.max.apply(Math,U([],D(t),!1)),s=Math.max.apply(Math,U([],D(r),!1)),a=o-n,l=s-i;return{left:n,top:i,right:o,bottom:s,width:a,height:l}}function lb(e,t,r,n){var i=ho(e,t,r,n);return Ir(i)}function t2(e,t,r,n,i){var o,s=e.target,a=e.origin,l=t.matrix,u=ax(s),c=u.offsetWidth,f=u.offsetHeight,d=r.getBoundingClientRect(),p=[0,0];r===$n(r)&&(p=ox(s,!0));for(var h=s.getBoundingClientRect(),m=h.left-d.left+r.scrollLeft-(r.clientLeft||0)+p[0],g=h.top-d.top+r.scrollTop-(r.clientTop||0)+p[1],v=h.width,b=h.height,w=va(n,i,l),y=lb(w,c,f,n),S=y.left,x=y.top,C=y.width,k=y.height,_=he(w,a,n),E=mt(_,[S,x]),A=[m+E[0]*v/C,g+E[1]*b/k],O=[0,0],M=0;++M<10;){var P=Rr(i,n);o=D(mt(he(P,A,n),he(P,_,n)),2),O[0]=o[0],O[1]=o[1];var R=va(n,i,mi(O,n),l),B=lb(R,c,f,n),F=B.left,I=B.top,j=F-m,V=I-g;if(H(j)<2&&H(V)<2)break;A[0]-=j,A[1]-=V}return O.map(function(L){return Math.round(L)})}function e2(e,t,r){var n=e.length===16,i=n?4:3,o=t.map(function(l){return he(e,l,i)}),s=r.left,a=r.top;return o.map(function(l){return[l[0]+s,l[1]+a]})}function Lr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function sx(e,t){return Lr([t[0]-e[0],t[1]-e[1]])}function wa(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=ve(e,t));var i=sx(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function mc(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,o=r.reduce(function(a,l){return a+l[0]},0)/i,s=r.reduce(function(a,l){return a+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(s,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function fo(e,t){var r=e[t];return pr(r)?T(T({},e),r):e}function ax(e){var t=e&&!qo(e.offsetWidth),r=0,n=0,i=0,o=0,s=0,a=0,l=0,u=0,c=0,f=0,d=0,p=0,h=1/0,m=1/0,g=1/0,v=1/0,b=0,w=0,y=!1;if(e)if(!t&&e.ownerSVGElement){var S=e.getBBox();y=!0,r=S.width,n=S.height,s=r,a=n,l=r,u=n,i=r,o=n}else{var x=mr(e),C=e.style,k=x("boxSizing")==="border-box",_=parseFloat(x("borderLeftWidth"))||0,E=parseFloat(x("borderRightWidth"))||0,A=parseFloat(x("borderTopWidth"))||0,O=parseFloat(x("borderBottomWidth"))||0,M=parseFloat(x("paddingLeft"))||0,P=parseFloat(x("paddingRight"))||0,R=parseFloat(x("paddingTop"))||0,B=parseFloat(x("paddingBottom"))||0,F=M+P,I=R+B,j=_+E,V=A+O,L=F+j,Y=I+V,rt=x("position"),K=0,tt=0;if("clientLeft"in e){var X=null;if(rt==="absolute"){var it=Ta(e,$n(e));X=it.offsetParent}else X=e.parentElement;if(X){var ut=mr(X);K=parseFloat(ut("width")),tt=parseFloat(ut("height"))}}c=Math.max(F,Kt(x("minWidth"),K)||0),f=Math.max(I,Kt(x("minHeight"),tt)||0),h=Kt(x("maxWidth"),K),m=Kt(x("maxHeight"),tt),isNaN(h)&&(h=1/0),isNaN(m)&&(m=1/0),b=Kt(C.width,0)||0,w=Kt(C.height,0)||0,s=parseFloat(x("width"))||0,a=parseFloat(x("height"))||0,l=H(s-b)<1?zu(c,b||s,h):s,u=H(a-w)<1?zu(f,w||a,m):a,r=l,n=u,i=l,o=u,k?(g=h,v=m,d=c,p=f,l=r-L,u=n-Y):(g=h+L,v=m+Y,d=c+L,p=f+Y,r=l+L,n=u+Y),i=l+F,o=u+I}return{svg:y,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:o,contentWidth:l,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:w,cssWidth:s,cssHeight:a,minWidth:c,minHeight:f,maxWidth:h,maxHeight:m,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:g,maxOffsetHeight:v}}function lx(e,t){return ve(t>0?e[0]:e[1],t>0?e[1]:e[0])}function ic(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function ux(e,t){var r=e===$n(e)||e===$u(e),n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=mr(e)("overflow")!=="visible",T(T({},t),n)}function yh(e,t,r,n){var i=e.left,o=e.right,s=e.top,a=e.bottom,l=t.top,u=t.left,c={left:u+i,top:l+s,right:u+o,bottom:l+a,width:o-i,height:a-s};return r&&n?ux(r,c):c}function ka(e,t){var r=0,n=0,i=0,o=0;if(e){var s=e.getBoundingClientRect();r=s.left,n=s.top,i=s.width,o=s.height}var a={left:r,top:n,width:i,height:o,right:r+i,bottom:n+o};return e&&t?ux(e,a):a}function r2(e){var t=e.props,r=t.groupable,n=t.svgOrigin,i=e.getState(),o=i.offsetWidth,s=i.offsetHeight,a=i.svg,l=i.transformOrigin;return!r&&a&&n?Qh(n,o,s):l}function cx(e,t,r,n){var i;if(e)i=e;else if(t)i=[0,0];else{var o=r.target;i=fx(o,n)}return i}function fx(e,t){if(e){var r=e.getAttribute("data-rotation")||"",n=e.getAttribute("data-direction");if(t.deg=r,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function Yh(e,t){return[Gt(t,e[0]),Gt(t,e[1]),Gt(t,e[2]),Gt(t,e[3])]}function Br(e){var t=e.left,r=e.top,n=e.pos1,i=e.pos2,o=e.pos3,s=e.pos4;return Yh([n,i,o,s],[t,r])}function Ah(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function rs(e,t){var r=t?"controlGesto":"targetGesto",n=e[r];n?.isIdle()===!1&&Ah(e,t),n?.unset(),e[r]=null}function lr(e,t){if(t){var r=ps(t);r.nextStyle=T(T({},r.nextStyle),e)}return{style:e,cssText:Xr(e).map(function(n){return"".concat(Yo(n,"-"),": ").concat(e[n],";")}).join("")}}function dx(e,t,r){var n=t.afterTransform||t.transform;return T(T({},lr(T(T(T({},e.style),t.style),{transform:n}),r)),{afterTransform:n,transform:e.transform})}function Ot(e,t,r,n){var i=t.datas;i.datas||(i.datas={});var o=T(T({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:i.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=t.stop)===null||s===void 0||s.call(t)}});return i.isStartEvent?n||(i.lastEvent=o):i.isStartEvent=!0,o}function xr(e,t,r){var n=t.datas,i="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),T(T({isDrag:i},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function Ec(e,t,r){e._emitter.on(t,r)}function at(e,t,r,n,i){return e.triggerEvent(t,r,n,i)}function Kh(e,t){return bn(e).getComputedStyle(e,t)}function oc(e,t,r){var n={},i={};return e.filter(function(o){var s=o.name;if(n[s]||!t.some(function(a){return o[a]}))return!1;if(!r&&o.ableGroup){if(i[o.ableGroup])return!1;i[o.ableGroup]=!0}return n[s]=!0,!0})}function Rh(e,t){return e===t||e==null&&t==null}function ub(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var i=e[n];if(!qo(i))return i}return e[r]}function px(e,t){var r=[],n=[];return e.forEach(function(i,o){var s=t(i,o,e),a=n.indexOf(s),l=r[a]||[];a===-1&&(n.push(s),r.push(l)),l.push(i)}),r}function n2(e,t){var r=[],n={};return e.forEach(function(i,o){var s=t(i,o,e),a=n[s];a||(a=[],n[s]=a,r.push(a)),a.push(i)}),r}function hx(e){return e.reduce(function(t,r){return t.concat(r)},[])}function ls(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return H(n)-H(r)}),e[0]}function us(e,t,r){return He(Rr(e,r),hi(t,r),r)}function mx(e,t){var r,n=e.is3d,i=e.rootMatrix,o=n?4:3;return r=D(us(i,[t.distX,t.distY],o),2),t.distX=r[0],t.distY=r[1],t}function Nr(e,t,r,n){if(!r[0]&&!r[1])return t;var i=he(e,[ob(r[0]||1),0],n),o=he(e,[0,ob(r[1]||1)],n),s=he(e,[r[0]/Lr(i),r[1]/Lr(o)],n);return Gt(t,s)}function Zr(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function gc(e){return H(e)<=ur?0:e}function Xh(e){return function(t){if(!t.isDragging(e))return"";var r=UD(t,e),n=r.deg;return n?gt("view-control-rotation".concat(n)):""}}function Jh(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return t.some(function(o){return n.requestAble===o})?n.parentDirection:!1;var i=n.inputEvent.target;return Me(i,gt("direction"))&&(!e||Me(i,gt(e)))}}function i2(e,t,r){var n,i=so(e,{"x%":function(S){return S/100*t.offsetWidth},"y%":function(S){return S/100*t.offsetHeight}}),o=e.slice(0,r<0?void 0:r),s=e.slice(0,r<0?void 0:r+1),a=e[r]||"",l=r<0?[]:e.slice(r),u=r<0?[]:e.slice(r+1),c=i.slice(0,r<0?void 0:r),f=i.slice(0,r<0?void 0:r+1),d=(n=i[r])!==null&&n!==void 0?n:so([""])[0],p=r<0?[]:i.slice(r),h=r<0?[]:i.slice(r+1),m=d?[d]:[],g=oo(c),v=oo(f),b=oo(p),w=oo(h),y=Xt(g,b,4);return{transforms:e,beforeFunctionMatrix:g,beforeFunctionMatrix2:v,targetFunctionMatrix:oo(m),afterFunctionMatrix:b,afterFunctionMatrix2:w,allFunctionMatrix:y,beforeFunctions:c,beforeFunctions2:f,targetFunction:m[0],afterFunctions:p,afterFunctions2:h,beforeFunctionTexts:o,beforeFunctionTexts2:s,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:u}}function o2(e){return!e||!pr(e)||di(e)?!1:ce(e)||"length"in e}function Sn(e,t){return e?di(e)?e:Ge(e)?t?document.querySelector(e):e:Uo(e)?e():Vu(e)?e:"current"in e?e.current:e:null}function Zh(e,t){if(!e)return[];var r=o2(e)?[].slice.call(e):[e];return r.reduce(function(n,i){return Ge(i)&&t?U(U([],D(n),!1),D([].slice.call(document.querySelectorAll(i))),!1):(ce(i)?n.push(Zh(i,t)):n.push(Sn(i,t)),n)},[])}function s2(e,t,r){var n=ve(e,t)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function cb(e,t){var r=e.rootMatrix,n=e.is3d,i=n?4:3,o=Rr(r,i);return n||(o=Pr(o,3,4)),o[12]=0,o[13]=0,o[14]=0,Py(o,t)}function gx(e,t,r,n,i){var o=D(e,2),s=o[0],a=o[1],l=0,u=0;if(i&&s&&a){var c=ve([0,0],t),f=ve([0,0],n),d=Lr(t),p=Math.cos(c-f)*d;if(!n[0])u=p,l=u*r;else if(!n[1])l=p,u=l/r;else{var h=n[0]*s,m=n[1]*a,g=Math.atan2(h+t[0],m+t[1]),v=Math.atan2(h,m);g<0&&(g+=Math.PI*2),v<0&&(v+=Math.PI*2);var b=0;H(g-v)<Math.PI/2||H(g-v)>Math.PI/2*3||(v+=Math.PI),b=g-v,b>Math.PI*2?b-=Math.PI*2:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var w=Lr([h+t[0],m+t[1]])*Math.cos(b);l=w*Math.sin(v)-h,u=w*Math.cos(v)-m,n[0]<0&&(l*=-1),n[1]<0&&(u*=-1)}}else l=n[0]*t[0],u=n[1]*t[1];return[l,u]}function vx(e,t,r,n){var i,o=r.ratio,s=r.startOffsetWidth,a=r.startOffsetHeight,l=0,u=0,c=n.distX,f=n.distY,d=n.pinchScale,p=n.parentDistance,h=n.parentDist,m=n.parentScale,g=r.fixedDirection,v=[0,1].map(function(C){return H(e[C]-g[C])}),b=[0,1].map(function(C){var k=v[C];return k!==0&&(k=2/k),k});if(h)l=h[0],u=h[1],t&&(l?u||(u=l/o):l=u*o);else if(fi(d))l=(d-1)*s,u=(d-1)*a;else if(m)l=(m[0]-1)*s,u=(m[1]-1)*a;else if(p){var w=s*v[0],y=a*v[1],S=Lr([w,y]);l=p/S*w*b[0],u=p/S*y*b[1]}else{var x=wn({datas:r,distX:c,distY:f});x=b.map(function(C,k){return x[k]*C}),i=D(gx([s,a],x,o,e,t),2),l=i[0],u=i[1]}return{distWidth:l,distHeight:u}}function Ph(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=D(e.split(" "),2),n=r[0],i=r[1],o=Ph(n||""),s=Ph(i||""),a=T(T({},o),s),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function Qh(e,t,r){var n=Ph(e,!0),i=n.x,o=n.y;return[Kt(i,t)||0,Kt(o,r)||0]}function a2(e,t,r){var n=e.map(function(o){return mt(o,t)}),i=n.map(function(o){return Ko(o,r)});return{prev:n,next:i,result:i.map(function(o){return Gt(o,t)})}}function yx(e,t){return e.length===t.length&&e.every(function(r,n){var i=t[n],o=ce(r),s=ce(i);return o&&s?yx(r,i):!o&&!s?r===i:!1})}function ns(e,t,r,n,i){var o=e._store,s=o[t];if(!(t in o))if(i!=null)o[t]=i,s=i;else return o[t]=r,r;return s===r||n(s)===n(r)?s:(o[t]=r,r)}function ar(e){return e>=0?1:-1}function H(e){return Math.abs(e)}function bh(e,t){return ty(e).map(function(r){return t(r)})}function bx(e){return fi(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var l2=fs("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,i=t.angle,o=t.originalDatas,s=e.props,a=s.pinchable,l=s.ables;if(!a)return!1;var u="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),f=(a===!0?e.controlAbles:l.filter(function(m){return a.indexOf(m.name)>-1})).filter(function(m){return m.canPinch&&m[c]}),d=Ot(e,t,{});n&&(d.targets=n);var p=at(e,u,d);r.isPinch=p!==!1,r.ables=f;var h=r.isPinch;return h?(f.forEach(function(m){if(o[m.name]=o[m.name]||{},!!m[c]){var g=T(T({},t),{datas:o[m.name],parentRotate:i,isPinch:!0});m[c](e,g)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},h):!1},pinch:function(e,t){var r=t.datas,n=t.scale,i=t.distance,o=t.originalDatas,s=t.inputEvent,a=t.targets,l=t.angle;if(r.isPinch){var u=i*(1-1/n),c=Ot(e,t,{});a&&(c.targets=a);var f="onPinch".concat(a?"Group":"");at(e,f,c);var d=r.ables,p="drag".concat(a?"Group":"","Control");return d.forEach(function(h){h[p]&&h[p](e,T(T({},t),{datas:o[h.name],inputEvent:s,resolveMatrix:!0,pinchScale:n,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.targets,s=t.originalDatas;if(r.isPinch){var a="onPinch".concat(o?"Group":"","End"),l=xr(e,t,{isDrag:n});o&&(l.targets=o),at(e,a,l);var u=r.ables,c="drag".concat(o?"Group":"","ControlEnd");return u.forEach(function(f){f[c]&&f[c](e,T(T({},t),{isDrag:n,datas:s[f.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,T(T({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,T(T({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,T(T({},t),{targets:e.props.targets}))}}),fb=Jh("scalable"),u2={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:zb("scalable"),dragControlCondition:fb,viewClassName:Xh("scalable"),dragControlStart:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,o=t.parentDirection,s=cx(o,n,i,r),a=e.state,l=a.width,u=a.height,c=a.targetTransform,f=a.target,d=a.pos1,p=a.pos2,h=a.pos4;if(!s||!f)return!1;n||po(e,t),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=s,r.startOffsetWidth=l,r.startOffsetHeight=u,r.startValue=[1,1];var m=!s[0]&&!s[1]||s[0]||!s[1];Sc(e,t,"scale"),r.isWidth=m;function g(x){r.ratio=x&&isFinite(x)?x:0}r.startPositions=Br(e.state);function v(x){var C=Xb(r.startPositions,x);r.fixedDirection=C.fixedDirection,r.fixedPosition=C.fixedPosition,r.fixedOffset=C.fixedOffset}r.setFixedDirection=v,g(Jr(d,p)/Jr(p,h)),v([-s[0],-s[1]]);var b=function(x){r.minScaleSize=x},w=function(x){r.maxScaleSize=x};b([-1/0,-1/0]),w([1/0,1/0]);var y=Ot(e,t,T(T({direction:s,set:function(x){r.startValue=x},setRatio:g,setFixedDirection:v,setMinScaleSize:b,setMaxScaleSize:w},xc(e,t)),{dragStart:sr.dragStart(e,new ss().dragStart([0,0],t))})),S=at(e,"onScaleStart",y);return r.startFixedDirection=r.fixedDirection,S!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:s}),r.isScale?y:!1},dragControl:function(e,t){yc(e,t,"scale");var r=t.datas,n=t.parentKeepRatio,i=t.parentFlag,o=t.isPinch,s=t.dragClient,a=t.isRequest,l=t.useSnap,u=t.resolveMatrix,c=r.prevDist,f=r.direction,d=r.startOffsetWidth,p=r.startOffsetHeight,h=r.isScale,m=r.startValue,g=r.isWidth,v=r.ratio;if(!h)return!1;var b=e.props,w=b.throttleScale,y=b.parentMoveable,S=f;!f[0]&&!f[1]&&(S=[1,1]);var x=v&&(n??b.keepRatio)||!1,C=e.state,k=[m[0],m[1]];function _(){var J=vx(S,x,r,t),ct=J.distWidth,Bt=J.distHeight,bt=d?(d+ct)/d:1,St=p?(p+Bt)/p:1;m[0]||(k[0]=ct/d),m[1]||(k[1]=Bt/p);var Et=(S[0]||x?bt:1)*k[0],jt=(S[1]||x?St:1)*k[1];return Et===0&&(Et=ar(c[0])*tc),jt===0&&(jt=ar(c[1])*tc),[Et,jt]}var E=_();if(!o&&e.props.groupable){var A=C.snapRenderInfo||{},O=A.direction;ce(O)&&(O[0]||O[1])&&(C.snapRenderInfo={direction:f,request:t.isRequest})}at(e,"onBeforeScale",Ot(e,t,{scale:E,setFixedDirection:function(J){return r.setFixedDirection(J),E=_(),E},startFixedDirection:r.startFixedDirection,setScale:function(J){E=J}},!0));var M=[E[0]/k[0],E[1]/k[1]],P=s,R=[0,0],B=ar(M[0]*M[1]),F=!s&&!i&&o;if(F||u?P=Hh(e,r.targetAllTransform,[0,0],[0,0],r):s||(P=r.fixedPosition),o||(R=$A(e,M,f,!l&&a,r)),x){S[0]&&S[1]&&R[0]&&R[1]&&(Math.abs(R[0]*d)>Math.abs(R[1]*p)?R[1]=0:R[0]=0);var I=!R[0]&&!R[1];if(I&&(g?M[0]=Ct(M[0]*k[0],w)/k[0]:M[1]=Ct(M[1]*k[1],w)/k[1]),S[0]&&!S[1]||R[0]&&!R[1]||I&&g){M[0]+=R[0];var j=d*M[0]*k[0]/v;M[1]=ar(B*M[0])*H(j/p/k[1])}else if(!S[0]&&S[1]||!R[0]&&R[1]||I&&!g){M[1]+=R[1];var V=p*M[1]*k[1]*v;M[0]=ar(B*M[1])*H(V/d/k[0])}}else M[0]+=R[0],M[1]+=R[1],R[0]||(M[0]=Ct(M[0]*k[0],w)/k[0]),R[1]||(M[1]=Ct(M[1]*k[1],w)/k[1]);M[0]===0&&(M[0]=ar(c[0])*tc),M[1]===0&&(M[1]=ar(c[1])*tc),E=GA(M,[k[0],k[1]]);var L=[d,p],Y=[d*E[0],p*E[1]];Y=Ap(Y,r.minScaleSize,r.maxScaleSize,x?v:!1),E=bh(2,function(J){return L[J]?Y[J]/L[J]:Y[J]}),M=bh(2,function(J){return E[J]/k[J]});var rt=bh(2,function(J){return c[J]?M[J]/c[J]:M[J]}),K="scale(".concat(M.join(", "),")"),tt="scale(".concat(E.join(", "),")"),X=bc(r,tt,K),it=!m[0]||!m[1],ut=$D(e,it?tt:K,r.fixedDirection,P,r.fixedOffset,r,it),xt=F?ut:mt(ut,r.prevInverseDist||[0,0]);if(r.prevDist=M,r.prevInverseDist=ut,E[0]===c[0]&&E[1]===c[1]&&xt.every(function(J){return!J})&&!y&&!F)return!1;var Tt=Ot(e,t,T({offsetWidth:d,offsetHeight:p,direction:f,scale:E,dist:M,delta:rt,isPinch:!!o},Rb(e,X,xt,o,t)));return at(e,"onScale",Tt),Tt},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var n=xr(e,t,{});return at(e,"onScaleEnd",n),n},dragGroupControlCondition:fb,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,t);if(!n)return!1;var i=Qr(e,"resizable",t);r.moveableScale=e.scale;var o=Vn(e,this,"dragControlStart",t,function(u,c){return fc(e,u,r,c)}),s=function(u){n.setFixedDirection(u),o.forEach(function(c,f){c.setFixedDirection(u),fc(e,c.moveable,r,i[f])})};r.setFixedDirection=s;var a=T(T({},n),{targets:e.props.targets,events:o,setFixedDirection:s}),l=at(e,"onScaleGroupStart",a);return r.isScale=l!==!1,r.isScale?a:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){Ec(e,"onBeforeScale",function(c){at(e,"onBeforeScaleGroup",Ot(e,t,T(T({},c),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var i=n.dist,o=r.moveableScale;e.scale=[i[0]*o[0],i[1]*o[1]];var s=e.props.keepRatio,a=r.fixedPosition,l=Vn(e,this,"dragControl",t,function(c,f){var d=D(He(Xo(e.rotation/180*Math.PI,3),[f.datas.originalX*i[0],f.datas.originalY*i[1],1],3),2),p=d[0],h=d[1];return T(T({},f),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Gt(a,[p,h])})}),u=T({targets:e.props.targets,events:l},n);return at(e,"onScaleGroup",u),u}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(e,t);var i=Vn(e,this,"dragControlEnd",t),o=xr(e,t,{targets:e.props.targets,events:i});return at(e,"onScaleGroupEnd",o),r}},request:function(){var e={},t=0,r=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:e,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return t+=i.deltaWidth,r+=i.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}}};function yi(e,t){return e.map(function(r,n){return ua(r,t[n],1,2)})}function db(e,t,r){var n=ve(e,t),i=ve(e,r),o=i-n;return o>=0?o:o+2*Math.PI}function c2(e,t){var r=db(e[0],e[1],e[2]),n=db(t[0],t[1],t[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}var f2={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Xh("warpable"),render:function(e,t){var r=e.props,n=r.resizable,i=r.scalable,o=r.warpable,s=r.zoom;if(n||i||!o)return[];var a=e.state,l=a.pos1,u=a.pos2,c=a.pos3,f=a.pos4,d=yi(l,u),p=yi(u,l),h=yi(l,c),m=yi(c,l),g=yi(c,f),v=yi(f,c),b=yi(u,f),w=yi(f,u);return U([t.createElement("div",{className:gt("line"),key:"middeLine1",style:wa(d,g,s)}),t.createElement("div",{className:gt("line"),key:"middeLine2",style:wa(p,v,s)}),t.createElement("div",{className:gt("line"),key:"middeLine3",style:wa(h,b,s)}),t.createElement("div",{className:gt("line"),key:"middeLine4",style:wa(m,w,s)})],D(Fb(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return Me(r,gt("direction"))&&Me(r,gt("warpable"))},dragControlStart:function(e,t){var r=t.datas,n=t.inputEvent,i=e.props.target,o=n.target,s=fx(o,r);if(!s||!i)return!1;var a=e.state,l=a.transformOrigin,u=a.is3d,c=a.targetTransform,f=a.targetMatrix,d=a.width,p=a.height,h=a.left,m=a.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=u?f:Pr(f,3,4),r.targetInverseMatrix=Kp(Rr(r.warpTargetMatrix,4),3,4),r.direction=s,r.left=h,r.top=m,r.poses=[[0,0],[d,0],[0,p],[d,p]].map(function(b){return mt(b,l)}),r.nextPoses=r.poses.map(function(b){var w=D(b,2),y=w[0],S=w[1];return He(r.warpTargetMatrix,[y,S,0,1],4)}),r.startValue=ie(4),r.prevMatrix=ie(4),r.absolutePoses=Br(a),r.posIndexes=Ab(s),po(e,t),Sc(e,t,"matrix3d"),a.snapRenderInfo={request:t.isRequest,direction:s};var g=Ot(e,t,T({set:function(b){r.startValue=b}},xc(e,t))),v=at(e,"onWarpStart",g);return v!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,n=t.isRequest,i=t.distX,o=t.distY,s=r.targetInverseMatrix,a=r.prevMatrix,l=r.isWarp,u=r.startValue,c=r.poses,f=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(yc(e,t,"matrix3d"),hs(e,"warpable")){var p=f.map(function(_){return d[_]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var h=_c(e,n,{horizontal:p.map(function(_){return _[1]+o}),vertical:p.map(function(_){return _[0]+i})}),m=h.horizontal,g=h.vertical;o-=m.offset,i-=g.offset}var v=wn({datas:r,distX:i,distY:o},!0),b=r.nextPoses.slice();if(f.forEach(function(_){b[_]=Gt(b[_],v)}),!AD.every(function(_){return c2(_.map(function(E){return c[E]}),_.map(function(E){return b[E]}))}))return!1;var w=Yu(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!w.length)return!1;var y=Xt(s,w,4),S=Ob(r,y,!0),x=Xt(Rr(a,4),S,4);r.prevMatrix=S;var C=Xt(u,S,4),k=bc(r,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(S.join(", "),")"));return Fh(t,k),at(e,"onWarp",Ot(e,t,T({delta:x,matrix:C,dist:S,multiply:Xt,transform:k},lr({transform:k},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,n=t.isDrag;return r.isWarp?(r.isWarp=!1,at(e,"onWarpEnd",xr(e,t,{})),n):!1}},d2=gt("area-pieces"),sc=gt("area-piece"),xx=gt("avoid"),p2=gt("view-dragging");function xh(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,i=r.height;Ip(t,xx),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function pb(e){return e.createElement("div",{key:"area_pieces",className:d2},e.createElement("div",{className:sc}),e.createElement("div",{className:sc}),e.createElement("div",{className:sc}),e.createElement("div",{className:sc}))}var Sx={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,n=r.target,i=r.dragArea,o=r.groupable,s=r.passDragArea,a=e.getState(),l=a.width,u=a.height,c=a.renderPoses,f=s?gt("area","pass"):gt("area");if(o)return[t.createElement("div",{key:"area",ref:Kr(e,"areaElement"),className:f}),pb(t)];if(!n||!i)return[];var d=Yu([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),p=d.length?kc(d,!0):"none";return[t.createElement("div",{key:"area",ref:Kr(e,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:p}}),pb(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,i=t.clientY,o=t.inputEvent;if(!o)return!1;r.isDragArea=!1;var s=e.areaElement,a=e.state,l=a.moveableClientRect,u=a.renderPoses,c=a.rootMatrix,f=a.is3d,d=l.left,p=l.top,h=Ir(u),m=h.left,g=h.top,v=h.width,b=h.height,w=f?4:3,y=D(us(c,[n-d,i-p],w),2),S=y[0],x=y[1];S-=m,x-=g;var C=[{left:m,top:g,width:v,height:x-10},{left:m,top:g,width:S-10,height:b},{left:m,top:g+x+10,width:v,height:b-x-10},{left:m+S+10,top:g,width:v-S-10,height:b}],k=[].slice.call(s.nextElementSibling.children);C.forEach(function(_,E){k[E].style.cssText="left: ".concat(_.left,"px;top: ").concat(_.top,"px; width: ").concat(_.width,"px; height: ").concat(_.height,"px;")}),Np(s,xx),a.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,xh(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||xh(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){xh(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&Dp(function(){t.disableNativeEvent=!1})}},h2=fs("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,n=r.zoom,i=r.svgOrigin,o=r.groupable,s=e.getState(),a=s.beforeOrigin,l=s.rotation,u=s.svg,c=s.allMatrix,f=s.is3d,d=s.left,p=s.top,h=s.offsetWidth,m=s.offsetHeight,g;if(!o&&u&&i){var v=D(Qh(i,h,m),2),b=v[0],w=v[1],y=f?4:3,S=he(c,[b,w],y);g=mc(l,n,mt(S,[d,p]))}else g=mc(l,n,a);return[t.createElement("div",{className:gt("control","origin"),style:g,key:"beforeOrigin"})]}});function m2(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var g2={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,n=r.scrollContainer,i=n===void 0?e.getContainer():n,o=r.scrollOptions,s=new By,a=Sn(i,!0);t.datas.dragScroll=s,e.state.dragScroll=s;var l=t.isControl?"controlGesto":"targetGesto",u=t.targets;s.on("scroll",function(c){var f=c.container,d=c.direction,p=Ot(e,t,{scrollContainer:f,direction:d}),h=u?"onScrollGroup":"onScroll";u&&(p.targets=u),at(e,h,p)}).on("move",function(c){var f=c.offsetX,d=c.offsetY,p=c.inputEvent;e[l].scrollBy(f,d,p.inputEvent,!1)}).on("scrollDrag",function(c){var f=c.next;f(e[l].getCurrentEvent())}),s.dragStart(t,T({container:a},o))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var n=e.props,i=n.scrollContainer,o=i===void 0?e.getContainer():i,s=n.scrollThreshold,a=s===void 0?0:s,l=n.scrollThrottleTime,u=l===void 0?0:l,c=n.getScrollPosition,f=c===void 0?m2:c,d=n.scrollOptions;return r.drag(t,T({container:o,threshold:a,throttleTime:u,getScrollPosition:function(p){return f({scrollContainer:p.container,direction:p.direction})}},d)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,T(T({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,T(T({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,T(T({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,T(T({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,T(T({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,T(T({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,T(T({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},wx={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},v2=fs("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=bx(r.padding||{}),i=n.left,o=n.top,s=n.right,a=n.bottom,l=e.getState(),u=l.renderPoses,c=l.pos1,f=l.pos2,d=l.pos3,p=l.pos4,h=[c,f,d,p],m=[];return i>0&&m.push([0,2]),o>0&&m.push([0,1]),s>0&&m.push([1,3]),a>0&&m.push([2,3]),m.map(function(g,v){var b=D(g,2),w=b[0],y=b[1],S=h[w],x=h[y],C=u[w],k=u[y],_=Yu([0,0],[100,0],[0,100],[100,100],S,x,C,k);if(_.length)return t.createElement("div",{key:"padding".concat(v),className:gt("padding"),style:{transform:kc(_,!0)}})})}}),hb=["nw","ne","se","sw"];function ac(e,t){var r=e[0]+e[1],n=r>t?t/r:1;return e[0]*=n,e[1]=t-e[1]*n,e}var y2=[1,2,5,6],b2=[0,3,4,7],uo=[1,-1,-1,1],co=[1,1,-1,-1];function tm(e,t,r,n,i,o,s,a){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=r),a===void 0&&(a=n);var l=[],u=!1,c=e.filter(function(d){return!d.virtual}),f=c.map(function(d){var p=d.horizontal,h=d.vertical,m=d.pos;if(h&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,h===1?m[1]-o:a-m[1]);return l.push(Zr(g,n,t)),g}else{var g=Math.max(0,p===1?m[0]-i:s-m[0]);return l.push(Zr(g,r,t)),g}});return{radiusPoses:c,styles:l,raws:f}}function Cx(e){for(var t=[0,0],r=[0,0],n=e.length,i=0;i<n;++i){var o=e[i];o.sub&&(o.horizontal&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1,r[0]=i+1),o.vertical&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function _x(e,t,r,n,i,o,s){var a,l,u,c;o===void 0&&(o=[0,0]),s===void 0&&(s=!1);var f=e.indexOf("/"),d=(f>-1?e.slice(0,f):e).length,p=e.slice(0,d),h=e.slice(d+1),m=p.length,g=h.length,v=g>0,b=D(p,4),w=b[0],y=w===void 0?"0px":w,S=b[1],x=S===void 0?y:S,C=b[2],k=C===void 0?y:C,_=b[3],E=_===void 0?x:_,A=D(h,4),O=A[0],M=O===void 0?y:O,P=A[1],R=P===void 0?v?M:x:P,B=A[2],F=B===void 0?v?M:k:B,I=A[3],j=I===void 0?v?R:E:I,V=[y,x,k,E].map(function(X){return Kt(X,t)}),L=[M,R,F,j].map(function(X){return Kt(X,r)}),Y=V.slice(),rt=L.slice();a=D(ac([Y[0],Y[1]],t),2),Y[0]=a[0],Y[1]=a[1],l=D(ac([Y[3],Y[2]],t),2),Y[3]=l[0],Y[2]=l[1],u=D(ac([rt[0],rt[3]],r),2),rt[0]=u[0],rt[3]=u[1],c=D(ac([rt[1],rt[2]],r),2),rt[1]=c[0],rt[2]=c[1];var K=s?Y:Y.slice(0,Math.max(o[0],m)),tt=s?rt:rt.slice(0,Math.max(o[1],g));return U(U([],D(K.map(function(X,it){var ut=hb[it];return{virtual:it>=m,horizontal:uo[it],vertical:0,pos:[n+X,i+(co[it]===-1?r:0)],sub:!0,raw:V[it],direction:ut}})),!1),D(tt.map(function(X,it){var ut=hb[it];return{virtual:it>=g,horizontal:0,vertical:co[it],pos:[n+(uo[it]===-1?t:0),i+X],sub:!0,raw:L[it],direction:ut}})),!1)}function x2(e,t,r,n,i){i===void 0&&(i=t.length);var o=Cx(e.slice(n)),s=o.horizontalRange,a=o.verticalRange,l=r-n,u=0;if(l===0)u=i;else if(l>0&&l<s[1])u=s[1]-l;else if(l>=a[0])u=a[0]+a[1]-l;else return;e.splice(r,u),t.splice(r,u)}function S2(e,t,r,n,i,o,s,a,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=Cx(e.slice(r)),d=f.horizontalRange,p=f.verticalRange;if(n>-1)for(var h=uo[n]===1?o-u:a-o,m=d[1];m<=n;++m){var g=co[m]===1?c:l,v=0;if(n===m?v=o:m===0?v=u+h:uo[m]===-1&&(v=a-(t[r][0]-u)),e.splice(r+m,0,{horizontal:uo[m],vertical:0,pos:[v,g]}),t.splice(r+m,0,[v,g]),m===0)break}else if(i>-1){var b=co[i]===1?s-c:l-s;if(d[1]===0&&p[1]===0){var w=[u+b,c];e.push({horizontal:uo[0],vertical:0,pos:w}),t.push(w)}for(var y=p[0],m=p[1];m<=i;++m){var v=uo[m]===1?u:a,g=0;if(i===m?g=s:m===0?g=c+b:co[m]===1?g=t[r+y][1]:co[m]===-1&&(g=l-(t[r+y][1]-c)),e.push({horizontal:0,vertical:co[m],pos:[v,g]}),t.push([v,g]),m===0)break}}}function w2(e,t){t===void 0&&(t=e.map(function(i){return i.raw}));var r=e.map(function(i,o){return i.horizontal?t[o]:null}).filter(function(i){return i!=null}),n=e.map(function(i,o){return i.vertical?t[o]:null}).filter(function(i){return i!=null});return{horizontals:r,verticals:n}}var C2=[[0,-1,"n"],[1,0,"e"]],_2=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function em(e,t,r){var n=e.props.clipRelative,i=e.state,o=i.width,s=i.height,a=t,l=a.type,u=a.poses,c=l==="rect",f=l==="circle";if(l==="polygon")return r.map(function(x){return"".concat(Zr(x[0],o,n)," ").concat(Zr(x[1],s,n))});if(c||l==="inset"){var d=r[1][1],p=r[3][0],h=r[7][0],m=r[5][1];if(c)return[d,p,m,h].map(function(x){return"".concat(x,"px")});var g=[d,o-p,s-m,h].map(function(x,C){return Zr(x,C%2?o:s,n)});if(r.length>8){var v=D(mt(r[4],r[0]),2),b=v[0],w=v[1];g.push.apply(g,U(["round"],D(tm(u.slice(8).map(function(x,C){return T(T({},x),{pos:r[C]})}),n,b,w,h,d,p,m).styles),!1))}return g}else if(f||l==="ellipse"){var y=r[0],S=Zr(H(r[1][1]-y[1]),f?Math.sqrt((o*o+s*s)/2):s,n),g=f?[S]:[Zr(H(r[2][0]-y[0]),o,n),S];return g.push("at",Zr(y[0],o,n),Zr(y[1],s,n)),g}}function vc(e,t,r,n){var i=[n,(n+t)/2,t],o=[e,(e+r)/2,r];return _2.map(function(s){var a=D(s,3),l=a[0],u=a[1],c=a[2],f=i[l+1],d=o[u+1];return{vertical:H(u),horizontal:H(l),direction:c,pos:[f,d]}})}function kx(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(n){var i=n.pos;t[0]=Math.min(t[0],i[0]),t[1]=Math.max(t[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])}),[H(t[1]-t[0]),H(r[1]-r[0])]}function mb(e,t,r,n,i){var o,s,a,l,u,c,f,d,p;if(e){var h=i;if(!h){var m=mr(e),g=m("clipPath");h=g!=="none"?g:m("clip")}if(!((!h||h==="none"||h==="auto")&&(h=n,!h))){var v=Lu(h),b=v.prefix,w=b===void 0?h:b,y=v.value,S=y===void 0?"":y,x=w==="circle",C=" ";if(w==="polygon"){var k=yn(S||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var _=k.map(function(Zt){var be=D(Zt.split(" "),2),se=be[0],ee=be[1];return{vertical:1,horizontal:1,pos:[Kt(se,t),Kt(ee,r)]}}),E=vi(_.map(function(Zt){return Zt.pos}));return{type:w,clipText:h,poses:_,splitter:C,left:E.minX,right:E.maxX,top:E.minY,bottom:E.maxY}}else if(x||w==="ellipse"){var A="",O="",M=0,P=0,k=vn(S);if(x){var R="";o=D(k,4),s=o[0],R=s===void 0?"50%":s,a=o[2],A=a===void 0?"50%":a,l=o[3],O=l===void 0?"50%":l,M=Kt(R,Math.sqrt((t*t+r*r)/2)),P=M}else{var B="",F="";u=D(k,5),c=u[0],B=c===void 0?"50%":c,f=u[1],F=f===void 0?"50%":f,d=u[3],A=d===void 0?"50%":d,p=u[4],O=p===void 0?"50%":p,M=Kt(B,t),P=Kt(F,r)}var I=[Kt(A,t),Kt(O,r)],_=U([{vertical:1,horizontal:1,pos:I,direction:"nesw"}],D(C2.slice(0,x?1:2).map(function(se){return{vertical:H(se[1]),horizontal:se[0],direction:se[2],sub:!0,pos:[I[0]+se[0]*M,I[1]+se[1]*P]}})),!1);return{type:w,clipText:h,radiusX:M,radiusY:P,left:I[0]-M,top:I[1]-P,right:I[0]+M,bottom:I[1]+P,poses:_,splitter:C}}else if(w==="inset"){var k=vn(S||"0 0 0 0"),j=k.indexOf("round"),V=(j>-1?k.slice(0,j):k).length,L=k.slice(V+1),Y=D(k.slice(0,V),4),rt=Y[0],K=Y[1],tt=K===void 0?rt:K,X=Y[2],it=X===void 0?rt:X,ut=Y[3],xt=ut===void 0?tt:ut,Tt=D([rt,it].map(function(se){return Kt(se,r)}),2),J=Tt[0],ct=Tt[1],Bt=D([xt,tt].map(function(se){return Kt(se,t)}),2),bt=Bt[0],St=Bt[1],Et=t-St,jt=r-ct,Ut=_x(L,Et-bt,jt-J,bt,J),_=U(U([],D(vc(J,Et,jt,bt)),!1),D(Ut),!1);return{type:"inset",clipText:h,poses:_,top:J,left:bt,right:Et,bottom:jt,radius:L,splitter:C}}else if(w==="rect"){var k=yn(S||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));C=",";var Mt=D(k.map(function(gr){var vr=io(gr).value;return vr}),4),Dt=Mt[0],St=Mt[1],ct=Mt[2],bt=Mt[3],_=vc(Dt,St,ct,bt);return{type:"rect",clipText:h,poses:_,top:Dt,right:St,bottom:ct,left:bt,values:k,splitter:C}}}}}function k2(e,t,r,n,i){var o=e[t],s=o.direction,a=o.sub,l=e.map(function(){return[0,0]}),u=s?s.split(""):[];if(n&&t<8){var c=u.filter(function(M){return M==="w"||M==="e"}),f=u.filter(function(M){return M==="n"||M==="s"}),d=c[0],p=f[0];l[t]=r;var h=D(kx(e),2),m=h[0],g=h[1],v=m&&g?m/g:0;if(v&&i){var b=(t+4)%8,w=e[b].pos,y=[0,0];s.indexOf("w")>-1?y[0]=-1:s.indexOf("e")>-1&&(y[0]=1),s.indexOf("n")>-1?y[1]=-1:s.indexOf("s")>-1&&(y[1]=1);var S=gx([m,g],r,v,y,!0),x=m+S[0],C=g+S[1],k=w[1],_=w[1],E=w[0],A=w[0];y[0]===-1?E=A-x:y[0]===1?A=E+x:(E=E-x/2,A=A+x/2),y[1]===-1?k=_-C:(y[1]===1||(k=_-C/2),_=k+C);var O=vc(k,A,_,E);e.forEach(function(M,P){l[P][0]=O[P].pos[0]-M.pos[0],l[P][1]=O[P].pos[1]-M.pos[1]})}else e.forEach(function(M,P){var R=M.direction;R&&(R.indexOf(d)>-1&&(l[P][0]=r[0]),R.indexOf(p)>-1&&(l[P][1]=r[1]))}),d&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),p&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else s&&!a?u.forEach(function(M){var P=M==="n"||M==="s";e.forEach(function(R,B){var F=R.direction,I=R.horizontal,j=R.vertical;!F||F.indexOf(M)===-1||(l[B]=[P||!I?0:r[0],!P||!j?0:r[1]])})}):l[t]=r;return l}function E2(e,t){var r=D(Tb(e,t),2),n=r[0],i=r[1],o=t.datas,s=o.clipPath,a=o.clipIndex,l=s,u=l.type,c=l.poses,f=l.splitter,d=c.map(function(b){return b.pos});if(u==="polygon")d.splice(a,0,[n,i]);else if(u==="inset"){var p=y2.indexOf(a),h=b2.indexOf(a),m=c.length;if(S2(c,d,8,p,h,n,i,d[4][0],d[4][1],d[0][0],d[0][1]),m===c.length)return}else return;var g=em(e,s,d),v="".concat(u,"(").concat(g.join(f),")");at(e,"onClip",Ot(e,t,T({clipEventType:"added",clipType:u,poses:d,clipStyles:g,clipStyle:v,distX:0,distY:0},lr({clipPath:v},t))))}function M2(e,t){var r=t.datas,n=r.clipPath,i=r.clipIndex,o=n,s=o.type,a=o.poses,l=o.splitter,u=a.map(function(p){return p.pos}),c=u.length;if(s==="polygon")a.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(x2(a,u,i,8,c),c===a.length))return}else return;var f=em(e,n,u),d="".concat(s,"(").concat(f.join(l),")");at(e,"onClip",Ot(e,t,T({clipEventType:"removed",clipType:s,poses:u,clipStyles:f,clipStyle:d,distX:0,distY:0},lr({clipPath:d},t))))}var T2={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,n=r.customClipPath,i=r.defaultClipPath,o=r.clipArea,s=r.zoom,a=r.groupable,l=e.getState(),u=l.target,c=l.width,f=l.height,d=l.allMatrix,p=l.is3d,h=l.left,m=l.top,g=l.pos1,v=l.pos2,b=l.pos3,w=l.pos4,y=l.clipPathState,S=l.snapBoundInfos,x=l.rotation;if(!u||a)return[];var C=mb(u,c,f,i||"inset",y||n);if(!C)return[];var k=p?4:3,_=C.type,E=C.poses,A=E.map(function(St){var Et=he(d,St.pos,k);return[Et[0]-h,Et[1]-m]}),O=[],M=[],P=_==="rect",R=_==="inset",B=_==="polygon";if(P||R||B){var F=R?A.slice(0,8):A;M=F.map(function(St,Et){var jt=Et===0?F[F.length-1]:F[Et-1],Ut=ve(jt,St),Mt=sx(jt,St);return t.createElement("div",{key:"clipLine".concat(Et),className:gt("line","clip-line","snap-control"),"data-clip-index":Et,style:{width:"".concat(Mt,"px"),transform:"translate(".concat(jt[0],"px, ").concat(jt[1],"px) rotate(").concat(Ut,"rad) scaleY(").concat(s,")")}})})}if(O=A.map(function(St,Et){return t.createElement("div",{key:"clipControl".concat(Et),className:gt("control","clip-control","snap-control"),"data-clip-index":Et,style:{transform:"translate(".concat(St[0],"px, ").concat(St[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})}),R&&O.push.apply(O,U([],D(A.slice(8).map(function(St,Et){return t.createElement("div",{key:"clipRadiusControl".concat(Et),className:gt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Et,style:{transform:"translate(".concat(St[0],"px, ").concat(St[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})})),!1)),_==="circle"||_==="ellipse"){var I=C.left,j=C.top,V=C.radiusX,L=C.radiusY,Y=D(mt(he(d,[I,j],k),he(d,[0,0],k)),2),rt=Y[0],K=Y[1],tt="none";if(!o){for(var X=Math.max(10,V/5,L/5),it=[],ut=0;ut<=X;++ut){var xt=Math.PI*2/X*ut;it.push([V+(V-s)*Math.cos(xt),L+(L-s)*Math.sin(xt)])}it.push([V,-2]),it.push([-2,-2]),it.push([-2,L*2+2]),it.push([V*2+2,L*2+2]),it.push([V*2+2,-2]),it.push([V,-2]),tt="polygon(".concat(it.map(function(St){return"".concat(St[0],"px ").concat(St[1],"px")}).join(", "),")")}O.push(t.createElement("div",{key:"clipEllipse",className:gt("clip-ellipse","snap-control"),style:{width:"".concat(V*2,"px"),height:"".concat(L*2,"px"),clipPath:tt,transform:"translate(".concat(-h+rt,"px, ").concat(-m+K,"px) ").concat(kc(d))}}))}if(o){var Tt=Ir(U([g,v,b,w],D(A),!1)),J=Tt.width,ct=Tt.height,Bt=Tt.left,bt=Tt.top;if(B||P||R){var it=R?A.slice(0,8):A;O.push(t.createElement("div",{key:"clipArea",className:gt("clip-area","snap-control"),style:{width:"".concat(J,"px"),height:"".concat(ct,"px"),transform:"translate(".concat(Bt,"px, ").concat(bt,"px)"),clipPath:"polygon(".concat(it.map(function(Et){return"".concat(Et[0]-Bt,"px ").concat(Et[1]-bt,"px")}).join(", "),")")}}))}}return S&&["vertical","horizontal"].forEach(function(St){var Et=S[St],jt=St==="horizontal";Et.isSnap&&M.push.apply(M,U([],D(Et.snap.posInfos.map(function(Ut,Mt){var Dt=Ut.pos,Zt=mt(he(d,jt?[0,Dt]:[Dt,0],k),[h,m]),be=mt(he(d,jt?[c,Dt]:[Dt,f],k),[h,m]);return Ma(t,"",Zt,be,s,"clip".concat(St,"snap").concat(Mt),"guideline")})),!1)),Et.isBound&&M.push.apply(M,U([],D(Et.bounds.map(function(Ut,Mt){var Dt=Ut.pos,Zt=mt(he(d,jt?[0,Dt]:[Dt,0],k),[h,m]),be=mt(he(d,jt?[c,Dt]:[Dt,f],k),[h,m]);return Ma(t,"",Zt,be,s,"clip".concat(St,"bounds").concat(Mt),"guideline","bounds","bold")})),!1))}),U(U([],D(O),!1),D(M),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,n=r.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,T(T({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,n=e.props,i=n.defaultClipPath,o=n.customClipPath,s=r.target,a=r.width,l=r.height,u=t.inputEvent?t.inputEvent.target:null,c=u&&u.getAttribute("class")||"",f=t.datas,d=mb(s,a,l,i||"inset",o);if(!d)return!1;var p=d.clipText,h=d.type,m=d.poses,g=at(e,"onClipStart",Ot(e,t,{clipType:h,clipStyle:p,poses:m.map(function(v){return v.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,r.clipPathState=p,po(e,t),!0)},dragControl:function(e,t){var r,n,i,o=t.datas,s=t.originalDatas,a=t.isDragTarget;if(!o.isClipStart)return!1;var l=o,u=l.isControl,c=l.isLine,f=l.isArea,d=l.clipIndex,p=l.clipPath;if(!p)return!1;var h=fo(e.props,"clippable"),m=h.keepRatio,g=0,v=0,b=s.draggable,w=wn(t);a&&b?(r=D(b.prevBeforeDist,2),g=r[0],v=r[1]):(n=D(w,2),g=n[0],v=n[1]);var y=[g,v],S=e.state,x=S.width,C=S.height,k=!f&&!u&&!c,_=p.type,E=p.poses,A=p.splitter,O=E.map(function(Rt){return Rt.pos});k&&(g=-g,v=-v);var M=!u||E[d].direction==="nesw",P=_==="inset"||_==="rect",R=E.map(function(){return[0,0]});if(u&&!M){var B=E[d],F=B.horizontal,I=B.vertical,j=[g*H(F),v*H(I)];R=k2(E,d,j,P,m)}else M&&(R=O.map(function(){return[g,v]}));var V=O.map(function(Rt,me){return Gt(Rt,R[me])}),L=U([],D(V),!1);S.snapBoundInfos=null;var Y=p.type==="circle",rt=p.type==="ellipse";if(Y||rt){var K=Ir(V),tt=H(K.bottom-K.top),X=H(rt?K.right-K.left:tt),it=V[0][1]+tt,ut=V[0][0]-X,xt=V[0][0]+X;Y&&(L.push([xt,K.bottom]),R.push([1,0])),L.push([K.left,it]),R.push([0,1]),L.push([ut,K.bottom]),R.push([1,0])}var Tt=tx((h.clipHorizontalGuidelines||[]).map(function(Rt){return Kt("".concat(Rt),C)}),(h.clipVerticalGuidelines||[]).map(function(Rt){return Kt("".concat(Rt),x)}),x,C),J=[],ct=[];if(Y||rt)J=[L[4][0],L[2][0]],ct=[L[1][1],L[3][1]];else if(P){var Bt=[L[0],L[2],L[4],L[6]],bt=[R[0],R[2],R[4],R[6]];J=Bt.filter(function(Rt,me){return bt[me][0]}).map(function(Rt){return Rt[0]}),ct=Bt.filter(function(Rt,me){return bt[me][1]}).map(function(Rt){return Rt[1]})}else J=L.filter(function(Rt,me){return R[me][0]}).map(function(Rt){return Rt[0]}),ct=L.filter(function(Rt,me){return R[me][1]}).map(function(Rt){return Rt[1]});var St=[0,0],Et=Qy(Tt,h.clipTargetBounds&&{left:0,top:0,right:x,bottom:C},J,ct,5,5),jt=Et.horizontal,Ut=Et.vertical,Mt=jt.offset,Dt=Ut.offset;if(jt.isBound&&(St[1]+=Mt),Ut.isBound&&(St[0]+=Dt),(rt||Y)&&R[0][0]===0&&R[0][1]===0){var K=Ir(V),Zt=K.bottom-K.top,be=rt?K.right-K.left:Zt,se=Ut.isBound?H(Dt):Ut.snapIndex===0?-Dt:Dt,ee=jt.isBound?H(Mt):jt.snapIndex===0?-Mt:Mt;be-=se,Zt-=ee,Y&&(Zt=qb(Ut,jt)>0?Zt:be,be=Zt);var ae=L[0];L[1][1]=ae[1]-Zt,L[2][0]=ae[0]+be,L[3][1]=ae[1]+Zt,L[4][0]=ae[0]-be}else if(P&&m&&u){var gr=D(kx(E),2),vr=gr[0],ki=gr[1],Pa=vr&&ki?vr/ki:0,Fc=E[d],vo=Fc.direction||"",vs=L[1][1],it=L[5][1],ut=L[7][0],xt=L[3][0];H(Mt)<=H(Dt)?Mt=ar(Mt)*H(Dt)/Pa:Dt=ar(Dt)*H(Mt)*Pa,vo.indexOf("w")>-1?ut-=Dt:vo.indexOf("e")>-1?xt-=Dt:(ut+=Dt/2,xt-=Dt/2),vo.indexOf("n")>-1?vs-=Mt:vo.indexOf("s")>-1?it-=Mt:(vs+=Mt/2,it-=Mt/2);var Hc=vc(vs,xt,it,ut);L.forEach(function(en,bs){var Gn;Gn=D(Hc[bs].pos,2),en[0]=Gn[0],en[1]=Gn[1]})}else L.forEach(function(Rt,me){var ys=R[me];ys[0]&&(Rt[0]-=Dt),ys[1]&&(Rt[1]-=Mt)});var z=em(e,p,V),ft="".concat(_,"(").concat(z.join(A),")");if(S.clipPathState=ft,Y||rt)J=[L[4][0],L[2][0]],ct=[L[1][1],L[3][1]];else if(P){var Bt=[L[0],L[2],L[4],L[6]];J=Bt.map(function(me){return me[0]}),ct=Bt.map(function(me){return me[1]})}else J=L.map(function(Rt){return Rt[0]}),ct=L.map(function(Rt){return Rt[1]});if(S.snapBoundInfos=Qy(Tt,h.clipTargetBounds&&{left:0,top:0,right:x,bottom:C},J,ct,1,1),b){var wt=S.is3d,Yt=S.allMatrix,Vt=wt?4:3,Oe=St;a&&(Oe=[y[0]+St[0]-w[0],y[1]+St[1]-w[1]]),b.deltaOffset=Xt(Yt,[Oe[0],Oe[1],0,0],Vt)}return at(e,"onClip",Ot(e,t,T({clipEventType:"changed",clipType:_,poses:V,clipStyle:ft,clipStyles:z,distX:g,distY:v},lr((i={},i[_==="rect"?"clip":"clipPath"]=ft,i),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,n=t.datas,i=t.isDouble,o=n.isLine,s=n.isClipStart,a=n.isControl;return s?(at(e,"onClipEnd",xr(e,t,{})),i&&(a?M2(e,t):o&&E2(e,t)),i||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},O2={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":Me(t.inputEvent.target,gt("origin"))},dragControlStart:function(e,t){var r=t.datas;po(e,t);var n=Ot(e,t,{dragStart:sr.dragStart(e,new ss().dragStart([0,0],t))}),i=at(e,"onDragOriginStart",n);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,i===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(e,t){var r=t.datas,n=t.isPinch,i=t.isRequest;if(!r.isDragOrigin)return!1;var o=D(wn(t),2),s=o[0],a=o[1],l=e.state,u=l.width,c=l.height,f=l.offsetMatrix,d=l.targetMatrix,p=l.is3d,h=e.props.originRelative,m=h===void 0?!0:h,g=p?4:3,v=[s,a];if(i){var b=t.distOrigin;(b[0]||b[1])&&(v=b)}var w=Gt(r.startOrigin,v),y=Gt(r.startTargetOrigin,v),S=mt(v,r.prevOrigin),x=Aa(f,d,w,g),C=e.getRect(),k=Ir(ho(x,u,c,g)),_=[C.left-k.left,C.top-k.top];r.prevOrigin=v;var E=[Zr(y[0],u,m),Zr(y[1],c,m)].join(" "),A=sr.drag(e,Da(t,e.state,_,!!n,!1)),O=Ot(e,t,T(T({width:u,height:c,origin:w,dist:v,delta:S,transformOrigin:E,drag:A},lr({transformOrigin:E,transform:A.transform},t)),{afterTransform:A.transform}));return at(e,"onDragOrigin",O),O},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(at(e,"onDragOriginEnd",xr(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),n=0,i=0,o=r.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(a){return"deltaOrigin"in a?(s[0]+=a.deltaOrigin[0],s[1]+=a.deltaOrigin[1]):"origin"in a?(s[0]=a.origin[0]-o[0],s[1]=a.origin[1]-o[1]):("x"in a?n=a.x-r.left:"deltaX"in a&&(n+=a.deltaX),"y"in a?i=a.y-r.top:"deltaY"in a&&(i+=a.deltaY)),{datas:t,distX:n,distY:i,distOrigin:s}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function D2(e,t,r,n){var i=e.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,o=e.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,s=-1;if(t===0&&(i===0?s=0:i===1&&(s=1)),t===2&&(i<=2?s=2:i<=3&&(s=3)),t===3&&(o===0?s=4:o<4&&(s=7)),t===1&&(o<=1?s=5:o<=2&&(s=6)),!(s===-1||!e[s].virtual)){var a=e[s];A2(e,s),s<4?a.pos[0]=r:a.pos[1]=n}}function A2(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function R2(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function gb(e,t,r,n,i){n===void 0&&(n=[0,0]);var o=[];return!e||e==="0px"?o=[]:o=vn(e),_x(o,t,r,0,0,n,i)}function vb(e,t,r,n,i){var o=e.state,s=o.width,a=o.height,l=tm(i,e.props.roundRelative,s,a),u=l.raws,c=l.styles,f=l.radiusPoses,d=w2(f,u),p=d.horizontals,h=d.verticals,m=c.join(" ");o.borderRadiusState=m;var g=Ot(e,t,T({horizontals:p,verticals:h,borderRadius:m,width:s,height:a,delta:n,dist:r},lr({borderRadius:m},t)));return at(e,"onRound",g),g}function yb(e){var t,r,n=e.getState().style,i=n.borderRadius||"";if(!i&&e.props.groupable){var o=e.moveables[0],s=e.getTargets()[0];s&&(o?.props.target===s?(i=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=i):(i=Kh(s).borderRadius,n.borderRadius=i))}return i}var P2={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?gt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),n=r.target,i=r.width,o=r.height,s=r.allMatrix,a=r.is3d,l=r.left,u=r.top,c=r.borderRadiusState,f=e.props,d=f.minRoundControls,p=d===void 0?[0,0]:d,h=f.maxRoundControls,m=h===void 0?[4,4]:h,g=f.zoom,v=f.roundPadding,b=v===void 0?0:v,w=f.isDisplayShadowRoundControls,y=f.groupable;if(!n)return null;var S=c||yb(e),x=a?4:3,C=gb(S,i,o,p,!0);if(!C)return null;var k=0,_=0,E=y?[0,0]:[l,u];return C.map(function(A,O){var M=A.horizontal,P=A.vertical,R=A.direction||"",B=U([],D(A.pos),!1);_+=Math.abs(M),k+=Math.abs(P),M&&R.indexOf("n")>-1&&(B[1]-=b),P&&R.indexOf("w")>-1&&(B[0]-=b),M&&R.indexOf("s")>-1&&(B[1]+=b),P&&R.indexOf("e")>-1&&(B[0]+=b);var F=mt(he(s,B,x),E),I=w&&w!=="horizontal",j=A.vertical?k<=m[1]&&(I||!A.virtual):_<=m[0]&&(w||!A.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(O),className:gt("control","border-radius",A.vertical?"vertical":"",A.virtual?"virtual":""),"data-radius-index":O,style:{display:j?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,n=t.datas,i=r.target,o=i.getAttribute("class")||"",s=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,l=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(a){var c=i.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!a)return!1;var f=Ot(e,t,{}),d=at(e,"onRoundStart",f);if(d===!1)return!1;n.lineIndex=u,n.controlIndex=l,n.isControl=s,n.isLine=a,po(e,t);var p=e.props,h=p.roundRelative,m=p.minRoundControls,g=m===void 0?[0,0]:m,v=e.state,b=v.width,w=v.height;n.isRound=!0,n.prevDist=[0,0];var y=yb(e),S=gb(y||"",b,w,g,!0)||[];return n.controlPoses=S,v.borderRadiusState=tm(S,h,b,w).styles.join(" "),f},dragControl:function(e,t){var r=t.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,o=D(wn(t),2),s=o[0],a=o[1],l=[s,a],u=mt(l,r.prevDist),c=e.props.maxRoundControls,f=c===void 0?[4,4]:c,d=e.state,p=d.width,h=d.height,m=n[i],g=m.vertical,v=m.horizontal,b=n.map(function(y){var S=y.horizontal,x=y.vertical,C=[S*v*l[0],x*g*l[1]];if(S){if(f[0]===1)return C;if(f[0]<4&&S!==v)return C}else{if(f[1]===0)return C[1]=x*v*l[0]/p*h,C;if(g){if(f[1]===1)return C;if(f[1]<4&&x!==g)return C}}return[0,0]});b[i]=l;var w=n.map(function(y,S){return T(T({},y),{pos:Gt(y.pos,b[S])})});return i<4?w.slice(0,i+1).forEach(function(y){y.virtual=!1}):w.slice(4,i+1).forEach(function(y){y.virtual=!1}),r.prevDist=[s,a],vb(e,t,l,u,w)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var n=t.datas,i=t.isDouble;if(!n.isRound)return!1;var o=n.isControl,s=n.controlIndex,a=n.isLine,l=n.lineIndex,u=n.controlPoses,c=u.filter(function(v){var b=v.virtual;return b}).length,f=e.props.roundClickable,d=f===void 0?!0:f;if(i&&d){if(o&&(d===!0||d==="control"))R2(u,s);else if(a&&(d===!0||d==="line")){var p=D(Tb(e,t),2),h=p[0],m=p[1];D2(u,l,h,m)}c!==u.filter(function(v){var b=v.virtual;return b}).length&&vb(e,t,[0,0],[0,0],u)}var g=xr(e,t,{});return at(e,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=Qr(e,"roundable",t),s=T({targets:e.props.targets,events:o.map(function(a,l){return T(T({},a),{target:i[l],moveable:n[l],currentTarget:n[l]})})},r);return at(e,"onRoundGroupStart",s),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var n=e.moveables,i=e.props.targets,o=Qr(e,"roundable",t),s=T({targets:e.props.targets,events:o.map(function(a,l){return T(T(T({},a),{target:i[l],moveable:n[l],currentTarget:n[l]}),lr({borderRadius:r.borderRadius},a))})},r);return at(e,"onRoundGroup",s),s},dragGroupControlEnd:function(e,t){var r=e.moveables,n=e.props.targets,i=Qr(e,"roundable",t);Ec(e,"onRound",function(a){var l=T({targets:e.props.targets,events:i.map(function(u,c){return T(T(T({},u),{target:n[c],moveable:r[c],currentTarget:r[c]}),lr({borderRadius:a.borderRadius},u))})},a);at(e,"onRoundGroup",l)});var o=this.dragControlEnd(e,t);if(!o)return!1;var s=T({targets:e.props.targets,events:i.map(function(a,l){var u;return T(T({},a),{target:n[l],moveable:r[l],currentTarget:r[l],lastEvent:(u=a.datas)===null||u===void 0?void 0:u.lastEvent})})},o);return at(e,"onRoundGroupEnd",s),s},unset:function(e){e.state.borderRadiusState=""}};function N2(e,t){var r=t?4:3,n=ie(r),i="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return e===i||e==="matrix(1,0,0,1,0,0)"}var Ex={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,i=r.targetMatrix,o=r.inlineTransform,s=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Jp(i,!0),")"),a=!o||o==="none"?s:o;t.datas.startTransforms=N2(a,n)?[]:vn(a)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return Ot(e,t,{setTransform:function(r){t.datas.startTransforms=ce(r)?r:vn(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return Ot(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),at(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),at(e,"onBeforeRender",Ot(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),at(e,"onBeforeRenderEnd",Ot(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=Qr(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(s,a){var l=i[a];return r.setTransform(l,s),r.resetStyle(s),r.fillDragStartParams(l,s)});at(e,"onBeforeRenderGroupStart",Ot(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:o}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=Qr(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(s,a){var l=i[a];return r.resetStyle(s),r.fillDragParams(l,s)});at(e,"onBeforeRenderGroup",Ot(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:o}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),at(e,"onBeforeRenderGroupEnd",Ot(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},Mx={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){at(e,"onRenderStart",Ot(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){at(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){at(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){at(e,"onRenderGroupStart",Ot(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=Qr(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(s,a){var l=i[a];return r.fillDragParams(l,s)});at(e,"onRenderGroup",Ot(e,t,T(T({isPinch:!!t.isPinch,targets:e.props.targets,transform:ec(t),transformObject:{}},lr(rc(t))),{events:o})))},dragGroupEnd:function(e,t){var r=this,n=Qr(e,"beforeRenderable",t),i=e.moveables,o=n.map(function(s,a){var l=i[a];return r.fillDragEndParams(l,s)});at(e,"onRenderGroupEnd",Ot(e,t,T({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:o,transformObject:{},transform:ec(t)},lr(rc(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return so(cc(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Ot(e,t,T({isPinch:!!t.isPinch,transformObject:r,transform:ec(t)},lr(rc(t))))},fillDragEndParams:function(e,t){var r={};return so(cc(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Ot(e,t,T({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:ec(t)},lr(rc(t))))}};function Ea(e,t,r,n,i,o,s){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=i==="Start",l=i==="End",u=i==="After",c=e.state.target,f=o.isRequest,d=n.indexOf("Control")>-1;if(!c||a&&d&&!f&&e.areaElement===o.inputEvent.target)return!1;var p=U([],D(t),!1);if(f){var h=o.requestAble;p.some(function(O){return O.name===h})||p.push.apply(p,U([],D(e.props.ables.filter(function(O){return O.name===h})),!1))}if(!p.length||p.every(function(O){return O.dragRelation}))return!1;var m=o.inputEvent,g;l&&m&&(g=document.elementFromPoint(o.clientX,o.clientY)||m.target);var v=!1,b=function(){var O;v=!0,(O=o.stop)===null||O===void 0||O.call(o)},w=a&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());w&&e.updateRect(i,!0,!1);var y=o.datas,S=d?"controlGesto":"targetGesto",x=e[S],C=function(O,M,P){if(!(M in O)||x!==e[S])return!1;var R=O.name,B=y[R]||(y[R]={});if(a&&(B.isEventStart=!P||!O[P]||O[P](e,o)),!B.isEventStart)return!1;var F=O[M](e,T(T({},o),{stop:b,datas:B,originalDatas:y,inputTarget:g}));return e._emitter.off(),a&&F===!1&&(B.isEventStart=!1),F};w&&p.forEach(function(O){O.unset&&O.unset(e)}),C(Ex,"drag".concat(n).concat(i));var k=0,_=0;r.forEach(function(O){if(v)return!1;var M="".concat(O).concat(n).concat(i),P="".concat(O).concat(n,"Condition");i===""&&!f&&mx(e.state,o);var R=p.filter(function(I){return I[M]});R=R.filter(function(I,j){return I.name&&R.indexOf(I)===j});var B=R.filter(function(I){return C(I,M,P)}),F=B.length;v&&++k,F&&++_,!v&&a&&R.length&&!F&&(k+=R.filter(function(I){var j=I.name,V=y[j];return V.isEventStart?I.dragRelation!=="strong":!1}).length?1:0)}),(!u||_)&&C(Mx,"drag".concat(n).concat(i));var E=x!==e[S]||k===r.length;if((l||v||E)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(O){O.state.gestos={}}),p.forEach(function(O){O.unset&&O.unset(e)})),a&&!E&&!f&&_&&e.props.preventDefault&&o?.preventDefault(),e.isUnmounted||E)return!1;if(!a&&_&&!s||l){var A=e.props.flushSync||nx;A(function(){e.updateRect(l?i:"",!0,!1),e.forceUpdate()})}return!a&&!l&&!u&&_&&!s&&Ea(e,t,r,n,i+"After",o),!0}function rm(e,t){return function(r,n){var i;n===void 0&&(n=r.inputEvent.target);var o=n,s=e.areaElement,a=e._dragTarget;return!a||!t&&(!((i=e.controlGesto)===null||i===void 0)&&i.isFlag())?!1:o===a||a.contains(o)||o===s||!e.isMoveableElement(o)&&!e.controlBox.contains(o)||Me(o,"moveable-area")||Me(o,"moveable-padding")||Me(o,"moveable-edgeDraggable")}}function Tx(e,t,r){var n=e.controlBox,i=[],o=e.props,s=o.dragArea,a=e.state.target,l=o.dragTarget;i.push(n),(!s||l)&&i.push(t),!s&&l&&a&&t!==a&&o.dragTargetSelf&&i.push(a);var u=rm(e);return Dx(e,i,"targetAbles",r,{dragStart:u,pinchStart:u})}function Ox(e,t){var r=e.controlBox,n=[];n.push(r);var i=rm(e,!0),o=function(s,a){if(a===void 0&&(a=s.inputEvent.target),a===r)return!0;var l=i(s,a);return!l};return Dx(e,n,"controlAbles",t,{dragStart:o,pinchStart:o})}function Dx(e,t,r,n,i){i===void 0&&(i={});var o=r==="targetAbles",s=e.props,a=s.pinchOutside,l=s.pinchThreshold,u=s.preventClickEventOnDrag,c=s.preventClickDefault,f=s.checkInput,d=s.dragFocusedInput,p=s.preventDefault,h=p===void 0?!0:p,m=s.preventRightClick,g=m===void 0?!0:m,v=s.preventWheelClick,b=v===void 0?!0:v,w=s.dragContainer,y=Sn(w,!0),S={preventDefault:h,preventRightClick:g,preventWheelClick:b,container:y||bn(e.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:o?u:!1,preventClickEventOnDragStart:o?c:!1,preventClickEventByCondition:o?null:function(k){return e.controlBox.contains(k.target)},checkInput:o?f:!1,dragFocusedInput:d},x=new Wy(t,S),C=n==="Control";return["drag","pinch"].forEach(function(k){["Start","","End"].forEach(function(_){x.on("".concat(k).concat(_),function(E){var A,O=E.eventType,M=k==="drag"&&E.isPinch;if(i[O]&&!i[O](E)){E.stop();return}if(!M){var P=k==="drag"?[k]:["drag",k],R=U([],D(e[r]),!1),B=Ea(e,R,P,n,_,E);B?(e.props.stopPropagation||_==="Start"&&C)&&((A=E?.inputEvent)===null||A===void 0||A.stopPropagation()):E.stop()}})})}),x}var I2=function(){function e(t,r,n){var i=this;this.target=t,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(o){var s=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(l){l[s](a,{inputEvent:o})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e}();function L2(e,t,r,n){var i;r===void 0&&(r=t);var o=Nb(e,t),s=o.matrixes,a=o.is3d,l=o.targetMatrix,u=o.transformOrigin,c=o.targetOrigin,f=o.offsetContainer,d=o.hasFixed,p=o.zoom,h=JD(f,r),m=h.matrixes,g=h.is3d,v=h.offsetContainer,b=h.zoom,w=n||g||a,y=w?4:3,S=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,x=l,C=ie(y),k=ie(y),_=ie(y),E=ie(y),A=s.length,O=m.map(function(j){return T(T({},j),{matrix:j.matrix?U([],D(j.matrix),!1):void 0})}).reverse();s.reverse(),!a&&w&&(x=Pr(x,3,4),Dh(s)),!g&&w&&Dh(O),O.forEach(function(j){k=Xt(k,j.matrix,y)});var M=r||$n(e),P=((i=O[0])===null||i===void 0?void 0:i.target)||Ta(M,M,!0).offsetParent,R=O.slice(1).reduce(function(j,V){return Xt(j,V.matrix,y)},ie(y));s.forEach(function(j,V){if(A-2===V&&(_=C.slice()),A-1===V&&(E=C.slice()),!j.matrix){var L=s[V+1],Y=t2(j,L,P,y,Xt(R,C,y));j.matrix=mi(Y,y)}C=Xt(C,j.matrix,y)});var B=!S&&a;x||(x=ie(B?4:3));var F=kc(S&&x.length===16?Pr(x,4,3):x,B),I=k;return k=Kp(k,y,y),{hasZoom:p!==1||b!==1,hasFixed:d,matrixes:s,rootMatrix:k,originalRootMatrix:I,beforeMatrix:_,offsetMatrix:E,allMatrix:C,targetMatrix:x,targetTransform:F,inlineTransform:e.style.transform,transformOrigin:u,targetOrigin:c,is3d:w,offsetContainer:f,offsetRootContainer:v}}function B2(e,t,r,n){r===void 0&&(r=t);var i=0,o=0,s=0,a={},l=ax(e);if(e&&(i=l.offsetWidth,o=l.offsetHeight),e){var u=L2(e,t,r,n),c=is(u.allMatrix,u.transformOrigin,i,o);a=T(T({},u),c);var f=is(u.allMatrix,[50,50],100,100);s=lx([f.pos1,f.pos2],f.direction)}var d=n?4:3;return T(T(T({hasZoom:!1,width:i,height:o,rotation:s},l),{originalRootMatrix:ie(d),rootMatrix:ie(d),beforeMatrix:ie(d),offsetMatrix:ie(d),allMatrix:ie(d),targetMatrix:ie(d),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function Nh(e,t,r,n,i,o){o===void 0&&(o=[]);var s=1,a=[0,0],l=ic(),u=ic(),c=ic(),f=ic(),d=[0,0],p={},h=B2(t,r,i,!0);if(t){var m=mr(t);o.forEach(function(O){p[O]=m(O)});var g=h.is3d?4:3,v=is(h.offsetMatrix,Gt(h.transformOrigin,Xp(h.targetMatrix,g)),h.width,h.height);s=v.direction,a=Gt(v.origin,[v.left-h.left,v.top-h.top]),f=ka(h.offsetRootContainer);var b=Ta(n,n,!0).offsetParent||h.offsetRootContainer;if(h.hasZoom){var w=is(Xt(h.originalRootMatrix,h.allMatrix),h.transformOrigin,h.width,h.height),y=is(h.originalRootMatrix,hc(mr(b)("transformOrigin")).map(function(O){return parseFloat(O)}),b.offsetWidth,b.offsetHeight);if(l=yh(w,f),c=yh(y,f,b,!0),e){var S=w.left,x=w.top;u=yh({left:S,top:x,bottom:x,right:x},f)}}else{l=ka(t),c=XD(b),e&&(u=ka(e));var C=c.left,k=c.top,_=c.clientLeft,E=c.clientTop,A=[l.left-C,l.top-k];d=mt(us(h.rootMatrix,A,4),[_+h.left,E+h.top])}}return T({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:f,beforeDirection:s,beforeOrigin:a,originalBeforeOrigin:a,target:t,style:p,offsetDelta:d},h)}function bb(e){var t=e.pos1,r=e.pos2,n=e.pos3,i=e.pos4;if(!t||!r||!n||!i)return null;var o=vi([t,r,n,i]),s=[o.minX,o.minY],a=mt(e.origin,s);return t=mt(t,s),r=mt(r,s),n=mt(n,s),i=mt(i,s),T(T({},e),{left:e.left,top:e.top,posDelta:s,pos1:t,pos2:r,pos3:n,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var cs=function(e){Oa(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=T({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Nh(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new gi,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}J1(r._observerId),r._observerId=Dp(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return t.prototype.render=function(){var r=this.props,n=this.getState(),i=r.parentPosition,o=r.className,s=r.target,a=r.zoom,l=r.cspNonce,u=r.translateZ,c=r.cssStyled,f=r.groupable,d=r.linePadding,p=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=D(i||[0,0],2),m=h[0],g=h[1],v=n.left,b=n.top,w=n.target,y=n.direction,S=n.hasFixed,x=n.offsetDelta,C=r.targets,k=this.isDragging(),_={};this.getEnabledAbles().forEach(function(R){_["data-able-".concat(R.name.toLowerCase())]=!0});var E=this._getAbleClassName(),A=C&&C.length&&(w||f)||s||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,M=[v-m,b-g];!f&&r.useAccuratePosition&&(M[0]+=x[0],M[1]+=x[1]);var P={position:S?"fixed":"absolute",display:A?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(M[0],"px, ").concat(M[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return d&&(P["--moveable-line-padding"]=d),p&&(P["--moveable-control-padding"]=p),or(c,T({cspNonce:l,ref:Kr(this,"controlBox"),className:"".concat(gt("control-box",y===-1?"reverse":"",k?"dragging":"")," ").concat(E," ").concat(o)},_,{onClick:this._onPreventClick,style:P}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,i=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),rs(this,!1),rs(this,!0);var o=this.events;for(var s in o){var a=o[s];a&&a.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var n=this.props.ables||[];return je(n,function(i){return i.name===r})},t.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,i=r.wrapperMoveable,o=r.container;return o||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(Lh)>-1},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=this.targetGesto,o=this.controlGesto;return i&&rm(this)({inputEvent:r},n)?i.isFlag()||i.triggerDragStart(r):o&&this.isMoveableElement(n)&&(o.isFlag()||o.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var n=this.state,i=n.target,o=n.pos1,s=n.pos2,a=n.pos3,l=n.pos4,u=n.targetClientRect;if(!i)return 0;var c;if(di(r)){var f=r.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=T({width:0,height:0},r);var d=c.left,p=c.top,h=c.width,m=c.height,g=oh([o,s,l,a],u),v=Fy(g,[[d,p],[d+h,p],[d+h,p+m],[d,p+m]]),b=ih(g);return!v||!b?0:Math.min(100,v/b*100)},t.prototype.isInside=function(r,n){var i=this.state,o=i.target,s=i.pos1,a=i.pos2,l=i.pos3,u=i.pos4,c=i.targetClientRect;return o?Xu([r,n],oh([s,a,u,l],c)):!1},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0);var o=this.props,s=!o.parentPosition&&!o.wrapperMoveable;s&&as(!0);var a=o.parentMoveable,l=this.state,u=l.target||o.target,c=this.getContainer(),f=a?a._rootContainer:this._rootContainer,d=Nh(this.controlBox,u,c,c,f||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&o.persistData){var p=bb(o.persistData);for(var h in p)d[h]=p[h]}s&&as(),this.updateState(d,a?!1:i)},t.prototype.isDragging=function(r){var n,i,o=this.targetGesto,s=this.controlGesto;if(o?.isFlag()){if(!r)return!0;var a=o.getEventData();return!!(!((n=a[r])===null||n===void 0)&&n.isEventStart)}if(s?.isFlag()){if(!r)return!0;var a=s.getEventData();return!!(!((i=a[r])===null||i===void 0)&&i.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,n=Br(this.state),i=D(n,4),o=i[0],s=i[1],a=i[2],l=i[3],u=Ir(n),c=r.width,f=r.height,d=u.width,p=u.height,h=u.left,m=u.top,g=[r.left,r.top],v=Gt(g,r.origin),b=Gt(g,r.beforeOrigin),w=r.transformOrigin;return{width:d,height:p,left:h,top:m,pos1:o,pos2:s,pos3:a,pos4:l,offsetWidth:c,offsetHeight:f,beforeOrigin:b,origin:v,transformOrigin:w,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;n?.isIdle()===!1&&Ah(this,!1),n?.stop()}if(!r||r==="control"){var n=this.controlGesto;n?.isIdle()===!1&&Ah(this,!0),n?.stop()}},t.prototype.getRotation=function(){var r=this.state,n=r.pos1,i=r.pos2,o=r.direction;return s2(n,i,o)},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this,s=o.props,a=s.parentMoveable||s.wrapperMoveable||o,l=a.props.ables,u=s.groupable,c=je(l,function(v){return v.name===r});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var f=c.request(o),d=i||n.isInstant,p=f.isControl?"controlAbles":"targetAbles",h="".concat(u?"Group":"").concat(f.isControl?"Control":""),m=U([],D(a[p]),!1),g={request:function(v){return Ea(o,m,["drag"],h,"",T(T({},f.request(v)),{requestAble:r,isRequest:!0}),d),g},requestEnd:function(){return Ea(o,m,["drag"],h,"End",T(T({},f.requestEnd()),{requestAble:r,isRequest:!0}),d),g}};return Ea(o,m,["drag"],h,"Start",T(T({},f.requestStart(n)),{requestAble:r,isRequest:!0}),d),d?g.request(n).requestEnd():g},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,i=n.padding,o=r.originalBeforeOrigin,s=r.transformOrigin,a=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,f=r.pos3,d=r.pos4,p=r.left,h=r.top,m=r.isPersisted,g=n.zoom||1;if(!i&&g<=1){r.renderPoses=[u,c,f,d],r.renderLines=[[u,c],[c,d],[d,f],[f,u]];return}var v=bx(i||{}),b=v.left,w=v.top,y=v.bottom,S=v.right,x=l?4:3,C=[];m?C=s:this.controlBox&&n.groupable?C=o:C=Gt(o,[p,h]);var k=va(x,mi(C.map(function(P){return-P}),x),a,mi(s,x)),_=Nr(k,u,[-b,-w],x),E=Nr(k,c,[S,-w],x),A=Nr(k,f,[-b,y],x),O=Nr(k,d,[S,y],x);if(r.renderPoses=[_,E,A,O],r.renderLines=[[_,E],[E,O],[O,A],[A,_]],g){var M=g/2;r.renderLines=[[Nr(k,u,[-b-M,-w],x),Nr(k,c,[S+M,-w],x)],[Nr(k,c,[S,-w-M],x),Nr(k,d,[S,y+M],x)],[Nr(k,d,[S+M,y],x),Nr(k,f,[-b-M,y],x)],[Nr(k,f,[-b,y+M],x),Nr(k,u,[-b,-w-M],x)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,i=r.container,o=r.parentMoveable,s=this.state,a=s.target,l=s.container;if(!(!a&&!n)){this.updateAbles();var u=!Rh(a,n),c=u||!Rh(l,i);if(c){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:n,container:i}),!o&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,n){var i=this.props;if(this._emitter.trigger(r,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(r,n,!0);var o=i[r];return o&&o(n)},t.prototype.useCSS=function(r,n){var i=this.props.customStyledMap,o=r+n;return i[o]||(i[o]=fh(r,n)),i[o]},t.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=n.persistData,s=n.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&o){var a=bb(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},t.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var i=this.props,o=i.triggerAblesSimultaneously,s=this.getEnabledAbles(r),a="drag".concat(n,"Start"),l="pinch".concat(n,"Start"),u="drag".concat(n,"ControlStart"),c=oc(s,[a,l],o),f=oc(s,[u],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=f},t.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var o in r)i[o]=r[o]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},t.prototype.renderAbles=function(){var r=this,n=this.props,i=n.triggerAblesSimultaneously,o={createElement:or};return this.renderState={},n2(hx(oc(this.getEnabledAbles(),["render"],i).map(function(s){var a=s.render;return a(r,o)||[]})).filter(function(s){return s}),function(s){var a=s.key;return a}).map(function(s){return s[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,s,a=(s=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return U(U([],D(n),!1),D(a),!1)},U([],D(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,i=this._dragTarget,o=!r&&this.targetGesto||this._isTargetChanged(!0);o&&(rs(this,!1),this.updateState({gestos:{}})),n||rs(this,!0),i&&r&&!this.targetGesto&&(this.targetGesto=Tx(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=Ox(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=Sn(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,n=r,i=n.zoom,o=n.hideDefaultLines,s=n.hideChildMoveableDefaultLines,a=n.parentMoveable;if(o||a&&s)return[];var l=this.getState(),u={createElement:or};return l.renderLines.map(function(c,f){return Ma(u,"",c[0],c[1],i,"render-line-".concat(f))})},t.prototype._isTargetChanged=function(r){var n=this.props,i=n.dragTarget||n.target,o=this._prevOriginalDragTarget,s=this._prevDragArea,a=n.dragArea,l=!a&&o!==i,u=(r||a)&&s!==a;return l||u||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,o=this.events,s=Xr(o);if(this._isTargetChanged())for(var a in o){var l=o[a];l&&l.destroy(),o[a]=null}if(i){var u=this.enabledAbles;s.forEach(function(c){var f=oc(u,[c]),d=f.length>0,p=o[c];if(!d){p&&(p.destroy(),o[c]=null);return}p||(p=new I2(i,r,c),o[c]=p),p.setAbles(f)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Sn(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Sn(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(U(U([],D(this._getAbleViewClassNames()),!1),[this.isDragging()?p2:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,i=px(r.filter(Boolean),function(u){return u}).map(function(u){var c=D(u,1),f=c[0];return f}),o=this._viewClassNames,s=pi(o,i),a=s.removed,l=s.added;a.forEach(function(u){Ip(n,o[u])}),l.forEach(function(u){Np(n,i[u])}),this._viewClassNames=i},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var i=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,a=o?.isFlag()?o.getEventData():{},l=s?.isFlag()?s.getEventData():{};return i.map(function(u){var c,f,d,p=u.name,h=((c=u.className)===null||c===void 0?void 0:c.call(u,n))||"";return(!((f=a[p])===null||f===void 0)&&f.isEventStart||!((d=l[p])===null||d===void 0)&&d.isEventStart)&&(h+=" ".concat(gt("".concat(p).concat(r,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var n,i=this.props,o=i.target,s=bn(this.getControlBoxElement());if(!s.ResizeObserver||!o||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===o&&this._reiszeObserver)){var a=new s.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},t.prototype._updateMutationObserver=function(r){var n=this,i,o=this.props,s=o.target,a=bn(this.getControlBoxElement());if(!a.MutationObserver||!s||!o.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===s&&this._mutationObserver)){var l=new a.MutationObserver(function(u){var c,f;try{for(var d=bD(u),p=d.next();!p.done;p=d.next()){var h=p.value;h.type==="attributes"&&h.attributeName==="style"&&n.checkUpdateRect()}}catch(m){c={error:m}}finally{try{p&&!p.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}});l.observe(s,{attributes:!0}),this._mutationObserver=l}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:nx,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t}(Hp),nm={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,n=e.props,i=n.targets||[],o=e.getState(),s=o.left,a=o.top,l=o.isPersisted,u=n.zoom||1,c=e.renderGroupRects,f=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];l?i=f.map(function(){return null}):f=[];var d=ns(e,"parentPosition",[s,a],function(h){return h.join(",")}),p=ns(e,"requestStyles",e.getRequestChildStyles(),function(h){return h.join(",")});return e.moveables=e.moveables.slice(0,i.length),U(U([],D(i.map(function(h,m){return t.createElement(cs,{key:"moveable"+m,ref:kp(e,"moveables",m),target:h,origin:!1,requestStyles:p,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[s,a],persistData:f[m],zoom:u})})),!1),D(hx(c.map(function(h,m){var g=h.pos1,v=h.pos2,b=h.pos3,w=h.pos4,y=[g,v,b,w];return[[0,1],[1,3],[3,2],[2,0]].map(function(S,x){var C=D(S,2),k=C[0],_=C[1];return Ma(t,"",mt(y[k],d),mt(y[_],d),u,"group-rect-".concat(m,"-").concat(x))})}))),!1)}},z2=fs("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,i=t.inputTarget,o=e.isMoveableElement(i),s=!o&&e.controlBox.contains(i);if(!(!n||!i||t.isDrag||e.isMoveableElement(i)||s)){var a=r.contains(i);at(e,"onClick",Ot(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:e.props.target,containsTarget:a}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(!(!r||!n||t.isDrag||e.isMoveableElement(n)||t.datas.inputTarget===n)){var i=e.props.targets,o=i.indexOf(n),s=o>-1,a=!1;o===-1&&(o=Ar(i,function(l){return l.contains(n)}),a=o>-1),at(e,"onClickGroup",Ot(e,t,{isDouble:t.isDouble,targets:i,inputTarget:n,targetIndex:o,isTarget:s,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function Qo(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),T(T({},e),{datas:t})}var F2=fs("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?Bb(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&Me(i,gt("direction"))&&Me(i,gt("edge"))&&Me(i,gt("edgeDraggable"))},dragStart:function(e,t){return sr.dragStart(e,Qo(t))},drag:function(e,t){return sr.drag(e,Qo(t))},dragEnd:function(e,t){return sr.dragEnd(e,Qo(t))},dragGroupCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&Me(i,gt("direction"))&&Me(i,gt("line"))},dragGroupStart:function(e,t){return sr.dragGroupStart(e,Qo(t))},dragGroup:function(e,t){return sr.dragGroup(e,Qo(t))},dragGroupEnd:function(e,t){return sr.dragGroupEnd(e,Qo(t))},unset:function(e){return sr.unset(e)}}),Ax={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},im=[Ex,wx,jA,l2,sr,F2,Mh,u2,f2,EA,g2,v2,h2,O2,T2,P2,nm,Ax,z2,Sx,Mx],Rx=im.reduce(function(e,t){return(t.events||[]).forEach(function(r){Hu(e,r)}),e},[]),Px=im.reduce(function(e,t){return(t.props||[]).forEach(function(r){Hu(e,r)}),e},[]);function xb(e,t){var r=D(e,3),n=r[0],i=r[1],o=r[2];return(n*t[0]+i*t[1]+o)/Math.sqrt(n*n+i*i)}function lc(e,t){var r=D(e,2),n=r[0],i=r[1];return-n*t[0]-i*t[1]}function Sb(e,t){return Math.max.apply(Math,U([],D(e.map(function(r){var n=D(r,4),i=n[0],o=n[1],s=n[2],a=n[3];return Math.max(i[t],o[t],s[t],a[t])})),!1))}function wb(e,t){return Math.min.apply(Math,U([],D(e.map(function(r){var n=D(r,4),i=n[0],o=n[1],s=n[2],a=n[3];return Math.min(i[t],o[t],s[t],a[t])})),!1))}function H2(e,t){var r,n,i,o=[0,0],s=[0,0],a=[0,0],l=[0,0],u=0,c=0;if(!e.length)return{pos1:o,pos2:s,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:t};var f=Ct(t,ur);if(f%90){var d=f/180*Math.PI,p=Math.tan(d),h=-1/p,m=[Ch,Gy],g=[[0,0],[0,0]],v=[Ch,Gy],b=[[0,0],[0,0]];e.forEach(function(rt){rt.forEach(function(K){var tt=xb([-p,1,0],K),X=xb([-h,1,0],K);m[0]>tt&&(g[0]=K,m[0]=tt),m[1]<tt&&(g[1]=K,m[1]=tt),v[0]>X&&(b[0]=K,v[0]=X),v[1]<X&&(b[1]=K,v[1]=X)})});var w=D(g,2),y=w[0],S=w[1],x=D(b,2),C=x[0],k=x[1],_=[-p,1,lc([-p,1],y)],E=[-p,1,lc([-p,1],S)],A=[-h,1,lc([-h,1],C)],O=[-h,1,lc([-h,1],k)];r=D([[_,A],[_,O],[E,A],[E,O]].map(function(rt){var K=D(rt,2),tt=K[0],X=K[1];return Zu(tt,X)[0]}),4),o=r[0],s=r[1],a=r[2],l=r[3],u=v[1]-v[0],c=m[1]-m[0]}else{var M=wb(e,0),P=wb(e,1),R=Sb(e,0),B=Sb(e,1);if(o=[M,P],s=[R,P],a=[M,B],l=[R,B],u=R-M,c=B-P,f%180){var F=[a,o,l,s];n=D(F,4),o=n[0],s=n[1],a=n[2],l=n[3],u=B-P,c=R-M}}if(f%360>180){var F=[l,a,s,o];i=D(F,4),o=i[0],s=i[1],a=i[2],l=i[3]}var I=vi([o,s,a,l]),j=I.minX,V=I.minY,L=I.maxX,Y=I.maxY;return{pos1:o,pos2:s,pos3:a,pos4:l,width:u,height:c,minX:j,minY:V,maxX:L,maxY:Y,rotation:t}}function Nx(e,t){var r=t.map(function(n){if(ce(n)){var i=Nx(e,n),o=i.length;return o>1?i:o===1?i[0]:null}else{var s=je(e,function(a){var l=a.manager;return l.props.target===n});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return r.length===1&&ce(r[0])?r[0]:r}var $2=function(e){Oa(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new th,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){var o;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;as(!0),this.moveables.forEach(function(ut){ut.updateRect(r,!1,!1)});var a=this.props,l=this.moveables,u=s.target||a.target,c=l.map(function(ut){return{finded:!1,manager:ut}}),f=this.props.targetGroups||[],d=Nx(c,f),p=a.useDefaultGroupRotate;d.push.apply(d,U([],D(c.filter(function(ut){var xt=ut.finded;return!xt}).map(function(ut){var xt=ut.manager;return xt})),!1));var h=[],m=!n||r!==""&&a.updateGroup,g=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var v=(o=a.persistData)===null||o===void 0?void 0:o.rotation;v!=null&&(g=v)}function b(ut,xt,Tt){var J=ut.map(function(Ut){if(ce(Ut)){var Mt=b(Ut,xt),Dt=[Mt.pos1,Mt.pos2,Mt.pos3,Mt.pos4];return h.push(Mt),{poses:Dt,rotation:Mt.rotation}}else return{poses:Br(Ut.state),rotation:Ut.getRotation()}}),ct=J.map(function(Ut){var Mt=Ut.rotation;return Mt}),Bt=0,bt=ct[0],St=ct.every(function(Ut){return Math.abs(bt-Ut)<.1});m?Bt=!p&&St?bt:g:Bt=!p&&!Tt&&St?bt:xt;var Et=J.map(function(Ut){var Mt=Ut.poses;return Mt}),jt=H2(Et,Bt);return jt}var w=b(d,this.rotation,!0);m&&(this.rotation=w.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=h;var y=this.transformOrigin,S=this.rotation,x=this.scale,C=w.width,k=w.height,_=w.minX,E=w.minY,A=a2([[0,0],[C,0],[0,k],[C,k]],Qh(y,C,k),this.rotation/180*Math.PI),O=vi(A.result),M=O.minX,P=O.minY,R=" rotate(".concat(S,"deg)")+" scale(".concat(ar(x[0]),", ").concat(ar(x[1]),")"),B="translate(".concat(-M,"px, ").concat(-P,"px)").concat(R);this.controlBox.style.transform="translate3d(".concat(_,"px, ").concat(E,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(y,";")+"width:".concat(C,"px;height:").concat(k,"px;")+"transform: ".concat(B),s.width=C,s.height=k;var F=this.getContainer(),I=Nh(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||F,[]),j=[I.left,I.top],V=D(Br(I),4),L=V[0],Y=V[1],rt=V[2],K=V[3],tt=vi([L,Y,rt,K]),X=[tt.minX,tt.minY],it=ar(x[0]*x[1]);I.pos1=mt(L,X),I.pos2=mt(Y,X),I.pos3=mt(rt,X),I.pos4=mt(K,X),I.left=_-I.left+X[0],I.top=E-I.top+X[1],I.origin=mt(Gt(j,I.origin),X),I.beforeOrigin=mt(Gt(j,I.beforeOrigin),X),I.originalBeforeOrigin=Gt(j,I.originalBeforeOrigin),I.transformOrigin=mt(Gt(j,I.transformOrigin),X),u.style.transform="translate(".concat(-M-X[0],"px, ").concat(-P-X[1],"px)")+R,as(),this.updateState(T(T({},I),{posDelta:X,direction:it,beforeDirection:it}),i)},t.prototype.getRect=function(){return T(T({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,n,i){if(i||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var o,s,a=(s=(o=i.requestChildStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return U(U([],D(n),!1),D(a),!1)},[]);return r},t.prototype.getMoveables=function(){return U([],D(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,U(U([],D(this.props.ables),!1),[nm],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Sn(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,n=this.props,i=this._prevDragTarget,o=n.dragTarget||this.areaElement,s=n.targets,a=this.differ.update(s),l=a.added,u=a.changed,c=a.removed,f=l.length||c.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(rs(this,!1),rs(this,!0),this.updateState({gestos:{}})),i!==o&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=Tx(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Ox(this,"GroupControl")));var d=!Rh(r.container,n.container);d&&(r.container=n.container),(d||f||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!yx(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},t.prototype._updateObserver=function(){},t.defaultProps=T(T({},cs.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(cs),V2=function(e){Oa(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,n,i=this.props,o=i.cspNonce,s=i.cssStyled,a=i.persistData,l=i.targets||[],u=l.length,c=this.isUnmounted||!u,f=(n=a?.children)!==null&&n!==void 0?n:[];return c&&!u&&f.length?l=f.map(function(){return null}):c||(f=[]),or(s,{cspNonce:o,ref:Kr(this,"controlBox"),className:gt("control-box")},l.map(function(d,p){var h,m,g=(m=(h=i.individualGroupableProps)===null||h===void 0?void 0:h.call(i,d,p))!==null&&m!==void 0?m:{};return or(cs,T({key:"moveable"+p,ref:kp(r,"moveables",p)},i,g,{target:d,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[p]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0),as(!0),this.moveables.forEach(function(o){o.updateRect(r,n,i)}),as()},t.prototype.getRect=function(){return T(T({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,n,i){n===void 0&&(n={});var o=this.moveables.map(function(l){return l.request(r,T(T({},n),{isInstant:!1}),!1)}),s=i||n.isInstant,a={request:function(l){return o.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return o.forEach(function(l){return l.requestEnd()}),this}};return s?a.request(n).requestEnd():a},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=n,o=je(this.moveables,function(s){var a=s.getTargets()[0],l=s.getControlBoxElement(),u=s.getDragElement();return!a||!u?!1:u===i||u.contains(i)||u!==a&&a===i||a.contains(i)||l===i||l.contains(i)});return o&&o.dragStart(r,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return U([],D(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t}(cs);function Ix(e,t){var r=[];return e.forEach(function(n){if(n){if(Ge(n)){t[n]&&r.push.apply(r,U([],D(t[n]),!1));return}ce(n)?r.push.apply(r,U([],D(Ix(n,t)),!1)):r.push(n)}}),r}function Lx(e,t){var r=[];return e.forEach(function(n){if(n){if(Ge(n)){t[n]&&r.push.apply(r,U([],D(t[n]),!1));return}ce(n)?r.push(Lx(n,t)):r.push(n)}}),r}function Bx(e,t){return e.length!==t.length||e.some(function(r,n){var i=t[n];return!r&&!i?!1:r!=i?ce(r)&&ce(i)?Bx(r,i):!0:!1})}var W2=function(e){Oa(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new th,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(o){var s=o.css;s&&s.forEach(function(a){r[a]=!0})});var i=Xr(r).join(`
`);this.defaultStyled=fh("div",q1(Lh,DD+i))},t.getTotalAbles=function(){return U([wx,nm,Ax,Sx],D(this.defaultAbles),!1)},t.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,o=i.ables,s=i.props,a=vD(i,["ables","props"]),l=D(this._updateRefs(!0),2),u=l[0],c=l[1],f=Ix(u,c),d=f.length>1,p=n.getTotalAbles(),h=U(U([],D(p),!1),D(o||[]),!1),m=T(T(T({},a),s||{}),{ables:h,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=f;var g=null,v=this.moveable,b=a.persistData;if(b?.children&&(d=!0),a.individualGroupable)return or(V2,T({key:"individual-group",ref:Kr(this,"moveable")},m,{target:null,targets:f}));if(d){var w=Lx(u,c);if(v&&!v.props.groupable&&!v.props.individualGroupable){var y=v.props.target;y&&f.indexOf(y)>-1&&(g=T({},v.state))}return or($2,T({key:"group",ref:Kr(this,"moveable")},m,(r=a.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:f,targetGroups:w,firstRenderState:g}))}else{var S=f[0];if(v&&(v.props.groupable||v.props.individualGroupable)){var x=v.moveables||[],C=je(x,function(k){return k.props.target===S});C&&(g=T({},C.state))}return or(cs,T({key:"single",ref:Kr(this,"moveable")},m,{target:S,firstRenderState:g}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(i){n=i})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var n=this.refTargets,i=Zh(this.props.target||this.props.targets),o=typeof document<"u",s=Bx(n,i),a=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(Ge(c)){var f=a[c];f?l[c]=a[c]:o&&(s=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else ce(c)&&c.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=l,[i,l,!r&&s]},t.prototype._checkChangeTargets=function(){var r,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),s=o.added,a=o.removed,l=s.length||a.length;l&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=D(this._updateRefs(),3),c=u[0],f=u[1],d=u[2];this.refTargets=c,this.selectorMap=f,d&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,yD([U1(zh)],t.prototype,"moveable",void 0),t}(Hp),zx=function(e){Oa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=im,t}(W2);var om=function(e,t){return om=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},om(e,t)};function sm(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");om(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ra=function(){return Ra=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ra.apply(this,arguments)};function j2(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}var G2=function(e){sm(t,e);function t(n){var i=e.call(this,n)||this;return i.state={},i.state=i.props,i}var r=t.prototype;return r.render=function(){return or(zx,Ra({ref:Kr(this,"moveable")},this.state))},t}(pa),am=Px,lm=zh,um=Rx,q2=function(e){sm(t,e);function t(n,i){i===void 0&&(i={});var o=e.call(this)||this;o.containerProvider=null,o.selfElement=null,o._warp=!1;var s=Ra({},i),a={};um.forEach(function(c){a[Bu("on ".concat(c))]=function(f){return o.trigger(c,f)}});var l;i.warpSelf?(delete i.warpSelf,o._warp=!0,l=n):(l=Hn(n).createElement("div"),n.appendChild(l)),o.containerProvider=Vp(or(G2,Ra({ref:Kr(o,"innerMoveable")},s,a)),l),o.selfElement=l;var u=s.target;return ce(u)&&u.length>1&&o.updateRect(),o}var r=t.prototype;return r.setState=function(n,i){this.innerMoveable.setState(n,i)},r.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},r.dragStart=function(n,i){i===void 0&&(i=n.target);var o=this.innerMoveable;o.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n,i)},r.destroy=function(){var n,i=this.selfElement;Vp(null,i,this.containerProvider),this._warp||(n=i?.parentElement)===null||n===void 0||n.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},t=j2([Ep(lm,function(n,i){n[i]||(n[i]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=this.getMoveable();if(!(!a||!a[i]))return a[i].apply(a,o)})}),Ep(am,function(n,i){Object.defineProperty(n,i,{get:function(){return this.getMoveable().props[i]},set:function(o){var s;this.setState((s={},s[i]=o,s))},enumerable:!0,configurable:!0})})],t),t}(gi),Fx=function(e){sm(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(q2);function U2(e){let t;return{c(){t=ot("div")},m(r,n){q(r,t,n),e[2](t)},p:vt,i:vt,o:vt,d(r){r&&G(t),e[2](null)}}}function Y2(e,t,r){let n=Gc(),i={},o,s;Wa(()=>{let u=t;i={},am.forEach(c=>{c in u&&(i[c]=u[c])}),s&&Ti().then(()=>{s.setState({...i})})}),Qe(()=>{s=new Fx(o,{...i,warpSelf:!0}),um.forEach(u=>{let c=Bu(`on ${u}`);s.on(u,f=>{t[c]&&t[c](f),n(u,f)})})}),Yn(()=>{s&&s.destroy()});function a(){return s}function l(u){xe[u?"unshift":"push"](()=>{o=u,r(0,o)})}return e.$$set=u=>{r(6,t=Fr(Fr({},t),qn(u)))},t=qn(t),[o,a,l]}var cm=class extends Pt{constructor(t){super(),Ft(this,t,Y2,U2,Nt,{getInstance:1})}get getInstance(){return this.$$.ctx[1]}},Mc=cm;var Hx=(()=>{let e=Mc.prototype;return e?(lm.forEach(t=>{e[t]=function(...r){let n=this.getInstance(),i=n[t](...r);return i===n?this:i}}),Mc):Mc})();function $x(e){let t,r;return t=new Hx({props:{target:e[2],resizable:!0,keepRatio:!0,throttleResize:1,renderDirections:["se"]}}),t.$on("resize",e[9]),t.$on("resizeEnd",e[10]),{c(){zt(t.$$.fragment)},m(n,i){It(t,n,i),r=!0},p(n,i){let o={};i&4&&(o.target=n[2]),t.$set(o)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){Z(t.$$.fragment,n),r=!1},d(n){Lt(t,n)}}}function K2(e){let t,r,n,i,o,s;return t=new Ru({}),n=new Pu({props:{handleOpen:e[3]}}),o=new Nu({props:{handleRemove:e[4]}}),{c(){zt(t.$$.fragment),r=_t(),zt(n.$$.fragment),i=_t(),zt(o.$$.fragment)},m(a,l){It(t,a,l),q(a,r,l),It(n,a,l),q(a,i,l),It(o,a,l),s=!0},p:vt,i(a){s||(W(t.$$.fragment,a),W(n.$$.fragment,a),W(o.$$.fragment,a),s=!0)},o(a){Z(t.$$.fragment,a),Z(n.$$.fragment,a),Z(o.$$.fragment,a),s=!1},d(a){a&&(G(r),G(i)),Lt(t,a),Lt(n,a),Lt(o,a)}}}function X2(e){let t,r,n,i,o,s,a,l,u,c,f,d,p,h,m=e[1]&&$x(e);return p=new Au({props:{$$slots:{default:[K2]},$$scope:{ctx:e}}}),{c(){t=ot("div"),r=ot("div"),n=ot("img"),f=_t(),m&&m.c(),d=_t(),zt(p.$$.fragment),Wc(n.src,i=e[0].attrs.src)||N(n,"src",i),N(n,"alt",o=e[0].attrs.alt),N(n,"title",s=e[0].attrs?.title??null),N(n,"width",a=parseInt(e[0].attrs.width)),N(n,"height",l=parseInt(e[0].attrs.height)),N(n,"loading",u=e[0].attrs.loading),N(r,"class",c="scribble-block-content "+(e[1]?"ProseMirror-selectednode":"")),Ei(r,"max-width","auto"),Ei(r,"max-height","auto"),Ei(r,"min-width","auto"),Ei(r,"min-height","auto"),N(t,"class","scribble-block")},m(g,v){q(g,t,v),nt(t,r),nt(r,n),e[8](r),nt(t,f),m&&m.m(t,null),nt(t,d),It(p,t,null),h=!0},p(g,v){(!h||v&1&&!Wc(n.src,i=g[0].attrs.src))&&N(n,"src",i),(!h||v&1&&o!==(o=g[0].attrs.alt))&&N(n,"alt",o),(!h||v&1&&s!==(s=g[0].attrs?.title??null))&&N(n,"title",s),(!h||v&1&&a!==(a=parseInt(g[0].attrs.width)))&&N(n,"width",a),(!h||v&1&&l!==(l=parseInt(g[0].attrs.height)))&&N(n,"height",l),(!h||v&1&&u!==(u=g[0].attrs.loading))&&N(n,"loading",u),(!h||v&2&&c!==(c="scribble-block-content "+(g[1]?"ProseMirror-selectednode":"")))&&N(r,"class",c),g[1]?m?(m.p(g,v),v&2&&W(m,1)):(m=$x(g),m.c(),W(m,1),m.m(t,d)):m&&(re(),Z(m,1,1,()=>{m=null}),ne());let b={};v&2048&&(b.$$scope={dirty:v,ctx:g}),p.$set(b)},i(g){h||(W(m),W(p.$$.fragment,g),h=!0)},o(g){Z(m),Z(p.$$.fragment,g),h=!1},d(g){g&&G(t),e[8](null),m&&m.d(),Lt(p)}}}function J2(e){let t,r;return t=new sa({props:{$$slots:{default:[X2]},$$scope:{ctx:e}}}),{c(){zt(t.$$.fragment)},m(n,i){It(t,n,i),r=!0},p(n,[i]){let o={};i&2055&&(o.$$scope={dirty:i,ctx:n}),t.$set(o)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){Z(t.$$.fragment,n),r=!1},d(n){Lt(t,n)}}}function Z2(e){e.target.querySelector("img").setAttribute("width",e.width),e.target.querySelector("img").setAttribute("height",e.height),e.target.style.transform=e.drag.transform}function Q2(e,t,r){let{editor:n}=t,{node:i}=t,{selected:o=!1}=t,{updateAttributes:s}=t,a,l=()=>{gn("media",{update:!0,statePath:n.storage?.statePathExtension.statePath??null,identifier:i.attrs.identifier,data:i.attrs})},u=()=>{n.commands.deleteSelection()};Qe(()=>{window.addEventListener("updatedBlock",h=>{h.detail.statePath===n.storage?.statePathExtension.statePath&&s(h.detail.values)})});function c(h){s({width:h.target.querySelector("img").getAttribute("width"),height:h.target.querySelector("img").getAttribute("height")}),n.commands.focus()}function f(h){xe[h?"unshift":"push"](()=>{a=h,r(2,a)})}let d=({detail:h})=>Z2(h),p=({detail:h})=>c(h);return e.$$set=h=>{"editor"in h&&r(6,n=h.editor),"node"in h&&r(0,i=h.node),"selected"in h&&r(1,o=h.selected),"updateAttributes"in h&&r(7,s=h.updateAttributes)},[i,o,a,l,u,c,n,s,f,d,p]}var fm=class extends Pt{constructor(t){super(),Ft(this,t,Q2,J2,Nt,{editor:6,node:0,selected:1,updateAttributes:7})}},Vx=fm;var Wx=W1.extend({selectable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null},loading:{default:null},sizes:{default:null},srcset:{default:null}}},addCommands(){return{setMedia:e=>({commands:t})=>{let r=e?.url||e?.src,n=["jpg","jpeg","svg","png","webp"],o=/.*\.([a-zA-Z]*)\??/.exec(r);o!==null&&n.includes(o[1])?t.setImage({src:r,alt:e?.alt,title:e?.title,width:e?.width,height:e?.height,lazy:e?.lazy,coordinates:e?.coordinates}):t.setDocument(e)},setDocument:e=>({chain:t})=>[null,void 0].includes(e.coordinates?.pos)?t().focus().extendMarkRange("link").setLink({href:e.src}).insertContent(e?.link_text).run():t().focus().extendMarkRange("link").setLink({href:e.src}).insertContentAt({from:e.coordinates.pos,to:e.coordinates.pos},{type:this.name,attrs:e}).run(),setImage:e=>({chain:t})=>[null,void 0].includes(e.coordinates?.pos)?t().focus().insertContent({type:this.name,attrs:e}).createParagraphNear().run():t().focus().insertContentAt({from:e.coordinates.pos,to:e.coordinates.pos},{type:this.name,attrs:e}).run()}},addNodeView(){return oa(Vx)}});var jx=yt.create({name:"mergeTag",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}}}},parseHTML(){return[{tag:`span[data-type='${this.name}']`}]},renderHTML({node:e,HTMLAttributes:t}){return["span",lt({"data-type":this.name},t),`{{ ${e.attrs.id} }}`]},renderText({node:e}){return`{{ ${e.attrs.id} }}`},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let r=!1,{selection:n}=t,{empty:i,anchor:o}=n;return i?(t.doc.nodesBetween(o-1,o,(s,a)=>{if(s.type.name===this.name)return r=!0,e.insertText("{{",a,a+s.nodeSize),!1}),r):!1})}},addCommands(){return{insertMergeTag:e=>({chain:t,state:r})=>{let n=t();if(![null,void 0].includes(e.coordinates?.pos))return n.insertContentAt({from:e.coordinates.pos,to:e.coordinates.pos},[{type:this.name,attrs:{id:e.tag}},{type:"text",text:" "}]),n}}}});function tR(e){var t;let{char:r,allowSpaces:n,allowedPrefixes:i,startOfLine:o,$position:s}=e,a=A0(r),l=new RegExp(`\\s${a}$`),u=o?"^":"",c=n?new RegExp(`${u}${a}.*?(?=\\s${a}|$)`,"gm"):new RegExp(`${u}(?:^)?${a}[^\\s${a}]*`,"gm"),f=((t=s.nodeBefore)===null||t===void 0?void 0:t.isText)&&s.nodeBefore.text;if(!f)return null;let d=s.pos-f.length,p=Array.from(f.matchAll(c)).pop();if(!p||p.input===void 0||p.index===void 0)return null;let h=p.input.slice(Math.max(0,p.index-1),p.index),m=new RegExp(`^[${i?.join("")}\0]?$`).test(h);if(i!==null&&!m)return null;let g=d+p.index,v=g+p[0].length;return n&&l.test(f.slice(v-1,v+1))&&(p[0]+=" ",v+=1),g<s.pos&&v>=s.pos?{range:{from:g,to:v},query:p[0].slice(r.length),text:p[0]}:null}var eR=new Wt("suggestion");function Tc({pluginKey:e=eR,editor:t,char:r="@",allowSpaces:n=!1,allowedPrefixes:i=[" "],startOfLine:o=!1,decorationTag:s="span",decorationClass:a="suggestion",command:l=()=>null,items:u=()=>[],render:c=()=>({}),allow:f=()=>!0,findSuggestionMatch:d=tR}){let p,h=c?.(),m=new Ht({key:e,view(){return{update:async(g,v)=>{var b,w,y,S,x,C,k;let _=(b=this.key)===null||b===void 0?void 0:b.getState(v),E=(w=this.key)===null||w===void 0?void 0:w.getState(g.state),A=_.active&&E.active&&_.range.from!==E.range.from,O=!_.active&&E.active,M=_.active&&!E.active,P=!O&&!M&&_.query!==E.query,R=O||A,B=P&&!A,F=M||A;if(!R&&!B&&!F)return;let I=F&&!R?_:E,j=g.dom.querySelector(`[data-decoration-id="${I.decorationId}"]`);p={editor:t,range:I.range,query:I.query,text:I.text,items:[],command:V=>{l({editor:t,range:I.range,props:V})},decorationNode:j,clientRect:j?()=>{var V;let{decorationId:L}=(V=this.key)===null||V===void 0?void 0:V.getState(t.state),Y=g.dom.querySelector(`[data-decoration-id="${L}"]`);return Y?.getBoundingClientRect()||null}:null},R&&((y=h?.onBeforeStart)===null||y===void 0||y.call(h,p)),B&&((S=h?.onBeforeUpdate)===null||S===void 0||S.call(h,p)),(B||R)&&(p.items=await u({editor:t,query:I.query})),F&&((x=h?.onExit)===null||x===void 0||x.call(h,p)),B&&((C=h?.onUpdate)===null||C===void 0||C.call(h,p)),R&&((k=h?.onStart)===null||k===void 0||k.call(h,p))},destroy:()=>{var g;p&&((g=h?.onExit)===null||g===void 0||g.call(h,p))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(g,v,b,w){let{isEditable:y}=t,{composing:S}=t.view,{selection:x}=g,{empty:C,from:k}=x,_={...v};if(_.composing=S,y&&(C||t.view.composing)){(k<v.range.from||k>v.range.to)&&!S&&!v.composing&&(_.active=!1);let E=d({char:r,allowSpaces:n,allowedPrefixes:i,startOfLine:o,$position:x.$from}),A=`id_${Math.floor(Math.random()*4294967295)}`;E&&f({editor:t,state:w,range:E.range})?(_.active=!0,_.decorationId=v.decorationId?v.decorationId:A,_.range=E.range,_.query=E.query,_.text=E.text):_.active=!1}else _.active=!1;return _.active||(_.decorationId=null,_.range={from:0,to:0},_.query=null,_.text=null),_}},props:{handleKeyDown(g,v){var b;let{active:w,range:y}=m.getState(g.state);return w&&((b=h?.onKeyDown)===null||b===void 0?void 0:b.call(h,{view:g,event:v,range:y}))||!1},decorations(g){let{active:v,range:b,decorationId:w}=m.getState(g);return v?de.create(g.doc,[Le.inline(b.from,b.to,{nodeName:s,class:a,"data-decoration-id":w})]):null}}});return m}function Gx(e,t,r){let n=e.slice();return n[14]=t[r],n[16]=r,n}function qx(e){let t,r=Se(e[0]),n=[];for(let i=0;i<r.length;i+=1)n[i]=Ux(Gx(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=Qt()},m(i,o){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(i,o);q(i,t,o)},p(i,o){if(o&11){r=Se(i[0]);let s;for(s=0;s<r.length;s+=1){let a=Gx(i,r,s);n[s]?n[s].p(a,o):(n[s]=Ux(a),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&G(t),Sr(n,i)}}}function Ux(e){let t,r,n=e[14]+"",i,o,s,a,l;function u(){return e[8](e[16])}return{c(){t=ot("button"),r=ot("span"),i=yr(n),o=_t(),N(r,"class","text"),N(t,"class",s=e[16]===e[1]?"active-option":"")},m(c,f){q(c,t,f),nt(t,r),nt(r,i),nt(t,o),a||(l=De(t,"click",u),a=!0)},p(c,f){e=c,f&1&&n!==(n=e[14]+"")&&Hr(i,n),f&2&&s!==(s=e[16]===e[1]?"active-option":"")&&N(t,"class",s)},d(c){c&&G(t),a=!1,l()}}}function Yx(e){let t;return{c(){t=ot("div"),t.textContent="No merge tags set",N(t,"class","no-blocks")},m(r,n){q(r,t,n)},d(r){r&&G(t)}}}function rR(e){let t,r,n,i=e[0].length&&qx(e),o=!e[0].length&&Yx(e);return{c(){t=ot("div"),r=ot("div"),i&&i.c(),n=_t(),o&&o.c(),N(r,"class","group"),N(t,"class","scribble-merge-tags")},m(s,a){q(s,t,a),nt(t,r),i&&i.m(r,null),nt(r,n),o&&o.m(r,null),e[9](t)},p(s,[a]){s[0].length?i?i.p(s,a):(i=qx(s),i.c(),i.m(r,n)):i&&(i.d(1),i=null),s[0].length?o&&(o.d(1),o=null):o||(o=Yx(s),o.c(),o.m(r,null))},i:vt,o:vt,d(s){s&&G(t),i&&i.d(),o&&o.d(),e[9](null)}}}function nR(e,t,r){let{items:n}=t,{editor:i}=t,{range:o}=t,s=0,a,l=()=>r(1,s=0),u=({event:v})=>v.key==="ArrowUp"?(c(),!0):v.key==="ArrowDown"?(f(),!0):v.key==="Enter"?(d(),!0):!1,c=()=>{r(1,s=(s+n.length-1)%n.length),h()},f=()=>{r(1,s=(s+1)%n.length),h()},d=()=>{p(s)},p=v=>{let b=n[v];b&&(i.view.state.selection.$to.nodeAfter?.text?.startsWith(" ")&&r(4,o.to+=1,o),i.chain().focus().insertContentAt(o,[{type:"mergeTag",attrs:{id:b}},{type:"text",text:" "}]).run(),window.getSelection()?.collapseToEnd())},h=()=>{setTimeout(()=>{a.querySelector(".active-option").scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})},0)},m=v=>p(v);function g(v){xe[v?"unshift":"push"](()=>{a=v,r(2,a)})}return e.$$set=v=>{"items"in v&&r(0,n=v.items),"editor"in v&&r(5,i=v.editor),"range"in v&&r(4,o=v.range)},[n,s,a,p,o,i,l,u,m,g]}var dm=class extends Pt{constructor(t){super(),Ft(this,t,nR,rR,Nt,{items:0,editor:5,range:4,resetIndex:6,onKeyDown:7})}get resetIndex(){return this.$$.ctx[6]}get onKeyDown(){return this.$$.ctx[7]}},Kx=dm;var Xx=$t.create({name:"mergeTagsExtension",addOptions(){return{tags:{default:[]},statePath:{default:null}}},addProseMirrorPlugins(){return[Tc({editor:this.editor,char:"{{",command:({editor:e,range:t,props:r})=>{r.command({editor:e,range:t})},startOfLine:!1,pluginKey:new Wt("mergeTagsExtension"),items:({query:e})=>this.options.tags.filter(t=>t.toLowerCase().includes(e.toLowerCase())),render:()=>{let e,t;return{onStart:r=>{if(!r.clientRect)return;let n=document.createElement("div");e=new Kx({target:n,props:{items:r.items,editor:r.editor,range:r.range,statePath:this.options.statePath}}),t=Vo("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.$$.root,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",theme:"scribble-panel",arrow:!1,zIndex:40})},onUpdate(r){e.$set({items:r.items,editor:r.editor,range:r.range}),e.resetIndex(),r.clientRect&&t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){return r.event.key==="Escape"?(t[0].hide(),!0):e.onKeyDown(r)},onExit(){t[0].destroy(),e.$destroy()}}}})]}});var Jx=$t.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ht({key:new Wt("placeholder"),props:{decorations:({doc:e,selection:t})=>{var r;let n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,o=[];if(!n)return null;let{firstChild:s}=e.content,a=s&&s.type.isLeaf,l=s&&s.isAtom,u=this.options.considerAnyAsEmpty?!0:s&&s.type.name===((r=e.type.contentMatch.defaultType)===null||r===void 0?void 0:r.name),c=e.content.childCount<=1&&s&&u&&s.nodeSize<=2&&(!a||!l);return e.descendants((f,d)=>{let p=i>=d&&i<=d+f.nodeSize,h=!f.isLeaf&&!f.childCount;if((p||!this.options.showOnlyCurrent)&&h){let m=[this.options.emptyNodeClass];c&&m.push(this.options.emptyEditorClass);let g=Le.node(d,d+f.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:f,pos:d,hasAnchor:p}):this.options.placeholder});o.push(g)}return this.options.includeChildren}),de.create(e,o)}}})]}});var iR=/^\s*>\s$/,Zx=yt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[oi({find:iR,type:this.type})]}});var oR=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,sR=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,aR=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,lR=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Qx=oe.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[fn({find:oR,type:this.type}),fn({find:aR,type:this.type})]},addPasteRules(){return[kr({find:sR,type:this.type}),kr({find:lR,type:this.type})]}});var uR=yt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",lt(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),tS=oe.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{let r=ii(e,this.type);return Object.entries(r).some(([,i])=>!!i)?!0:t.unsetMark(this.name)}}}}),eS=/^\s*([-+*])\s$/,rS=yt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(uR.name,this.editor.getAttributes(tS.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=oi({find:eS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=oi({find:eS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(tS.name),editor:this.editor})),[e]}});var cR=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,fR=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,nS=oe.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[fn({find:cR,type:this.type})]},addPasteRules(){return[kr({find:fR,type:this.type})]}});var dR=/^```([a-z]+)?[\s\n]$/,pR=/^~~~([a-z]+)?[\s\n]$/,iS=yt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;let{languageClassPrefix:r}=this.options,o=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(s=>s.startsWith(r)).map(s=>s.replace(r,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",lt(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,r=t.pos===1;return!e||t.parent.type.name!==this.name?!1:r||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:t}=e,{selection:r}=t,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;let o=n.parentOffset===n.parent.nodeSize-2,s=n.parent.textContent.endsWith(`

`);return!o||!s?!1:e.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;let{state:t}=e,{selection:r,doc:n}=t,{$from:i,empty:o}=r;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;let a=i.after();return a===void 0||n.nodeAt(a)?!1:e.commands.exitCode()}}},addInputRules(){return[js({find:dR,type:this.type,getAttributes:e=>({language:e[1]})}),js({find:pR,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Ht({key:new Wt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let r=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,o=i?.mode;if(!r||!o)return!1;let{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(dt.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(r.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}});var oS=yt.create({name:"doc",topNode:!0,content:"block+"});function sS(e={}){return new Ht({view(t){return new pm(t,e)}})}var pm=class{constructor(t,r){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return t.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:r})=>this.editorView.dom.removeEventListener(t,r))}update(t,r){this.cursorPos!=null&&r.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),r=!t.parent.inlineContent,n;if(r){let a=t.nodeBefore,l=t.nodeAfter;if(a||l){let u=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(u){let c=u.getBoundingClientRect(),f=a?c.bottom:c.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:c.left,right:c.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!n){let a=this.editorView.coordsAtPos(this.cursorPos);n={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=n.left-o+"px",this.element.style.top=n.top-s+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,r,t):i;if(r&&!o){let s=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=il(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}};var aS=$t.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[sS(this.options)]}});var Je=class e extends pt{constructor(t){super(t,t)}map(t,r){let n=t.resolve(r.map(this.head));return e.valid(n)?new e(n):pt.near(n)}content(){return Q.empty}eq(t){return t instanceof e&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(r.pos))}getBookmark(){return new hm(this.anchor)}static valid(t){let r=t.parent;if(r.isTextblock||!hR(t)||!mR(t))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,r,n=!1){t:for(;;){if(!n&&e.valid(t))return t;let i=t.pos,o=null;for(let s=t.depth;;s--){let a=t.node(s);if(r>0?t.indexAfter(s)<a.childCount:t.index(s)>0){o=a.child(r>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=r;let l=t.doc.resolve(i);if(e.valid(l))return l}for(;;){let s=r>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!ht.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*r),n=!1;continue t}break}o=s,i+=r;let a=t.doc.resolve(i);if(e.valid(a))return a}return null}}};Je.prototype.visible=!1;Je.findFrom=Je.findGapCursorFrom;pt.jsonID("gapcursor",Je);var hm=class e{constructor(t){this.pos=t}map(t){return new e(t.map(this.pos))}resolve(t){let r=t.resolve(this.pos);return Je.valid(r)?new Je(r):pt.near(r)}};function hR(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function mR(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lS(){return new Ht({props:{decorations:bR,createSelectionBetween(e,t,r){return t.pos==r.pos&&Je.valid(r)?new Je(r):null},handleClick:vR,handleKeyDown:gR,handleDOMEvents:{beforeinput:yR}}})}var gR=Vs({ArrowLeft:Oc("horiz",-1),ArrowRight:Oc("horiz",1),ArrowUp:Oc("vert",-1),ArrowDown:Oc("vert",1)});function Oc(e,t){let r=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(n,i,o){let s=n.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof dt){if(!o.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(t>0?a.after():a.before())}let u=Je.findGapCursorFrom(a,t,l);return u?(i&&i(n.tr.setSelection(new Je(u))),!0):!1}}function vR(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!Je.valid(n))return!1;let i=e.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&ht.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Je(n))),!0)}function yR(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Je))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let i=$.empty;for(let s=n.length-1;s>=0;s--)i=$.from(n[s].createAndFill(null,i));let o=e.state.tr.replace(r.pos,r.pos,new Q(i,0,0));return o.setSelection(dt.near(o.doc.resolve(r.pos+1))),e.dispatch(o),!1}function bR(e){if(!(e.selection instanceof Je))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",de.create(e.doc,[Le.widget(e.selection.head,t,{key:"gapcursor"})])}var uS=$t.create({name:"gapCursor",addProseMirrorPlugins(){return[lS()]},extendNodeSchema(e){var t;let r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=kt(st(e,"allowGapCursor",r)))!==null&&t!==void 0?t:null}}});var cS=yt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",lt(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:r,editor:n})=>e.first([()=>e.exitCode(),()=>e.command(()=>{let{selection:i,storedMarks:o}=r;if(i.$from.parent.type.spec.isolating)return!1;let{keepMarks:s}=this.options,{splittableMarks:a}=n.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){let f=l.filter(d=>a.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var fS=yt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,lt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>js({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var Dc=200,qe=function(){};qe.prototype.append=function(t){return t.length?(t=qe.from(t),!this.length&&t||t.length<Dc&&this.leafAppend(t)||this.length<Dc&&t.leafPrepend(this)||this.appendInner(t)):this};qe.prototype.prepend=function(t){return t.length?qe.from(t).append(this):this};qe.prototype.appendInner=function(t){return new xR(this,t)};qe.prototype.slice=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.length),t>=r?qe.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,r))};qe.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};qe.prototype.forEach=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(t,r,n,0):this.forEachInvertedInner(t,r,n,0)};qe.prototype.map=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(o,s){return i.push(t(o,s))},r,n),i};qe.from=function(t){return t instanceof qe?t:t&&t.length?new dS(t):qe.empty};var dS=function(e){function t(n){e.call(this),this.values=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Dc)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Dc)return new t(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(qe);qe.empty=new dS([]);var xR=function(e){function t(r,n){e.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(n,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(n,Math.min(i,a),o,s)===!1)return!1},t.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(n,i):n>=o?this.right.slice(n-o,i-o):this.left.slice(n,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new t(i,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(qe),mm=qe;var SR=500,mo=class e{constructor(t,r){this.items=t,this.eventCount=r}popEvent(t,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,o;r&&(i=this.remapping(n,this.items.length),o=i.maps.length);let s=t.tr,a,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(n,d+1),o=i.maps.length),o--,c.push(f);return}if(i){c.push(new Cn(f.map));let p=f.step.map(i.slice(o)),h;p&&s.maybeStep(p).doc&&(h=s.mapping.maps[s.mapping.maps.length-1],u.push(new Cn(h,void 0,void 0,u.length+c.length))),o--,h&&i.appendMap(h,o)}else s.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(o)):f.selection,l=new e(this.items.slice(0,n).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(t,r,n,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<t.steps.length;c++){let f=t.steps[c].invert(t.docs[c]),d=new Cn(t.mapping.maps[c],f,r),p;(p=l&&l.merge(d))&&(d=p,c?o.pop():a=a.slice(0,a.length-1)),o.push(d),r&&(s++,r=void 0),i||(l=d)}let u=s-n.depth;return u>CR&&(a=wR(a,u),s-=u),new e(a.append(o),s)}remapping(t,r){let n=new Ms;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,s)},t,r),n}addMaps(t){return this.eventCount==0?this:new e(this.items.append(t.map(r=>new Cn(r))),this.eventCount)}rebased(t,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),o=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=r;this.items.forEach(d=>{let p=o.getMirror(--l);if(p==null)return;s=Math.min(s,p);let h=o.maps[p];if(d.step){let m=t.steps[p].invert(t.docs[p]),g=d.selection&&d.selection.map(o.slice(l+1,p));g&&a++,n.push(new Cn(h,m,g))}else n.push(new Cn(h))},i);let u=[];for(let d=r;d<s;d++)u.push(new Cn(o.maps[d]));let c=this.items.slice(0,i).append(u).append(n),f=new e(c,a);return f.emptyItemCount()>SR&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let t=0;return this.items.forEach(r=>{r.step||t++}),t}compress(t=this.items.length){let r=this.remapping(0,t),n=r.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=t)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(r.slice(n)),u=l&&l.getMap();if(n--,u&&r.appendMap(u,n),l){let c=s.selection&&s.selection.map(r.slice(n));c&&o++;let f=new Cn(u.invert(),l,c),d,p=i.length-1;(d=i.length&&i[p].merge(f))?i[p]=d:i.push(f)}}else s.map&&n--},this.items.length,0),new e(mm.from(i.reverse()),o)}};mo.empty=new mo(mm.empty,0);function wR(e,t){let r;return e.forEach((n,i)=>{if(n.selection&&t--==0)return r=i,!1}),e.slice(r)}var Cn=class e{constructor(t,r,n,i){this.map=t,this.step=r,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let r=t.step.merge(this.step);if(r)return new e(r.getMap().invert(),r,this.selection)}}},_n=class{constructor(t,r,n,i,o){this.done=t,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=o}},CR=20;function _R(e,t,r,n){let i=r.getMeta(Ci),o;if(i)return i.historyState;r.getMeta(ER)&&(e=new _n(e.done,e.undone,null,0,-1));let s=r.getMeta("appendedTransaction");if(r.steps.length==0)return e;if(s&&s.getMeta(Ci))return s.getMeta(Ci).redo?new _n(e.done.addTransform(r,void 0,n,Ac(t)),e.undone,pS(r.mapping.maps[r.steps.length-1]),e.prevTime,e.prevComposition):new _n(e.done,e.undone.addTransform(r,void 0,n,Ac(t)),null,e.prevTime,e.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=e.prevTime==0||!s&&e.prevComposition!=a&&(e.prevTime<(r.time||0)-n.newGroupDelay||!kR(r,e.prevRanges)),u=s?gm(e.prevRanges,r.mapping):pS(r.mapping.maps[r.steps.length-1]);return new _n(e.done.addTransform(r,l?t.selection.getBookmark():void 0,n,Ac(t)),mo.empty,u,r.time,a??e.prevComposition)}else return(o=r.getMeta("rebased"))?new _n(e.done.rebased(r,o),e.undone.rebased(r,o),gm(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new _n(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),gm(e.prevRanges,r.mapping),e.prevTime,e.prevComposition)}function kR(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((n,i)=>{for(let o=0;o<t.length;o+=2)n<=t[o+1]&&i>=t[o]&&(r=!0)}),r}function pS(e){let t=[];return e.forEach((r,n,i,o)=>t.push(i,o)),t}function gm(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),o=t.map(e[n+1],-1);i<=o&&r.push(i,o)}return r}function mS(e,t,r,n){let i=Ac(t),o=Ci.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),u=new _n(n?l:s.remaining,n?s.remaining:l,null,0,-1);r(s.transform.setSelection(a).setMeta(Ci,{redo:n,historyState:u}).scrollIntoView())}var vm=!1,hS=null;function Ac(e){let t=e.plugins;if(hS!=t){vm=!1,hS=t;for(let r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){vm=!0;break}}return vm}var Ci=new Wt("history"),ER=new Wt("closeHistory");function gS(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Ht({key:Ci,state:{init(){return new _n(mo.empty,mo.empty,null,0,-1)},apply(t,r,n){return _R(r,n,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,r){let n=r.inputType,i=n=="historyUndo"?ym:n=="historyRedo"?bm:null;return i?(r.preventDefault(),i(t.state,t.dispatch)):!1}}}})}var ym=(e,t)=>{let r=Ci.getState(e);return!r||r.done.eventCount==0?!1:(t&&mS(r,e,t,!1),!0)},bm=(e,t)=>{let r=Ci.getState(e);return!r||r.undone.eventCount==0?!1:(t&&mS(r,e,t,!0),!0)};var vS=$t.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>ym(e,t),redo:()=>({state:e,dispatch:t})=>bm(e,t)}},addProseMirrorPlugins(){return[gS(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}});var yS=yt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",lt(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{let{$to:r}=t.selection,n=e();return r.parentOffset===0?n.insertContentAt(Math.max(r.pos-2,0),{type:this.name}):n.insertContent({type:this.name}),n.command(({tr:i,dispatch:o})=>{var s;if(o){let{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(dt.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(ht.create(i.doc,a.pos)):i.setSelection(dt.create(i.doc,a.pos));else{let u=(s=a.parent.type.contentMatch.defaultType)===null||s===void 0?void 0:s.create();u&&(i.insert(l,u),i.setSelection(dt.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Ll({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}});var MR=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,TR=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,OR=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,DR=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,bS=oe.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[fn({find:MR,type:this.type}),fn({find:OR,type:this.type})]},addPasteRules(){return[kr({find:TR,type:this.type}),kr({find:DR,type:this.type})]}});var xS=yt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",lt(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});var AR=yt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",lt(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),SS=oe.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{let r=ii(e,this.type);return Object.entries(r).some(([,i])=>!!i)?!0:t.unsetMark(this.name)}}}}),wS=/^(\d+)\.\s$/,CS=yt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){let{start:t,...r}=e;return t===1?["ol",lt(this.options.HTMLAttributes,r),0]:["ol",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(AR.name,this.editor.getAttributes(SS.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=oi({find:wS,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=oi({find:wS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(SS.name)}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1],editor:this.editor})),[e]}});var _S=yt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});var RR=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,PR=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,kS=oe.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){let e={};return Pl()?e["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():e["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),e},addInputRules(){return[fn({find:RR,type:this.type})]},addPasteRules(){return[kr({find:PR,type:this.type})]}});var ES=yt.create({name:"text",group:"inline"});var MS=$t.create({name:"starterKit",addExtensions(){var e,t,r,n,i,o,s,a,l,u,c,f,d,p,h,m,g,v;let b=[];return this.options.blockquote!==!1&&b.push(Zx.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bold!==!1&&b.push(Qx.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&b.push(rS.configure((r=this.options)===null||r===void 0?void 0:r.bulletList)),this.options.code!==!1&&b.push(nS.configure((n=this.options)===null||n===void 0?void 0:n.code)),this.options.codeBlock!==!1&&b.push(iS.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&b.push(oS.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&b.push(aS.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&b.push(uS.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&b.push(cS.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&b.push(fS.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&b.push(vS.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&b.push(yS.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&b.push(bS.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&b.push(xS.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&b.push(CS.configure((h=this.options)===null||h===void 0?void 0:h.orderedList)),this.options.paragraph!==!1&&b.push(_S.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&b.push(kS.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&b.push(ES.configure((v=this.options)===null||v===void 0?void 0:v.text)),b}});var TS=$t.create({name:"statePathExtension",addOptions(){return{statePath:null}},addStorage(){return{statePath:null}},onCreate(){this.storage.statePath=this.options.statePath}});function NR(e){let t;return{c(){t=ot("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>',N(t,"class","loading-block")},m(r,n){q(r,t,n)},p:vt,d(r){r&&G(t)}}}function IR(e){let t,r;return{c(){t=new an(!1),r=Qt(),t.a=r},m(n,i){t.m(e[3],n,i),q(n,r,i)},p(n,i){i&8&&t.p(n[3])},d(n){n&&(G(r),t.d())}}}function OS(e){let t,r;return t=new Pu({props:{handleOpen:e[4]}}),{c(){zt(t.$$.fragment)},m(n,i){It(t,n,i),r=!0},p:vt,i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){Z(t.$$.fragment,n),r=!1},d(n){Lt(t,n)}}}function LR(e){let t,r,n,i,o;t=new Ru({});let s=e[0].attrs.type!=="static"&&OS(e);return i=new Nu({props:{handleRemove:e[5]}}),{c(){zt(t.$$.fragment),r=_t(),s&&s.c(),n=_t(),zt(i.$$.fragment)},m(a,l){It(t,a,l),q(a,r,l),s&&s.m(a,l),q(a,n,l),It(i,a,l),o=!0},p(a,l){a[0].attrs.type!=="static"?s?(s.p(a,l),l&1&&W(s,1)):(s=OS(a),s.c(),W(s,1),s.m(n.parentNode,n)):s&&(re(),Z(s,1,1,()=>{s=null}),ne())},i(a){o||(W(t.$$.fragment,a),W(s),W(i.$$.fragment,a),o=!0)},o(a){Z(t.$$.fragment,a),Z(s),Z(i.$$.fragment,a),o=!1},d(a){a&&(G(r),G(n)),Lt(t,a),s&&s.d(a),Lt(i,a)}}}function BR(e){let t,r,n,i,o,s;function a(c,f){return c[3]?IR:NR}let l=a(e,-1),u=l(e);return o=new Au({props:{$$slots:{default:[LR]},$$scope:{ctx:e}}}),{c(){t=ot("div"),r=ot("div"),u.c(),i=_t(),zt(o.$$.fragment),N(r,"class",n="scribble-block-content "+(e[1]?"ProseMirror-selectednode":"")),N(t,"class","scribble-block")},m(c,f){q(c,t,f),nt(t,r),u.m(r,null),e[8](r),nt(t,i),It(o,t,null),s=!0},p(c,f){l===(l=a(c,f))&&u?u.p(c,f):(u.d(1),u=l(c),u&&(u.c(),u.m(r,null))),(!s||f&2&&n!==(n="scribble-block-content "+(c[1]?"ProseMirror-selectednode":"")))&&N(r,"class",n);let d={};f&1025&&(d.$$scope={dirty:f,ctx:c}),o.$set(d)},i(c){s||(W(o.$$.fragment,c),s=!0)},o(c){Z(o.$$.fragment,c),s=!1},d(c){c&&G(t),u.d(),e[8](null),Lt(o)}}}function zR(e){let t,r;return t=new sa({props:{$$slots:{default:[BR]},$$scope:{ctx:e}}}),{c(){zt(t.$$.fragment)},m(n,i){It(t,n,i),r=!0},p(n,[i]){let o={};i&1039&&(o.$$scope={dirty:i,ctx:n}),t.$set(o)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){Z(t.$$.fragment,n),r=!1},d(n){Lt(t,n)}}}function FR(e,t,r){let n,i,{editor:o}=t,{node:s}=t,{selected:a=!1}=t,{updateAttributes:l}=t,u=null,c=()=>{gn(s.attrs.identifier,{update:!0,statePath:o.storage?.statePathExtension.statePath??null,blockId:s.attrs.id,data:s.attrs.values})},f=()=>{o.commands.deleteSelection()};Qe(()=>{i(),window.addEventListener("updatedBlock",p=>{p.detail.identifier===s.attrs.identifier&&p.detail.statePath===o.storage?.statePathExtension.statePath&&p.detail.blockId===s.attrs.id&&(l({values:p.detail.values}),i())})});function d(p){xe[p?"unshift":"push"](()=>{n=p,r(2,n)})}return e.$$set=p=>{"editor"in p&&r(6,o=p.editor),"node"in p&&r(0,s=p.node),"selected"in p&&r(1,a=p.selected),"updateAttributes"in p&&r(7,l=p.updateAttributes)},e.$$.update=()=>{e.$$.dirty&133&&(i=()=>{let p=document.querySelector("#scribble-renderer").getAttribute("wire:id");window.Livewire.find(p).call("getView",s.attrs.identifier,s.attrs.values).then(h=>{r(3,u=h)}).then(()=>{n.addEventListener("change",h=>{let m=h.target.getAttribute("id").replace("data.",""),g=h.target.value;l({values:{...s.attrs.values,[m]:g}})})})})},r(2,n=null),[s,a,n,u,c,f,o,l,d]}var xm=class extends Pt{constructor(t){super(),Ft(this,t,FR,zR,Nt,{editor:6,node:0,selected:1,updateAttributes:7})}},DS=xm;var AS=yt.create({name:"scribbleBlock",isBlock:!0,inline:!1,group:"block",draggable:!0,defining:!0,selectable:!0,addStorage(){return{statePath:null}},addAttributes(){return{id:{default:null},type:{default:"block"},identifier:{default:null},values:{default:{}}}},parseHTML(){return[{tag:"scribble-block",getAttrs:e=>JSON.parse(e.innerHTML)}]},renderHTML({HTMLAttributes:e}){return["scribble-block",JSON.stringify(e)]},addCommands(){return{setScribbleBlock:e=>({tr:t,state:r})=>(gn(e.identifier,{...e}),!0),insertScribbleBlock:e=>({tr:t,dispatch:r,commands:n})=>{let{selection:i}=t,o=this.type.create({id:j1(),...e});return r&&([null,void 0].includes(e.coordinates?.pos)?(t.replaceRangeWith(i.from-i.$anchor.parentOffset,i.to,o),n.setNodeSelection(t.mapping.map(t.steps[t.steps.length-1].from),1)):t.replaceRangeWith(e.coordinates.pos,e.coordinates.pos,o)),!0}}},addNodeView(){return oa(DS)}});function RS(e,t,r){let n=e.slice();return n[17]=t[r],n}function PS(e,t,r){let n=e.slice();return n[20]=t[r],n}function NS(e){let t,r=Se(Object.keys(e[3])),n=[];for(let i=0;i<r.length;i+=1)n[i]=zS(RS(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=Qt()},m(i,o){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(i,o);q(i,t,o)},p(i,o){if(o&26){r=Se(Object.keys(i[3]));let s;for(s=0;s<r.length;s+=1){let a=RS(i,r,s);n[s]?n[s].p(a,o):(n[s]=zS(a),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&G(t),Sr(n,i)}}}function IS(e){let t,r=e[17]+"",n;return{c(){t=ot("div"),n=yr(r),N(t,"class","group-title")},m(i,o){q(i,t,o),nt(t,n)},p(i,o){o&8&&r!==(r=i[17]+"")&&Hr(n,r)},d(i){i&&G(t)}}}function LS(e){let t,r=e[20].description+"",n;return{c(){t=ot("span"),n=yr(r),N(t,"class","description")},m(i,o){q(i,t,o),nt(t,n)},p(i,o){o&8&&r!==(r=i[20].description+"")&&Hr(n,r)},d(i){i&&G(t)}}}function BS(e){let t,r,n=e[20].icon+"",i,o,s,a=e[20].label+"",l,u,c,f,d,p,h=e[20].description&&LS(e);function m(){return e[10](e[20])}return{c(){t=ot("button"),r=ot("span"),i=_t(),o=ot("span"),s=ot("span"),l=yr(a),u=_t(),h&&h.c(),c=_t(),N(r,"class","icon"),N(s,"class","label"),N(o,"class","text"),N(t,"class",f=e[20].index===e[1]?"active-option":"")},m(g,v){q(g,t,v),nt(t,r),r.innerHTML=n,nt(t,i),nt(t,o),nt(o,s),nt(s,l),nt(o,u),h&&h.m(o,null),nt(t,c),d||(p=De(t,"click",m),d=!0)},p(g,v){e=g,v&8&&n!==(n=e[20].icon+"")&&(r.innerHTML=n),v&8&&a!==(a=e[20].label+"")&&Hr(l,a),e[20].description?h?h.p(e,v):(h=LS(e),h.c(),h.m(o,null)):h&&(h.d(1),h=null),v&10&&f!==(f=e[20].index===e[1]?"active-option":"")&&N(t,"class",f)},d(g){g&&G(t),h&&h.d(),d=!1,p()}}}function zS(e){let t,r,n=e[17]&&IS(e),i=Se(e[3][e[17]]),o=[];for(let s=0;s<i.length;s+=1)o[s]=BS(PS(e,i,s));return{c(){n&&n.c(),t=_t();for(let s=0;s<o.length;s+=1)o[s].c();r=Qt()},m(s,a){n&&n.m(s,a),q(s,t,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(s,a);q(s,r,a)},p(s,a){if(s[17]?n?n.p(s,a):(n=IS(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),a&26){i=Se(s[3][s[17]]);let l;for(l=0;l<i.length;l+=1){let u=PS(s,i,l);o[l]?o[l].p(u,a):(o[l]=BS(u),o[l].c(),o[l].m(r.parentNode,r))}for(;l<o.length;l+=1)o[l].d(1);o.length=i.length}},d(s){s&&(G(t),G(r)),n&&n.d(s),Sr(o,s)}}}function FS(e){let t;return{c(){t=ot("div"),t.textContent="No blocks found",N(t,"class","no-blocks")},m(r,n){q(r,t,n)},d(r){r&&G(t)}}}function HR(e){let t,r,n,i=e[0].length&&NS(e),o=!e[0].length&&FS(e);return{c(){t=ot("div"),r=ot("div"),i&&i.c(),n=_t(),o&&o.c(),N(r,"class","group"),N(t,"class","scribble-suggestions")},m(s,a){q(s,t,a),nt(t,r),i&&i.m(r,null),nt(r,n),o&&o.m(r,null),e[11](t)},p(s,[a]){s[0].length?i?i.p(s,a):(i=NS(s),i.c(),i.m(r,n)):i&&(i.d(1),i=null),s[0].length?o&&(o.d(1),o=null):o||(o=FS(s),o.c(),o.m(r,null))},i:vt,o:vt,d(s){s&&G(t),i&&i.d(),o&&o.d(),e[11](null)}}}function $R(e,t,r){let{items:n}=t,{editor:i}=t,{range:o}=t,{statePath:s}=t,a=0,l,u,c=y=>{let S=y.map((x,C)=>(x.index=C,x));r(3,u=S.reduce(function(x,C){return x[C.group]=x[C.group]||[],x[C.group].push(C),x},Object.create(null)))},f=()=>r(1,a=0),d=({event:y})=>y.key==="ArrowUp"?(p(),!0):y.key==="ArrowDown"?(h(),!0):y.key==="Enter"?(m(),!0):!1,p=()=>{r(1,a=(a+n.length-1)%n.length),v()},h=()=>{r(1,a=(a+1)%n.length),v()},m=()=>{g(a)},g=y=>{let S=n[y];if(S)switch(i.commands.deleteRange(o),S.type){case"command":aa(i,S.commands);break;case"event":la(S.event.data,s),window.Livewire.dispatch(S.event.name,S.event.data);return;case"modal":gn(S.options,{statePath:s,identifier:S.identifier,data:i.getAttributes(S.extension)});break;case"static":i.chain().insertScribbleBlock({identifier:S.identifier,type:S.type,statePath:s,blockId:S.blockId,values:{}}).focus().run();break;default:i.commands.setScribbleBlock({identifier:S.identifier,statePath:s,blockId:S.blockId})}},v=()=>{setTimeout(()=>{l.querySelector(".active-option").scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})},0)},b=y=>g(y.index);function w(y){xe[y?"unshift":"push"](()=>{l=y,r(2,l)})}return e.$$set=y=>{"items"in y&&r(0,n=y.items),"editor"in y&&r(5,i=y.editor),"range"in y&&r(6,o=y.range),"statePath"in y&&r(7,s=y.statePath)},e.$$.update=()=>{e.$$.dirty&1&&c(n)},[n,a,l,u,g,i,o,s,f,d,b,w]}var Sm=class extends Pt{constructor(t){super(),Ft(this,t,$R,HR,Nt,{items:0,editor:5,range:6,statePath:7,resetIndex:8,onKeyDown:9})}get resetIndex(){return this.$$.ctx[8]}get onKeyDown(){return this.$$.ctx[9]}},HS=Sm;var $S=$t.create({name:"slashExtension",addOptions(){return{tools:{default:[]},statePath:{default:null}}},addProseMirrorPlugins(){return[Tc({editor:this.editor,char:"/",command:({editor:e,range:t,props:r})=>{r.command({editor:e,range:t})},startOfLine:!0,pluginKey:new Wt("slashExtension"),items:({query:e})=>this.options.tools.filter(t=>t.label.toLowerCase().includes(e.toLowerCase())),render:()=>{let e,t;return{onStart:r=>{if(!r.clientRect)return;let n=document.createElement("div");e=new HS({target:n,props:{items:r.items,editor:r.editor,range:r.range,statePath:this.options.statePath}}),t=Vo("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.$$.root,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",theme:"scribble-panel",arrow:!1,zIndex:40})},onUpdate(r){e.$set({items:r.items,editor:r.editor,range:r.range}),e.resetIndex(),r.clientRect&&t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){return r.event.key==="Escape"?(t[0].hide(),!0):e.onKeyDown(r)},onExit(){t[0].destroy(),e.$destroy()}}}})]}});var VS=oe.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(e){return e!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sub",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setSubscript:()=>({commands:e})=>e.setMark(this.name),toggleSubscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSubscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}});var WS=oe.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(e){return e!=="super"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sup",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setSuperscript:()=>({commands:e})=>e.setMark(this.name),toggleSuperscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSuperscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}});var Cm,_m;if(typeof WeakMap<"u"){let e=new WeakMap;Cm=t=>e.get(t),_m=(t,r)=>(e.set(t,r),r)}else{let e=[],r=0;Cm=n=>{for(let i=0;i<e.length;i+=2)if(e[i]==n)return e[i+1]},_m=(n,i)=>(r==10&&(r=0),e[r++]=n,e[r++]=i)}var ye=class{constructor(e,t,r,n){this.width=e,this.height=t,this.map=r,this.problems=n}findCell(e){for(let t=0;t<this.map.length;t++){let r=this.map[t];if(r!=e)continue;let n=t%this.width,i=t/this.width|0,o=n+1,s=i+1;for(let a=1;o<this.width&&this.map[t+a]==r;a++)o++;for(let a=1;s<this.height&&this.map[t+this.width*a]==r;a++)s++;return{left:n,top:i,right:o,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,r){let{left:n,right:i,top:o,bottom:s}=this.findCell(e);return t=="horiz"?(r<0?n==0:i==this.width)?null:this.map[o*this.width+(r<0?n-1:i)]:(r<0?o==0:s==this.height)?null:this.map[n+this.width*(r<0?o-1:s)]}rectBetween(e,t){let{left:r,right:n,top:i,bottom:o}=this.findCell(e),{left:s,right:a,top:l,bottom:u}=this.findCell(t);return{left:Math.min(r,s),top:Math.min(i,l),right:Math.max(n,a),bottom:Math.max(o,u)}}cellsInRect(e){let t=[],r={};for(let n=e.top;n<e.bottom;n++)for(let i=e.left;i<e.right;i++){let o=n*this.width+i,s=this.map[o];r[s]||(r[s]=!0,!(i==e.left&&i&&this.map[o-1]==s||n==e.top&&n&&this.map[o-this.width]==s)&&t.push(s))}return t}positionAt(e,t,r){for(let n=0,i=0;;n++){let o=i+r.child(n).nodeSize;if(n==e){let s=t+e*this.width,a=(e+1)*this.width;for(;s<a&&this.map[s]<i;)s++;return s==a?o-1:this.map[s]}i=o}}static get(e){return Cm(e)||_m(e,VR(e))}};function VR(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);let t=WR(e),r=e.childCount,n=[],i=0,o=null,s=[];for(let u=0,c=t*r;u<c;u++)n[u]=0;for(let u=0,c=0;u<r;u++){let f=e.child(u);c++;for(let h=0;;h++){for(;i<n.length&&n[i]!=0;)i++;if(h==f.childCount)break;let m=f.child(h),{colspan:g,rowspan:v,colwidth:b}=m.attrs;for(let w=0;w<v;w++){if(w+u>=r){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:v-w});break}let y=i+w*t;for(let S=0;S<g;S++){n[y+S]==0?n[y+S]=c:(o||(o=[])).push({type:"collision",row:u,pos:c,n:g-S});let x=b&&b[S];if(x){let C=(y+S)%t*2,k=s[C];k==null||k!=x&&s[C+1]==1?(s[C]=x,s[C+1]=1):k==x&&s[C+1]++}}}i+=g,c+=m.nodeSize}let d=(u+1)*t,p=0;for(;i<d;)n[i++]==0&&p++;p&&(o||(o=[])).push({type:"missing",row:u,n:p}),c++}let a=new ye(t,r,n,o),l=!1;for(let u=0;!l&&u<s.length;u+=2)s[u]!=null&&s[u+1]<r&&(l=!0);return l&&jR(a,s,e),a}function WR(e){let t=-1,r=!1;for(let n=0;n<e.childCount;n++){let i=e.child(n),o=0;if(r)for(let s=0;s<n;s++){let a=e.child(s);for(let l=0;l<a.childCount;l++){let u=a.child(l);s+u.attrs.rowspan>n&&(o+=u.attrs.colspan)}}for(let s=0;s<i.childCount;s++){let a=i.child(s);o+=a.attrs.colspan,a.attrs.rowspan>1&&(r=!0)}t==-1?t=o:t!=o&&(t=Math.max(t,o))}return t}function jR(e,t,r){e.problems||(e.problems=[]);let n={};for(let i=0;i<e.map.length;i++){let o=e.map[i];if(n[o])continue;n[o]=!0;let s=r.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let a=null,l=s.attrs;for(let u=0;u<l.colspan;u++){let c=(i+u)%e.width,f=t[c*2];f!=null&&(!l.colwidth||l.colwidth[u]!=f)&&((a||(a=GR(l)))[u]=f)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}function GR(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let r=0;r<e.colspan;r++)t.push(0);return t}function Ze(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(let r in e.nodes){let n=e.nodes[r],i=n.spec.tableRole;i&&(t[i]=n)}}return t}var _i=new Wt("selectingCells");function ms(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function qR(e){for(let t=e.depth;t>0;t--){let r=e.node(t).type.spec.tableRole;if(r==="cell"||r==="header_cell")return e.node(t)}return null}function tn(e){let t=e.selection.$head;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="row")return!0;return!1}function Bc(e){let t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;let r=ms(t.$head)||UR(t.$head);if(r)return r;throw new RangeError(`No cell found around position ${t.head}`)}function UR(e){for(let t=e.nodeAfter,r=e.pos;t;t=t.firstChild,r++){let n=t.type.spec.tableRole;if(n=="cell"||n=="header_cell")return e.doc.resolve(r)}for(let t=e.nodeBefore,r=e.pos;t;t=t.lastChild,r--){let n=t.type.spec.tableRole;if(n=="cell"||n=="header_cell")return e.doc.resolve(r-t.nodeSize)}}function km(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function YR(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function Tm(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function ZS(e,t,r){let n=e.node(-1),i=ye.get(n),o=e.start(-1),s=i.nextCell(e.pos-o,t,r);return s==null?null:e.node(0).resolve(o+s)}function go(e,t,r=1){let n={...e,colspan:e.colspan-r};return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(t,r),n.colwidth.some(i=>i>0)||(n.colwidth=null)),n}function QS(e,t,r=1){let n={...e,colspan:e.colspan+r};if(n.colwidth){n.colwidth=n.colwidth.slice();for(let i=0;i<r;i++)n.colwidth.splice(t,0,0)}return n}function KR(e,t,r){let n=Ze(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[r+i*e.width]).type!=n)return!1;return!0}var te=class Wn extends pt{constructor(t,r=t){let n=t.node(-1),i=ye.get(n),o=t.start(-1),s=i.rectBetween(t.pos-o,r.pos-o),a=t.node(0),l=i.cellsInRect(s).filter(c=>c!=r.pos-o);l.unshift(r.pos-o);let u=l.map(c=>{let f=n.nodeAt(c);if(!f)throw RangeError(`No cell with offset ${c} found`);let d=o+c+1;return new Ps(a.resolve(d),a.resolve(d+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=r}map(t,r){let n=t.resolve(r.map(this.$anchorCell.pos)),i=t.resolve(r.map(this.$headCell.pos));if(km(n)&&km(i)&&Tm(n,i)){let o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?Wn.rowSelection(n,i):o&&this.isColSelection()?Wn.colSelection(n,i):new Wn(n,i)}return dt.between(n,i)}content(){let t=this.$anchorCell.node(-1),r=ye.get(t),n=this.$anchorCell.start(-1),i=r.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},s=[];for(let l=i.top;l<i.bottom;l++){let u=[];for(let c=l*r.width+i.left,f=i.left;f<i.right;f++,c++){let d=r.map[c];if(o[d])continue;o[d]=!0;let p=r.findCell(d),h=t.nodeAt(d);if(!h)throw RangeError(`No cell with offset ${d} found`);let m=i.left-p.left,g=p.right-i.right;if(m>0||g>0){let v=h.attrs;if(m>0&&(v=go(v,0,m)),g>0&&(v=go(v,v.colspan-g,g)),p.left<i.left){if(h=h.type.createAndFill(v),!h)throw RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else h=h.type.create(v,h.content)}if(p.top<i.top||p.bottom>i.bottom){let v={...h.attrs,rowspan:Math.min(p.bottom,i.bottom)-Math.max(p.top,i.top)};p.top<i.top?h=h.type.createAndFill(v):h=h.type.create(v,h.content)}u.push(h)}s.push(t.child(l).copy($.from(u)))}let a=this.isColSelection()&&this.isRowSelection()?t:s;return new Q($.from(a),1,1)}replace(t,r=Q.empty){let n=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:l}=i[s],u=t.mapping.slice(n);t.replace(u.map(a.pos),u.map(l.pos),s?Q.empty:r)}let o=pt.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,r){this.replace(t,new Q($.from(r),0,0))}forEachCell(t){let r=this.$anchorCell.node(-1),n=ye.get(r),i=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)t(r.nodeAt(o[s]),i+o[s])}isColSelection(){let t=this.$anchorCell.index(-1),r=this.$headCell.index(-1);if(Math.min(t,r)>0)return!1;let n=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=r+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,i)==this.$headCell.node(-1).childCount}static colSelection(t,r=t){let n=t.node(-1),i=ye.get(n),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(r.pos-o),l=t.node(0);return s.top<=a.top?(s.top>0&&(t=l.resolve(o+i.map[s.left])),a.bottom<i.height&&(r=l.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(r=l.resolve(o+i.map[a.left])),s.bottom<i.height&&(t=l.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new Wn(t,r)}isRowSelection(){let t=this.$anchorCell.node(-1),r=ye.get(t),n=this.$anchorCell.start(-1),i=r.colCount(this.$anchorCell.pos-n),o=r.colCount(this.$headCell.pos-n);if(Math.min(i,o)>0)return!1;let s=i+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==r.width}eq(t){return t instanceof Wn&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,r=t){let n=t.node(-1),i=ye.get(n),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(r.pos-o),l=t.node(0);return s.left<=a.left?(s.left>0&&(t=l.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(r=l.resolve(o+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(r=l.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(t=l.resolve(o+i.map[i.width*(s.top+1)-1]))),new Wn(t,r)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,r){return new Wn(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){return new Wn(t.resolve(r),t.resolve(n))}getBookmark(){return new XR(this.$anchorCell.pos,this.$headCell.pos)}};te.prototype.visible=!1;pt.jsonID("cell",te);var XR=class tw{constructor(t,r){this.anchor=t,this.head=r}map(t){return new tw(t.map(this.anchor),t.map(this.head))}resolve(t){let r=t.resolve(this.anchor),n=t.resolve(this.head);return r.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&r.index()<r.parent.childCount&&n.index()<n.parent.childCount&&Tm(r,n)?new te(r,n):pt.near(n,1)}};function JR(e){if(!(e.selection instanceof te))return null;let t=[];return e.selection.forEachCell((r,n)=>{t.push(Le.node(n,n+r.nodeSize,{class:"selectedCell"}))}),de.create(e.doc,t)}function ZR({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let r=e.pos,n=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,r++);for(let o=t.depth;o>=0&&!(t.before(o+1)>t.start(o));o--,n--);return r==n&&/row|table/.test(e.node(i).type.spec.tableRole)}function QR({$from:e,$to:t}){let r,n;for(let i=e.depth;i>0;i--){let o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}for(let i=t.depth;i>0;i--){let o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}return r!==n&&t.parentOffset===0}function tP(e,t,r){let n=(t||e).selection,i=(t||e).doc,o,s;if(n instanceof ht&&(s=n.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=te.create(i,n.from);else if(s=="row"){let a=i.resolve(n.from+1);o=te.rowSelection(a,a)}else if(!r){let a=ye.get(n.node),l=n.from+1,u=l+a.map[a.width*a.height-1];o=te.create(i,l+1,u)}}else n instanceof dt&&ZR(n)?o=dt.create(i,n.from):n instanceof dt&&QR(n)&&(o=dt.create(i,n.$from.start(),n.$from.end()));return o&&(t||(t=e.tr)).setSelection(o),t}var eP=new Wt("fix-tables");function ew(e,t,r,n){let i=e.childCount,o=t.childCount;t:for(let s=0,a=0;s<o;s++){let l=t.child(s);for(let u=a,c=Math.min(i,s+3);u<c;u++)if(e.child(u)==l){a=u+1,r+=l.nodeSize;continue t}n(l,r),a<i&&e.child(a).sameMarkup(l)?ew(e.child(a),l,r+1,n):l.nodesBetween(0,l.content.size,n,r+1),r+=l.nodeSize}}function Om(e,t){let r,n=(i,o)=>{i.type.spec.tableRole=="table"&&(r=rP(e,i,o,r))};return t?t.doc!=e.doc&&ew(t.doc,e.doc,0,n):e.doc.descendants(n),r}function rP(e,t,r,n){let i=ye.get(t);if(!i.problems)return n;n||(n=e.tr);let o=[];for(let l=0;l<i.height;l++)o.push(0);for(let l=0;l<i.problems.length;l++){let u=i.problems[l];if(u.type=="collision"){let c=t.nodeAt(u.pos);if(!c)continue;let f=c.attrs;for(let d=0;d<f.rowspan;d++)o[u.row+d]+=u.n;n.setNodeMarkup(n.mapping.map(r+1+u.pos),null,go(f,f.colspan-u.n,u.n))}else if(u.type=="missing")o[u.row]+=u.n;else if(u.type=="overlong_rowspan"){let c=t.nodeAt(u.pos);if(!c)continue;n.setNodeMarkup(n.mapping.map(r+1+u.pos),null,{...c.attrs,rowspan:c.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){let c=t.nodeAt(u.pos);if(!c)continue;n.setNodeMarkup(n.mapping.map(r+1+u.pos),null,{...c.attrs,colwidth:u.colwidth})}}let s,a;for(let l=0;l<o.length;l++)o[l]&&(s==null&&(s=l),a=l);for(let l=0,u=r+1;l<i.height;l++){let c=t.child(l),f=u+c.nodeSize,d=o[l];if(d>0){let p="cell";c.firstChild&&(p=c.firstChild.type.spec.tableRole);let h=[];for(let g=0;g<d;g++){let v=Ze(e.schema)[p].createAndFill();v&&h.push(v)}let m=(l==0||s==l-1)&&a==l?u+1:f-1;n.insert(n.mapping.map(m),h)}u=f}return n.setMeta(eP,{fixTables:!0})}function nP(e){if(!e.size)return null;let{content:t,openStart:r,openEnd:n}=e;for(;t.childCount==1&&(r>0&&n>0||t.child(0).type.spec.tableRole=="table");)r--,n--,t=t.child(0).content;let i=t.child(0),o=i.type.spec.tableRole,s=i.type.schema,a=[];if(o=="row")for(let l=0;l<t.childCount;l++){let u=t.child(l).content,c=l?0:Math.max(0,r-1),f=l<t.childCount-1?0:Math.max(0,n-1);(c||f)&&(u=Em(Ze(s).row,new Q(u,c,f)).content),a.push(u)}else if(o=="cell"||o=="header_cell")a.push(r||n?Em(Ze(s).row,new Q(t,r,n)).content:t);else return null;return iP(s,a)}function iP(e,t){let r=[];for(let i=0;i<t.length;i++){let o=t[i];for(let s=o.childCount-1;s>=0;s--){let{rowspan:a,colspan:l}=o.child(s).attrs;for(let u=i;u<i+a;u++)r[u]=(r[u]||0)+l}}let n=0;for(let i=0;i<r.length;i++)n=Math.max(n,r[i]);for(let i=0;i<r.length;i++)if(i>=t.length&&t.push($.empty),r[i]<n){let o=Ze(e).cell.createAndFill(),s=[];for(let a=r[i];a<n;a++)s.push(o);t[i]=t[i].append($.from(s))}return{height:t.length,width:n,rows:t}}function Em(e,t){let r=e.createAndFill();return new Kn(r).replace(0,r.content.size,t).doc}function oP({width:e,height:t,rows:r},n,i){if(e!=n){let o=[],s=[];for(let a=0;a<r.length;a++){let l=r[a],u=[];for(let c=o[a]||0,f=0;c<n;f++){let d=l.child(f%l.childCount);c+d.attrs.colspan>n&&(d=d.type.createChecked(go(d.attrs,d.attrs.colspan,c+d.attrs.colspan-n),d.content)),u.push(d),c+=d.attrs.colspan;for(let p=1;p<d.attrs.rowspan;p++)o[a+p]=(o[a+p]||0)+d.attrs.colspan}s.push($.from(u))}r=s,e=n}if(t!=i){let o=[];for(let s=0,a=0;s<i;s++,a++){let l=[],u=r[a%t];for(let c=0;c<u.childCount;c++){let f=u.child(c);s+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),l.push(f)}o.push($.from(l))}r=o,t=i}return{width:e,height:t,rows:r}}function sP(e,t,r,n,i,o,s){let a=e.doc.type.schema,l=Ze(a),u,c;if(i>t.width)for(let f=0,d=0;f<t.height;f++){let p=r.child(f);d+=p.nodeSize;let h=[],m;p.lastChild==null||p.lastChild.type==l.cell?m=u||(u=l.cell.createAndFill()):m=c||(c=l.header_cell.createAndFill());for(let g=t.width;g<i;g++)h.push(m);e.insert(e.mapping.slice(s).map(d-1+n),h)}if(o>t.height){let f=[];for(let h=0,m=(t.height-1)*t.width;h<Math.max(t.width,i);h++){let g=h>=t.width?!1:r.nodeAt(t.map[m+h]).type==l.header_cell;f.push(g?c||(c=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}let d=l.row.create(null,$.from(f)),p=[];for(let h=t.height;h<o;h++)p.push(d);e.insert(e.mapping.slice(s).map(n+r.nodeSize-2),p)}return!!(u||c)}function jS(e,t,r,n,i,o,s,a){if(s==0||s==t.height)return!1;let l=!1;for(let u=i;u<o;u++){let c=s*t.width+u,f=t.map[c];if(t.map[c-t.width]==f){l=!0;let d=r.nodeAt(f),{top:p,left:h}=t.findCell(f);e.setNodeMarkup(e.mapping.slice(a).map(f+n),null,{...d.attrs,rowspan:s-p}),e.insert(e.mapping.slice(a).map(t.positionAt(s,h,r)),d.type.createAndFill({...d.attrs,rowspan:p+d.attrs.rowspan-s})),u+=d.attrs.colspan-1}}return l}function GS(e,t,r,n,i,o,s,a){if(s==0||s==t.width)return!1;let l=!1;for(let u=i;u<o;u++){let c=u*t.width+s,f=t.map[c];if(t.map[c-1]==f){l=!0;let d=r.nodeAt(f),p=t.colCount(f),h=e.mapping.slice(a).map(f+n);e.setNodeMarkup(h,null,go(d.attrs,s-p,d.attrs.colspan-(s-p))),e.insert(h+d.nodeSize,d.type.createAndFill(go(d.attrs,0,s-p))),u+=d.attrs.rowspan-1}}return l}function qS(e,t,r,n,i){let o=r?e.doc.nodeAt(r-1):e.doc;if(!o)throw new Error("No table found");let s=ye.get(o),{top:a,left:l}=n,u=l+i.width,c=a+i.height,f=e.tr,d=0;function p(){if(o=r?f.doc.nodeAt(r-1):f.doc,!o)throw new Error("No table found");s=ye.get(o),d=f.mapping.maps.length}sP(f,s,o,r,u,c,d)&&p(),jS(f,s,o,r,l,u,a,d)&&p(),jS(f,s,o,r,l,u,c,d)&&p(),GS(f,s,o,r,a,c,l,d)&&p(),GS(f,s,o,r,a,c,u,d)&&p();for(let h=a;h<c;h++){let m=s.positionAt(h,l,o),g=s.positionAt(h,u,o);f.replace(f.mapping.slice(d).map(m+r),f.mapping.slice(d).map(g+r),new Q(i.rows[h-a],0,0))}p(),f.setSelection(new te(f.doc.resolve(r+s.positionAt(a,l,o)),f.doc.resolve(r+s.positionAt(c-1,u-1,o)))),t(f)}var aP=Vs({ArrowLeft:Rc("horiz",-1),ArrowRight:Rc("horiz",1),ArrowUp:Rc("vert",-1),ArrowDown:Rc("vert",1),"Shift-ArrowLeft":Pc("horiz",-1),"Shift-ArrowRight":Pc("horiz",1),"Shift-ArrowUp":Pc("vert",-1),"Shift-ArrowDown":Pc("vert",1),Backspace:Nc,"Mod-Backspace":Nc,Delete:Nc,"Mod-Delete":Nc});function Ic(e,t,r){return r.eq(e.selection)?!1:(t&&t(e.tr.setSelection(r).scrollIntoView()),!0)}function Rc(e,t){return(r,n,i)=>{if(!i)return!1;let o=r.selection;if(o instanceof te)return Ic(r,n,pt.near(o.$headCell,t));if(e!="horiz"&&!o.empty)return!1;let s=rw(i,e,t);if(s==null)return!1;if(e=="horiz")return Ic(r,n,pt.near(r.doc.resolve(o.head+t),t));{let a=r.doc.resolve(s),l=ZS(a,e,t),u;return l?u=pt.near(l,1):t<0?u=pt.near(r.doc.resolve(a.before(-1)),-1):u=pt.near(r.doc.resolve(a.after(-1)),1),Ic(r,n,u)}}}function Pc(e,t){return(r,n,i)=>{if(!i)return!1;let o=r.selection,s;if(o instanceof te)s=o;else{let l=rw(i,e,t);if(l==null)return!1;s=new te(r.doc.resolve(l))}let a=ZS(s.$headCell,e,t);return a?Ic(r,n,new te(s.$anchorCell,a)):!1}}function Nc(e,t){let r=e.selection;if(!(r instanceof te))return!1;if(t){let n=e.tr,i=Ze(e.schema).cell.createAndFill().content;r.forEachCell((o,s)=>{o.content.eq(i)||n.replace(n.mapping.map(s+1),n.mapping.map(s+o.nodeSize-1),new Q(i,0,0))}),n.docChanged&&t(n)}return!0}function lP(e,t){let r=e.state.doc,n=ms(r.resolve(t));return n?(e.dispatch(e.state.tr.setSelection(new te(n))),!0):!1}function uP(e,t,r){if(!tn(e.state))return!1;let n=nP(r),i=e.state.selection;if(i instanceof te){n||(n={width:1,height:1,rows:[$.from(Em(Ze(e.state.schema).cell,r))]});let o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=ye.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return n=oP(n,a.right-a.left,a.bottom-a.top),qS(e.state,e.dispatch,s,a,n),!0}else if(n){let o=Bc(e.state),s=o.start(-1);return qS(e.state,e.dispatch,s,ye.get(o.node(-1)).findCell(o.pos-s),n),!0}else return!1}function cP(e,t){var r;if(t.ctrlKey||t.metaKey)return;let n=US(e,t.target),i;if(t.shiftKey&&e.state.selection instanceof te)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&n&&(i=ms(e.state.selection.$anchor))!=null&&((r=wm(e,t))==null?void 0:r.pos)!=i.pos)o(i,t),t.preventDefault();else if(!n)return;function o(l,u){let c=wm(e,u),f=_i.getState(e.state)==null;if(!c||!Tm(l,c))if(f)c=l;else return;let d=new te(l,c);if(f||!e.state.selection.eq(d)){let p=e.state.tr.setSelection(d);f&&p.setMeta(_i,l.pos),e.dispatch(p)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),_i.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(_i,-1))}function a(l){let u=l,c=_i.getState(e.state),f;if(c!=null)f=e.state.doc.resolve(c);else if(US(e,u.target)!=n&&(f=wm(e,t),!f))return s();f&&o(f,u)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function rw(e,t,r){if(!(e.state.selection instanceof dt))return null;let{$head:n}=e.state.selection;for(let i=n.depth-1;i>=0;i--){let o=n.node(i);if((r<0?n.index(i):n.indexAfter(i))!=(r<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){let a=n.before(i),l=t=="vert"?r>0?"down":"up":r>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function US(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function wm(e,t){let r=e.posAtCoords({left:t.clientX,top:t.clientY});return r&&r?ms(e.state.doc.resolve(r.pos)):null}var fP=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Mm(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,Mm(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function Mm(e,t,r,n,i,o){var s;let a=0,l=!0,u=t.firstChild,c=e.firstChild;if(c){for(let f=0,d=0;f<c.childCount;f++){let{colspan:p,colwidth:h}=c.child(f).attrs;for(let m=0;m<p;m++,d++){let g=i==d?o:h&&h[m],v=g?g+"px":"";a+=g||n,g||(l=!1),u?(u.style.width!=v&&(u.style.width=v),u=u.nextSibling):t.appendChild(document.createElement("col")).style.width=v}}for(;u;){let f=u.nextSibling;(s=u.parentNode)==null||s.removeChild(u),u=f}l?(r.style.width=a+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=a+"px")}}var zr=new Wt("tableColumnResizing");function nw({handleWidth:e=5,cellMinWidth:t=25,View:r=fP,lastColumnResizable:n=!0}={}){let i=new Ht({key:zr,state:{init(o,s){return i.spec.props.nodeViews[Ze(s.schema).table.name]=(a,l)=>new r(a,t,l),new dP(-1,!1)},apply(o,s){return s.apply(o)}},props:{attributes:o=>{let s=zr.getState(o);return s&&s.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,s)=>{pP(o,s,e,t,n)},mouseleave:o=>{hP(o)},mousedown:(o,s)=>{mP(o,s,t)}},decorations:o=>{let s=zr.getState(o);if(s&&s.activeHandle>-1)return SP(o,s.activeHandle)},nodeViews:{}}});return i}var dP=class Lc{constructor(t,r){this.activeHandle=t,this.dragging=r}apply(t){let r=this,n=t.getMeta(zr);if(n&&n.setHandle!=null)return new Lc(n.setHandle,!1);if(n&&n.setDragging!==void 0)return new Lc(r.activeHandle,n.setDragging);if(r.activeHandle>-1&&t.docChanged){let i=t.mapping.map(r.activeHandle,-1);return km(t.doc.resolve(i))||(i=-1),new Lc(i,r.dragging)}return r}};function pP(e,t,r,n,i){let o=zr.getState(e.state);if(o&&!o.dragging){let s=vP(t.target),a=-1;if(s){let{left:l,right:u}=s.getBoundingClientRect();t.clientX-l<=r?a=YS(e,t,"left",r):u-t.clientX<=r&&(a=YS(e,t,"right",r))}if(a!=o.activeHandle){if(!i&&a!==-1){let l=e.state.doc.resolve(a),u=l.node(-1),c=ye.get(u),f=l.start(-1);if(c.colCount(l.pos-f)+l.nodeAfter.attrs.colspan-1==c.width-1)return}iw(e,a)}}}function hP(e){let t=zr.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&iw(e,-1)}function mP(e,t,r){let n=zr.getState(e.state);if(!n||n.activeHandle==-1||n.dragging)return!1;let i=e.state.doc.nodeAt(n.activeHandle),o=gP(e,n.activeHandle,i.attrs);e.dispatch(e.state.tr.setMeta(zr,{setDragging:{startX:t.clientX,startWidth:o}}));function s(l){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);let u=zr.getState(e.state);u?.dragging&&(yP(e,u.activeHandle,KS(u.dragging,l,r)),e.dispatch(e.state.tr.setMeta(zr,{setDragging:null})))}function a(l){if(!l.which)return s(l);let u=zr.getState(e.state);if(u&&u.dragging){let c=KS(u.dragging,l,r);bP(e,u.activeHandle,c,r)}}return window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function gP(e,t,{colspan:r,colwidth:n}){let i=n&&n[n.length-1];if(i)return i;let o=e.domAtPos(t),a=o.node.childNodes[o.offset].offsetWidth,l=r;if(n)for(let u=0;u<r;u++)n[u]&&(a-=n[u],l--);return a/l}function vP(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function YS(e,t,r,n){let i=r=="right"?-n:n,o=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!o)return-1;let{pos:s}=o,a=ms(e.state.doc.resolve(s));if(!a)return-1;if(r=="right")return a.pos;let l=ye.get(a.node(-1)),u=a.start(-1),c=l.map.indexOf(a.pos-u);return c%l.width==0?-1:u+l.map[c-1]}function KS(e,t,r){let n=t.clientX-e.startX;return Math.max(r,e.startWidth+n)}function iw(e,t){e.dispatch(e.state.tr.setMeta(zr,{setHandle:t}))}function yP(e,t,r){let n=e.state.doc.resolve(t),i=n.node(-1),o=ye.get(i),s=n.start(-1),a=o.colCount(n.pos-s)+n.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let u=0;u<o.height;u++){let c=u*o.width+a;if(u&&o.map[c]==o.map[c-o.width])continue;let f=o.map[c],d=i.nodeAt(f).attrs,p=d.colspan==1?0:a-o.colCount(f);if(d.colwidth&&d.colwidth[p]==r)continue;let h=d.colwidth?d.colwidth.slice():xP(d.colspan);h[p]=r,l.setNodeMarkup(s+f,null,{...d,colwidth:h})}l.docChanged&&e.dispatch(l)}function bP(e,t,r,n){let i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=ye.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,l=e.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&Mm(o,l.firstChild,l,n,a,r)}function xP(e){return Array(e).fill(0)}function SP(e,t){let r=[],n=e.doc.resolve(t),i=n.node(-1);if(!i)return de.empty;let o=ye.get(i),s=n.start(-1),a=o.colCount(n.pos-s)+n.nodeAfter.attrs.colspan;for(let l=0;l<o.height;l++){let u=a+l*o.width-1;if((a==o.width||o.map[u]!=o.map[u+1])&&(l==0||o.map[u]!=o.map[u-o.width])){let c=o.map[u],f=s+c+i.nodeAt(c).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",r.push(Le.widget(f,d))}}return de.create(e.doc,r)}function kn(e){let t=e.selection,r=Bc(e),n=r.node(-1),i=r.start(-1),o=ye.get(n);return{...t instanceof te?o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):o.findCell(r.pos-i),tableStart:i,map:o,table:n}}function ow(e,{map:t,tableStart:r,table:n},i){let o=i>0?-1:0;KR(t,n,i+o)&&(o=i==0||i==t.width?null:0);for(let s=0;s<t.height;s++){let a=s*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){let l=t.map[a],u=n.nodeAt(l);e.setNodeMarkup(e.mapping.map(r+l),null,QS(u.attrs,i-t.colCount(l))),s+=u.attrs.rowspan-1}else{let l=o==null?Ze(n.type.schema).cell:n.nodeAt(t.map[a+o]).type,u=t.positionAt(s,i,n);e.insert(e.mapping.map(r+u),l.createAndFill())}}return e}function sw(e,t){if(!tn(e))return!1;if(t){let r=kn(e);t(ow(e.tr,r,r.left))}return!0}function aw(e,t){if(!tn(e))return!1;if(t){let r=kn(e);t(ow(e.tr,r,r.right))}return!0}function wP(e,{map:t,table:r,tableStart:n},i){let o=e.mapping.maps.length;for(let s=0;s<t.height;){let a=s*t.width+i,l=t.map[a],u=r.nodeAt(l),c=u.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(o).map(n+l),null,go(c,i-t.colCount(l)));else{let f=e.mapping.slice(o).map(n+l);e.delete(f,f+u.nodeSize)}s+=c.rowspan}}function lw(e,t){if(!tn(e))return!1;if(t){let r=kn(e),n=e.tr;if(r.left==0&&r.right==r.map.width)return!1;for(let i=r.right-1;wP(n,r,i),i!=r.left;i--){let o=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!o)throw RangeError("No table found");r.table=o,r.map=ye.get(o)}t(n)}return!0}function CP(e,t,r){var n;let i=Ze(t.type.schema).header_cell;for(let o=0;o<e.width;o++)if(((n=t.nodeAt(e.map[o+r*e.width]))==null?void 0:n.type)!=i)return!1;return!0}function uw(e,{map:t,tableStart:r,table:n},i){var o;let s=r;for(let u=0;u<i;u++)s+=n.child(u).nodeSize;let a=[],l=i>0?-1:0;CP(t,n,i+l)&&(l=i==0||i==t.height?null:0);for(let u=0,c=t.width*i;u<t.width;u++,c++)if(i>0&&i<t.height&&t.map[c]==t.map[c-t.width]){let f=t.map[c],d=n.nodeAt(f).attrs;e.setNodeMarkup(r+f,null,{...d,rowspan:d.rowspan+1}),u+=d.colspan-1}else{let f=l==null?Ze(n.type.schema).cell:(o=n.nodeAt(t.map[c+l*t.width]))==null?void 0:o.type,d=f?.createAndFill();d&&a.push(d)}return e.insert(s,Ze(n.type.schema).row.create(null,a)),e}function cw(e,t){if(!tn(e))return!1;if(t){let r=kn(e);t(uw(e.tr,r,r.top))}return!0}function fw(e,t){if(!tn(e))return!1;if(t){let r=kn(e);t(uw(e.tr,r,r.bottom))}return!0}function _P(e,{map:t,table:r,tableStart:n},i){let o=0;for(let u=0;u<i;u++)o+=r.child(u).nodeSize;let s=o+r.child(i).nodeSize,a=e.mapping.maps.length;e.delete(o+n,s+n);let l=new Set;for(let u=0,c=i*t.width;u<t.width;u++,c++){let f=t.map[c];if(!l.has(f)){if(l.add(f),i>0&&f==t.map[c-t.width]){let d=r.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(a).map(f+n),null,{...d,rowspan:d.rowspan-1}),u+=d.colspan-1}else if(i<t.height&&f==t.map[c+t.width]){let d=r.nodeAt(f),p=d.attrs,h=d.type.create({...p,rowspan:d.attrs.rowspan-1},d.content),m=t.positionAt(i+1,u,r);e.insert(e.mapping.slice(a).map(n+m),h),u+=p.colspan-1}}}}function dw(e,t){if(!tn(e))return!1;if(t){let r=kn(e),n=e.tr;if(r.top==0&&r.bottom==r.map.height)return!1;for(let i=r.bottom-1;_P(n,r,i),i!=r.top;i--){let o=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!o)throw RangeError("No table found");r.table=o,r.map=ye.get(r.table)}t(n)}return!0}function XS(e){let t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function kP({width:e,height:t,map:r},n){let i=n.top*e+n.left,o=i,s=(n.bottom-1)*e+n.left,a=i+(n.right-n.left-1);for(let l=n.top;l<n.bottom;l++){if(n.left>0&&r[o]==r[o-1]||n.right<e&&r[a]==r[a+1])return!0;o+=e,a+=e}for(let l=n.left;l<n.right;l++){if(n.top>0&&r[i]==r[i-e]||n.bottom<t&&r[s]==r[s+e])return!0;i++,s++}return!1}function Dm(e,t){let r=e.selection;if(!(r instanceof te)||r.$anchorCell.pos==r.$headCell.pos)return!1;let n=kn(e),{map:i}=n;if(kP(i,n))return!1;if(t){let o=e.tr,s={},a=$.empty,l,u;for(let c=n.top;c<n.bottom;c++)for(let f=n.left;f<n.right;f++){let d=i.map[c*i.width+f],p=n.table.nodeAt(d);if(!(s[d]||!p))if(s[d]=!0,l==null)l=d,u=p;else{XS(p)||(a=a.append(p.content));let h=o.mapping.map(d+n.tableStart);o.delete(h,h+p.nodeSize)}}if(l==null||u==null)return!0;if(o.setNodeMarkup(l+n.tableStart,null,{...QS(u.attrs,u.attrs.colspan,n.right-n.left-u.attrs.colspan),rowspan:n.bottom-n.top}),a.size){let c=l+1+u.content.size,f=XS(u)?l+1:c;o.replaceWith(f+n.tableStart,c+n.tableStart,a)}o.setSelection(new te(o.doc.resolve(l+n.tableStart))),t(o)}return!0}function Am(e,t){let r=Ze(e.schema);return EP(({node:n})=>r[n.type.spec.tableRole])(e,t)}function EP(e){return(t,r)=>{var n;let i=t.selection,o,s;if(i instanceof te){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;o=i.$anchorCell.nodeAfter,s=i.$anchorCell.pos}else{if(o=qR(i.$from),!o)return!1;s=(n=ms(i.$from))==null?void 0:n.pos}if(o==null||s==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(r){let a=o.attrs,l=[],u=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});let c=kn(t),f=t.tr;for(let p=0;p<c.right-c.left;p++)l.push(u?{...a,colwidth:u&&u[p]?[u[p]]:null}:a);let d;for(let p=c.top;p<c.bottom;p++){let h=c.map.positionAt(p,c.left,c.table);p==c.top&&(h+=o.nodeSize);for(let m=c.left,g=0;m<c.right;m++,g++)m==c.left&&p==c.top||f.insert(d=f.mapping.map(h+c.tableStart,1),e({node:o,row:p,col:m}).createAndFill(l[g]))}f.setNodeMarkup(s,e({node:o,row:c.top,col:c.left}),l[0]),i instanceof te&&f.setSelection(new te(f.doc.resolve(i.$anchorCell.pos),d?f.doc.resolve(d):void 0)),r(f)}return!0}}function pw(e,t){return function(r,n){if(!tn(r))return!1;let i=Bc(r);if(i.nodeAfter.attrs[e]===t)return!1;if(n){let o=r.tr;r.selection instanceof te?r.selection.forEachCell((s,a)=>{s.attrs[e]!==t&&o.setNodeMarkup(a,null,{...s.attrs,[e]:t})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),n(o)}return!0}}function MP(e){return function(t,r){if(!tn(t))return!1;if(r){let n=Ze(t.schema),i=kn(t),o=t.tr,s=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=s.map(l=>i.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==n.header_cell&&o.setNodeMarkup(i.tableStart+s[l],n.cell,a[l].attrs);if(o.steps.length==0)for(let l=0;l<s.length;l++)o.setNodeMarkup(i.tableStart+s[l],n.header_cell,a[l].attrs);r(o)}return!0}}function JS(e,t,r){let n=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<n.length;i++){let o=t.table.nodeAt(n[i]);if(o&&o.type!==r.header_cell)return!1}return!0}function gs(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?MP(e):function(r,n){if(!tn(r))return!1;if(n){let i=Ze(r.schema),o=kn(r),s=r.tr,a=JS("row",o,i),l=JS("column",o,i),c=(e==="column"?a:e==="row"?l:!1)?1:0,f=e=="column"?{left:0,top:c,right:1,bottom:o.map.height}:e=="row"?{left:c,top:0,right:o.map.width,bottom:1}:o,d=e=="column"?l?i.cell:i.header_cell:e=="row"?a?i.cell:i.header_cell:i.cell;o.map.cellsInRect(f).forEach(p=>{let h=p+o.tableStart,m=s.doc.nodeAt(h);m&&s.setNodeMarkup(h,d,m.attrs)}),n(s)}return!0}}var r6=gs("row",{useDeprecatedLogic:!0}),n6=gs("column",{useDeprecatedLogic:!0}),hw=gs("cell",{useDeprecatedLogic:!0});function TP(e,t){if(t<0){let r=e.nodeBefore;if(r)return e.pos-r.nodeSize;for(let n=e.index(-1)-1,i=e.before();n>=0;n--){let o=e.node(-1).child(n),s=o.lastChild;if(s)return i-1-s.nodeSize;i-=o.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let r=e.node(-1);for(let n=e.indexAfter(-1),i=e.after();n<r.childCount;n++){let o=r.child(n);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function Rm(e){return function(t,r){if(!tn(t))return!1;let n=TP(Bc(t),e);if(n==null)return!1;if(r){let i=t.doc.resolve(n);r(t.tr.setSelection(dt.between(i,YR(i))).scrollIntoView())}return!0}}function mw(e,t){let r=e.selection.$anchor;for(let n=r.depth;n>0;n--)if(r.node(n).type.spec.tableRole=="table")return t&&t(e.tr.delete(r.before(n),r.after(n)).scrollIntoView()),!0;return!1}function gw({allowTableNodeSelection:e=!1}={}){return new Ht({key:_i,state:{init(){return null},apply(t,r){let n=t.getMeta(_i);if(n!=null)return n==-1?null:n;if(r==null||!t.docChanged)return r;let{deleted:i,pos:o}=t.mapping.mapResult(r);return i?null:o}},props:{decorations:JR,handleDOMEvents:{mousedown:cP},createSelectionBetween(t){return _i.getState(t.state)!=null?t.state.selection:null},handleTripleClick:lP,handleKeyDown:aP,handlePaste:uP},appendTransaction(t,r,n){return tP(n,Om(n,r),e)}})}function vw(e,t,r,n,i,o){let s=0,a=!0,l=t.firstChild,u=e.firstChild;for(let c=0,f=0;c<u.childCount;c+=1){let{colspan:d,colwidth:p}=u.child(c).attrs;for(let h=0;h<d;h+=1,f+=1){let m=i===f?o:p&&p[h],g=m?`${m}px`:"";s+=m||n,m||(a=!1),l?(l.style.width!==g&&(l.style.width=g),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=g}}for(;l;){let c=l.nextSibling;l.parentNode.removeChild(l),l=c}a?(r.style.width=`${s}px`,r.style.minWidth=""):(r.style.width="",r.style.minWidth=`${s}px`)}var Pm=class{constructor(t,r){this.node=t,this.cellMinWidth=r,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),vw(t,this.colgroup,this.table,r),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,vw(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type==="attributes"&&(t.target===this.table||this.colgroup.contains(t.target))}};function OP(e,t,r,n){let i=0,o=!0,s=[],a=e.firstChild;if(!a)return{};for(let f=0,d=0;f<a.childCount;f+=1){let{colspan:p,colwidth:h}=a.child(f).attrs;for(let m=0;m<p;m+=1,d+=1){let g=r===d?n:h&&h[m],v=g?`${g}px`:"";i+=g||t,g||(o=!1),s.push(["col",v?{style:`width: ${v}`}:{}])}}let l=o?`${i}px`:"",u=o?"":`${i}px`;return{colgroup:["colgroup",{},...s],tableWidth:l,tableMinWidth:u}}function yw(e,t){return t?e.createChecked(null,t):e.createAndFill()}function DP(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;let t={};return Object.keys(e.nodes).forEach(r=>{let n=e.nodes[r];n.spec.tableRole&&(t[n.spec.tableRole]=n)}),e.cached.tableNodeTypes=t,t}function AP(e,t,r,n,i){let o=DP(e),s=[],a=[];for(let u=0;u<r;u+=1){let c=yw(o.cell,i);if(c&&a.push(c),n){let f=yw(o.header_cell,i);f&&s.push(f)}}let l=[];for(let u=0;u<t;u+=1)l.push(o.row.createChecked(null,n&&u===0?s:a));return o.table.createChecked(null,l)}function RP(e){return e instanceof te}var zc=({editor:e})=>{let{selection:t}=e.state;if(!RP(t))return!1;let r=0,n=Md(t.ranges[0].$from,o=>o.type.name==="table");return n?.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(r+=1)}),r===t.ranges.length?(e.commands.deleteTable(),!0):!1},bw=yt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Pm,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){let{colgroup:r,tableWidth:n,tableMinWidth:i}=OP(e,this.options.cellMinWidth);return["table",lt(this.options.HTMLAttributes,t,{style:n?`width: ${n}`:`minWidth: ${i}`}),r,["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:r=!0}={})=>({tr:n,dispatch:i,editor:o})=>{let s=AP(o.schema,e,t,r);if(i){let a=n.selection.anchor+1;n.replaceSelectionWith(s).scrollIntoView().setSelection(dt.near(n.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>sw(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>aw(e,t),deleteColumn:()=>({state:e,dispatch:t})=>lw(e,t),addRowBefore:()=>({state:e,dispatch:t})=>cw(e,t),addRowAfter:()=>({state:e,dispatch:t})=>fw(e,t),deleteRow:()=>({state:e,dispatch:t})=>dw(e,t),deleteTable:()=>({state:e,dispatch:t})=>mw(e,t),mergeCells:()=>({state:e,dispatch:t})=>Dm(e,t),splitCell:()=>({state:e,dispatch:t})=>Am(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>gs("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>gs("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>hw(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>Dm(e,t)?!0:Am(e,t),setCellAttribute:(e,t)=>({state:r,dispatch:n})=>pw(e,t)(r,n),goToNextCell:()=>({state:e,dispatch:t})=>Rm(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>Rm(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&Om(e),!0),setCellSelection:e=>({tr:t,dispatch:r})=>{if(r){let n=te.create(t.doc,e.anchorCell,e.headCell);t.setSelection(n)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:zc,"Mod-Backspace":zc,Delete:zc,"Mod-Delete":zc}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[nw({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],gw({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){let t={name:e.name,options:e.options,storage:e.storage};return{tableRole:kt(st(e,"tableRole",t))}}});var xw=yt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",lt(this.options.HTMLAttributes,e),0]}});var Sw=yt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",lt(this.options.HTMLAttributes,e),0]}});var ww=yt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",lt(this.options.HTMLAttributes,e),0]}});var Cw=$t.create({name:"textAlign",addOptions(){return{types:[],alignments:["start","center","end","justify"],defaultAlignment:"start"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${e.textAlign}`}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.every(r=>t.updateAttributes(r,{textAlign:e})):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.every(t=>e.resetAttributes(t,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("start"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("end"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var _w=oe.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{let r=ii(e,this.type);return Object.entries(r).some(([,i])=>!!i)?!0:t.unsetMark(this.name)}}}});var kw=oe.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",lt(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Ew(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Ew(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function PP(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Ew(e))&&(n&&(n+=" "),n+=t);return n}var jn=PP;function Mw(e){let t,r,n,i,o,s=e[5].default,a=rn(s,e,e[4],null);return{c(){t=ot("button"),a&&a.c(),N(t,"type","button"),N(t,"class",r=jn(`scribble-button scribble-${e[1]}`,{active:e[2]}))},m(l,u){q(l,t,u),a&&a.m(t,null),n=!0,i||(o=De(t,"click",e[6]),i=!0)},p(l,u){a&&a.p&&(!n||u&16)&&on(a,s,l,l[4],n?nn(s,l[4],u,null):sn(l[4]),null),(!n||u&6&&r!==(r=jn(`scribble-button scribble-${l[1]}`,{active:l[2]})))&&N(t,"class",r)},i(l){n||(W(a,l),n=!0)},o(l){Z(a,l),n=!1},d(l){l&&G(t),a&&a.d(l),i=!1,o()}}}function NP(e){let t,r,n=e[0]&&!e[3]&&Mw(e);return{c(){n&&n.c(),t=Qt()},m(i,o){n&&n.m(i,o),q(i,t,o),r=!0},p(i,[o]){i[0]&&!i[3]?n?(n.p(i,o),o&9&&W(n,1)):(n=Mw(i),n.c(),W(n,1),n.m(t.parentNode,t)):n&&(re(),Z(n,1,1,()=>{n=null}),ne())},i(i){r||(W(n),r=!0)},o(i){Z(n),r=!1},d(i){i&&G(t),n&&n.d(i)}}}function IP(e,t,r){let{$$slots:n={},$$scope:i}=t,{editor:o}=t,{key:s}=t,{active:a=!1}=t,{hidden:l}=t;function u(c){Um.call(this,e,c)}return e.$$set=c=>{"editor"in c&&r(0,o=c.editor),"key"in c&&r(1,s=c.key),"active"in c&&r(2,a=c.active),"hidden"in c&&r(3,l=c.hidden),"$$scope"in c&&r(4,i=c.$$scope)},[o,s,a,l,i,n,u]}var Nm=class extends Pt{constructor(t){super(),Ft(this,t,IP,NP,Nt,{editor:0,key:1,active:2,hidden:3})}},$e=Nm;function Tw(e){let t,r,n,i,o,s,a,l,u,c,f,d,p,h,m,g,v,b,w;return i=new $e({props:{editor:e[0],key:"enter-mobile-view",active:e[1]==="mobile",$$slots:{default:[LP]},$$scope:{ctx:e}}}),i.$on("click",e[5]),s=new $e({props:{editor:e[0],key:"enter-tablet-view",active:e[1]==="tablet",$$slots:{default:[BP]},$$scope:{ctx:e}}}),s.$on("click",e[6]),l=new $e({props:{editor:e[0],key:"enter-desktop-view",active:e[1]==="desktop",$$slots:{default:[zP]},$$scope:{ctx:e}}}),l.$on("click",e[7]),c=new $e({props:{editor:e[0],key:"undo",$$slots:{default:[FP]},$$scope:{ctx:e}}}),c.$on("click",e[8]),d=new $e({props:{editor:e[0],key:"redo",$$slots:{default:[HP]},$$scope:{ctx:e}}}),d.$on("click",e[9]),h=new $e({props:{editor:e[0],key:"clear",$$slots:{default:[$P]},$$scope:{ctx:e}}}),h.$on("click",e[10]),g=new $e({props:{editor:e[0],key:"enter-fullscreen",$$slots:{default:[VP]},$$scope:{ctx:e}}}),g.$on("click",e[2]),b=new $e({props:{editor:e[0],key:"exit-fullscreen",$$slots:{default:[WP]},$$scope:{ctx:e}}}),b.$on("click",e[2]),{c(){t=ot("div"),r=ot("div"),n=ot("div"),zt(i.$$.fragment),o=_t(),zt(s.$$.fragment),a=_t(),zt(l.$$.fragment),u=_t(),zt(c.$$.fragment),f=_t(),zt(d.$$.fragment),p=_t(),zt(h.$$.fragment),m=_t(),zt(g.$$.fragment),v=_t(),zt(b.$$.fragment),N(n,"class","scribble-controls-viewport-controls"),N(r,"class","scribble-controls-panel"),N(t,"class","scribble-controls")},m(y,S){q(y,t,S),nt(t,r),nt(r,n),It(i,n,null),nt(n,o),It(s,n,null),nt(n,a),It(l,n,null),nt(r,u),It(c,r,null),nt(r,f),It(d,r,null),nt(r,p),It(h,r,null),nt(r,m),It(g,r,null),nt(r,v),It(b,r,null),w=!0},p(y,S){let x={};S&1&&(x.editor=y[0]),S&2&&(x.active=y[1]==="mobile"),S&2048&&(x.$$scope={dirty:S,ctx:y}),i.$set(x);let C={};S&1&&(C.editor=y[0]),S&2&&(C.active=y[1]==="tablet"),S&2048&&(C.$$scope={dirty:S,ctx:y}),s.$set(C);let k={};S&1&&(k.editor=y[0]),S&2&&(k.active=y[1]==="desktop"),S&2048&&(k.$$scope={dirty:S,ctx:y}),l.$set(k);let _={};S&1&&(_.editor=y[0]),S&2048&&(_.$$scope={dirty:S,ctx:y}),c.$set(_);let E={};S&1&&(E.editor=y[0]),S&2048&&(E.$$scope={dirty:S,ctx:y}),d.$set(E);let A={};S&1&&(A.editor=y[0]),S&2048&&(A.$$scope={dirty:S,ctx:y}),h.$set(A);let O={};S&1&&(O.editor=y[0]),S&2048&&(O.$$scope={dirty:S,ctx:y}),g.$set(O);let M={};S&1&&(M.editor=y[0]),S&2048&&(M.$$scope={dirty:S,ctx:y}),b.$set(M)},i(y){w||(W(i.$$.fragment,y),W(s.$$.fragment,y),W(l.$$.fragment,y),W(c.$$.fragment,y),W(d.$$.fragment,y),W(h.$$.fragment,y),W(g.$$.fragment,y),W(b.$$.fragment,y),w=!0)},o(y){Z(i.$$.fragment,y),Z(s.$$.fragment,y),Z(l.$$.fragment,y),Z(c.$$.fragment,y),Z(d.$$.fragment,y),Z(h.$$.fragment,y),Z(g.$$.fragment,y),Z(b.$$.fragment,y),w=!1},d(y){y&&G(t),Lt(i),Lt(s),Lt(l),Lt(c),Lt(d),Lt(h),Lt(g),Lt(b)}}}function LP(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"stroke-linecap","round"),N(r,"stroke-linejoin","round"),N(r,"d","M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"fill","none"),N(t,"viewBox","0 0 24 24"),N(t,"stroke-width","1.5"),N(t,"stroke","currentColor")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function BP(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"stroke-linecap","round"),N(r,"stroke-linejoin","round"),N(r,"d","M10.5 19.5h3m-6.75 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-15a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 4.5v15a2.25 2.25 0 0 0 2.25 2.25Z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"fill","none"),N(t,"viewBox","0 0 24 24"),N(t,"stroke-width","1.5"),N(t,"stroke","currentColor")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function zP(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"stroke-linecap","round"),N(r,"stroke-linejoin","round"),N(r,"d","M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"fill","none"),N(t,"viewBox","0 0 24 24"),N(t,"stroke-width","1.5"),N(t,"stroke","currentColor")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function FP(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"fill","none"),N(r,"stroke","currentColor"),N(r,"stroke-linejoin","round"),N(r,"stroke-width","32"),N(r,"d","M240 424v-96c116.4 0 159.39 33.76 208 96c0-119.23-39.57-240-208-240V88L64 256Z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"width","32"),N(t,"height","32"),N(t,"viewBox","0 0 512 512")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function HP(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"fill","none"),N(r,"stroke","currentColor"),N(r,"stroke-linejoin","round"),N(r,"stroke-width","32"),N(r,"d","M448 256L272 88v96C103.57 184 64 304.77 64 424c48.61-62.24 91.6-96 208-96v96Z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"width","32"),N(t,"height","32"),N(t,"viewBox","0 0 512 512")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function $P(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"d","M13.9999 18.9967H20.9999V20.9967H11.9999L8.00229 20.9992L1.51457 14.5115C1.12405 14.1209 1.12405 13.4878 1.51457 13.0972L12.1212 2.49065C12.5117 2.10012 13.1449 2.10012 13.5354 2.49065L21.3136 10.2688C21.7041 10.6593 21.7041 11.2925 21.3136 11.683L13.9999 18.9967ZM15.6567 14.5115L19.1922 10.9759L12.8283 4.61197L9.29275 8.1475L15.6567 14.5115Z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"viewBox","0 0 24 24"),N(t,"fill","currentColor")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function VP(e){let t,r,n;return{c(){t=Jt("svg"),r=Jt("path"),n=Jt("path"),N(r,"fill","none"),N(r,"d","M0 0h24v24H0z"),N(n,"d","M20 3h2v6h-2V5h-4V3h4zM4 3h4v2H4v4H2V3h2zm16 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"viewBox","0 0 24 24"),N(t,"fill","currentColor")},m(i,o){q(i,t,o),nt(t,r),nt(t,n)},p:vt,d(i){i&&G(t)}}}function WP(e){let t,r,n;return{c(){t=Jt("svg"),r=Jt("path"),n=Jt("path"),N(r,"fill","none"),N(r,"d","M0 0h24v24H0z"),N(n,"d","M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"viewBox","0 0 24 24"),N(t,"fill","currentColor")},m(i,o){q(i,t,o),nt(t,r),nt(t,n)},p:vt,d(i){i&&G(t)}}}function jP(e){let t,r,n=e[0]&&Tw(e);return{c(){n&&n.c(),t=Qt()},m(i,o){n&&n.m(i,o),q(i,t,o),r=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&W(n,1)):(n=Tw(i),n.c(),W(n,1),n.m(t.parentNode,t)):n&&(re(),Z(n,1,1,()=>{n=null}),ne())},i(i){r||(W(n),r=!0)},o(i){Z(n),r=!1},d(i){i&&G(t),n&&n.d(i)}}}function GP(e,t,r){let{editor:n}=t,{statePath:i}=t,o="desktop",s=()=>{window.dispatchEvent(new CustomEvent("toggle-fullscreen",{detail:{statePath:i}})),n.commands.focus()},a=h=>{r(1,o=h),window.dispatchEvent(new CustomEvent("change-viewport",{detail:{viewport:h,statePath:i}}))},l=()=>a("mobile"),u=()=>a("tablet"),c=()=>a("desktop"),f=()=>n.chain().focus().undo().run(),d=()=>n.chain().focus().redo().run(),p=()=>n.chain().focus().clearContent(!0).run();return e.$$set=h=>{"editor"in h&&r(0,n=h.editor),"statePath"in h&&r(4,i=h.statePath)},[n,o,s,a,i,l,u,c,f,d,p]}var Im=class extends Pt{constructor(t){super(),Ft(this,t,GP,jP,Nt,{editor:0,statePath:4})}},Ow=Im;function Dw(e,t,r){let n=e.slice();return n[9]=t[r],n}function Aw(e){let t,r,n,i,o,s,a=[UP,qP],l=[];function u(c,f){return f&2&&(r=null),f&2&&(n=null),r==null&&(r=!c[1]("link")),r?0:(n==null&&(n=!!c[1]("link")),n?1:-1)}return~(i=u(e,-1))&&(o=l[i]=a[i](e)),{c(){t=ot("div"),o&&o.c(),N(t,"class","scribble-bubble-menu")},m(c,f){q(c,t,f),~i&&l[i].m(t,null),s=!0},p(c,f){let d=i;i=u(c,f),i===d?~i&&l[i].p(c,f):(o&&(re(),Z(l[d],1,1,()=>{l[d]=null}),ne()),~i?(o=l[i],o?o.p(c,f):(o=l[i]=a[i](c),o.c()),W(o,1),o.m(t,null)):o=null)},i(c){s||(W(o),s=!0)},o(c){Z(o),s=!1},d(c){c&&G(t),~i&&l[i].d()}}}function qP(e){let t,r=e[0].getAttributes("link").href+"",n,i,o,s,a,l;return o=new $e({props:{editor:e[0],key:"editLink",$$slots:{default:[YP]},$$scope:{ctx:e}}}),o.$on("click",e[5]),a=new $e({props:{editor:e[0],key:"unsetLink",$$slots:{default:[KP]},$$scope:{ctx:e}}}),a.$on("click",e[6]),{c(){t=ot("span"),n=yr(r),i=_t(),zt(o.$$.fragment),s=_t(),zt(a.$$.fragment),N(t,"class","link-preview")},m(u,c){q(u,t,c),nt(t,n),q(u,i,c),It(o,u,c),q(u,s,c),It(a,u,c),l=!0},p(u,c){(!l||c&1)&&r!==(r=u[0].getAttributes("link").href+"")&&Hr(n,r);let f={};c&1&&(f.editor=u[0]),c&4096&&(f.$$scope={dirty:c,ctx:u}),o.$set(f);let d={};c&1&&(d.editor=u[0]),c&4096&&(d.$$scope={dirty:c,ctx:u}),a.$set(d)},i(u){l||(W(o.$$.fragment,u),W(a.$$.fragment,u),l=!0)},o(u){Z(o.$$.fragment,u),Z(a.$$.fragment,u),l=!1},d(u){u&&(G(t),G(i),G(s)),Lt(o,u),Lt(a,u)}}}function UP(e){let t,r,n=e[2].length&&Rw(e);return{c(){n&&n.c(),t=Qt()},m(i,o){n&&n.m(i,o),q(i,t,o),r=!0},p(i,o){i[2].length?n?(n.p(i,o),o&4&&W(n,1)):(n=Rw(i),n.c(),W(n,1),n.m(t.parentNode,t)):n&&(re(),Z(n,1,1,()=>{n=null}),ne())},i(i){r||(W(n),r=!0)},o(i){Z(n),r=!1},d(i){i&&G(t),n&&n.d(i)}}}function YP(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"d","M6.41421 15.89L16.5563 5.74786L15.1421 4.33365L5 14.4758V15.89H6.41421ZM7.24264 17.89H3V13.6474L14.435 2.21233C14.8256 1.8218 15.4587 1.8218 15.8492 2.21233L18.6777 5.04075C19.0682 5.43128 19.0682 6.06444 18.6777 6.45497L7.24264 17.89ZM3 19.89H21V21.89H3V19.89Z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"viewBox","0 0 24 24"),N(t,"fill","currentColor")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function KP(e){let t,r;return{c(){t=Jt("svg"),r=Jt("path"),N(r,"d","M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"viewBox","0 0 24 24"),N(t,"fill","currentColor")},m(n,i){q(n,t,i),nt(t,r)},p:vt,d(n){n&&G(t)}}}function Rw(e){let t,r,n=Se(e[2]),i=[];for(let s=0;s<n.length;s+=1)i[s]=Pw(Dw(e,n,s));let o=s=>Z(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=Qt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);q(s,t,a),r=!0},p(s,a){if(a&15){n=Se(s[2]);let l;for(l=0;l<n.length;l+=1){let u=Dw(s,n,l);i[l]?(i[l].p(u,a),W(i[l],1)):(i[l]=Pw(u),i[l].c(),W(i[l],1),i[l].m(t.parentNode,t))}for(re(),l=n.length;l<i.length;l+=1)o(l);ne()}},i(s){if(!r){for(let a=0;a<n.length;a+=1)W(i[a]);r=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)Z(i[a]);r=!1},d(s){s&&G(t),Sr(i,s)}}}function XP(e){let t,r;function n(){return e[4](e[9])}return t=new $e({props:{editor:e[0],key:e[9].extension,active:e[1](e[9].active.extension,e[9].active.attrs),hidden:e[9].isHidden,$$slots:{default:[ZP]},$$scope:{ctx:e}}}),t.$on("click",n),{c(){zt(t.$$.fragment)},m(i,o){It(t,i,o),r=!0},p(i,o){e=i;let s={};o&1&&(s.editor=e[0]),o&4&&(s.key=e[9].extension),o&6&&(s.active=e[1](e[9].active.extension,e[9].active.attrs)),o&4&&(s.hidden=e[9].isHidden),o&4100&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(i){r||(W(t.$$.fragment,i),r=!0)},o(i){Z(t.$$.fragment,i),r=!1},d(i){Lt(t,i)}}}function JP(e){let t;return{c(){t=ot("div"),N(t,"class","divider")},m(r,n){q(r,t,n)},p:vt,i:vt,o:vt,d(r){r&&G(t)}}}function ZP(e){let t,r=e[9].icon+"",n;return{c(){t=new an(!1),n=_t(),t.a=n},m(i,o){t.m(r,i,o),q(i,n,o)},p(i,o){o&4&&r!==(r=i[9].icon+"")&&t.p(r)},d(i){i&&(t.d(),G(n))}}}function Pw(e){let t,r,n,i,o=[JP,XP],s=[];function a(l,u){return l[9].type==="divider"?0:1}return t=a(e,-1),r=s[t]=o[t](e),{c(){r.c(),n=Qt()},m(l,u){s[t].m(l,u),q(l,n,u),i=!0},p(l,u){let c=t;t=a(l,u),t===c?s[t].p(l,u):(re(),Z(s[c],1,1,()=>{s[c]=null}),ne(),r=s[t],r?r.p(l,u):(r=s[t]=o[t](l),r.c()),W(r,1),r.m(n.parentNode,n))},i(l){i||(W(r),i=!0)},o(l){Z(r),i=!1},d(l){l&&G(n),s[t].d(l)}}}function QP(e){let t,r,n=e[0]&&Aw(e);return{c(){n&&n.c(),t=Qt()},m(i,o){n&&n.m(i,o),q(i,t,o),r=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&W(n,1)):(n=Aw(i),n.c(),W(n,1),n.m(t.parentNode,t)):n&&(re(),Z(n,1,1,()=>{n=null}),ne())},i(i){r||(W(n),r=!0)},o(i){Z(n),r=!1},d(i){i&&G(t),n&&n.d(i)}}}function tN(e,t,r){let{editor:n}=t,{isActive:i}=t,{tools:o}=t,{handleToolClick:s}=t,a={},l=d=>{a=d.map((h,m)=>(h.index=m,h)).reduce(function(h,m){return h[m.group]=h[m.group]||[],h[m.group].push(m),h},Object.create(null))},u=d=>s(d),c=()=>s(o.find(d=>d.extension==="link"),!0),f=()=>n.chain().focus().extendMarkRange("link").unsetLink().selectTextblockEnd().run();return e.$$set=d=>{"editor"in d&&r(0,n=d.editor),"isActive"in d&&r(1,i=d.isActive),"tools"in d&&r(2,o=d.tools),"handleToolClick"in d&&r(3,s=d.handleToolClick)},e.$$.update=()=>{e.$$.dirty&4&&l(o)},[n,i,o,s,u,c,f]}var Lm=class extends Pt{constructor(t){super(),Ft(this,t,tN,QP,Nt,{editor:0,isActive:1,tools:2,handleToolClick:3})}},Nw=Lm;function Iw(e,t,r){let n=e.slice();return n[7]=t[r],n}function Lw(e){let t,r,n=e[2].length&&Bw(e);return{c(){t=ot("div"),n&&n.c(),N(t,"class","scribble-toolbar")},m(i,o){q(i,t,o),n&&n.m(t,null),r=!0},p(i,o){i[2].length?n?(n.p(i,o),o&4&&W(n,1)):(n=Bw(i),n.c(),W(n,1),n.m(t,null)):n&&(re(),Z(n,1,1,()=>{n=null}),ne())},i(i){r||(W(n),r=!0)},o(i){Z(n),r=!1},d(i){i&&G(t),n&&n.d()}}}function Bw(e){let t,r,n=Se(e[2]),i=[];for(let s=0;s<n.length;s+=1)i[s]=zw(Iw(e,n,s));let o=s=>Z(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=Qt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);q(s,t,a),r=!0},p(s,a){if(a&15){n=Se(s[2]);let l;for(l=0;l<n.length;l+=1){let u=Iw(s,n,l);i[l]?(i[l].p(u,a),W(i[l],1)):(i[l]=zw(u),i[l].c(),W(i[l],1),i[l].m(t.parentNode,t))}for(re(),l=n.length;l<i.length;l+=1)o(l);ne()}},i(s){if(!r){for(let a=0;a<n.length;a+=1)W(i[a]);r=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)Z(i[a]);r=!1},d(s){s&&G(t),Sr(i,s)}}}function eN(e){let t,r;function n(){return e[4](e[7])}return t=new $e({props:{editor:e[0],key:e[7].extension,active:e[1](e[7].active.extension,e[7].active.attrs),hidden:e[7].isHidden,$$slots:{default:[nN]},$$scope:{ctx:e}}}),t.$on("click",n),{c(){zt(t.$$.fragment)},m(i,o){It(t,i,o),r=!0},p(i,o){e=i;let s={};o&1&&(s.editor=e[0]),o&4&&(s.key=e[7].extension),o&6&&(s.active=e[1](e[7].active.extension,e[7].active.attrs)),o&4&&(s.hidden=e[7].isHidden),o&1028&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(i){r||(W(t.$$.fragment,i),r=!0)},o(i){Z(t.$$.fragment,i),r=!1},d(i){Lt(t,i)}}}function rN(e){let t;return{c(){t=ot("div"),N(t,"class","divider")},m(r,n){q(r,t,n)},p:vt,i:vt,o:vt,d(r){r&&G(t)}}}function nN(e){let t,r=e[7].icon+"",n;return{c(){t=new an(!1),n=_t(),t.a=n},m(i,o){t.m(r,i,o),q(i,n,o)},p(i,o){o&4&&r!==(r=i[7].icon+"")&&t.p(r)},d(i){i&&(t.d(),G(n))}}}function zw(e){let t,r,n,i,o=[rN,eN],s=[];function a(l,u){return l[7].type==="divider"?0:1}return t=a(e,-1),r=s[t]=o[t](e),{c(){r.c(),n=Qt()},m(l,u){s[t].m(l,u),q(l,n,u),i=!0},p(l,u){let c=t;t=a(l,u),t===c?s[t].p(l,u):(re(),Z(s[c],1,1,()=>{s[c]=null}),ne(),r=s[t],r?r.p(l,u):(r=s[t]=o[t](l),r.c()),W(r,1),r.m(n.parentNode,n))},i(l){i||(W(r),i=!0)},o(l){Z(r),i=!1},d(l){l&&G(n),s[t].d(l)}}}function iN(e){let t,r,n=e[0]&&e[2]&&e[2].length>0&&Lw(e);return{c(){n&&n.c(),t=Qt()},m(i,o){n&&n.m(i,o),q(i,t,o),r=!0},p(i,[o]){i[0]&&i[2]&&i[2].length>0?n?(n.p(i,o),o&5&&W(n,1)):(n=Lw(i),n.c(),W(n,1),n.m(t.parentNode,t)):n&&(re(),Z(n,1,1,()=>{n=null}),ne())},i(i){r||(W(n),r=!0)},o(i){Z(n),r=!1},d(i){i&&G(t),n&&n.d(i)}}}function oN(e,t,r){let{editor:n}=t,{isActive:i}=t,{tools:o}=t,{handleToolClick:s}=t,a={},l=c=>{a=c.map((d,p)=>(d.index=p,d)).reduce(function(d,p){return d[p.group]=d[p.group]||[],d[p.group].push(p),d},Object.create(null))},u=c=>s(c);return e.$$set=c=>{"editor"in c&&r(0,n=c.editor),"isActive"in c&&r(1,i=c.isActive),"tools"in c&&r(2,o=c.tools),"handleToolClick"in c&&r(3,s=c.handleToolClick)},e.$$.update=()=>{e.$$.dirty&4&&l(o)},[n,i,o,s,u]}var Bm=class extends Pt{constructor(t){super(),Ft(this,t,oN,iN,Nt,{editor:0,isActive:1,tools:2,handleToolClick:3})}},Fw=Bm;function Hw(e,t,r){let n=e.slice();return n[14]=t[r],n}function $w(e,t,r){let n=e.slice();return n[17]=t[r],n}function Vw(e){let t,r,n,i,o,s,a,l,u,c,f=e[0].length&&Ww(e),d=e[3].length&&Gw(e);return{c(){t=ot("div"),r=ot("div"),n=ot("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path></svg>',i=_t(),o=ot("ul"),f&&f.c(),s=_t(),d&&d.c(),N(n,"type","button"),N(n,"class","scribble-button"),N(n,"aria-label","Toggle panel"),N(r,"class","scribble-panel-toggle"),N(o,"class","scribble-panel-tools not-prose"),N(t,"class",a=jn("scribble-panel",{collapsed:!e[5]}))},m(p,h){q(p,t,h),nt(t,r),nt(r,n),nt(t,i),nt(t,o),f&&f.m(o,null),nt(o,s),d&&d.m(o,null),l=!0,u||(c=De(n,"click",e[9]),u=!0)},p(p,h){p[0].length?f?(f.p(p,h),h&1&&W(f,1)):(f=Ww(p),f.c(),W(f,1),f.m(o,s)):f&&(re(),Z(f,1,1,()=>{f=null}),ne()),p[3].length?d?(d.p(p,h),h&8&&W(d,1)):(d=Gw(p),d.c(),W(d,1),d.m(o,null)):d&&(re(),Z(d,1,1,()=>{d=null}),ne()),(!l||h&32&&a!==(a=jn("scribble-panel",{collapsed:!p[5]})))&&N(t,"class",a)},i(p){l||(W(f),W(d),l=!0)},o(p){Z(f),Z(d),l=!1},d(p){p&&G(t),f&&f.d(),d&&d.d(),u=!1,c()}}}function Ww(e){let t,r,n=Se(e[0]),i=[];for(let s=0;s<n.length;s+=1)i[s]=jw($w(e,n,s));let o=s=>Z(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=Qt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);q(s,t,a),r=!0},p(s,a){if(a&407){n=Se(s[0]);let l;for(l=0;l<n.length;l+=1){let u=$w(s,n,l);i[l]?(i[l].p(u,a),W(i[l],1)):(i[l]=jw(u),i[l].c(),W(i[l],1),i[l].m(t.parentNode,t))}for(re(),l=n.length;l<i.length;l+=1)o(l);ne()}},i(s){if(!r){for(let a=0;a<n.length;a+=1)W(i[a]);r=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)Z(i[a]);r=!1},d(s){s&&G(t),Sr(i,s)}}}function sN(e){let t,r=e[17].icon+"",n,i,o=e[17].label+"",s;return{c(){t=new an(!1),n=_t(),i=ot("span"),s=yr(o),t.a=n},m(a,l){t.m(r,a,l),q(a,n,l),q(a,i,l),nt(i,s)},p(a,l){l&1&&r!==(r=a[17].icon+"")&&t.p(r),l&1&&o!==(o=a[17].label+"")&&Hr(s,o)},d(a){a&&(t.d(),G(n),G(i))}}}function jw(e){let t,r,n,i,o,s,a,l;function u(){return e[10](e[17])}r=new $e({props:{editor:e[1],key:e[17].extension,active:e[2](e[17].active.extension,e[17].active.attrs),hidden:e[17]?.isHidden,$$slots:{default:[sN]},$$scope:{ctx:e}}}),r.$on("click",u);function c(...f){return e[11](e[17],...f)}return{c(){t=ot("li"),zt(r.$$.fragment),n=_t(),i=ot("div"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4"><title>Drag item to editor</title><path d="m22.67 12l-4.49 4.5l-2.51-2.5l1.98-2l-1.98-1.96l2.51-2.51zM12 1.33l4.47 4.49l-2.51 2.51L12 6.35l-2 1.98l-2.5-2.51zm0 21.34l-4.47-4.49l2.51-2.51L12 17.65l2-1.98l2.5 2.51zM1.33 12l4.49-4.5L8.33 10l-1.98 2l1.98 1.96l-2.51 2.51zM12 10a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2"></path></svg>',o=_t(),N(i,"draggable","true"),N(i,"aria-grabbed","false"),N(i,"role","button"),N(i,"tabindex","-1"),N(i,"class","drag-handle")},m(f,d){q(f,t,d),It(r,t,null),nt(t,n),nt(t,i),nt(t,o),s=!0,a||(l=[De(i,"dragstart",c),De(i,"dragend",e[8])],a=!0)},p(f,d){e=f;let p={};d&2&&(p.editor=e[1]),d&1&&(p.key=e[17].extension),d&5&&(p.active=e[2](e[17].active.extension,e[17].active.attrs)),d&1&&(p.hidden=e[17]?.isHidden),d&1048577&&(p.$$scope={dirty:d,ctx:e}),r.$set(p)},i(f){s||(W(r.$$.fragment,f),s=!0)},o(f){Z(r.$$.fragment,f),s=!1},d(f){f&&G(t),Lt(r),a=!1,cr(l)}}}function Gw(e){let t,r,n=Se(e[3]),i=[];for(let s=0;s<n.length;s+=1)i[s]=qw(Hw(e,n,s));let o=s=>Z(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=Qt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);q(s,t,a),r=!0},p(s,a){if(a&458){n=Se(s[3]);let l;for(l=0;l<n.length;l+=1){let u=Hw(s,n,l);i[l]?(i[l].p(u,a),W(i[l],1)):(i[l]=qw(u),i[l].c(),W(i[l],1),i[l].m(t.parentNode,t))}for(re(),l=n.length;l<i.length;l+=1)o(l);ne()}},i(s){if(!r){for(let a=0;a<n.length;a+=1)W(i[a]);r=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)Z(i[a]);r=!1},d(s){s&&G(t),Sr(i,s)}}}function aN(e){let t,r,n,i,o=e[14]+"",s;return{c(){t=Jt("svg"),r=Jt("path"),n=_t(),i=ot("span"),s=yr(o),N(r,"d","M4 18V14.3C4 13.4716 3.32843 12.8 2.5 12.8H2V11.2H2.5C3.32843 11.2 4 10.5284 4 9.7V6C4 4.34315 5.34315 3 7 3H8V5H7C6.44772 5 6 5.44772 6 6V10.1C6 10.9858 5.42408 11.7372 4.62623 12C5.42408 12.2628 6 13.0142 6 13.9V18C6 18.5523 6.44772 19 7 19H8V21H7C5.34315 21 4 19.6569 4 18ZM20 14.3V18C20 19.6569 18.6569 21 17 21H16V19H17C17.5523 19 18 18.5523 18 18V13.9C18 13.0142 18.5759 12.2628 19.3738 12C18.5759 11.7372 18 10.9858 18 10.1V6C18 5.44772 17.5523 5 17 5H16V3H17C18.6569 3 20 4.34315 20 6V9.7C20 10.5284 20.6716 11.2 21.5 11.2H22V12.8H21.5C20.6716 12.8 20 13.4716 20 14.3Z"),N(t,"xmlns","http://www.w3.org/2000/svg"),N(t,"viewBox","0 0 24 24"),N(t,"fill","currentColor")},m(a,l){q(a,t,l),nt(t,r),q(a,n,l),q(a,i,l),nt(i,s)},p(a,l){l&8&&o!==(o=a[14]+"")&&Hr(s,o)},d(a){a&&(G(t),G(n),G(i))}}}function qw(e){let t,r,n,i,o,s,a,l;function u(){return e[12](e[14])}r=new $e({props:{editor:e[1],key:e[14],active:!1,$$slots:{default:[aN]},$$scope:{ctx:e}}}),r.$on("click",u);function c(...f){return e[13](e[14],...f)}return{c(){t=ot("li"),zt(r.$$.fragment),n=_t(),i=ot("div"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4"><title>Drag item to editor</title><path d="m22.67 12l-4.49 4.5l-2.51-2.5l1.98-2l-1.98-1.96l2.51-2.51zM12 1.33l4.47 4.49l-2.51 2.51L12 6.35l-2 1.98l-2.5-2.51zm0 21.34l-4.47-4.49l2.51-2.51L12 17.65l2-1.98l2.5 2.51zM1.33 12l4.49-4.5L8.33 10l-1.98 2l1.98 1.96l-2.51 2.51zM12 10a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2"></path></svg>',o=_t(),N(i,"draggable","true"),N(i,"aria-grabbed","false"),N(i,"role","button"),N(i,"tabindex","-1"),N(i,"class","drag-handle")},m(f,d){q(f,t,d),It(r,t,null),nt(t,n),nt(t,i),nt(t,o),s=!0,a||(l=[De(i,"dragstart",c),De(i,"dragend",e[8])],a=!0)},p(f,d){e=f;let p={};d&2&&(p.editor=e[1]),d&8&&(p.key=e[14]),d&1048584&&(p.$$scope={dirty:d,ctx:e}),r.$set(p)},i(f){s||(W(r.$$.fragment,f),s=!0)},o(f){Z(r.$$.fragment,f),s=!1},d(f){f&&G(t),Lt(r),a=!1,cr(l)}}}function lN(e){let t,r,n=e[1]&&(e[0]&&e[0].length>0||e[3]&&e[3].length>0)&&Vw(e);return{c(){n&&n.c(),t=Qt()},m(i,o){n&&n.m(i,o),q(i,t,o),r=!0},p(i,[o]){i[1]&&(i[0]&&i[0].length>0||i[3]&&i[3].length>0)?n?(n.p(i,o),o&11&&W(n,1)):(n=Vw(i),n.c(),W(n,1),n.m(t.parentNode,t)):n&&(re(),Z(n,1,1,()=>{n=null}),ne())},i(i){r||(W(n),r=!0)},o(i){Z(n),r=!1},d(i){i&&G(t),n&&n.d(i)}}}function uN(e,t,r){let{editor:n}=t,{isActive:i}=t,{tools:o}=t,{mergeTags:s}=t,{handleToolClick:a}=t,l=!0;o=o.filter(v=>v.type==="block"||v.type==="modal"||v.type==="static");let u=(v,b=null)=>{let w=b?{from:b.pos,to:b.pos}:n.view.state.selection;n.view.state.selection.$to.nodeAfter?.text?.startsWith(" ")&&(w.to+=1),n.chain().focus().insertContentAt(w,[{type:"mergeTag",attrs:{id:v}},{type:"text",text:" "}]).run()},c=(v,b,w)=>{v.target.setAttribute("aria-grabbed","true"),v.dataTransfer?.setData(b,JSON.stringify(w))},f=v=>{v.target.setAttribute("aria-grabbed","false")};window.addEventListener("dragged-block",v=>{a(JSON.parse(v.detail.tool),!1,v.detail.coordinates)}),window.addEventListener("dragged-merge-tag",v=>{u(v.detail.tag,v.detail.coordinates)});let d=()=>r(5,l=!l),p=v=>a(v),h=(v,b)=>c(b,"block",v),m=v=>u(v),g=(v,b)=>c(b,"mergeTag",v);return e.$$set=v=>{"editor"in v&&r(1,n=v.editor),"isActive"in v&&r(2,i=v.isActive),"tools"in v&&r(0,o=v.tools),"mergeTags"in v&&r(3,s=v.mergeTags),"handleToolClick"in v&&r(4,a=v.handleToolClick)},[o,n,i,s,a,l,u,c,f,d,p,h,m,g]}var zm=class extends Pt{constructor(t){super(),Ft(this,t,uN,lN,Nt,{editor:1,isActive:2,tools:0,mergeTags:3,handleToolClick:4})}},Uw=zm;function cN(e){let t,r,n,i,o,s,a,l,u,c,f,d,p;return r=new Ow({props:{editor:e[5],statePath:e[0]}}),i=new Fw({props:{editor:e[5],tools:e[3],handleToolClick:e[9],isActive:e[8]}}),s=new Uw({props:{editor:e[5],tools:e[2],mergeTags:e[4],handleToolClick:e[9],isActive:e[8]}}),f=new Nw({props:{editor:e[5],tools:e[1],handleToolClick:e[9],isActive:e[8]}}),{c(){t=ot("div"),zt(r.$$.fragment),n=_t(),zt(i.$$.fragment),o=_t(),zt(s.$$.fragment),a=_t(),l=ot("div"),u=_t(),c=ot("div"),zt(f.$$.fragment),N(l,"class","scribble-editor"),N(t,"class",d=jn("scribble-editor-wrapper",{"has-empty-panel":!(e[2]&&e[2].length>0||e[4]&&e[4].length>0)}))},m(h,m){q(h,t,m),It(r,t,null),nt(t,n),It(i,t,null),nt(t,o),It(s,t,null),nt(t,a),nt(t,l),e[12](l),nt(t,u),nt(t,c),It(f,c,null),e[13](c),p=!0},p(h,[m]){let g={};m&32&&(g.editor=h[5]),m&1&&(g.statePath=h[0]),r.$set(g);let v={};m&32&&(v.editor=h[5]),m&8&&(v.tools=h[3]),m&256&&(v.isActive=h[8]),i.$set(v);let b={};m&32&&(b.editor=h[5]),m&4&&(b.tools=h[2]),m&16&&(b.mergeTags=h[4]),m&256&&(b.isActive=h[8]),s.$set(b);let w={};m&32&&(w.editor=h[5]),m&2&&(w.tools=h[1]),m&256&&(w.isActive=h[8]),f.$set(w),(!p||m&20&&d!==(d=jn("scribble-editor-wrapper",{"has-empty-panel":!(h[2]&&h[2].length>0||h[4]&&h[4].length>0)})))&&N(t,"class",d)},i(h){p||(W(r.$$.fragment,h),W(i.$$.fragment,h),W(s.$$.fragment,h),W(f.$$.fragment,h),p=!0)},o(h){Z(r.$$.fragment,h),Z(i.$$.fragment,h),Z(s.$$.fragment,h),Z(f.$$.fragment,h),p=!1},d(h){h&&G(t),Lt(r),Lt(i),Lt(s),e[12](null),Lt(f),e[13](null)}}}function fN(e,t,r){let n,i,o,s,a,{content:l}=t,{statePath:u}=t,{placeholder:c}=t,{bubbleTools:f}=t,{suggestionTools:d}=t,{toolbarTools:p}=t,{mergeTags:h}=t;Qe(()=>{let y=window?.scribbleExtensions||[],S=[TS.configure({statePath:u}),MS,y1,g1,v1,V1,E1,S1,w1,C1,k1,_1,AS,VS,WS,Wx,kw,bw.configure({resizable:!0}),ww,Sw,xw,Cw.configure({types:["heading","paragraph"]}),_w,m1.configure({element:s,tippyOptions:{maxWidth:"none",placement:"bottom-start",theme:"scribble-bubble",interactive:!0},shouldShow:({editor:x,from:C,to:k})=>C===k&&x.isActive("link")||C!==k&&x.isActive("link")?!0:C!==k&&!(f.filter(_=>!_.isHidden).length===0||x.isActive("image")||x.isActive("scribbleBlock")||x.isActive("slashExtension"))}),...y];d?.length&&(S.push($S.configure({tools:d,statePath:u})),S.push(Jx.configure({placeholder:c,emptyEditorClass:"is-editor-empty"}))),h?.length&&(S.push(jx.configure({mergeTags:h})),S.push(Xx.configure({tags:h,statePath:u}))),r(5,i=new El({content:l,element:o,extensions:S,onFocus:()=>{window.dispatchEvent(new CustomEvent("focusScribbleComponent",{detail:{statePath:u}}))},onTransaction:()=>{r(5,i)},onUpdate({editor:x}){window.dispatchEvent(new CustomEvent("updatedEditor",{detail:{statePath:u,content:x.getJSON()}}))}}))}),Yn(()=>{i.destroy()}),a=Array.from(new Set([...f.flat(),...d.flat(),...p.flat()]));let m=a.map(JSON.stringify),g=new Set(m);a=Array.from(g).map(JSON.parse),window.addEventListener("insert-content",y=>{y.detail.statePath===u&&y.detail.type==="media"&&y.detail.media.forEach(S=>i.chain().setMedia(S).focus().run())}),a.forEach(y=>{y.options&&window.addEventListener(`handle-${y.identifier}`,S=>{if(S.detail.statePath===u){if(y.type==="block"||y.type==="static"){S.detail.context==="insert"?i.chain().insertScribbleBlock({identifier:y.identifier,type:y.type,blockId:S.detail.blockId,values:S.detail.values,coordinates:S.detail?.coordinates}).focus().run():window.dispatchEvent(new CustomEvent("updatedBlock",{detail:{statePath:u,identifier:y.identifier,type:y.type,blockId:S.detail.blockId,values:S.detail.values}}));return}if(y.type==="modal"&&S.detail.context==="update"){window.dispatchEvent(new CustomEvent("updatedBlock",{detail:{statePath:u,identifier:y.identifier,type:y.type,blockId:S.detail.blockId,values:S.detail.values}}));return}aa(i,y.commands,{...S.detail.values,coordinates:S.detail?.coordinates})}})});let v=(y,S=!1,x=null)=>{switch(y.type){case"command":aa(i,y.commands);return;case"event":la(y.event.data,u),window.Livewire.dispatch(y.event.name,y.event.data);return;case"modal":gn(y.identifier,{statePath:u,update:S,identifier:y.identifier,data:i.getAttributes(y.extension),coordinates:x});return;case"static":i.chain().insertScribbleBlock({identifier:y.identifier,type:y.type,values:{},coordinates:x}).focus().run();return;default:i.commands.setScribbleBlock({statePath:u,identifier:y.identifier,type:y.type,coordinates:x})}};window.addEventListener("updateContent",y=>{y.detail.statePath===u&&i.chain().setContent(y.detail.newContent).run()});function b(y){xe[y?"unshift":"push"](()=>{o=y,r(6,o)})}function w(y){xe[y?"unshift":"push"](()=>{s=y,r(7,s)})}return e.$$set=y=>{"content"in y&&r(10,l=y.content),"statePath"in y&&r(0,u=y.statePath),"placeholder"in y&&r(11,c=y.placeholder),"bubbleTools"in y&&r(1,f=y.bubbleTools),"suggestionTools"in y&&r(2,d=y.suggestionTools),"toolbarTools"in y&&r(3,p=y.toolbarTools),"mergeTags"in y&&r(4,h=y.mergeTags)},e.$$.update=()=>{e.$$.dirty&32&&r(8,n=(y,S={})=>i.isActive(y,S))},[u,f,d,p,h,i,o,s,n,v,l,c,b,w]}var Fm=class extends Pt{constructor(t){super(),Ft(this,t,fN,cN,Nt,{content:10,statePath:0,placeholder:11,bubbleTools:1,suggestionTools:2,toolbarTools:3,mergeTags:4})}},Yw=Fm;function dN(e,t,r,n,i,o,s){return{bubbleTools:e,suggestionTools:t,toolbarTools:r,mergeTags:n,state:i,statePath:o,placeholder:s??"press '/' for blocks",fullscreen:!1,viewport:"desktop",updatedFromEditor:!1,isFocused:!1,init(){let a=this;new Yw({target:a.$root,props:{bubbleTools:a.bubbleTools,suggestionTools:a.suggestionTools,toolbarTools:a.toolbarTools,mergeTags:a.mergeTags,content:a.state,statePath:a.statePath,placeholder:a.placeholder}}),this.$watch("state",(l,u)=>{!a.updatedFromEditor&&JSON.stringify(l)!==JSON.stringify(u)&&(window.dispatchEvent(new CustomEvent("updateContent",{detail:{statePath:o,newContent:l}})),a.updatedFromEditor=!1)}),window.addEventListener("updatedEditor",l=>{l.detail.statePath===a.statePath&&(a.updatedFromEditor=!0,a.state=l.detail.content)}),window.addEventListener("focusScribbleComponent",l=>{l.detail.statePath===a.statePath&&(a.isFocused=!0)})},toggleFullscreen(a){a.detail.statePath===this.statePath&&(this.fullscreen=!this.fullscreen)},changeViewport(a){a.detail.statePath===this.statePath&&(this.viewport=a.detail.viewport)}}}export{dN as default};
/*! Bundled license information:

@daybrush/utils/dist/utils.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@egjs/children-differ/dist/children-differ.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

@scena/event-emitter/dist/event-emitter.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@scena/dragscroll/dist/dragscroll.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

overlap-area/dist/overlap-area.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

gesto/dist/gesto.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
